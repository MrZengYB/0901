(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function EY(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var dr={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0=Symbol.for("react.element"),PY=Symbol.for("react.portal"),TY=Symbol.for("react.fragment"),AY=Symbol.for("react.strict_mode"),kY=Symbol.for("react.profiler"),LY=Symbol.for("react.provider"),OY=Symbol.for("react.context"),DY=Symbol.for("react.forward_ref"),RY=Symbol.for("react.suspense"),NY=Symbol.for("react.memo"),IY=Symbol.for("react.lazy"),LO=Symbol.iterator;function VY(r){return r===null||typeof r!="object"?null:(r=LO&&r[LO]||r["@@iterator"],typeof r=="function"?r:null)}var dV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pV=Object.assign,fV={};function pm(r,e,t){this.props=r,this.context=e,this.refs=fV,this.updater=t||dV}pm.prototype.isReactComponent={};pm.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};pm.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function mV(){}mV.prototype=pm.prototype;function kA(r,e,t){this.props=r,this.context=e,this.refs=fV,this.updater=t||dV}var LA=kA.prototype=new mV;LA.constructor=kA;pV(LA,pm.prototype);LA.isPureReactComponent=!0;var OO=Array.isArray,vV=Object.prototype.hasOwnProperty,OA={current:null},gV={key:!0,ref:!0,__self:!0,__source:!0};function yV(r,e,t){var n,i={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)vV.call(e,n)&&!gV.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(r&&r.defaultProps)for(n in a=r.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:H0,type:r,key:o,ref:s,props:i,_owner:OA.current}}function zY(r,e){return{$$typeof:H0,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function DA(r){return typeof r=="object"&&r!==null&&r.$$typeof===H0}function BY(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var DO=/\/+/g;function HC(r,e){return typeof r=="object"&&r!==null&&r.key!=null?BY(""+r.key):e.toString(36)}function mb(r,e,t,n,i){var o=typeof r;(o==="undefined"||o==="boolean")&&(r=null);var s=!1;if(r===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(r.$$typeof){case H0:case PY:s=!0}}if(s)return s=r,i=i(s),r=n===""?"."+HC(s,0):n,OO(i)?(t="",r!=null&&(t=r.replace(DO,"$&/")+"/"),mb(i,e,t,"",function(c){return c})):i!=null&&(DA(i)&&(i=zY(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(DO,"$&/")+"/")+r)),e.push(i)),1;if(s=0,n=n===""?".":n+":",OO(r))for(var a=0;a<r.length;a++){o=r[a];var l=n+HC(o,a);s+=mb(o,e,t,l,i)}else if(l=VY(r),typeof l=="function")for(r=l.call(r),a=0;!(o=r.next()).done;)o=o.value,l=n+HC(o,a++),s+=mb(o,e,t,l,i);else if(o==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function g1(r,e,t){if(r==null)return r;var n=[],i=0;return mb(r,n,"","",function(o){return e.call(t,o,i++)}),n}function FY(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var io={current:null},vb={transition:null},UY={ReactCurrentDispatcher:io,ReactCurrentBatchConfig:vb,ReactCurrentOwner:OA};Yt.Children={map:g1,forEach:function(r,e,t){g1(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return g1(r,function(){e++}),e},toArray:function(r){return g1(r,function(e){return e})||[]},only:function(r){if(!DA(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Yt.Component=pm;Yt.Fragment=TY;Yt.Profiler=kY;Yt.PureComponent=kA;Yt.StrictMode=AY;Yt.Suspense=RY;Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UY;Yt.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=pV({},r.props),i=r.key,o=r.ref,s=r._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=OA.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var a=r.type.defaultProps;for(l in e)vV.call(e,l)&&!gV.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:H0,type:r.type,key:i,ref:o,props:n,_owner:s}};Yt.createContext=function(r){return r={$$typeof:OY,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:LY,_context:r},r.Consumer=r};Yt.createElement=yV;Yt.createFactory=function(r){var e=yV.bind(null,r);return e.type=r,e};Yt.createRef=function(){return{current:null}};Yt.forwardRef=function(r){return{$$typeof:DY,render:r}};Yt.isValidElement=DA;Yt.lazy=function(r){return{$$typeof:IY,_payload:{_status:-1,_result:r},_init:FY}};Yt.memo=function(r,e){return{$$typeof:NY,type:r,compare:e===void 0?null:e}};Yt.startTransition=function(r){var e=vb.transition;vb.transition={};try{r()}finally{vb.transition=e}};Yt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Yt.useCallback=function(r,e){return io.current.useCallback(r,e)};Yt.useContext=function(r){return io.current.useContext(r)};Yt.useDebugValue=function(){};Yt.useDeferredValue=function(r){return io.current.useDeferredValue(r)};Yt.useEffect=function(r,e){return io.current.useEffect(r,e)};Yt.useId=function(){return io.current.useId()};Yt.useImperativeHandle=function(r,e,t){return io.current.useImperativeHandle(r,e,t)};Yt.useInsertionEffect=function(r,e){return io.current.useInsertionEffect(r,e)};Yt.useLayoutEffect=function(r,e){return io.current.useLayoutEffect(r,e)};Yt.useMemo=function(r,e){return io.current.useMemo(r,e)};Yt.useReducer=function(r,e,t){return io.current.useReducer(r,e,t)};Yt.useRef=function(r){return io.current.useRef(r)};Yt.useState=function(r){return io.current.useState(r)};Yt.useSyncExternalStore=function(r,e,t){return io.current.useSyncExternalStore(r,e,t)};Yt.useTransition=function(){return io.current.useTransition()};Yt.version="18.2.0";(function(r){r.exports=Yt})(dr);const At=EY(dr.exports);var tP={},_V={exports:{}},Ko={},wV={exports:{}},bV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(J,Q){var $=J.length;J.push(Q);e:for(;0<$;){var fe=$-1>>>1,he=J[fe];if(0<i(he,Q))J[fe]=Q,J[$]=he,$=fe;else break e}}function t(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var Q=J[0],$=J.pop();if($!==Q){J[0]=$;e:for(var fe=0,he=J.length,Se=he>>>1;fe<Se;){var Re=2*(fe+1)-1,st=J[Re],ve=Re+1,St=J[ve];if(0>i(st,$))ve<he&&0>i(St,st)?(J[fe]=St,J[ve]=$,fe=ve):(J[fe]=st,J[Re]=$,fe=Re);else if(ve<he&&0>i(St,$))J[fe]=St,J[ve]=$,fe=ve;else break e}}return Q}function i(J,Q){var $=J.sortIndex-Q.sortIndex;return $!==0?$:J.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();r.unstable_now=function(){return s.now()-a}}var l=[],c=[],d=1,f=null,m=3,g=!1,b=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(J){for(var Q=t(c);Q!==null;){if(Q.callback===null)n(c);else if(Q.startTime<=J)n(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function P(J){if(_=!1,C(J),!b)if(t(l)!==null)b=!0,Z(T);else{var Q=t(c);Q!==null&&me(P,Q.startTime-J)}}function T(J,Q){b=!1,_&&(_=!1,M(k),k=-1),g=!0;var $=m;try{for(C(Q),f=t(l);f!==null&&(!(f.expirationTime>Q)||J&&!W());){var fe=f.callback;if(typeof fe=="function"){f.callback=null,m=f.priorityLevel;var he=fe(f.expirationTime<=Q);Q=r.unstable_now(),typeof he=="function"?f.callback=he:f===t(l)&&n(l),C(Q)}else n(l);f=t(l)}if(f!==null)var Se=!0;else{var Re=t(c);Re!==null&&me(P,Re.startTime-Q),Se=!1}return Se}finally{f=null,m=$,g=!1}}var L=!1,O=null,k=-1,N=5,V=-1;function W(){return!(r.unstable_now()-V<N)}function ee(){if(O!==null){var J=r.unstable_now();V=J;var Q=!0;try{Q=O(!0,J)}finally{Q?se():(L=!1,O=null)}}else L=!1}var se;if(typeof S=="function")se=function(){S(ee)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,re=q.port2;q.port1.onmessage=ee,se=function(){re.postMessage(null)}}else se=function(){w(ee,0)};function Z(J){O=J,L||(L=!0,se())}function me(J,Q){k=w(function(){J(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_continueExecution=function(){b||g||(b=!0,Z(T))},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(J){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var $=m;m=Q;try{return J()}finally{m=$}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(J,Q){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var $=m;m=J;try{return Q()}finally{m=$}},r.unstable_scheduleCallback=function(J,Q,$){var fe=r.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?fe+$:fe):$=fe,J){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=$+he,J={id:d++,callback:Q,priorityLevel:J,startTime:$,expirationTime:he,sortIndex:-1},$>fe?(J.sortIndex=$,e(c,J),t(l)===null&&J===t(c)&&(_?(M(k),k=-1):_=!0,me(P,$-fe))):(J.sortIndex=he,e(l,J),b||g||(b=!0,Z(T))),J},r.unstable_shouldYield=W,r.unstable_wrapCallback=function(J){var Q=m;return function(){var $=m;m=Q;try{return J.apply(this,arguments)}finally{m=$}}}})(bV);(function(r){r.exports=bV})(wV);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xV=dr.exports,Go=wV.exports;function Le(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SV=new Set,t0={};function cd(r,e){Of(r,e),Of(r+"Capture",e)}function Of(r,e){for(t0[r]=e,r=0;r<e.length;r++)SV.add(e[r])}var Ul=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rP=Object.prototype.hasOwnProperty,jY=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RO={},NO={};function HY(r){return rP.call(NO,r)?!0:rP.call(RO,r)?!1:jY.test(r)?NO[r]=!0:(RO[r]=!0,!1)}function WY(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function GY(r,e,t,n){if(e===null||typeof e>"u"||WY(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function oo(r,e,t,n,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var _i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){_i[r]=new oo(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];_i[e]=new oo(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){_i[r]=new oo(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){_i[r]=new oo(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){_i[r]=new oo(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){_i[r]=new oo(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){_i[r]=new oo(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){_i[r]=new oo(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){_i[r]=new oo(r,5,!1,r.toLowerCase(),null,!1,!1)});var RA=/[\-:]([a-z])/g;function NA(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(RA,NA);_i[e]=new oo(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(RA,NA);_i[e]=new oo(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(RA,NA);_i[e]=new oo(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){_i[r]=new oo(r,1,!1,r.toLowerCase(),null,!1,!1)});_i.xlinkHref=new oo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){_i[r]=new oo(r,1,!1,r.toLowerCase(),null,!0,!0)});function IA(r,e,t,n){var i=_i.hasOwnProperty(e)?_i[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GY(e,t,i,n)&&(t=null),n||i===null?HY(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var ql=xV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y1=Symbol.for("react.element"),Bp=Symbol.for("react.portal"),Fp=Symbol.for("react.fragment"),VA=Symbol.for("react.strict_mode"),nP=Symbol.for("react.profiler"),MV=Symbol.for("react.provider"),CV=Symbol.for("react.context"),zA=Symbol.for("react.forward_ref"),iP=Symbol.for("react.suspense"),oP=Symbol.for("react.suspense_list"),BA=Symbol.for("react.memo"),Bu=Symbol.for("react.lazy"),EV=Symbol.for("react.offscreen"),IO=Symbol.iterator;function Pv(r){return r===null||typeof r!="object"?null:(r=IO&&r[IO]||r["@@iterator"],typeof r=="function"?r:null)}var Kr=Object.assign,WC;function ag(r){if(WC===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);WC=e&&e[1]||""}return`
`+WC+r}var GC=!1;function YC(r,e){if(!r||GC)return"";GC=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(r,[],e)}else{try{e.call()}catch(c){n=c}r.call(e.prototype)}else{try{throw Error()}catch(c){n=c}r()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=s&&0<=a);break}}}finally{GC=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?ag(r):""}function YY(r){switch(r.tag){case 5:return ag(r.type);case 16:return ag("Lazy");case 13:return ag("Suspense");case 19:return ag("SuspenseList");case 0:case 2:case 15:return r=YC(r.type,!1),r;case 11:return r=YC(r.type.render,!1),r;case 1:return r=YC(r.type,!0),r;default:return""}}function sP(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Fp:return"Fragment";case Bp:return"Portal";case nP:return"Profiler";case VA:return"StrictMode";case iP:return"Suspense";case oP:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case CV:return(r.displayName||"Context")+".Consumer";case MV:return(r._context.displayName||"Context")+".Provider";case zA:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case BA:return e=r.displayName||null,e!==null?e:sP(r.type)||"Memo";case Bu:e=r._payload,r=r._init;try{return sP(r(e))}catch{}}return null}function XY(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sP(e);case 8:return e===VA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dc(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function PV(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qY(r){var e=PV(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function _1(r){r._valueTracker||(r._valueTracker=qY(r))}function TV(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=PV(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function Qb(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function aP(r,e){var t=e.checked;return Kr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:r._wrapperState.initialChecked})}function VO(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=dc(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AV(r,e){e=e.checked,e!=null&&IA(r,"checked",e,!1)}function lP(r,e){AV(r,e);var t=dc(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?uP(r,e.type,t):e.hasOwnProperty("defaultValue")&&uP(r,e.type,dc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function zO(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function uP(r,e,t){(e!=="number"||Qb(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var lg=Array.isArray;function sf(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+dc(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function cP(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return Kr({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function BO(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Le(92));if(lg(t)){if(1<t.length)throw Error(Le(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:dc(t)}}function kV(r,e){var t=dc(e.value),n=dc(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function FO(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function LV(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hP(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?LV(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var w1,OV=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(w1=w1||document.createElement("div"),w1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=w1.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function r0(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Sg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KY=["Webkit","ms","Moz","O"];Object.keys(Sg).forEach(function(r){KY.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),Sg[e]=Sg[r]})});function DV(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Sg.hasOwnProperty(r)&&Sg[r]?(""+e).trim():e+"px"}function RV(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=DV(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var ZY=Kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dP(r,e){if(e){if(ZY[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function pP(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fP=null;function FA(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var mP=null,af=null,lf=null;function UO(r){if(r=Y0(r)){if(typeof mP!="function")throw Error(Le(280));var e=r.stateNode;e&&(e=fS(e),mP(r.stateNode,r.type,e))}}function NV(r){af?lf?lf.push(r):lf=[r]:af=r}function IV(){if(af){var r=af,e=lf;if(lf=af=null,UO(r),e)for(r=0;r<e.length;r++)UO(e[r])}}function VV(r,e){return r(e)}function zV(){}var XC=!1;function BV(r,e,t){if(XC)return r(e,t);XC=!0;try{return VV(r,e,t)}finally{XC=!1,(af!==null||lf!==null)&&(zV(),IV())}}function n0(r,e){var t=r.stateNode;if(t===null)return null;var n=fS(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(Le(231,e,typeof t));return t}var vP=!1;if(Ul)try{var Tv={};Object.defineProperty(Tv,"passive",{get:function(){vP=!0}}),window.addEventListener("test",Tv,Tv),window.removeEventListener("test",Tv,Tv)}catch{vP=!1}function JY(r,e,t,n,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Mg=!1,$b=null,ex=!1,gP=null,QY={onError:function(r){Mg=!0,$b=r}};function $Y(r,e,t,n,i,o,s,a,l){Mg=!1,$b=null,JY.apply(QY,arguments)}function eX(r,e,t,n,i,o,s,a,l){if($Y.apply(this,arguments),Mg){if(Mg){var c=$b;Mg=!1,$b=null}else throw Error(Le(198));ex||(ex=!0,gP=c)}}function hd(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,(e.flags&4098)!==0&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function FV(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function jO(r){if(hd(r)!==r)throw Error(Le(188))}function tX(r){var e=r.alternate;if(!e){if(e=hd(r),e===null)throw Error(Le(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return jO(i),r;if(o===n)return jO(i),e;o=o.sibling}throw Error(Le(188))}if(t.return!==n.return)t=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===t){s=!0,t=i,n=o;break}if(a===n){s=!0,n=i,t=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===t){s=!0,t=o,n=i;break}if(a===n){s=!0,n=o,t=i;break}a=a.sibling}if(!s)throw Error(Le(189))}}if(t.alternate!==n)throw Error(Le(190))}if(t.tag!==3)throw Error(Le(188));return t.stateNode.current===t?r:e}function UV(r){return r=tX(r),r!==null?jV(r):null}function jV(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=jV(r);if(e!==null)return e;r=r.sibling}return null}var HV=Go.unstable_scheduleCallback,HO=Go.unstable_cancelCallback,rX=Go.unstable_shouldYield,nX=Go.unstable_requestPaint,gn=Go.unstable_now,iX=Go.unstable_getCurrentPriorityLevel,UA=Go.unstable_ImmediatePriority,WV=Go.unstable_UserBlockingPriority,tx=Go.unstable_NormalPriority,oX=Go.unstable_LowPriority,GV=Go.unstable_IdlePriority,cS=null,Ta=null;function sX(r){if(Ta&&typeof Ta.onCommitFiberRoot=="function")try{Ta.onCommitFiberRoot(cS,r,void 0,(r.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:uX,aX=Math.log,lX=Math.LN2;function uX(r){return r>>>=0,r===0?32:31-(aX(r)/lX|0)|0}var b1=64,x1=4194304;function ug(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function rx(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,o=r.pingedLanes,s=t&268435455;if(s!==0){var a=s&~i;a!==0?n=ug(a):(o&=s,o!==0&&(n=ug(o)))}else s=t&~i,s!==0?n=ug(s):o!==0&&(n=ug(o));if(n===0)return 0;if(e!==0&&e!==n&&(e&i)===0&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if((n&4)!==0&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-Ws(e),i=1<<t,n|=r[t],e&=~i;return n}function cX(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hX(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,o=r.pendingLanes;0<o;){var s=31-Ws(o),a=1<<s,l=i[s];l===-1?((a&t)===0||(a&n)!==0)&&(i[s]=cX(a,e)):l<=e&&(r.expiredLanes|=a),o&=~a}}function yP(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function YV(){var r=b1;return b1<<=1,(b1&4194240)===0&&(b1=64),r}function qC(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function W0(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-Ws(e),r[e]=t}function dX(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-Ws(t),o=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~o}}function jA(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-Ws(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var gr=0;function XV(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var qV,HA,KV,ZV,JV,_P=!1,S1=[],$u=null,ec=null,tc=null,i0=new Map,o0=new Map,Wu=[],pX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WO(r,e){switch(r){case"focusin":case"focusout":$u=null;break;case"dragenter":case"dragleave":ec=null;break;case"mouseover":case"mouseout":tc=null;break;case"pointerover":case"pointerout":i0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":o0.delete(e.pointerId)}}function Av(r,e,t,n,i,o){return r===null||r.nativeEvent!==o?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Y0(e),e!==null&&HA(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function fX(r,e,t,n,i){switch(e){case"focusin":return $u=Av($u,r,e,t,n,i),!0;case"dragenter":return ec=Av(ec,r,e,t,n,i),!0;case"mouseover":return tc=Av(tc,r,e,t,n,i),!0;case"pointerover":var o=i.pointerId;return i0.set(o,Av(i0.get(o)||null,r,e,t,n,i)),!0;case"gotpointercapture":return o=i.pointerId,o0.set(o,Av(o0.get(o)||null,r,e,t,n,i)),!0}return!1}function QV(r){var e=Vh(r.target);if(e!==null){var t=hd(e);if(t!==null){if(e=t.tag,e===13){if(e=FV(t),e!==null){r.blockedOn=e,JV(r.priority,function(){KV(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function gb(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=wP(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);fP=n,t.target.dispatchEvent(n),fP=null}else return e=Y0(t),e!==null&&HA(e),r.blockedOn=t,!1;e.shift()}return!0}function GO(r,e,t){gb(r)&&t.delete(e)}function mX(){_P=!1,$u!==null&&gb($u)&&($u=null),ec!==null&&gb(ec)&&(ec=null),tc!==null&&gb(tc)&&(tc=null),i0.forEach(GO),o0.forEach(GO)}function kv(r,e){r.blockedOn===e&&(r.blockedOn=null,_P||(_P=!0,Go.unstable_scheduleCallback(Go.unstable_NormalPriority,mX)))}function s0(r){function e(i){return kv(i,r)}if(0<S1.length){kv(S1[0],r);for(var t=1;t<S1.length;t++){var n=S1[t];n.blockedOn===r&&(n.blockedOn=null)}}for($u!==null&&kv($u,r),ec!==null&&kv(ec,r),tc!==null&&kv(tc,r),i0.forEach(e),o0.forEach(e),t=0;t<Wu.length;t++)n=Wu[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Wu.length&&(t=Wu[0],t.blockedOn===null);)QV(t),t.blockedOn===null&&Wu.shift()}var uf=ql.ReactCurrentBatchConfig,nx=!0;function vX(r,e,t,n){var i=gr,o=uf.transition;uf.transition=null;try{gr=1,WA(r,e,t,n)}finally{gr=i,uf.transition=o}}function gX(r,e,t,n){var i=gr,o=uf.transition;uf.transition=null;try{gr=4,WA(r,e,t,n)}finally{gr=i,uf.transition=o}}function WA(r,e,t,n){if(nx){var i=wP(r,e,t,n);if(i===null)i3(r,e,n,ix,t),WO(r,n);else if(fX(i,r,e,t,n))n.stopPropagation();else if(WO(r,n),e&4&&-1<pX.indexOf(r)){for(;i!==null;){var o=Y0(i);if(o!==null&&qV(o),o=wP(r,e,t,n),o===null&&i3(r,e,n,ix,t),o===i)break;i=o}i!==null&&n.stopPropagation()}else i3(r,e,n,null,t)}}var ix=null;function wP(r,e,t,n){if(ix=null,r=FA(n),r=Vh(r),r!==null)if(e=hd(r),e===null)r=null;else if(t=e.tag,t===13){if(r=FV(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return ix=r,null}function $V(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iX()){case UA:return 1;case WV:return 4;case tx:case oX:return 16;case GV:return 536870912;default:return 16}default:return 16}}var Zu=null,GA=null,yb=null;function ez(){if(yb)return yb;var r,e=GA,t=e.length,n,i="value"in Zu?Zu.value:Zu.textContent,o=i.length;for(r=0;r<t&&e[r]===i[r];r++);var s=t-r;for(n=1;n<=s&&e[t-n]===i[o-n];n++);return yb=i.slice(r,1<n?1-n:void 0)}function _b(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function M1(){return!0}function YO(){return!1}function Zo(r){function e(t,n,i,o,s){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?M1:YO,this.isPropagationStopped=YO,this}return Kr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=M1)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=M1)},persist:function(){},isPersistent:M1}),e}var fm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},YA=Zo(fm),G0=Kr({},fm,{view:0,detail:0}),yX=Zo(G0),KC,ZC,Lv,hS=Kr({},G0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:XA,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Lv&&(Lv&&r.type==="mousemove"?(KC=r.screenX-Lv.screenX,ZC=r.screenY-Lv.screenY):ZC=KC=0,Lv=r),KC)},movementY:function(r){return"movementY"in r?r.movementY:ZC}}),XO=Zo(hS),_X=Kr({},hS,{dataTransfer:0}),wX=Zo(_X),bX=Kr({},G0,{relatedTarget:0}),JC=Zo(bX),xX=Kr({},fm,{animationName:0,elapsedTime:0,pseudoElement:0}),SX=Zo(xX),MX=Kr({},fm,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),CX=Zo(MX),EX=Kr({},fm,{data:0}),qO=Zo(EX),PX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kX(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=AX[r])?!!e[r]:!1}function XA(){return kX}var LX=Kr({},G0,{key:function(r){if(r.key){var e=PX[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=_b(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?TX[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:XA,charCode:function(r){return r.type==="keypress"?_b(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?_b(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),OX=Zo(LX),DX=Kr({},hS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KO=Zo(DX),RX=Kr({},G0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:XA}),NX=Zo(RX),IX=Kr({},fm,{propertyName:0,elapsedTime:0,pseudoElement:0}),VX=Zo(IX),zX=Kr({},hS,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),BX=Zo(zX),FX=[9,13,27,32],qA=Ul&&"CompositionEvent"in window,Cg=null;Ul&&"documentMode"in document&&(Cg=document.documentMode);var UX=Ul&&"TextEvent"in window&&!Cg,tz=Ul&&(!qA||Cg&&8<Cg&&11>=Cg),ZO=String.fromCharCode(32),JO=!1;function rz(r,e){switch(r){case"keyup":return FX.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nz(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Up=!1;function jX(r,e){switch(r){case"compositionend":return nz(e);case"keypress":return e.which!==32?null:(JO=!0,ZO);case"textInput":return r=e.data,r===ZO&&JO?null:r;default:return null}}function HX(r,e){if(Up)return r==="compositionend"||!qA&&rz(r,e)?(r=ez(),yb=GA=Zu=null,Up=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tz&&e.locale!=="ko"?null:e.data;default:return null}}var WX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QO(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!WX[r.type]:e==="textarea"}function iz(r,e,t,n){NV(n),e=ox(e,"onChange"),0<e.length&&(t=new YA("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Eg=null,a0=null;function GX(r){mz(r,0)}function dS(r){var e=Wp(r);if(TV(e))return r}function YX(r,e){if(r==="change")return e}var oz=!1;if(Ul){var QC;if(Ul){var $C="oninput"in document;if(!$C){var $O=document.createElement("div");$O.setAttribute("oninput","return;"),$C=typeof $O.oninput=="function"}QC=$C}else QC=!1;oz=QC&&(!document.documentMode||9<document.documentMode)}function eD(){Eg&&(Eg.detachEvent("onpropertychange",sz),a0=Eg=null)}function sz(r){if(r.propertyName==="value"&&dS(a0)){var e=[];iz(e,a0,r,FA(r)),BV(GX,e)}}function XX(r,e,t){r==="focusin"?(eD(),Eg=e,a0=t,Eg.attachEvent("onpropertychange",sz)):r==="focusout"&&eD()}function qX(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return dS(a0)}function KX(r,e){if(r==="click")return dS(e)}function ZX(r,e){if(r==="input"||r==="change")return dS(e)}function JX(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Ks=typeof Object.is=="function"?Object.is:JX;function l0(r,e){if(Ks(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!rP.call(e,i)||!Ks(r[i],e[i]))return!1}return!0}function tD(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function rD(r,e){var t=tD(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=tD(t)}}function az(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?az(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function lz(){for(var r=window,e=Qb();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=Qb(r.document)}return e}function KA(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function QX(r){var e=lz(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&az(t.ownerDocument.documentElement,t)){if(n!==null&&KA(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!r.extend&&o>n&&(i=n,n=o,o=i),i=rD(t,o);var s=rD(t,n);i&&s&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==s.node||r.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),o>n?(r.addRange(e),r.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var $X=Ul&&"documentMode"in document&&11>=document.documentMode,jp=null,bP=null,Pg=null,xP=!1;function nD(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;xP||jp==null||jp!==Qb(n)||(n=jp,"selectionStart"in n&&KA(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pg&&l0(Pg,n)||(Pg=n,n=ox(bP,"onSelect"),0<n.length&&(e=new YA("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=jp)))}function C1(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Hp={animationend:C1("Animation","AnimationEnd"),animationiteration:C1("Animation","AnimationIteration"),animationstart:C1("Animation","AnimationStart"),transitionend:C1("Transition","TransitionEnd")},e3={},uz={};Ul&&(uz=document.createElement("div").style,"AnimationEvent"in window||(delete Hp.animationend.animation,delete Hp.animationiteration.animation,delete Hp.animationstart.animation),"TransitionEvent"in window||delete Hp.transitionend.transition);function pS(r){if(e3[r])return e3[r];if(!Hp[r])return r;var e=Hp[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in uz)return e3[r]=e[t];return r}var cz=pS("animationend"),hz=pS("animationiteration"),dz=pS("animationstart"),pz=pS("transitionend"),fz=new Map,iD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xc(r,e){fz.set(r,e),cd(e,[r])}for(var t3=0;t3<iD.length;t3++){var r3=iD[t3],eq=r3.toLowerCase(),tq=r3[0].toUpperCase()+r3.slice(1);xc(eq,"on"+tq)}xc(cz,"onAnimationEnd");xc(hz,"onAnimationIteration");xc(dz,"onAnimationStart");xc("dblclick","onDoubleClick");xc("focusin","onFocus");xc("focusout","onBlur");xc(pz,"onTransitionEnd");Of("onMouseEnter",["mouseout","mouseover"]);Of("onMouseLeave",["mouseout","mouseover"]);Of("onPointerEnter",["pointerout","pointerover"]);Of("onPointerLeave",["pointerout","pointerover"]);cd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cd("onBeforeInput",["compositionend","keypress","textInput","paste"]);cd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rq=new Set("cancel close invalid load scroll toggle".split(" ").concat(cg));function oD(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,eX(n,e,void 0,r),r.currentTarget=null}function mz(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;oD(i,a,c),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;oD(i,a,c),o=l}}}if(ex)throw r=gP,ex=!1,gP=null,r}function Nr(r,e){var t=e[PP];t===void 0&&(t=e[PP]=new Set);var n=r+"__bubble";t.has(n)||(vz(e,r,2,!1),t.add(n))}function n3(r,e,t){var n=0;e&&(n|=4),vz(t,r,n,e)}var E1="_reactListening"+Math.random().toString(36).slice(2);function u0(r){if(!r[E1]){r[E1]=!0,SV.forEach(function(t){t!=="selectionchange"&&(rq.has(t)||n3(t,!1,r),n3(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[E1]||(e[E1]=!0,n3("selectionchange",!1,e))}}function vz(r,e,t,n){switch($V(e)){case 1:var i=vX;break;case 4:i=gX;break;default:i=WA}t=i.bind(null,e,t,r),i=void 0,!vP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function i3(r,e,t,n,i){var o=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Vh(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}BV(function(){var c=o,d=FA(t),f=[];e:{var m=fz.get(r);if(m!==void 0){var g=YA,b=r;switch(r){case"keypress":if(_b(t)===0)break e;case"keydown":case"keyup":g=OX;break;case"focusin":b="focus",g=JC;break;case"focusout":b="blur",g=JC;break;case"beforeblur":case"afterblur":g=JC;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=XO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=wX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=NX;break;case cz:case hz:case dz:g=SX;break;case pz:g=VX;break;case"scroll":g=yX;break;case"wheel":g=BX;break;case"copy":case"cut":case"paste":g=CX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=KO}var _=(e&4)!==0,w=!_&&r==="scroll",M=_?m!==null?m+"Capture":null:m;_=[];for(var S=c,C;S!==null;){C=S;var P=C.stateNode;if(C.tag===5&&P!==null&&(C=P,M!==null&&(P=n0(S,M),P!=null&&_.push(c0(S,P,C)))),w)break;S=S.return}0<_.length&&(m=new g(m,b,null,t,d),f.push({event:m,listeners:_}))}}if((e&7)===0){e:{if(m=r==="mouseover"||r==="pointerover",g=r==="mouseout"||r==="pointerout",m&&t!==fP&&(b=t.relatedTarget||t.fromElement)&&(Vh(b)||b[jl]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(b=t.relatedTarget||t.toElement,g=c,b=b?Vh(b):null,b!==null&&(w=hd(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=c),g!==b)){if(_=XO,P="onMouseLeave",M="onMouseEnter",S="mouse",(r==="pointerout"||r==="pointerover")&&(_=KO,P="onPointerLeave",M="onPointerEnter",S="pointer"),w=g==null?m:Wp(g),C=b==null?m:Wp(b),m=new _(P,S+"leave",g,t,d),m.target=w,m.relatedTarget=C,P=null,Vh(d)===c&&(_=new _(M,S+"enter",b,t,d),_.target=C,_.relatedTarget=w,P=_),w=P,g&&b)t:{for(_=g,M=b,S=0,C=_;C;C=lp(C))S++;for(C=0,P=M;P;P=lp(P))C++;for(;0<S-C;)_=lp(_),S--;for(;0<C-S;)M=lp(M),C--;for(;S--;){if(_===M||M!==null&&_===M.alternate)break t;_=lp(_),M=lp(M)}_=null}else _=null;g!==null&&sD(f,m,g,_,!1),b!==null&&w!==null&&sD(f,w,b,_,!0)}}e:{if(m=c?Wp(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var T=YX;else if(QO(m))if(oz)T=ZX;else{T=qX;var L=XX}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(T=KX);if(T&&(T=T(r,c))){iz(f,T,t,d);break e}L&&L(r,m,c),r==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&uP(m,"number",m.value)}switch(L=c?Wp(c):window,r){case"focusin":(QO(L)||L.contentEditable==="true")&&(jp=L,bP=c,Pg=null);break;case"focusout":Pg=bP=jp=null;break;case"mousedown":xP=!0;break;case"contextmenu":case"mouseup":case"dragend":xP=!1,nD(f,t,d);break;case"selectionchange":if($X)break;case"keydown":case"keyup":nD(f,t,d)}var O;if(qA)e:{switch(r){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Up?rz(r,t)&&(k="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(tz&&t.locale!=="ko"&&(Up||k!=="onCompositionStart"?k==="onCompositionEnd"&&Up&&(O=ez()):(Zu=d,GA="value"in Zu?Zu.value:Zu.textContent,Up=!0)),L=ox(c,k),0<L.length&&(k=new qO(k,r,null,t,d),f.push({event:k,listeners:L}),O?k.data=O:(O=nz(t),O!==null&&(k.data=O)))),(O=UX?jX(r,t):HX(r,t))&&(c=ox(c,"onBeforeInput"),0<c.length&&(d=new qO("onBeforeInput","beforeinput",null,t,d),f.push({event:d,listeners:c}),d.data=O))}mz(f,e)})}function c0(r,e,t){return{instance:r,listener:e,currentTarget:t}}function ox(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=n0(r,t),o!=null&&n.unshift(c0(r,o,i)),o=n0(r,e),o!=null&&n.push(c0(r,o,i))),r=r.return}return n}function lp(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function sD(r,e,t,n,i){for(var o=e._reactName,s=[];t!==null&&t!==n;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=n0(t,o),l!=null&&s.unshift(c0(t,l,a))):i||(l=n0(t,o),l!=null&&s.push(c0(t,l,a)))),t=t.return}s.length!==0&&r.push({event:e,listeners:s})}var nq=/\r\n?/g,iq=/\u0000|\uFFFD/g;function aD(r){return(typeof r=="string"?r:""+r).replace(nq,`
`).replace(iq,"")}function P1(r,e,t){if(e=aD(e),aD(r)!==e&&t)throw Error(Le(425))}function sx(){}var SP=null,MP=null;function CP(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var EP=typeof setTimeout=="function"?setTimeout:void 0,oq=typeof clearTimeout=="function"?clearTimeout:void 0,lD=typeof Promise=="function"?Promise:void 0,sq=typeof queueMicrotask=="function"?queueMicrotask:typeof lD<"u"?function(r){return lD.resolve(null).then(r).catch(aq)}:EP;function aq(r){setTimeout(function(){throw r})}function o3(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),s0(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);s0(e)}function rc(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function uD(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var mm=Math.random().toString(36).slice(2),Sa="__reactFiber$"+mm,h0="__reactProps$"+mm,jl="__reactContainer$"+mm,PP="__reactEvents$"+mm,lq="__reactListeners$"+mm,uq="__reactHandles$"+mm;function Vh(r){var e=r[Sa];if(e)return e;for(var t=r.parentNode;t;){if(e=t[jl]||t[Sa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=uD(r);r!==null;){if(t=r[Sa])return t;r=uD(r)}return e}r=t,t=r.parentNode}return null}function Y0(r){return r=r[Sa]||r[jl],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Wp(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Le(33))}function fS(r){return r[h0]||null}var TP=[],Gp=-1;function Sc(r){return{current:r}}function Vr(r){0>Gp||(r.current=TP[Gp],TP[Gp]=null,Gp--)}function kr(r,e){Gp++,TP[Gp]=r.current,r.current=e}var pc={},Ni=Sc(pc),bo=Sc(!1),Zh=pc;function Df(r,e){var t=r.type.contextTypes;if(!t)return pc;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function xo(r){return r=r.childContextTypes,r!=null}function ax(){Vr(bo),Vr(Ni)}function cD(r,e,t){if(Ni.current!==pc)throw Error(Le(168));kr(Ni,e),kr(bo,t)}function gz(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Le(108,XY(r)||"Unknown",i));return Kr({},t,n)}function lx(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||pc,Zh=Ni.current,kr(Ni,r),kr(bo,bo.current),!0}function hD(r,e,t){var n=r.stateNode;if(!n)throw Error(Le(169));t?(r=gz(r,e,Zh),n.__reactInternalMemoizedMergedChildContext=r,Vr(bo),Vr(Ni),kr(Ni,r)):Vr(bo),kr(bo,t)}var Pl=null,mS=!1,s3=!1;function yz(r){Pl===null?Pl=[r]:Pl.push(r)}function cq(r){mS=!0,yz(r)}function Mc(){if(!s3&&Pl!==null){s3=!0;var r=0,e=gr;try{var t=Pl;for(gr=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}Pl=null,mS=!1}catch(i){throw Pl!==null&&(Pl=Pl.slice(r+1)),HV(UA,Mc),i}finally{gr=e,s3=!1}}return null}var Yp=[],Xp=0,ux=null,cx=0,os=[],ss=0,Jh=null,Ol=1,Dl="";function Lh(r,e){Yp[Xp++]=cx,Yp[Xp++]=ux,ux=r,cx=e}function _z(r,e,t){os[ss++]=Ol,os[ss++]=Dl,os[ss++]=Jh,Jh=r;var n=Ol;r=Dl;var i=32-Ws(n)-1;n&=~(1<<i),t+=1;var o=32-Ws(e)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Ol=1<<32-Ws(e)+i|t<<i|n,Dl=o+r}else Ol=1<<o|t<<i|n,Dl=r}function ZA(r){r.return!==null&&(Lh(r,1),_z(r,1,0))}function JA(r){for(;r===ux;)ux=Yp[--Xp],Yp[Xp]=null,cx=Yp[--Xp],Yp[Xp]=null;for(;r===Jh;)Jh=os[--ss],os[ss]=null,Dl=os[--ss],os[ss]=null,Ol=os[--ss],os[ss]=null}var Ho=null,Uo=null,Br=!1,Fs=null;function wz(r,e){var t=as(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function dD(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Ho=r,Uo=rc(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Ho=r,Uo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Jh!==null?{id:Ol,overflow:Dl}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=as(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Ho=r,Uo=null,!0):!1;default:return!1}}function AP(r){return(r.mode&1)!==0&&(r.flags&128)===0}function kP(r){if(Br){var e=Uo;if(e){var t=e;if(!dD(r,e)){if(AP(r))throw Error(Le(418));e=rc(t.nextSibling);var n=Ho;e&&dD(r,e)?wz(n,t):(r.flags=r.flags&-4097|2,Br=!1,Ho=r)}}else{if(AP(r))throw Error(Le(418));r.flags=r.flags&-4097|2,Br=!1,Ho=r}}}function pD(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ho=r}function T1(r){if(r!==Ho)return!1;if(!Br)return pD(r),Br=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!CP(r.type,r.memoizedProps)),e&&(e=Uo)){if(AP(r))throw bz(),Error(Le(418));for(;e;)wz(r,e),e=rc(e.nextSibling)}if(pD(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Le(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){Uo=rc(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}Uo=null}}else Uo=Ho?rc(r.stateNode.nextSibling):null;return!0}function bz(){for(var r=Uo;r;)r=rc(r.nextSibling)}function Rf(){Uo=Ho=null,Br=!1}function QA(r){Fs===null?Fs=[r]:Fs.push(r)}var hq=ql.ReactCurrentBatchConfig;function Vs(r,e){if(r&&r.defaultProps){e=Kr({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}var hx=Sc(null),dx=null,qp=null,$A=null;function e4(){$A=qp=dx=null}function t4(r){var e=hx.current;Vr(hx),r._currentValue=e}function LP(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function cf(r,e){dx=r,$A=qp=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&e)!==0&&(_o=!0),r.firstContext=null)}function ds(r){var e=r._currentValue;if($A!==r)if(r={context:r,memoizedValue:e,next:null},qp===null){if(dx===null)throw Error(Le(308));qp=r,dx.dependencies={lanes:0,firstContext:r}}else qp=qp.next=r;return e}var zh=null;function r4(r){zh===null?zh=[r]:zh.push(r)}function xz(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,r4(e)):(t.next=i.next,i.next=t),e.interleaved=t,Hl(r,n)}function Hl(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Fu=!1;function n4(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sz(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Il(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function nc(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,(tr&2)!==0){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Hl(r,t)}return i=n.interleaved,i===null?(e.next=e,r4(n)):(e.next=i.next,i.next=e),n.interleaved=e,Hl(r,t)}function wb(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,jA(r,t)}}function fD(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=s:o=o.next=s,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function px(r,e,t,n){var i=r.updateQueue;Fu=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var d=r.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,d=c=l=null,a=o;do{var m=a.lane,g=a.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=r,_=a;switch(m=e,g=t,_.tag){case 1:if(b=_.payload,typeof b=="function"){f=b.call(g,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=_.payload,m=typeof b=="function"?b.call(g,f,m):b,m==null)break e;f=Kr({},f,m);break e;case 2:Fu=!0}}a.callback!==null&&a.lane!==0&&(r.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=f):d=d.next=g,s|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);$h|=s,r.lanes=s,r.memoizedState=f}}function mD(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(Le(191,i));i.call(n)}}}var Mz=new xV.Component().refs;function OP(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:Kr({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var vS={isMounted:function(r){return(r=r._reactInternals)?hd(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=Qi(),i=oc(r),o=Il(n,i);o.payload=e,t!=null&&(o.callback=t),e=nc(r,o,i),e!==null&&(Gs(e,r,i,n),wb(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=Qi(),i=oc(r),o=Il(n,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=nc(r,o,i),e!==null&&(Gs(e,r,i,n),wb(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=Qi(),n=oc(r),i=Il(t,n);i.tag=2,e!=null&&(i.callback=e),e=nc(r,i,n),e!==null&&(Gs(e,r,n,t),wb(e,r,n))}};function vD(r,e,t,n,i,o,s){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!l0(t,n)||!l0(i,o):!0}function Cz(r,e,t){var n=!1,i=pc,o=e.contextType;return typeof o=="object"&&o!==null?o=ds(o):(i=xo(e)?Zh:Ni.current,n=e.contextTypes,o=(n=n!=null)?Df(r,i):pc),e=new e(t,o),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vS,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=o),e}function gD(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&vS.enqueueReplaceState(e,e.state,null)}function DP(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs=Mz,n4(r);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ds(o):(o=xo(e)?Zh:Ni.current,i.context=Df(r,o)),i.state=r.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(OP(r,e,o,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&vS.enqueueReplaceState(i,i.state,null),px(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function Ov(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Le(309));var n=t.stateNode}if(!n)throw Error(Le(147,r));var i=n,o=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===Mz&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof r!="string")throw Error(Le(284));if(!t._owner)throw Error(Le(290,r))}return r}function A1(r,e){throw r=Object.prototype.toString.call(e),Error(Le(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function yD(r){var e=r._init;return e(r._payload)}function Ez(r){function e(M,S){if(r){var C=M.deletions;C===null?(M.deletions=[S],M.flags|=16):C.push(S)}}function t(M,S){if(!r)return null;for(;S!==null;)e(M,S),S=S.sibling;return null}function n(M,S){for(M=new Map;S!==null;)S.key!==null?M.set(S.key,S):M.set(S.index,S),S=S.sibling;return M}function i(M,S){return M=sc(M,S),M.index=0,M.sibling=null,M}function o(M,S,C){return M.index=C,r?(C=M.alternate,C!==null?(C=C.index,C<S?(M.flags|=2,S):C):(M.flags|=2,S)):(M.flags|=1048576,S)}function s(M){return r&&M.alternate===null&&(M.flags|=2),M}function a(M,S,C,P){return S===null||S.tag!==6?(S=p3(C,M.mode,P),S.return=M,S):(S=i(S,C),S.return=M,S)}function l(M,S,C,P){var T=C.type;return T===Fp?d(M,S,C.props.children,P,C.key):S!==null&&(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Bu&&yD(T)===S.type)?(P=i(S,C.props),P.ref=Ov(M,S,C),P.return=M,P):(P=Eb(C.type,C.key,C.props,null,M.mode,P),P.ref=Ov(M,S,C),P.return=M,P)}function c(M,S,C,P){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=f3(C,M.mode,P),S.return=M,S):(S=i(S,C.children||[]),S.return=M,S)}function d(M,S,C,P,T){return S===null||S.tag!==7?(S=Wh(C,M.mode,P,T),S.return=M,S):(S=i(S,C),S.return=M,S)}function f(M,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=p3(""+S,M.mode,C),S.return=M,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case y1:return C=Eb(S.type,S.key,S.props,null,M.mode,C),C.ref=Ov(M,null,S),C.return=M,C;case Bp:return S=f3(S,M.mode,C),S.return=M,S;case Bu:var P=S._init;return f(M,P(S._payload),C)}if(lg(S)||Pv(S))return S=Wh(S,M.mode,C,null),S.return=M,S;A1(M,S)}return null}function m(M,S,C,P){var T=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return T!==null?null:a(M,S,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case y1:return C.key===T?l(M,S,C,P):null;case Bp:return C.key===T?c(M,S,C,P):null;case Bu:return T=C._init,m(M,S,T(C._payload),P)}if(lg(C)||Pv(C))return T!==null?null:d(M,S,C,P,null);A1(M,C)}return null}function g(M,S,C,P,T){if(typeof P=="string"&&P!==""||typeof P=="number")return M=M.get(C)||null,a(S,M,""+P,T);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case y1:return M=M.get(P.key===null?C:P.key)||null,l(S,M,P,T);case Bp:return M=M.get(P.key===null?C:P.key)||null,c(S,M,P,T);case Bu:var L=P._init;return g(M,S,C,L(P._payload),T)}if(lg(P)||Pv(P))return M=M.get(C)||null,d(S,M,P,T,null);A1(S,P)}return null}function b(M,S,C,P){for(var T=null,L=null,O=S,k=S=0,N=null;O!==null&&k<C.length;k++){O.index>k?(N=O,O=null):N=O.sibling;var V=m(M,O,C[k],P);if(V===null){O===null&&(O=N);break}r&&O&&V.alternate===null&&e(M,O),S=o(V,S,k),L===null?T=V:L.sibling=V,L=V,O=N}if(k===C.length)return t(M,O),Br&&Lh(M,k),T;if(O===null){for(;k<C.length;k++)O=f(M,C[k],P),O!==null&&(S=o(O,S,k),L===null?T=O:L.sibling=O,L=O);return Br&&Lh(M,k),T}for(O=n(M,O);k<C.length;k++)N=g(O,M,k,C[k],P),N!==null&&(r&&N.alternate!==null&&O.delete(N.key===null?k:N.key),S=o(N,S,k),L===null?T=N:L.sibling=N,L=N);return r&&O.forEach(function(W){return e(M,W)}),Br&&Lh(M,k),T}function _(M,S,C,P){var T=Pv(C);if(typeof T!="function")throw Error(Le(150));if(C=T.call(C),C==null)throw Error(Le(151));for(var L=T=null,O=S,k=S=0,N=null,V=C.next();O!==null&&!V.done;k++,V=C.next()){O.index>k?(N=O,O=null):N=O.sibling;var W=m(M,O,V.value,P);if(W===null){O===null&&(O=N);break}r&&O&&W.alternate===null&&e(M,O),S=o(W,S,k),L===null?T=W:L.sibling=W,L=W,O=N}if(V.done)return t(M,O),Br&&Lh(M,k),T;if(O===null){for(;!V.done;k++,V=C.next())V=f(M,V.value,P),V!==null&&(S=o(V,S,k),L===null?T=V:L.sibling=V,L=V);return Br&&Lh(M,k),T}for(O=n(M,O);!V.done;k++,V=C.next())V=g(O,M,k,V.value,P),V!==null&&(r&&V.alternate!==null&&O.delete(V.key===null?k:V.key),S=o(V,S,k),L===null?T=V:L.sibling=V,L=V);return r&&O.forEach(function(ee){return e(M,ee)}),Br&&Lh(M,k),T}function w(M,S,C,P){if(typeof C=="object"&&C!==null&&C.type===Fp&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case y1:e:{for(var T=C.key,L=S;L!==null;){if(L.key===T){if(T=C.type,T===Fp){if(L.tag===7){t(M,L.sibling),S=i(L,C.props.children),S.return=M,M=S;break e}}else if(L.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Bu&&yD(T)===L.type){t(M,L.sibling),S=i(L,C.props),S.ref=Ov(M,L,C),S.return=M,M=S;break e}t(M,L);break}else e(M,L);L=L.sibling}C.type===Fp?(S=Wh(C.props.children,M.mode,P,C.key),S.return=M,M=S):(P=Eb(C.type,C.key,C.props,null,M.mode,P),P.ref=Ov(M,S,C),P.return=M,M=P)}return s(M);case Bp:e:{for(L=C.key;S!==null;){if(S.key===L)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){t(M,S.sibling),S=i(S,C.children||[]),S.return=M,M=S;break e}else{t(M,S);break}else e(M,S);S=S.sibling}S=f3(C,M.mode,P),S.return=M,M=S}return s(M);case Bu:return L=C._init,w(M,S,L(C._payload),P)}if(lg(C))return b(M,S,C,P);if(Pv(C))return _(M,S,C,P);A1(M,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(t(M,S.sibling),S=i(S,C),S.return=M,M=S):(t(M,S),S=p3(C,M.mode,P),S.return=M,M=S),s(M)):t(M,S)}return w}var Nf=Ez(!0),Pz=Ez(!1),X0={},Aa=Sc(X0),d0=Sc(X0),p0=Sc(X0);function Bh(r){if(r===X0)throw Error(Le(174));return r}function i4(r,e){switch(kr(p0,e),kr(d0,r),kr(Aa,X0),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hP(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=hP(e,r)}Vr(Aa),kr(Aa,e)}function If(){Vr(Aa),Vr(d0),Vr(p0)}function Tz(r){Bh(p0.current);var e=Bh(Aa.current),t=hP(e,r.type);e!==t&&(kr(d0,r),kr(Aa,t))}function o4(r){d0.current===r&&(Vr(Aa),Vr(d0))}var Wr=Sc(0);function fx(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var a3=[];function s4(){for(var r=0;r<a3.length;r++)a3[r]._workInProgressVersionPrimary=null;a3.length=0}var bb=ql.ReactCurrentDispatcher,l3=ql.ReactCurrentBatchConfig,Qh=0,Xr=null,Vn=null,ei=null,mx=!1,Tg=!1,f0=0,dq=0;function Ei(){throw Error(Le(321))}function a4(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Ks(r[t],e[t]))return!1;return!0}function l4(r,e,t,n,i,o){if(Qh=o,Xr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bb.current=r===null||r.memoizedState===null?vq:gq,r=t(n,i),Tg){o=0;do{if(Tg=!1,f0=0,25<=o)throw Error(Le(301));o+=1,ei=Vn=null,e.updateQueue=null,bb.current=yq,r=t(n,i)}while(Tg)}if(bb.current=vx,e=Vn!==null&&Vn.next!==null,Qh=0,ei=Vn=Xr=null,mx=!1,e)throw Error(Le(300));return r}function u4(){var r=f0!==0;return f0=0,r}function va(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ei===null?Xr.memoizedState=ei=r:ei=ei.next=r,ei}function ps(){if(Vn===null){var r=Xr.alternate;r=r!==null?r.memoizedState:null}else r=Vn.next;var e=ei===null?Xr.memoizedState:ei.next;if(e!==null)ei=e,Vn=r;else{if(r===null)throw Error(Le(310));Vn=r,r={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},ei===null?Xr.memoizedState=ei=r:ei=ei.next=r}return ei}function m0(r,e){return typeof e=="function"?e(r):e}function u3(r){var e=ps(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=r;var n=Vn,i=n.baseQueue,o=t.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,t.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,l=null,c=o;do{var d=c.lane;if((Qh&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:r(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,s=n):l=l.next=f,Xr.lanes|=d,$h|=d}c=c.next}while(c!==null&&c!==o);l===null?s=n:l.next=a,Ks(n,e.memoizedState)||(_o=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do o=i.lane,Xr.lanes|=o,$h|=o,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function c3(r){var e=ps(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do o=r(o,s.action),s=s.next;while(s!==i);Ks(o,e.memoizedState)||(_o=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,n]}function Az(){}function kz(r,e){var t=Xr,n=ps(),i=e(),o=!Ks(n.memoizedState,i);if(o&&(n.memoizedState=i,_o=!0),n=n.queue,c4(Dz.bind(null,t,n,r),[r]),n.getSnapshot!==e||o||ei!==null&&ei.memoizedState.tag&1){if(t.flags|=2048,v0(9,Oz.bind(null,t,n,i,e),void 0,null),oi===null)throw Error(Le(349));(Qh&30)!==0||Lz(t,e,i)}return i}function Lz(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Xr.updateQueue,e===null?(e={lastEffect:null,stores:null},Xr.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function Oz(r,e,t,n){e.value=t,e.getSnapshot=n,Rz(e)&&Nz(r)}function Dz(r,e,t){return t(function(){Rz(e)&&Nz(r)})}function Rz(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Ks(r,t)}catch{return!0}}function Nz(r){var e=Hl(r,1);e!==null&&Gs(e,r,1,-1)}function _D(r){var e=va();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m0,lastRenderedState:r},e.queue=r,r=r.dispatch=mq.bind(null,Xr,r),[e.memoizedState,r]}function v0(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Xr.updateQueue,e===null?(e={lastEffect:null,stores:null},Xr.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function Iz(){return ps().memoizedState}function xb(r,e,t,n){var i=va();Xr.flags|=r,i.memoizedState=v0(1|e,t,void 0,n===void 0?null:n)}function gS(r,e,t,n){var i=ps();n=n===void 0?null:n;var o=void 0;if(Vn!==null){var s=Vn.memoizedState;if(o=s.destroy,n!==null&&a4(n,s.deps)){i.memoizedState=v0(e,t,o,n);return}}Xr.flags|=r,i.memoizedState=v0(1|e,t,o,n)}function wD(r,e){return xb(8390656,8,r,e)}function c4(r,e){return gS(2048,8,r,e)}function Vz(r,e){return gS(4,2,r,e)}function zz(r,e){return gS(4,4,r,e)}function Bz(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function Fz(r,e,t){return t=t!=null?t.concat([r]):null,gS(4,4,Bz.bind(null,e,r),t)}function h4(){}function Uz(r,e){var t=ps();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&a4(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function jz(r,e){var t=ps();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&a4(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function Hz(r,e,t){return(Qh&21)===0?(r.baseState&&(r.baseState=!1,_o=!0),r.memoizedState=t):(Ks(t,e)||(t=YV(),Xr.lanes|=t,$h|=t,r.baseState=!0),e)}function pq(r,e){var t=gr;gr=t!==0&&4>t?t:4,r(!0);var n=l3.transition;l3.transition={};try{r(!1),e()}finally{gr=t,l3.transition=n}}function Wz(){return ps().memoizedState}function fq(r,e,t){var n=oc(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},Gz(r))Yz(e,t);else if(t=xz(r,e,t,n),t!==null){var i=Qi();Gs(t,r,n,i),Xz(t,e,n)}}function mq(r,e,t){var n=oc(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(Gz(r))Yz(e,i);else{var o=r.alternate;if(r.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,t);if(i.hasEagerState=!0,i.eagerState=a,Ks(a,s)){var l=e.interleaved;l===null?(i.next=i,r4(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=xz(r,e,i,n),t!==null&&(i=Qi(),Gs(t,r,n,i),Xz(t,e,n))}}function Gz(r){var e=r.alternate;return r===Xr||e!==null&&e===Xr}function Yz(r,e){Tg=mx=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function Xz(r,e,t){if((t&4194240)!==0){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,jA(r,t)}}var vx={readContext:ds,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},vq={readContext:ds,useCallback:function(r,e){return va().memoizedState=[r,e===void 0?null:e],r},useContext:ds,useEffect:wD,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,xb(4194308,4,Bz.bind(null,e,r),t)},useLayoutEffect:function(r,e){return xb(4194308,4,r,e)},useInsertionEffect:function(r,e){return xb(4,2,r,e)},useMemo:function(r,e){var t=va();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=va();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=fq.bind(null,Xr,r),[n.memoizedState,r]},useRef:function(r){var e=va();return r={current:r},e.memoizedState=r},useState:_D,useDebugValue:h4,useDeferredValue:function(r){return va().memoizedState=r},useTransition:function(){var r=_D(!1),e=r[0];return r=pq.bind(null,r[1]),va().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=Xr,i=va();if(Br){if(t===void 0)throw Error(Le(407));t=t()}else{if(t=e(),oi===null)throw Error(Le(349));(Qh&30)!==0||Lz(n,e,t)}i.memoizedState=t;var o={value:t,getSnapshot:e};return i.queue=o,wD(Dz.bind(null,n,o,r),[r]),n.flags|=2048,v0(9,Oz.bind(null,n,o,t,e),void 0,null),t},useId:function(){var r=va(),e=oi.identifierPrefix;if(Br){var t=Dl,n=Ol;t=(n&~(1<<32-Ws(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=f0++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=dq++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},gq={readContext:ds,useCallback:Uz,useContext:ds,useEffect:c4,useImperativeHandle:Fz,useInsertionEffect:Vz,useLayoutEffect:zz,useMemo:jz,useReducer:u3,useRef:Iz,useState:function(){return u3(m0)},useDebugValue:h4,useDeferredValue:function(r){var e=ps();return Hz(e,Vn.memoizedState,r)},useTransition:function(){var r=u3(m0)[0],e=ps().memoizedState;return[r,e]},useMutableSource:Az,useSyncExternalStore:kz,useId:Wz,unstable_isNewReconciler:!1},yq={readContext:ds,useCallback:Uz,useContext:ds,useEffect:c4,useImperativeHandle:Fz,useInsertionEffect:Vz,useLayoutEffect:zz,useMemo:jz,useReducer:c3,useRef:Iz,useState:function(){return c3(m0)},useDebugValue:h4,useDeferredValue:function(r){var e=ps();return Vn===null?e.memoizedState=r:Hz(e,Vn.memoizedState,r)},useTransition:function(){var r=c3(m0)[0],e=ps().memoizedState;return[r,e]},useMutableSource:Az,useSyncExternalStore:kz,useId:Wz,unstable_isNewReconciler:!1};function Vf(r,e){try{var t="",n=e;do t+=YY(n),n=n.return;while(n);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:r,source:e,stack:i,digest:null}}function h3(r,e,t){return{value:r,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function RP(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var _q=typeof WeakMap=="function"?WeakMap:Map;function qz(r,e,t){t=Il(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){yx||(yx=!0,WP=n),RP(r,e)},t}function Kz(r,e,t){t=Il(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){RP(r,e)}}var o=r.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){RP(r,e),typeof n!="function"&&(ic===null?ic=new Set([this]):ic.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function bD(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new _q;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=Dq.bind(null,r,e,t),e.then(r,r))}function xD(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function SD(r,e,t,n,i){return(r.mode&1)===0?(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Il(-1,1),e.tag=2,nc(t,e,1))),t.lanes|=1),r):(r.flags|=65536,r.lanes=i,r)}var wq=ql.ReactCurrentOwner,_o=!1;function Ki(r,e,t,n){e.child=r===null?Pz(e,null,t,n):Nf(e,r.child,t,n)}function MD(r,e,t,n,i){t=t.render;var o=e.ref;return cf(e,i),n=l4(r,e,t,n,o,i),t=u4(),r!==null&&!_o?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,Wl(r,e,i)):(Br&&t&&ZA(e),e.flags|=1,Ki(r,e,n,i),e.child)}function CD(r,e,t,n,i){if(r===null){var o=t.type;return typeof o=="function"&&!_4(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,Zz(r,e,o,n,i)):(r=Eb(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(o=r.child,(r.lanes&i)===0){var s=o.memoizedProps;if(t=t.compare,t=t!==null?t:l0,t(s,n)&&r.ref===e.ref)return Wl(r,e,i)}return e.flags|=1,r=sc(o,n),r.ref=e.ref,r.return=e,e.child=r}function Zz(r,e,t,n,i){if(r!==null){var o=r.memoizedProps;if(l0(o,n)&&r.ref===e.ref)if(_o=!1,e.pendingProps=n=o,(r.lanes&i)!==0)(r.flags&131072)!==0&&(_o=!0);else return e.lanes=r.lanes,Wl(r,e,i)}return NP(r,e,t,n,i)}function Jz(r,e,t){var n=e.pendingProps,i=n.children,o=r!==null?r.memoizedState:null;if(n.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(Zp,Vo),Vo|=t;else{if((t&1073741824)===0)return r=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,kr(Zp,Vo),Vo|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:t,kr(Zp,Vo),Vo|=n}else o!==null?(n=o.baseLanes|t,e.memoizedState=null):n=t,kr(Zp,Vo),Vo|=n;return Ki(r,e,i,t),e.child}function Qz(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function NP(r,e,t,n,i){var o=xo(t)?Zh:Ni.current;return o=Df(e,o),cf(e,i),t=l4(r,e,t,n,o,i),n=u4(),r!==null&&!_o?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,Wl(r,e,i)):(Br&&n&&ZA(e),e.flags|=1,Ki(r,e,t,i),e.child)}function ED(r,e,t,n,i){if(xo(t)){var o=!0;lx(e)}else o=!1;if(cf(e,i),e.stateNode===null)Sb(r,e),Cz(e,t,n),DP(e,t,n,i),n=!0;else if(r===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=t.contextType;typeof c=="object"&&c!==null?c=ds(c):(c=xo(t)?Zh:Ni.current,c=Df(e,c));var d=t.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==c)&&gD(e,s,n,c),Fu=!1;var m=e.memoizedState;s.state=m,px(e,n,s,i),l=e.memoizedState,a!==n||m!==l||bo.current||Fu?(typeof d=="function"&&(OP(e,t,d,n),l=e.memoizedState),(a=Fu||vD(e,t,a,n,m,l,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,Sz(r,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vs(e.type,a),s.props=c,f=e.pendingProps,m=s.context,l=t.contextType,typeof l=="object"&&l!==null?l=ds(l):(l=xo(t)?Zh:Ni.current,l=Df(e,l));var g=t.getDerivedStateFromProps;(d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||m!==l)&&gD(e,s,n,l),Fu=!1,m=e.memoizedState,s.state=m,px(e,n,s,i);var b=e.memoizedState;a!==f||m!==b||bo.current||Fu?(typeof g=="function"&&(OP(e,t,g,n),b=e.memoizedState),(c=Fu||vD(e,t,c,n,m,b,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,b,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,b,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===r.memoizedProps&&m===r.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&m===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=b),s.props=n,s.state=b,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||a===r.memoizedProps&&m===r.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&m===r.memoizedState||(e.flags|=1024),n=!1)}return IP(r,e,t,n,o,i)}function IP(r,e,t,n,i,o){Qz(r,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&hD(e,t,!1),Wl(r,e,o);n=e.stateNode,wq.current=e;var a=s&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&s?(e.child=Nf(e,r.child,null,o),e.child=Nf(e,null,a,o)):Ki(r,e,a,o),e.memoizedState=n.state,i&&hD(e,t,!0),e.child}function $z(r){var e=r.stateNode;e.pendingContext?cD(r,e.pendingContext,e.pendingContext!==e.context):e.context&&cD(r,e.context,!1),i4(r,e.containerInfo)}function PD(r,e,t,n,i){return Rf(),QA(i),e.flags|=256,Ki(r,e,t,n),e.child}var VP={dehydrated:null,treeContext:null,retryLane:0};function zP(r){return{baseLanes:r,cachePool:null,transitions:null}}function eB(r,e,t){var n=e.pendingProps,i=Wr.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=r!==null&&r.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),kr(Wr,i&1),r===null)return kP(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((e.mode&1)===0?e.lanes=1:r.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(s=n.children,r=n.fallback,o?(n=e.mode,o=e.child,s={mode:"hidden",children:s},(n&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=s):o=wS(s,n,0,null),r=Wh(r,n,t,null),o.return=e,r.return=e,o.sibling=r,e.child=o,e.child.memoizedState=zP(t),e.memoizedState=VP,r):d4(e,s));if(i=r.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return bq(r,e,s,n,a,i,t);if(o){o=n.fallback,s=e.mode,i=r.child,a=i.sibling;var l={mode:"hidden",children:n.children};return(s&1)===0&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=sc(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=sc(a,o):(o=Wh(o,s,t,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,s=r.child.memoizedState,s=s===null?zP(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=r.childLanes&~t,e.memoizedState=VP,n}return o=r.child,r=o.sibling,n=sc(o,{mode:"visible",children:n.children}),(e.mode&1)===0&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function d4(r,e){return e=wS({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function k1(r,e,t,n){return n!==null&&QA(n),Nf(e,r.child,null,t),r=d4(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function bq(r,e,t,n,i,o,s){if(t)return e.flags&256?(e.flags&=-257,n=h3(Error(Le(422))),k1(r,e,s,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=wS({mode:"visible",children:n.children},i,0,null),o=Wh(o,i,s,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,(e.mode&1)!==0&&Nf(e,r.child,null,s),e.child.memoizedState=zP(s),e.memoizedState=VP,o);if((e.mode&1)===0)return k1(r,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(Le(419)),n=h3(o,n,void 0),k1(r,e,s,n)}if(a=(s&r.childLanes)!==0,_o||a){if(n=oi,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(n.suspendedLanes|s))!==0?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Hl(r,i),Gs(n,r,i,-1))}return y4(),n=h3(Error(Le(421))),k1(r,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=Rq.bind(null,r),i._reactRetry=e,null):(r=o.treeContext,Uo=rc(i.nextSibling),Ho=e,Br=!0,Fs=null,r!==null&&(os[ss++]=Ol,os[ss++]=Dl,os[ss++]=Jh,Ol=r.id,Dl=r.overflow,Jh=e),e=d4(e,n.children),e.flags|=4096,e)}function TD(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),LP(r.return,e,t)}function d3(r,e,t,n,i){var o=r.memoizedState;o===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=t,o.tailMode=i)}function tB(r,e,t){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(Ki(r,e,n.children,t),n=Wr.current,(n&2)!==0)n=n&1|2,e.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&TD(r,t,e);else if(r.tag===19)TD(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(kr(Wr,n),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&fx(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),d3(e,!1,i,t,o);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&fx(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}d3(e,!0,t,null,o);break;case"together":d3(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sb(r,e){(e.mode&1)===0&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function Wl(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),$h|=e.lanes,(t&e.childLanes)===0)return null;if(r!==null&&e.child!==r.child)throw Error(Le(153));if(e.child!==null){for(r=e.child,t=sc(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=sc(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function xq(r,e,t){switch(e.tag){case 3:$z(e),Rf();break;case 5:Tz(e);break;case 1:xo(e.type)&&lx(e);break;case 4:i4(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;kr(hx,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(kr(Wr,Wr.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?eB(r,e,t):(kr(Wr,Wr.current&1),r=Wl(r,e,t),r!==null?r.sibling:null);kr(Wr,Wr.current&1);break;case 19:if(n=(t&e.childLanes)!==0,(r.flags&128)!==0){if(n)return tB(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kr(Wr,Wr.current),n)break;return null;case 22:case 23:return e.lanes=0,Jz(r,e,t)}return Wl(r,e,t)}var rB,BP,nB,iB;rB=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};BP=function(){};nB=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,Bh(Aa.current);var o=null;switch(t){case"input":i=aP(r,i),n=aP(r,n),o=[];break;case"select":i=Kr({},i,{value:void 0}),n=Kr({},n,{value:void 0}),o=[];break;case"textarea":i=cP(r,i),n=cP(r,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=sx)}dP(t,n);var s;t=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(t0.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(t||(t={}),t[s]=l[s])}else t||(o||(o=[]),o.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(t0.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Nr("scroll",r),o||a===l||(o=[])):(o=o||[]).push(c,l))}t&&(o=o||[]).push("style",t);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};iB=function(r,e,t,n){t!==n&&(e.flags|=4)};function Dv(r,e){if(!Br)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Pi(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function Sq(r,e,t){var n=e.pendingProps;switch(JA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(e),null;case 1:return xo(e.type)&&ax(),Pi(e),null;case 3:return n=e.stateNode,If(),Vr(bo),Vr(Ni),s4(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(T1(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Fs!==null&&(XP(Fs),Fs=null))),BP(r,e),Pi(e),null;case 5:o4(e);var i=Bh(p0.current);if(t=e.type,r!==null&&e.stateNode!=null)nB(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Le(166));return Pi(e),null}if(r=Bh(Aa.current),T1(e)){n=e.stateNode,t=e.type;var o=e.memoizedProps;switch(n[Sa]=e,n[h0]=o,r=(e.mode&1)!==0,t){case"dialog":Nr("cancel",n),Nr("close",n);break;case"iframe":case"object":case"embed":Nr("load",n);break;case"video":case"audio":for(i=0;i<cg.length;i++)Nr(cg[i],n);break;case"source":Nr("error",n);break;case"img":case"image":case"link":Nr("error",n),Nr("load",n);break;case"details":Nr("toggle",n);break;case"input":VO(n,o),Nr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Nr("invalid",n);break;case"textarea":BO(n,o),Nr("invalid",n)}dP(t,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&P1(n.textContent,a,r),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&P1(n.textContent,a,r),i=["children",""+a]):t0.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Nr("scroll",n)}switch(t){case"input":_1(n),zO(n,o,!0);break;case"textarea":_1(n),FO(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=sx)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=LV(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=s.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=s.createElement(t,{is:n.is}):(r=s.createElement(t),t==="select"&&(s=r,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):r=s.createElementNS(r,t),r[Sa]=e,r[h0]=n,rB(r,e,!1,!1),e.stateNode=r;e:{switch(s=pP(t,n),t){case"dialog":Nr("cancel",r),Nr("close",r),i=n;break;case"iframe":case"object":case"embed":Nr("load",r),i=n;break;case"video":case"audio":for(i=0;i<cg.length;i++)Nr(cg[i],r);i=n;break;case"source":Nr("error",r),i=n;break;case"img":case"image":case"link":Nr("error",r),Nr("load",r),i=n;break;case"details":Nr("toggle",r),i=n;break;case"input":VO(r,n),i=aP(r,n),Nr("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=Kr({},n,{value:void 0}),Nr("invalid",r);break;case"textarea":BO(r,n),i=cP(r,n),Nr("invalid",r);break;default:i=n}dP(t,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?RV(r,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&OV(r,l)):o==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&r0(r,l):typeof l=="number"&&r0(r,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(t0.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Nr("scroll",r):l!=null&&IA(r,o,l,s))}switch(t){case"input":_1(r),zO(r,n,!1);break;case"textarea":_1(r),FO(r);break;case"option":n.value!=null&&r.setAttribute("value",""+dc(n.value));break;case"select":r.multiple=!!n.multiple,o=n.value,o!=null?sf(r,!!n.multiple,o,!1):n.defaultValue!=null&&sf(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=sx)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pi(e),null;case 6:if(r&&e.stateNode!=null)iB(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Le(166));if(t=Bh(p0.current),Bh(Aa.current),T1(e)){if(n=e.stateNode,t=e.memoizedProps,n[Sa]=e,(o=n.nodeValue!==t)&&(r=Ho,r!==null))switch(r.tag){case 3:P1(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&P1(n.nodeValue,t,(r.mode&1)!==0)}o&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Sa]=e,e.stateNode=n}return Pi(e),null;case 13:if(Vr(Wr),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Br&&Uo!==null&&(e.mode&1)!==0&&(e.flags&128)===0)bz(),Rf(),e.flags|=98560,o=!1;else if(o=T1(e),n!==null&&n.dehydrated!==null){if(r===null){if(!o)throw Error(Le(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Le(317));o[Sa]=e}else Rf(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Pi(e),o=!1}else Fs!==null&&(XP(Fs),Fs=null),o=!0;if(!o)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,(e.mode&1)!==0&&(r===null||(Wr.current&1)!==0?Un===0&&(Un=3):y4())),e.updateQueue!==null&&(e.flags|=4),Pi(e),null);case 4:return If(),BP(r,e),r===null&&u0(e.stateNode.containerInfo),Pi(e),null;case 10:return t4(e.type._context),Pi(e),null;case 17:return xo(e.type)&&ax(),Pi(e),null;case 19:if(Vr(Wr),o=e.memoizedState,o===null)return Pi(e),null;if(n=(e.flags&128)!==0,s=o.rendering,s===null)if(n)Dv(o,!1);else{if(Un!==0||r!==null&&(r.flags&128)!==0)for(r=e.child;r!==null;){if(s=fx(r),s!==null){for(e.flags|=128,Dv(o,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)o=t,r=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=r,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,r=s.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return kr(Wr,Wr.current&1|2),e.child}r=r.sibling}o.tail!==null&&gn()>zf&&(e.flags|=128,n=!0,Dv(o,!1),e.lanes=4194304)}else{if(!n)if(r=fx(s),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Dv(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Br)return Pi(e),null}else 2*gn()-o.renderingStartTime>zf&&t!==1073741824&&(e.flags|=128,n=!0,Dv(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(t=o.last,t!==null?t.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=gn(),e.sibling=null,t=Wr.current,kr(Wr,n?t&1|2:t&1),e):(Pi(e),null);case 22:case 23:return g4(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&(e.mode&1)!==0?(Vo&1073741824)!==0&&(Pi(e),e.subtreeFlags&6&&(e.flags|=8192)):Pi(e),null;case 24:return null;case 25:return null}throw Error(Le(156,e.tag))}function Mq(r,e){switch(JA(e),e.tag){case 1:return xo(e.type)&&ax(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return If(),Vr(bo),Vr(Ni),s4(),r=e.flags,(r&65536)!==0&&(r&128)===0?(e.flags=r&-65537|128,e):null;case 5:return o4(e),null;case 13:if(Vr(Wr),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(Le(340));Rf()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return Vr(Wr),null;case 4:return If(),null;case 10:return t4(e.type._context),null;case 22:case 23:return g4(),null;case 24:return null;default:return null}}var L1=!1,Oi=!1,Cq=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Kp(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){sn(r,e,n)}else t.current=null}function FP(r,e,t){try{t()}catch(n){sn(r,e,n)}}var AD=!1;function Eq(r,e){if(SP=nx,r=lz(),KA(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var s=0,a=-1,l=-1,c=0,d=0,f=r,m=null;t:for(;;){for(var g;f!==t||i!==0&&f.nodeType!==3||(a=s+i),f!==o||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===r)break t;if(m===t&&++c===i&&(a=s),m===o&&++d===n&&(l=s),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(MP={focusedElem:r,selectionRange:t},nx=!1,$e=e;$e!==null;)if(e=$e,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,$e=r;else for(;$e!==null;){e=$e;try{var b=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var _=b.memoizedProps,w=b.memoizedState,M=e.stateNode,S=M.getSnapshotBeforeUpdate(e.elementType===e.type?_:Vs(e.type,_),w);M.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(P){sn(e,e.return,P)}if(r=e.sibling,r!==null){r.return=e.return,$e=r;break}$e=e.return}return b=AD,AD=!1,b}function Ag(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var o=i.destroy;i.destroy=void 0,o!==void 0&&FP(e,t,o)}i=i.next}while(i!==n)}}function yS(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function UP(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function oB(r){var e=r.alternate;e!==null&&(r.alternate=null,oB(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Sa],delete e[h0],delete e[PP],delete e[lq],delete e[uq])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function sB(r){return r.tag===5||r.tag===3||r.tag===4}function kD(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||sB(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function jP(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=sx));else if(n!==4&&(r=r.child,r!==null))for(jP(r,e,t),r=r.sibling;r!==null;)jP(r,e,t),r=r.sibling}function HP(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(HP(r,e,t),r=r.sibling;r!==null;)HP(r,e,t),r=r.sibling}var di=null,Bs=!1;function xu(r,e,t){for(t=t.child;t!==null;)aB(r,e,t),t=t.sibling}function aB(r,e,t){if(Ta&&typeof Ta.onCommitFiberUnmount=="function")try{Ta.onCommitFiberUnmount(cS,t)}catch{}switch(t.tag){case 5:Oi||Kp(t,e);case 6:var n=di,i=Bs;di=null,xu(r,e,t),di=n,Bs=i,di!==null&&(Bs?(r=di,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):di.removeChild(t.stateNode));break;case 18:di!==null&&(Bs?(r=di,t=t.stateNode,r.nodeType===8?o3(r.parentNode,t):r.nodeType===1&&o3(r,t),s0(r)):o3(di,t.stateNode));break;case 4:n=di,i=Bs,di=t.stateNode.containerInfo,Bs=!0,xu(r,e,t),di=n,Bs=i;break;case 0:case 11:case 14:case 15:if(!Oi&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&((o&2)!==0||(o&4)!==0)&&FP(t,e,s),i=i.next}while(i!==n)}xu(r,e,t);break;case 1:if(!Oi&&(Kp(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){sn(t,e,a)}xu(r,e,t);break;case 21:xu(r,e,t);break;case 22:t.mode&1?(Oi=(n=Oi)||t.memoizedState!==null,xu(r,e,t),Oi=n):xu(r,e,t);break;default:xu(r,e,t)}}function LD(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new Cq),e.forEach(function(n){var i=Nq.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function As(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var o=r,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:di=a.stateNode,Bs=!1;break e;case 3:di=a.stateNode.containerInfo,Bs=!0;break e;case 4:di=a.stateNode.containerInfo,Bs=!0;break e}a=a.return}if(di===null)throw Error(Le(160));aB(o,s,i),di=null,Bs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){sn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lB(e,r),e=e.sibling}function lB(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(As(e,r),fa(r),n&4){try{Ag(3,r,r.return),yS(3,r)}catch(_){sn(r,r.return,_)}try{Ag(5,r,r.return)}catch(_){sn(r,r.return,_)}}break;case 1:As(e,r),fa(r),n&512&&t!==null&&Kp(t,t.return);break;case 5:if(As(e,r),fa(r),n&512&&t!==null&&Kp(t,t.return),r.flags&32){var i=r.stateNode;try{r0(i,"")}catch(_){sn(r,r.return,_)}}if(n&4&&(i=r.stateNode,i!=null)){var o=r.memoizedProps,s=t!==null?t.memoizedProps:o,a=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&AV(i,o),pP(a,s);var c=pP(a,o);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?RV(i,f):d==="dangerouslySetInnerHTML"?OV(i,f):d==="children"?r0(i,f):IA(i,d,f,c)}switch(a){case"input":lP(i,o);break;case"textarea":kV(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?sf(i,!!o.multiple,g,!1):m!==!!o.multiple&&(o.defaultValue!=null?sf(i,!!o.multiple,o.defaultValue,!0):sf(i,!!o.multiple,o.multiple?[]:"",!1))}i[h0]=o}catch(_){sn(r,r.return,_)}}break;case 6:if(As(e,r),fa(r),n&4){if(r.stateNode===null)throw Error(Le(162));i=r.stateNode,o=r.memoizedProps;try{i.nodeValue=o}catch(_){sn(r,r.return,_)}}break;case 3:if(As(e,r),fa(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{s0(e.containerInfo)}catch(_){sn(r,r.return,_)}break;case 4:As(e,r),fa(r);break;case 13:As(e,r),fa(r),i=r.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(m4=gn())),n&4&&LD(r);break;case 22:if(d=t!==null&&t.memoizedState!==null,r.mode&1?(Oi=(c=Oi)||d,As(e,r),Oi=c):As(e,r),fa(r),n&8192){if(c=r.memoizedState!==null,(r.stateNode.isHidden=c)&&!d&&(r.mode&1)!==0)for($e=r,d=r.child;d!==null;){for(f=$e=d;$e!==null;){switch(m=$e,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ag(4,m,m.return);break;case 1:Kp(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){n=m,t=m.return;try{e=n,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(_){sn(n,t,_)}}break;case 5:Kp(m,m.return);break;case 22:if(m.memoizedState!==null){DD(f);continue}}g!==null?(g.return=m,$e=g):DD(f)}d=d.sibling}e:for(d=null,f=r;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=DV("display",s))}catch(_){sn(r,r.return,_)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){sn(r,r.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===r)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:As(e,r),fa(r),n&4&&LD(r);break;case 21:break;default:As(e,r),fa(r)}}function fa(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(sB(t)){var n=t;break e}t=t.return}throw Error(Le(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(r0(i,""),n.flags&=-33);var o=kD(r);HP(r,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=kD(r);jP(r,a,s);break;default:throw Error(Le(161))}}catch(l){sn(r,r.return,l)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function Pq(r,e,t){$e=r,uB(r)}function uB(r,e,t){for(var n=(r.mode&1)!==0;$e!==null;){var i=$e,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||L1;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Oi;a=L1;var c=Oi;if(L1=s,(Oi=l)&&!c)for($e=i;$e!==null;)s=$e,l=s.child,s.tag===22&&s.memoizedState!==null?RD(i):l!==null?(l.return=s,$e=l):RD(i);for(;o!==null;)$e=o,uB(o),o=o.sibling;$e=i,L1=a,Oi=c}OD(r)}else(i.subtreeFlags&8772)!==0&&o!==null?(o.return=i,$e=o):OD(r)}}function OD(r){for(;$e!==null;){var e=$e;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Oi||yS(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Oi)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Vs(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&mD(e,o,n);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}mD(e,s,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&s0(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}Oi||e.flags&512&&UP(e)}catch(m){sn(e,e.return,m)}}if(e===r){$e=null;break}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}}function DD(r){for(;$e!==null;){var e=$e;if(e===r){$e=null;break}var t=e.sibling;if(t!==null){t.return=e.return,$e=t;break}$e=e.return}}function RD(r){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{yS(4,e)}catch(l){sn(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){sn(e,i,l)}}var o=e.return;try{UP(e)}catch(l){sn(e,o,l)}break;case 5:var s=e.return;try{UP(e)}catch(l){sn(e,s,l)}}}catch(l){sn(e,e.return,l)}if(e===r){$e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$e=a;break}$e=e.return}}var Tq=Math.ceil,gx=ql.ReactCurrentDispatcher,p4=ql.ReactCurrentOwner,us=ql.ReactCurrentBatchConfig,tr=0,oi=null,An=null,gi=0,Vo=0,Zp=Sc(0),Un=0,g0=null,$h=0,_S=0,f4=0,kg=null,go=null,m4=0,zf=1/0,Cl=null,yx=!1,WP=null,ic=null,O1=!1,Ju=null,_x=0,Lg=0,GP=null,Mb=-1,Cb=0;function Qi(){return(tr&6)!==0?gn():Mb!==-1?Mb:Mb=gn()}function oc(r){return(r.mode&1)===0?1:(tr&2)!==0&&gi!==0?gi&-gi:hq.transition!==null?(Cb===0&&(Cb=YV()),Cb):(r=gr,r!==0||(r=window.event,r=r===void 0?16:$V(r.type)),r)}function Gs(r,e,t,n){if(50<Lg)throw Lg=0,GP=null,Error(Le(185));W0(r,t,n),((tr&2)===0||r!==oi)&&(r===oi&&((tr&2)===0&&(_S|=t),Un===4&&Gu(r,gi)),So(r,n),t===1&&tr===0&&(e.mode&1)===0&&(zf=gn()+500,mS&&Mc()))}function So(r,e){var t=r.callbackNode;hX(r,e);var n=rx(r,r===oi?gi:0);if(n===0)t!==null&&HO(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&HO(t),e===1)r.tag===0?cq(ND.bind(null,r)):yz(ND.bind(null,r)),sq(function(){(tr&6)===0&&Mc()}),t=null;else{switch(XV(n)){case 1:t=UA;break;case 4:t=WV;break;case 16:t=tx;break;case 536870912:t=GV;break;default:t=tx}t=gB(t,cB.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function cB(r,e){if(Mb=-1,Cb=0,(tr&6)!==0)throw Error(Le(327));var t=r.callbackNode;if(hf()&&r.callbackNode!==t)return null;var n=rx(r,r===oi?gi:0);if(n===0)return null;if((n&30)!==0||(n&r.expiredLanes)!==0||e)e=wx(r,n);else{e=n;var i=tr;tr|=2;var o=dB();(oi!==r||gi!==e)&&(Cl=null,zf=gn()+500,Hh(r,e));do try{Lq();break}catch(a){hB(r,a)}while(1);e4(),gx.current=o,tr=i,An!==null?e=0:(oi=null,gi=0,e=Un)}if(e!==0){if(e===2&&(i=yP(r),i!==0&&(n=i,e=YP(r,i))),e===1)throw t=g0,Hh(r,0),Gu(r,n),So(r,gn()),t;if(e===6)Gu(r,n);else{if(i=r.current.alternate,(n&30)===0&&!Aq(i)&&(e=wx(r,n),e===2&&(o=yP(r),o!==0&&(n=o,e=YP(r,o))),e===1))throw t=g0,Hh(r,0),Gu(r,n),So(r,gn()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(Le(345));case 2:Oh(r,go,Cl);break;case 3:if(Gu(r,n),(n&130023424)===n&&(e=m4+500-gn(),10<e)){if(rx(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){Qi(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=EP(Oh.bind(null,r,go,Cl),e);break}Oh(r,go,Cl);break;case 4:if(Gu(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var s=31-Ws(n);o=1<<s,s=e[s],s>i&&(i=s),n&=~o}if(n=i,n=gn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Tq(n/1960))-n,10<n){r.timeoutHandle=EP(Oh.bind(null,r,go,Cl),n);break}Oh(r,go,Cl);break;case 5:Oh(r,go,Cl);break;default:throw Error(Le(329))}}}return So(r,gn()),r.callbackNode===t?cB.bind(null,r):null}function YP(r,e){var t=kg;return r.current.memoizedState.isDehydrated&&(Hh(r,e).flags|=256),r=wx(r,e),r!==2&&(e=go,go=t,e!==null&&XP(e)),r}function XP(r){go===null?go=r:go.push.apply(go,r)}function Aq(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],o=i.getSnapshot;i=i.value;try{if(!Ks(o(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gu(r,e){for(e&=~f4,e&=~_S,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Ws(e),n=1<<t;r[t]=-1,e&=~n}}function ND(r){if((tr&6)!==0)throw Error(Le(327));hf();var e=rx(r,0);if((e&1)===0)return So(r,gn()),null;var t=wx(r,e);if(r.tag!==0&&t===2){var n=yP(r);n!==0&&(e=n,t=YP(r,n))}if(t===1)throw t=g0,Hh(r,0),Gu(r,e),So(r,gn()),t;if(t===6)throw Error(Le(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,Oh(r,go,Cl),So(r,gn()),null}function v4(r,e){var t=tr;tr|=1;try{return r(e)}finally{tr=t,tr===0&&(zf=gn()+500,mS&&Mc())}}function ed(r){Ju!==null&&Ju.tag===0&&(tr&6)===0&&hf();var e=tr;tr|=1;var t=us.transition,n=gr;try{if(us.transition=null,gr=1,r)return r()}finally{gr=n,us.transition=t,tr=e,(tr&6)===0&&Mc()}}function g4(){Vo=Zp.current,Vr(Zp)}function Hh(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,oq(t)),An!==null)for(t=An.return;t!==null;){var n=t;switch(JA(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ax();break;case 3:If(),Vr(bo),Vr(Ni),s4();break;case 5:o4(n);break;case 4:If();break;case 13:Vr(Wr);break;case 19:Vr(Wr);break;case 10:t4(n.type._context);break;case 22:case 23:g4()}t=t.return}if(oi=r,An=r=sc(r.current,null),gi=Vo=e,Un=0,g0=null,f4=_S=$h=0,go=kg=null,zh!==null){for(e=0;e<zh.length;e++)if(t=zh[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,o=t.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}t.pending=n}zh=null}return r}function hB(r,e){do{var t=An;try{if(e4(),bb.current=vx,mx){for(var n=Xr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}mx=!1}if(Qh=0,ei=Vn=Xr=null,Tg=!1,f0=0,p4.current=null,t===null||t.return===null){Un=1,g0=e,An=null;break}e:{var o=r,s=t.return,a=t,l=e;if(e=gi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if((d.mode&1)===0&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=xD(s);if(g!==null){g.flags&=-257,SD(g,s,a,o,e),g.mode&1&&bD(o,c,e),e=g,l=c;var b=e.updateQueue;if(b===null){var _=new Set;_.add(l),e.updateQueue=_}else b.add(l);break e}else{if((e&1)===0){bD(o,c,e),y4();break e}l=Error(Le(426))}}else if(Br&&a.mode&1){var w=xD(s);if(w!==null){(w.flags&65536)===0&&(w.flags|=256),SD(w,s,a,o,e),QA(Vf(l,a));break e}}o=l=Vf(l,a),Un!==4&&(Un=2),kg===null?kg=[o]:kg.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var M=qz(o,l,e);fD(o,M);break e;case 1:a=l;var S=o.type,C=o.stateNode;if((o.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ic===null||!ic.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var P=Kz(o,a,e);fD(o,P);break e}}o=o.return}while(o!==null)}fB(t)}catch(T){e=T,An===t&&t!==null&&(An=t=t.return);continue}break}while(1)}function dB(){var r=gx.current;return gx.current=vx,r===null?vx:r}function y4(){(Un===0||Un===3||Un===2)&&(Un=4),oi===null||($h&268435455)===0&&(_S&268435455)===0||Gu(oi,gi)}function wx(r,e){var t=tr;tr|=2;var n=dB();(oi!==r||gi!==e)&&(Cl=null,Hh(r,e));do try{kq();break}catch(i){hB(r,i)}while(1);if(e4(),tr=t,gx.current=n,An!==null)throw Error(Le(261));return oi=null,gi=0,Un}function kq(){for(;An!==null;)pB(An)}function Lq(){for(;An!==null&&!rX();)pB(An)}function pB(r){var e=vB(r.alternate,r,Vo);r.memoizedProps=r.pendingProps,e===null?fB(r):An=e,p4.current=null}function fB(r){var e=r;do{var t=e.alternate;if(r=e.return,(e.flags&32768)===0){if(t=Sq(t,e,Vo),t!==null){An=t;return}}else{if(t=Mq(t,e),t!==null){t.flags&=32767,An=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Un=6,An=null;return}}if(e=e.sibling,e!==null){An=e;return}An=e=r}while(e!==null);Un===0&&(Un=5)}function Oh(r,e,t){var n=gr,i=us.transition;try{us.transition=null,gr=1,Oq(r,e,t,n)}finally{us.transition=i,gr=n}return null}function Oq(r,e,t,n){do hf();while(Ju!==null);if((tr&6)!==0)throw Error(Le(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(Le(177));r.callbackNode=null,r.callbackPriority=0;var o=t.lanes|t.childLanes;if(dX(r,o),r===oi&&(An=oi=null,gi=0),(t.subtreeFlags&2064)===0&&(t.flags&2064)===0||O1||(O1=!0,gB(tx,function(){return hf(),null})),o=(t.flags&15990)!==0,(t.subtreeFlags&15990)!==0||o){o=us.transition,us.transition=null;var s=gr;gr=1;var a=tr;tr|=4,p4.current=null,Eq(r,t),lB(t,r),QX(MP),nx=!!SP,MP=SP=null,r.current=t,Pq(t),nX(),tr=a,gr=s,us.transition=o}else r.current=t;if(O1&&(O1=!1,Ju=r,_x=i),o=r.pendingLanes,o===0&&(ic=null),sX(t.stateNode),So(r,gn()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(yx)throw yx=!1,r=WP,WP=null,r;return(_x&1)!==0&&r.tag!==0&&hf(),o=r.pendingLanes,(o&1)!==0?r===GP?Lg++:(Lg=0,GP=r):Lg=0,Mc(),null}function hf(){if(Ju!==null){var r=XV(_x),e=us.transition,t=gr;try{if(us.transition=null,gr=16>r?16:r,Ju===null)var n=!1;else{if(r=Ju,Ju=null,_x=0,(tr&6)!==0)throw Error(Le(331));var i=tr;for(tr|=4,$e=r.current;$e!==null;){var o=$e,s=o.child;if(($e.flags&16)!==0){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($e=c;$e!==null;){var d=$e;switch(d.tag){case 0:case 11:case 15:Ag(8,d,o)}var f=d.child;if(f!==null)f.return=d,$e=f;else for(;$e!==null;){d=$e;var m=d.sibling,g=d.return;if(oB(d),d===c){$e=null;break}if(m!==null){m.return=g,$e=m;break}$e=g}}}var b=o.alternate;if(b!==null){var _=b.child;if(_!==null){b.child=null;do{var w=_.sibling;_.sibling=null,_=w}while(_!==null)}}$e=o}}if((o.subtreeFlags&2064)!==0&&s!==null)s.return=o,$e=s;else e:for(;$e!==null;){if(o=$e,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Ag(9,o,o.return)}var M=o.sibling;if(M!==null){M.return=o.return,$e=M;break e}$e=o.return}}var S=r.current;for($e=S;$e!==null;){s=$e;var C=s.child;if((s.subtreeFlags&2064)!==0&&C!==null)C.return=s,$e=C;else e:for(s=S;$e!==null;){if(a=$e,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:yS(9,a)}}catch(T){sn(a,a.return,T)}if(a===s){$e=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,$e=P;break e}$e=a.return}}if(tr=i,Mc(),Ta&&typeof Ta.onPostCommitFiberRoot=="function")try{Ta.onPostCommitFiberRoot(cS,r)}catch{}n=!0}return n}finally{gr=t,us.transition=e}}return!1}function ID(r,e,t){e=Vf(t,e),e=qz(r,e,1),r=nc(r,e,1),e=Qi(),r!==null&&(W0(r,1,e),So(r,e))}function sn(r,e,t){if(r.tag===3)ID(r,r,t);else for(;e!==null;){if(e.tag===3){ID(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ic===null||!ic.has(n))){r=Vf(t,r),r=Kz(e,r,1),e=nc(e,r,1),r=Qi(),e!==null&&(W0(e,1,r),So(e,r));break}}e=e.return}}function Dq(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=Qi(),r.pingedLanes|=r.suspendedLanes&t,oi===r&&(gi&t)===t&&(Un===4||Un===3&&(gi&130023424)===gi&&500>gn()-m4?Hh(r,0):f4|=t),So(r,e)}function mB(r,e){e===0&&((r.mode&1)===0?e=1:(e=x1,x1<<=1,(x1&130023424)===0&&(x1=4194304)));var t=Qi();r=Hl(r,e),r!==null&&(W0(r,e,t),So(r,t))}function Rq(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),mB(r,t)}function Nq(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(Le(314))}n!==null&&n.delete(e),mB(r,t)}var vB;vB=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||bo.current)_o=!0;else{if((r.lanes&t)===0&&(e.flags&128)===0)return _o=!1,xq(r,e,t);_o=(r.flags&131072)!==0}else _o=!1,Br&&(e.flags&1048576)!==0&&_z(e,cx,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Sb(r,e),r=e.pendingProps;var i=Df(e,Ni.current);cf(e,t),i=l4(null,e,n,r,i,t);var o=u4();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xo(n)?(o=!0,lx(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,n4(e),i.updater=vS,e.stateNode=i,i._reactInternals=e,DP(e,n,r,t),e=IP(null,e,n,!0,o,t)):(e.tag=0,Br&&o&&ZA(e),Ki(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Sb(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Vq(n),r=Vs(n,r),i){case 0:e=NP(null,e,n,r,t);break e;case 1:e=ED(null,e,n,r,t);break e;case 11:e=MD(null,e,n,r,t);break e;case 14:e=CD(null,e,n,Vs(n.type,r),t);break e}throw Error(Le(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vs(n,i),NP(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vs(n,i),ED(r,e,n,i,t);case 3:e:{if($z(e),r===null)throw Error(Le(387));n=e.pendingProps,o=e.memoizedState,i=o.element,Sz(r,e),px(e,n,null,t);var s=e.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Vf(Error(Le(423)),e),e=PD(r,e,n,t,i);break e}else if(n!==i){i=Vf(Error(Le(424)),e),e=PD(r,e,n,t,i);break e}else for(Uo=rc(e.stateNode.containerInfo.firstChild),Ho=e,Br=!0,Fs=null,t=Pz(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Rf(),n===i){e=Wl(r,e,t);break e}Ki(r,e,n,t)}e=e.child}return e;case 5:return Tz(e),r===null&&kP(e),n=e.type,i=e.pendingProps,o=r!==null?r.memoizedProps:null,s=i.children,CP(n,i)?s=null:o!==null&&CP(n,o)&&(e.flags|=32),Qz(r,e),Ki(r,e,s,t),e.child;case 6:return r===null&&kP(e),null;case 13:return eB(r,e,t);case 4:return i4(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=Nf(e,null,n,t):Ki(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vs(n,i),MD(r,e,n,i,t);case 7:return Ki(r,e,e.pendingProps,t),e.child;case 8:return Ki(r,e,e.pendingProps.children,t),e.child;case 12:return Ki(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,kr(hx,n._currentValue),n._currentValue=s,o!==null)if(Ks(o.value,s)){if(o.children===i.children&&!bo.current){e=Wl(r,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=Il(-1,t&-t),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),LP(o.return,t,e),a.lanes|=t;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Le(341));s.lanes|=t,a=s.alternate,a!==null&&(a.lanes|=t),LP(s,t,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ki(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,cf(e,t),i=ds(i),n=n(i),e.flags|=1,Ki(r,e,n,t),e.child;case 14:return n=e.type,i=Vs(n,e.pendingProps),i=Vs(n.type,i),CD(r,e,n,i,t);case 15:return Zz(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vs(n,i),Sb(r,e),e.tag=1,xo(n)?(r=!0,lx(e)):r=!1,cf(e,t),Cz(e,n,i),DP(e,n,i,t),IP(null,e,n,!0,r,t);case 19:return tB(r,e,t);case 22:return Jz(r,e,t)}throw Error(Le(156,e.tag))};function gB(r,e){return HV(r,e)}function Iq(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(r,e,t,n){return new Iq(r,e,t,n)}function _4(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Vq(r){if(typeof r=="function")return _4(r)?1:0;if(r!=null){if(r=r.$$typeof,r===zA)return 11;if(r===BA)return 14}return 2}function sc(r,e){var t=r.alternate;return t===null?(t=as(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function Eb(r,e,t,n,i,o){var s=2;if(n=r,typeof r=="function")_4(r)&&(s=1);else if(typeof r=="string")s=5;else e:switch(r){case Fp:return Wh(t.children,i,o,e);case VA:s=8,i|=8;break;case nP:return r=as(12,t,e,i|2),r.elementType=nP,r.lanes=o,r;case iP:return r=as(13,t,e,i),r.elementType=iP,r.lanes=o,r;case oP:return r=as(19,t,e,i),r.elementType=oP,r.lanes=o,r;case EV:return wS(t,i,o,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case MV:s=10;break e;case CV:s=9;break e;case zA:s=11;break e;case BA:s=14;break e;case Bu:s=16,n=null;break e}throw Error(Le(130,r==null?r:typeof r,""))}return e=as(s,t,e,i),e.elementType=r,e.type=n,e.lanes=o,e}function Wh(r,e,t,n){return r=as(7,r,n,e),r.lanes=t,r}function wS(r,e,t,n){return r=as(22,r,n,e),r.elementType=EV,r.lanes=t,r.stateNode={isHidden:!1},r}function p3(r,e,t){return r=as(6,r,null,e),r.lanes=t,r}function f3(r,e,t){return e=as(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function zq(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qC(0),this.expirationTimes=qC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qC(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function w4(r,e,t,n,i,o,s,a,l){return r=new zq(r,e,t,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=as(3,null,null,e),r.current=o,o.stateNode=r,o.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},n4(o),r}function Bq(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bp,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function yB(r){if(!r)return pc;r=r._reactInternals;e:{if(hd(r)!==r||r.tag!==1)throw Error(Le(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Le(171))}if(r.tag===1){var t=r.type;if(xo(t))return gz(r,t,e)}return e}function _B(r,e,t,n,i,o,s,a,l){return r=w4(t,n,!0,r,i,o,s,a,l),r.context=yB(null),t=r.current,n=Qi(),i=oc(t),o=Il(n,i),o.callback=e!=null?e:null,nc(t,o,i),r.current.lanes=i,W0(r,i,n),So(r,n),r}function bS(r,e,t,n){var i=e.current,o=Qi(),s=oc(i);return t=yB(t),e.context===null?e.context=t:e.pendingContext=t,e=Il(o,s),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=nc(i,e,s),r!==null&&(Gs(r,i,s,o),wb(r,i,s)),s}function bx(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function VD(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function b4(r,e){VD(r,e),(r=r.alternate)&&VD(r,e)}function Fq(){return null}var wB=typeof reportError=="function"?reportError:function(r){console.error(r)};function x4(r){this._internalRoot=r}xS.prototype.render=x4.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(Le(409));bS(r,e,null,null)};xS.prototype.unmount=x4.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;ed(function(){bS(null,r,null,null)}),e[jl]=null}};function xS(r){this._internalRoot=r}xS.prototype.unstable_scheduleHydration=function(r){if(r){var e=ZV();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Wu.length&&e!==0&&e<Wu[t].priority;t++);Wu.splice(t,0,r),t===0&&QV(r)}};function S4(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function SS(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function zD(){}function Uq(r,e,t,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var c=bx(s);o.call(c)}}var s=_B(e,n,r,0,null,!1,!1,"",zD);return r._reactRootContainer=s,r[jl]=s.current,u0(r.nodeType===8?r.parentNode:r),ed(),s}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=bx(l);a.call(c)}}var l=w4(r,0,!1,null,null,!1,!1,"",zD);return r._reactRootContainer=l,r[jl]=l.current,u0(r.nodeType===8?r.parentNode:r),ed(function(){bS(e,l,t,n)}),l}function MS(r,e,t,n,i){var o=t._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=bx(s);a.call(l)}}bS(e,s,r,i)}else s=Uq(t,e,r,i,n);return bx(s)}qV=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=ug(e.pendingLanes);t!==0&&(jA(e,t|1),So(e,gn()),(tr&6)===0&&(zf=gn()+500,Mc()))}break;case 13:ed(function(){var n=Hl(r,1);if(n!==null){var i=Qi();Gs(n,r,1,i)}}),b4(r,1)}};HA=function(r){if(r.tag===13){var e=Hl(r,134217728);if(e!==null){var t=Qi();Gs(e,r,134217728,t)}b4(r,134217728)}};KV=function(r){if(r.tag===13){var e=oc(r),t=Hl(r,e);if(t!==null){var n=Qi();Gs(t,r,e,n)}b4(r,e)}};ZV=function(){return gr};JV=function(r,e){var t=gr;try{return gr=r,e()}finally{gr=t}};mP=function(r,e,t){switch(e){case"input":if(lP(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=fS(n);if(!i)throw Error(Le(90));TV(n),lP(n,i)}}}break;case"textarea":kV(r,t);break;case"select":e=t.value,e!=null&&sf(r,!!t.multiple,e,!1)}};VV=v4;zV=ed;var jq={usingClientEntryPoint:!1,Events:[Y0,Wp,fS,NV,IV,v4]},Rv={findFiberByHostInstance:Vh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Hq={bundleType:Rv.bundleType,version:Rv.version,rendererPackageName:Rv.rendererPackageName,rendererConfig:Rv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ql.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=UV(r),r===null?null:r.stateNode},findFiberByHostInstance:Rv.findFiberByHostInstance||Fq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var D1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!D1.isDisabled&&D1.supportsFiber)try{cS=D1.inject(Hq),Ta=D1}catch{}}Ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jq;Ko.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S4(e))throw Error(Le(200));return Bq(r,e,null,t)};Ko.createRoot=function(r,e){if(!S4(r))throw Error(Le(299));var t=!1,n="",i=wB;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=w4(r,1,!1,null,null,t,!1,n,i),r[jl]=e.current,u0(r.nodeType===8?r.parentNode:r),new x4(e)};Ko.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(Le(188)):(r=Object.keys(r).join(","),Error(Le(268,r)));return r=UV(e),r=r===null?null:r.stateNode,r};Ko.flushSync=function(r){return ed(r)};Ko.hydrate=function(r,e,t){if(!SS(e))throw Error(Le(200));return MS(null,r,e,!0,t)};Ko.hydrateRoot=function(r,e,t){if(!S4(r))throw Error(Le(405));var n=t!=null&&t.hydratedSources||null,i=!1,o="",s=wB;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=_B(e,null,r,1,t!=null?t:null,i,!1,o,s),r[jl]=e.current,u0(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new xS(e)};Ko.render=function(r,e,t){if(!SS(e))throw Error(Le(200));return MS(null,r,e,!1,t)};Ko.unmountComponentAtNode=function(r){if(!SS(r))throw Error(Le(40));return r._reactRootContainer?(ed(function(){MS(null,null,r,!1,function(){r._reactRootContainer=null,r[jl]=null})}),!0):!1};Ko.unstable_batchedUpdates=v4;Ko.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!SS(t))throw Error(Le(200));if(r==null||r._reactInternals===void 0)throw Error(Le(38));return MS(r,e,t,!1,n)};Ko.version="18.2.0-next-9e3b772b8-20220608";(function(r){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),r.exports=Ko})(_V);var BD=_V.exports;tP.createRoot=BD.createRoot,tP.hydrateRoot=BD.hydrateRoot;const Wq="modulepreload",Gq=function(r){return"/"+r},FD={},yn=function(e,t,n){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=Gq(i),i in FD)return;FD[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":Wq,o||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),o)return new Promise((l,c)=>{a.addEventListener("load",l),a.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};var Yq=Object.defineProperty,Xq=(r,e,t)=>e in r?Yq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,F=(r,e,t)=>(Xq(r,typeof e!="symbol"?e+"":e,t),t),Ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K1e(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ri={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",f=1,m=2,g=4,b=1,_=2,w=1,M=2,S=4,C=8,P=16,T=32,L=64,O=128,k=256,N=512,V=30,W="...",ee=800,se=16,q=1,re=2,Z=3,me=1/0,J=9007199254740991,Q=17976931348623157e292,$=0/0,fe=4294967295,he=fe-1,Se=fe>>>1,Re=[["ary",O],["bind",w],["bindKey",M],["curry",C],["curryRight",P],["flip",N],["partial",T],["partialRight",L],["rearg",k]],st="[object Arguments]",ve="[object Array]",St="[object AsyncFunction]",tt="[object Boolean]",Ge="[object Date]",ze="[object DOMException]",Ae="[object Error]",Ce="[object Function]",xe="[object GeneratorFunction]",Ue="[object Map]",Fe="[object Number]",dt="[object Null]",lt="[object Object]",_t="[object Promise]",vt="[object Proxy]",ce="[object RegExp]",te="[object Set]",I="[object String]",B="[object Symbol]",le="[object Undefined]",Te="[object WeakMap]",Ne="[object WeakSet]",Be="[object ArrayBuffer]",nt="[object DataView]",ge="[object Float32Array]",et="[object Float64Array]",Qe="[object Int8Array]",it="[object Int16Array]",qe="[object Int32Array]",bt="[object Uint8Array]",Gt="[object Uint8ClampedArray]",xr="[object Uint16Array]",ne="[object Uint32Array]",Xe=/\b__p \+= '';/g,we=/\b(__p \+=) '' \+/g,Ke=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ie=/&(?:amp|lt|gt|quot|#39);/g,rr=/[&<>"']/g,fr=RegExp(Ie.source),Dr=RegExp(rr.source),xi=/<%-([\s\S]+?)%>/g,Sr=/<%([\s\S]+?)%>/g,ai=/<%=([\s\S]+?)%>/g,Yn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ic=/^\w*$/,Vc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,iu=/[\\^$.*+?()[\]{}|]/g,jm=RegExp(iu.source),zc=/^\s+/,Bc=/\s/,H=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ye=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ee=/[()=,{}\[\]\/\s]/,at=/\\(\\)?/g,Mt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,Nt=/^[-+]0x[0-9a-f]+$/i,Mr=/^0b[01]+$/i,Bt=/^\[object .+?Constructor\]$/,Ft=/^0o[0-7]+$/i,Qr=/^(?:0|[1-9]\d*)$/,gs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ao=/($^)/,li=/['\n\r\u2028\u2029\\]/g,dn="\\ud800-\\udfff",Qt="\\u0300-\\u036f",ea="\\ufe20-\\ufe2f",ta="\\u20d0-\\u20ff",Xn=Qt+ea+ta,lo="\\u2700-\\u27bf",ys="a-z\\xdf-\\xf6\\xf8-\\xff",Fc="\\xac\\xb1\\xd7\\xf7",$r="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ya="\\u2000-\\u206f",ou=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ln="A-Z\\xc0-\\xd6\\xd8-\\xde",su="\\ufe0e\\ufe0f",Ad=Fc+$r+Ya+ou,au="['\u2019]",Uc="["+dn+"]",Ao="["+Ad+"]",ra="["+Xn+"]",Xa="\\d+",kd="["+lo+"]",Ld="["+ys+"]",c_="[^"+dn+Ad+Xa+lo+ys+Ln+"]",qa="\\ud83c[\\udffb-\\udfff]",h_="(?:"+ra+"|"+qa+")",d_="[^"+dn+"]",Od="(?:\\ud83c[\\udde6-\\uddff]){2}",Dd="[\\ud800-\\udbff][\\udc00-\\udfff]",lu="["+Ln+"]",jc="\\u200d",p_="(?:"+Ld+"|"+c_+")",f_="(?:"+lu+"|"+c_+")",Hm="(?:"+au+"(?:d|ll|m|re|s|t|ve))?",m_="(?:"+au+"(?:D|LL|M|RE|S|T|VE))?",v_=h_+"?",g_="["+su+"]?",q2="(?:"+jc+"(?:"+[d_,Od,Dd].join("|")+")"+g_+v_+")*",K2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wm="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",uu=g_+v_+q2,Z2="(?:"+[kd,Od,Dd].join("|")+")"+uu,Hc="(?:"+[d_+ra+"?",ra,Od,Dd,Uc].join("|")+")",J2=RegExp(au,"g"),Gm=RegExp(ra,"g"),Rd=RegExp(qa+"(?="+qa+")|"+Hc+uu,"g"),Q2=RegExp([lu+"?"+Ld+"+"+Hm+"(?="+[Ao,lu,"$"].join("|")+")",f_+"+"+m_+"(?="+[Ao,lu+p_,"$"].join("|")+")",lu+"?"+p_+"+"+Hm,lu+"+"+m_,Wm,K2,Xa,Z2].join("|"),"g"),$2=RegExp("["+jc+dn+Xn+su+"]"),eM=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tM=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rM=-1,Cr={};Cr[ge]=Cr[et]=Cr[Qe]=Cr[it]=Cr[qe]=Cr[bt]=Cr[Gt]=Cr[xr]=Cr[ne]=!0,Cr[st]=Cr[ve]=Cr[Be]=Cr[tt]=Cr[nt]=Cr[Ge]=Cr[Ae]=Cr[Ce]=Cr[Ue]=Cr[Fe]=Cr[lt]=Cr[ce]=Cr[te]=Cr[I]=Cr[Te]=!1;var yr={};yr[st]=yr[ve]=yr[Be]=yr[nt]=yr[tt]=yr[Ge]=yr[ge]=yr[et]=yr[Qe]=yr[it]=yr[qe]=yr[Ue]=yr[Fe]=yr[lt]=yr[ce]=yr[te]=yr[I]=yr[B]=yr[bt]=yr[Gt]=yr[xr]=yr[ne]=!0,yr[Ae]=yr[Ce]=yr[Te]=!1;var nM={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},iM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oM={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},sM={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},aM=parseFloat,lM=parseInt,y_=typeof Ve=="object"&&Ve&&Ve.Object===Object&&Ve,uM=typeof self=="object"&&self&&self.Object===Object&&self,xn=y_||uM||Function("return this")(),Ym=e&&!e.nodeType&&e,Ka=Ym&&!0&&r&&!r.nodeType&&r,__=Ka&&Ka.exports===Ym,Nd=__&&y_.process,uo=function(){try{var X=Ka&&Ka.require&&Ka.require("util").types;return X||Nd&&Nd.binding&&Nd.binding("util")}catch{}}(),Jo=uo&&uo.isArrayBuffer,Xm=uo&&uo.isDate,w_=uo&&uo.isMap,Sn=uo&&uo.isRegExp,b_=uo&&uo.isSet,Wc=uo&&uo.isTypedArray;function Si(X,_e,pe){switch(pe.length){case 0:return X.call(_e);case 1:return X.call(_e,pe[0]);case 2:return X.call(_e,pe[0],pe[1]);case 3:return X.call(_e,pe[0],pe[1],pe[2])}return X.apply(_e,pe)}function qm(X,_e,pe,Ze){for(var wt=-1,It=X==null?0:X.length;++wt<It;){var Er=X[wt];_e(Ze,Er,pe(Er),X)}return Ze}function Fi(X,_e){for(var pe=-1,Ze=X==null?0:X.length;++pe<Ze&&_e(X[pe],pe,X)!==!1;);return X}function cM(X,_e){for(var pe=X==null?0:X.length;pe--&&_e(X[pe],pe,X)!==!1;);return X}function x_(X,_e){for(var pe=-1,Ze=X==null?0:X.length;++pe<Ze;)if(!_e(X[pe],pe,X))return!1;return!0}function na(X,_e){for(var pe=-1,Ze=X==null?0:X.length,wt=0,It=[];++pe<Ze;){var Er=X[pe];_e(Er,pe,X)&&(It[wt++]=Er)}return It}function ia(X,_e){var pe=X==null?0:X.length;return!!pe&&On(X,_e,0)>-1}function qn(X,_e,pe){for(var Ze=-1,wt=X==null?0:X.length;++Ze<wt;)if(pe(_e,X[Ze]))return!0;return!1}function ur(X,_e){for(var pe=-1,Ze=X==null?0:X.length,wt=Array(Ze);++pe<Ze;)wt[pe]=_e(X[pe],pe,X);return wt}function Kn(X,_e){for(var pe=-1,Ze=_e.length,wt=X.length;++pe<Ze;)X[wt+pe]=_e[pe];return X}function Km(X,_e,pe,Ze){var wt=-1,It=X==null?0:X.length;for(Ze&&It&&(pe=X[++wt]);++wt<It;)pe=_e(pe,X[wt],wt,X);return pe}function S_(X,_e,pe,Ze){var wt=X==null?0:X.length;for(Ze&&wt&&(pe=X[--wt]);wt--;)pe=_e(pe,X[wt],wt,X);return pe}function Gc(X,_e){for(var pe=-1,Ze=X==null?0:X.length;++pe<Ze;)if(_e(X[pe],pe,X))return!0;return!1}var Za=Zm("length");function Ar(X){return X.split("")}function M_(X){return X.match(de)||[]}function en(X,_e,pe){var Ze;return pe(X,function(wt,It,Er){if(_e(wt,It,Er))return Ze=It,!1}),Ze}function Yc(X,_e,pe,Ze){for(var wt=X.length,It=pe+(Ze?1:-1);Ze?It--:++It<wt;)if(_e(X[It],It,X))return It;return-1}function On(X,_e,pe){return _e===_e?P_(X,_e,pe):Yc(X,cu,pe)}function hM(X,_e,pe,Ze){for(var wt=pe-1,It=X.length;++wt<It;)if(Ze(X[wt],_e))return wt;return-1}function cu(X){return X!==X}function Id(X,_e){var pe=X==null?0:X.length;return pe?Xc(X,_e)/pe:$}function Zm(X){return function(_e){return _e==null?t:_e[X]}}function Jm(X){return function(_e){return X==null?t:X[_e]}}function Vd(X,_e,pe,Ze,wt){return wt(X,function(It,Er,mr){pe=Ze?(Ze=!1,It):_e(pe,It,Er,mr)}),pe}function dM(X,_e){var pe=X.length;for(X.sort(_e);pe--;)X[pe]=X[pe].value;return X}function Xc(X,_e){for(var pe,Ze=-1,wt=X.length;++Ze<wt;){var It=_e(X[Ze]);It!==t&&(pe=pe===t?It:pe+It)}return pe}function Ja(X,_e){for(var pe=-1,Ze=Array(X);++pe<X;)Ze[pe]=_e(pe);return Ze}function zd(X,_e){return ur(_e,function(pe){return[pe,X[pe]]})}function Qm(X){return X&&X.slice(0,$m(X)+1).replace(zc,"")}function tn(X){return function(_e){return X(_e)}}function Bd(X,_e){return ur(_e,function(pe){return X[pe]})}function Qa(X,_e){return X.has(_e)}function Fd(X,_e){for(var pe=-1,Ze=X.length;++pe<Ze&&On(_e,X[pe],0)>-1;);return pe}function C_(X,_e){for(var pe=X.length;pe--&&On(_e,X[pe],0)>-1;);return pe}function Ud(X,_e){for(var pe=X.length,Ze=0;pe--;)X[pe]===_e&&++Ze;return Ze}var hu=Jm(nM),du=Jm(iM);function jd(X){return"\\"+sM[X]}function pM(X,_e){return X==null?t:X[_e]}function pu(X){return $2.test(X)}function fM(X){return eM.test(X)}function mM(X){for(var _e,pe=[];!(_e=X.next()).done;)pe.push(_e.value);return pe}function _s(X){var _e=-1,pe=Array(X.size);return X.forEach(function(Ze,wt){pe[++_e]=[wt,Ze]}),pe}function E_(X,_e){return function(pe){return X(_e(pe))}}function oa(X,_e){for(var pe=-1,Ze=X.length,wt=0,It=[];++pe<Ze;){var Er=X[pe];(Er===_e||Er===d)&&(X[pe]=d,It[wt++]=pe)}return It}function Hd(X){var _e=-1,pe=Array(X.size);return X.forEach(function(Ze){pe[++_e]=Ze}),pe}function vM(X){var _e=-1,pe=Array(X.size);return X.forEach(function(Ze){pe[++_e]=[Ze,Ze]}),pe}function P_(X,_e,pe){for(var Ze=pe-1,wt=X.length;++Ze<wt;)if(X[Ze]===_e)return Ze;return-1}function gM(X,_e,pe){for(var Ze=pe+1;Ze--;)if(X[Ze]===_e)return Ze;return Ze}function fu(X){return pu(X)?Wd(X):Za(X)}function Dn(X){return pu(X)?_M(X):Ar(X)}function $m(X){for(var _e=X.length;_e--&&Bc.test(X.charAt(_e)););return _e}var yM=Jm(oM);function Wd(X){for(var _e=Rd.lastIndex=0;Rd.test(X);)++_e;return _e}function _M(X){return X.match(Rd)||[]}function T_(X){return X.match(Q2)||[]}var wM=function X(_e){_e=_e==null?xn:ws.defaults(xn.Object(),_e,ws.pick(xn,tM));var pe=_e.Array,Ze=_e.Date,wt=_e.Error,It=_e.Function,Er=_e.Math,mr=_e.Object,Mi=_e.RegExp,bM=_e.String,Ui=_e.TypeError,qc=pe.prototype,A_=It.prototype,$a=mr.prototype,Kc=_e["__core-js_shared__"],Zc=A_.toString,nr=$a.hasOwnProperty,k_=0,ev=function(){var u=/[^.]+$/.exec(Kc&&Kc.keys&&Kc.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Jc=$a.toString,xM=Zc.call(mr),L_=xn._,SM=Mi("^"+Zc.call(nr).replace(iu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qc=__?_e.Buffer:t,bs=_e.Symbol,$c=_e.Uint8Array,tv=Qc?Qc.allocUnsafe:t,Gd=E_(mr.getPrototypeOf,mr),O_=mr.create,Yd=$a.propertyIsEnumerable,eh=qc.splice,D_=bs?bs.isConcatSpreadable:t,el=bs?bs.iterator:t,sa=bs?bs.toStringTag:t,th=function(){try{var u=fh(mr,"defineProperty");return u({},"",{}),u}catch{}}(),rv=_e.clearTimeout!==xn.clearTimeout&&_e.clearTimeout,R_=Ze&&Ze.now!==xn.Date.now&&Ze.now,MM=_e.setTimeout!==xn.setTimeout&&_e.setTimeout,tl=Er.ceil,Xd=Er.floor,nv=mr.getOwnPropertySymbols,CM=Qc?Qc.isBuffer:t,iv=_e.isFinite,EM=qc.join,N_=E_(mr.keys,mr),pn=Er.max,Zn=Er.min,ov=Ze.now,rh=_e.parseInt,I_=Er.random,PM=qc.reverse,aa=fh(_e,"DataView"),nh=fh(_e,"Map"),sv=fh(_e,"Promise"),mu=fh(_e,"Set"),ih=fh(_e,"WeakMap"),rl=fh(mr,"create"),qd=ih&&new ih,la={},TM=mh(aa),AM=mh(nh),av=mh(sv),V_=mh(mu),kM=mh(ih),Kd=bs?bs.prototype:t,oh=Kd?Kd.valueOf:t,Zd=Kd?Kd.toString:t;function z(u){if(rn(u)&&!Et(u)&&!(u instanceof Ut)){if(u instanceof co)return u;if(nr.call(u,"__wrapped__"))return ZL(u)}return new co(u)}var vu=function(){function u(){}return function(p){if(!Fr(p))return{};if(O_)return O_(p);u.prototype=p;var x=new u;return u.prototype=t,x}}();function gu(){}function co(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}z.templateSettings={escape:xi,evaluate:Sr,interpolate:ai,variable:"",imports:{_:z}},z.prototype=gu.prototype,z.prototype.constructor=z,co.prototype=vu(gu.prototype),co.prototype.constructor=co;function Ut(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function LM(){var u=new Ut(this.__wrapped__);return u.__actions__=po(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=po(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=po(this.__views__),u}function OM(){if(this.__filtered__){var u=new Ut(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function DM(){var u=this.__wrapped__.value(),p=this.__dir__,x=Et(u),A=p<0,D=x?u.length:0,U=$9(0,D,this.__views__),G=U.start,K=U.end,ie=K-G,Me=A?K:G-1,Pe=this.__iteratees__,ke=Pe.length,We=0,ot=Zn(ie,this.__takeCount__);if(!x||!A&&D==ie&&ot==ie)return _L(u,this.__actions__);var gt=[];e:for(;ie--&&We<ot;){Me+=p;for(var Ot=-1,yt=u[Me];++Ot<ke;){var jt=Pe[Ot],Kt=jt.iteratee,Oo=jt.type,Gi=Kt(yt);if(Oo==re)yt=Gi;else if(!Gi){if(Oo==q)continue e;break e}}gt[We++]=yt}return gt}Ut.prototype=vu(gu.prototype),Ut.prototype.constructor=Ut;function nl(u){var p=-1,x=u==null?0:u.length;for(this.clear();++p<x;){var A=u[p];this.set(A[0],A[1])}}function RM(){this.__data__=rl?rl(null):{},this.size=0}function NM(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p}function IM(u){var p=this.__data__;if(rl){var x=p[u];return x===l?t:x}return nr.call(p,u)?p[u]:t}function VM(u){var p=this.__data__;return rl?p[u]!==t:nr.call(p,u)}function zM(u,p){var x=this.__data__;return this.size+=this.has(u)?0:1,x[u]=rl&&p===t?l:p,this}nl.prototype.clear=RM,nl.prototype.delete=NM,nl.prototype.get=IM,nl.prototype.has=VM,nl.prototype.set=zM;function xs(u){var p=-1,x=u==null?0:u.length;for(this.clear();++p<x;){var A=u[p];this.set(A[0],A[1])}}function lv(){this.__data__=[],this.size=0}function BM(u){var p=this.__data__,x=ah(p,u);if(x<0)return!1;var A=p.length-1;return x==A?p.pop():eh.call(p,x,1),--this.size,!0}function FM(u){var p=this.__data__,x=ah(p,u);return x<0?t:p[x][1]}function UM(u){return ah(this.__data__,u)>-1}function jM(u,p){var x=this.__data__,A=ah(x,u);return A<0?(++this.size,x.push([u,p])):x[A][1]=p,this}xs.prototype.clear=lv,xs.prototype.delete=BM,xs.prototype.get=FM,xs.prototype.has=UM,xs.prototype.set=jM;function Ss(u){var p=-1,x=u==null?0:u.length;for(this.clear();++p<x;){var A=u[p];this.set(A[0],A[1])}}function HM(){this.size=0,this.__data__={hash:new nl,map:new(nh||xs),string:new nl}}function WM(u){var p=a1(this,u).delete(u);return this.size-=p?1:0,p}function GM(u){return a1(this,u).get(u)}function ua(u){return a1(this,u).has(u)}function z_(u,p){var x=a1(this,u),A=x.size;return x.set(u,p),this.size+=x.size==A?0:1,this}Ss.prototype.clear=HM,Ss.prototype.delete=WM,Ss.prototype.get=GM,Ss.prototype.has=ua,Ss.prototype.set=z_;function il(u){var p=-1,x=u==null?0:u.length;for(this.__data__=new Ss;++p<x;)this.add(u[p])}function YM(u){return this.__data__.set(u,l),this}function uv(u){return this.__data__.has(u)}il.prototype.add=il.prototype.push=YM,il.prototype.has=uv;function ho(u){var p=this.__data__=new xs(u);this.size=p.size}function B_(){this.__data__=new xs,this.size=0}function XM(u){var p=this.__data__,x=p.delete(u);return this.size=p.size,x}function qM(u){return this.__data__.get(u)}function KM(u){return this.__data__.has(u)}function ZM(u,p){var x=this.__data__;if(x instanceof xs){var A=x.__data__;if(!nh||A.length<i-1)return A.push([u,p]),this.size=++x.size,this;x=this.__data__=new Ss(A)}return x.set(u,p),this.size=x.size,this}ho.prototype.clear=B_,ho.prototype.delete=XM,ho.prototype.get=qM,ho.prototype.has=KM,ho.prototype.set=ZM;function Ms(u,p){var x=Et(u),A=!x&&vh(u),D=!x&&!A&&bu(u),U=!x&&!A&&!D&&sp(u),G=x||A||D||U,K=G?Ja(u.length,bM):[],ie=K.length;for(var Me in u)(p||nr.call(u,Me))&&!(G&&(Me=="length"||D&&(Me=="offset"||Me=="parent")||U&&(Me=="buffer"||Me=="byteLength"||Me=="byteOffset")||cl(Me,ie)))&&K.push(Me);return K}function cv(u){var p=u.length;return p?u[xv(0,p-1)]:t}function yu(u,p){return l1(po(u),ol(p,0,u.length))}function JM(u){return l1(po(u))}function Qo(u,p,x){(x!==t&&!Ps(u[p],x)||x===t&&!(p in u))&&Cs(u,p,x)}function sh(u,p,x){var A=u[p];(!(nr.call(u,p)&&Ps(A,x))||x===t&&!(p in u))&&Cs(u,p,x)}function ah(u,p){for(var x=u.length;x--;)if(Ps(u[x][0],p))return x;return-1}function QM(u,p,x,A){return Hi(u,function(D,U,G){p(A,D,x(D),G)}),A}function F_(u,p){return u&&da(p,Jn(p),u)}function $M(u,p){return u&&da(p,mo(p),u)}function Cs(u,p,x){p=="__proto__"&&th?th(u,p,{configurable:!0,enumerable:!0,value:x,writable:!0}):u[p]=x}function ko(u,p){for(var x=-1,A=p.length,D=pe(A),U=u==null;++x<A;)D[x]=U?t:RC(u,p[x]);return D}function ol(u,p,x){return u===u&&(x!==t&&(u=u<=x?u:x),p!==t&&(u=u>=p?u:p)),u}function ji(u,p,x,A,D,U){var G,K=p&f,ie=p&m,Me=p&g;if(x&&(G=D?x(u,A,D,U):x(u)),G!==t)return G;if(!Fr(u))return u;var Pe=Et(u);if(Pe){if(G=t7(u),!K)return po(u,G)}else{var ke=Ci(u),We=ke==Ce||ke==xe;if(bu(u))return xL(u,K);if(ke==lt||ke==st||We&&!D){if(G=ie||We?{}:UL(u),!K)return ie?W9(u,$M(G,u)):H9(u,F_(G,u))}else{if(!yr[ke])return D?u:{};G=r7(u,ke,K)}}U||(U=new ho);var ot=U.get(u);if(ot)return ot;U.set(u,G),vO(u)?u.forEach(function(yt){G.add(ji(yt,p,x,yt,u,U))}):fO(u)&&u.forEach(function(yt,jt){G.set(jt,ji(yt,p,x,jt,u,U))});var gt=Me?ie?wC:_C:ie?mo:Jn,Ot=Pe?t:gt(u);return Fi(Ot||u,function(yt,jt){Ot&&(jt=yt,yt=u[jt]),sh(G,jt,ji(yt,p,x,jt,u,U))}),G}function eC(u){var p=Jn(u);return function(x){return hv(x,u,p)}}function hv(u,p,x){var A=x.length;if(u==null)return!A;for(u=mr(u);A--;){var D=x[A],U=p[D],G=u[D];if(G===t&&!(D in u)||!U(G))return!1}return!0}function U_(u,p,x){if(typeof u!="function")throw new Ui(s);return Cv(function(){u.apply(t,x)},p)}function lh(u,p,x,A){var D=-1,U=ia,G=!0,K=u.length,ie=[],Me=p.length;if(!K)return ie;x&&(p=ur(p,tn(x))),A?(U=qn,G=!1):p.length>=i&&(U=Qa,G=!1,p=new il(p));e:for(;++D<K;){var Pe=u[D],ke=x==null?Pe:x(Pe);if(Pe=A||Pe!==0?Pe:0,G&&ke===ke){for(var We=Me;We--;)if(p[We]===ke)continue e;ie.push(Pe)}else U(p,ke,A)||ie.push(Pe)}return ie}var Hi=PL($o),dv=PL(fv,!0);function tC(u,p){var x=!0;return Hi(u,function(A,D,U){return x=!!p(A,D,U),x}),x}function Jd(u,p,x){for(var A=-1,D=u.length;++A<D;){var U=u[A],G=p(U);if(G!=null&&(K===t?G===G&&!Lo(G):x(G,K)))var K=G,ie=U}return ie}function rC(u,p,x,A){var D=u.length;for(x=Lt(x),x<0&&(x=-x>D?0:D+x),A=A===t||A>D?D:Lt(A),A<0&&(A+=D),A=x>A?0:yO(A);x<A;)u[x++]=p;return u}function Qd(u,p){var x=[];return Hi(u,function(A,D,U){p(A,D,U)&&x.push(A)}),x}function Rn(u,p,x,A,D){var U=-1,G=u.length;for(x||(x=i7),D||(D=[]);++U<G;){var K=u[U];p>0&&x(K)?p>1?Rn(K,p-1,x,A,D):Kn(D,K):A||(D[D.length]=K)}return D}var ca=TL(),pv=TL(!0);function $o(u,p){return u&&ca(u,p,Jn)}function fv(u,p){return u&&pv(u,p,Jn)}function $d(u,p){return na(p,function(x){return hl(u[x])})}function sl(u,p){p=_u(p,u);for(var x=0,A=p.length;u!=null&&x<A;)u=u[pa(p[x++])];return x&&x==A?u:t}function j_(u,p,x){var A=p(u);return Et(u)?A:Kn(A,x(u))}function ui(u){return u==null?u===t?le:dt:sa&&sa in mr(u)?Q9(u):h7(u)}function mv(u,p){return u>p}function uh(u,p){return u!=null&&nr.call(u,p)}function H_(u,p){return u!=null&&p in mr(u)}function nC(u,p,x){return u>=Zn(p,x)&&u<pn(p,x)}function ch(u,p,x){for(var A=x?qn:ia,D=u[0].length,U=u.length,G=U,K=pe(U),ie=1/0,Me=[];G--;){var Pe=u[G];G&&p&&(Pe=ur(Pe,tn(p))),ie=Zn(Pe.length,ie),K[G]=!x&&(p||D>=120&&Pe.length>=120)?new il(G&&Pe):t}Pe=u[0];var ke=-1,We=K[0];e:for(;++ke<D&&Me.length<ie;){var ot=Pe[ke],gt=p?p(ot):ot;if(ot=x||ot!==0?ot:0,!(We?Qa(We,gt):A(Me,gt,x))){for(G=U;--G;){var Ot=K[G];if(!(Ot?Qa(Ot,gt):A(u[G],gt,x)))continue e}We&&We.push(gt),Me.push(ot)}}return Me}function W_(u,p,x,A){return $o(u,function(D,U,G){p(A,x(D),U,G)}),A}function hh(u,p,x){p=_u(p,u),u=GL(u,p);var A=u==null?u:u[pa(es(p))];return A==null?t:Si(A,u,x)}function ep(u){return rn(u)&&ui(u)==st}function iC(u){return rn(u)&&ui(u)==Be}function ha(u){return rn(u)&&ui(u)==Ge}function dh(u,p,x,A,D){return u===p?!0:u==null||p==null||!rn(u)&&!rn(p)?u!==u&&p!==p:oC(u,p,x,A,dh,D)}function oC(u,p,x,A,D,U){var G=Et(u),K=Et(p),ie=G?ve:Ci(u),Me=K?ve:Ci(p);ie=ie==st?lt:ie,Me=Me==st?lt:Me;var Pe=ie==lt,ke=Me==lt,We=ie==Me;if(We&&bu(u)){if(!bu(p))return!1;G=!0,Pe=!1}if(We&&!Pe)return U||(U=new ho),G||sp(u)?zL(u,p,x,A,D,U):Z9(u,p,ie,x,A,D,U);if(!(x&b)){var ot=Pe&&nr.call(u,"__wrapped__"),gt=ke&&nr.call(p,"__wrapped__");if(ot||gt){var Ot=ot?u.value():u,yt=gt?p.value():p;return U||(U=new ho),D(Ot,yt,x,A,U)}}return We?(U||(U=new ho),J9(u,p,x,A,D,U)):!1}function vv(u){return rn(u)&&Ci(u)==Ue}function gv(u,p,x,A){var D=x.length,U=D,G=!A;if(u==null)return!U;for(u=mr(u);D--;){var K=x[D];if(G&&K[2]?K[1]!==u[K[0]]:!(K[0]in u))return!1}for(;++D<U;){K=x[D];var ie=K[0],Me=u[ie],Pe=K[1];if(G&&K[2]){if(Me===t&&!(ie in u))return!1}else{var ke=new ho;if(A)var We=A(Me,Pe,ie,u,p,ke);if(!(We===t?dh(Pe,Me,b|_,A,ke):We))return!1}}return!0}function G_(u){if(!Fr(u)||s7(u))return!1;var p=hl(u)?SM:Bt;return p.test(mh(u))}function Y_(u){return rn(u)&&ui(u)==ce}function sC(u){return rn(u)&&Ci(u)==te}function aC(u){return rn(u)&&f1(u.length)&&!!Cr[ui(u)]}function X_(u){return typeof u=="function"?u:u==null?vo:typeof u=="object"?Et(u)?Z_(u[0],u[1]):K_(u):AO(u)}function yv(u){if(!Mv(u))return N_(u);var p=[];for(var x in mr(u))nr.call(u,x)&&x!="constructor"&&p.push(x);return p}function lC(u){if(!Fr(u))return c7(u);var p=Mv(u),x=[];for(var A in u)A=="constructor"&&(p||!nr.call(u,A))||x.push(A);return x}function _v(u,p){return u<p}function q_(u,p){var x=-1,A=fo(u)?pe(u.length):[];return Hi(u,function(D,U,G){A[++x]=p(D,U,G)}),A}function K_(u){var p=xC(u);return p.length==1&&p[0][2]?HL(p[0][0],p[0][1]):function(x){return x===u||gv(x,u,p)}}function Z_(u,p){return MC(u)&&jL(p)?HL(pa(u),p):function(x){var A=RC(x,u);return A===t&&A===p?NC(x,u):dh(p,A,b|_)}}function ph(u,p,x,A,D){u!==p&&ca(p,function(U,G){if(D||(D=new ho),Fr(U))J_(u,p,G,x,ph,A,D);else{var K=A?A(EC(u,G),U,G+"",u,p,D):t;K===t&&(K=U),Qo(u,G,K)}},mo)}function J_(u,p,x,A,D,U,G){var K=EC(u,x),ie=EC(p,x),Me=G.get(ie);if(Me){Qo(u,x,Me);return}var Pe=U?U(K,ie,x+"",u,p,G):t,ke=Pe===t;if(ke){var We=Et(ie),ot=!We&&bu(ie),gt=!We&&!ot&&sp(ie);Pe=ie,We||ot||gt?Et(K)?Pe=K:fn(K)?Pe=po(K):ot?(ke=!1,Pe=xL(ie,!0)):gt?(ke=!1,Pe=SL(ie,!0)):Pe=[]:Ev(ie)||vh(ie)?(Pe=K,vh(K)?Pe=_O(K):(!Fr(K)||hl(K))&&(Pe=UL(ie))):ke=!1}ke&&(G.set(ie,Pe),D(Pe,ie,A,U,G),G.delete(ie)),Qo(u,x,Pe)}function wv(u,p){var x=u.length;if(x)return p+=p<0?x:0,cl(p,x)?u[p]:t}function Q_(u,p,x){p.length?p=ur(p,function(U){return Et(U)?function(G){return sl(G,U.length===1?U[0]:U)}:U}):p=[vo];var A=-1;p=ur(p,tn(mt()));var D=q_(u,function(U,G,K){var ie=ur(p,function(Me){return Me(U)});return{criteria:ie,index:++A,value:U}});return dM(D,function(U,G){return j9(U,G,x)})}function uC(u,p){return $_(u,p,function(x,A){return NC(u,A)})}function $_(u,p,x){for(var A=-1,D=p.length,U={};++A<D;){var G=p[A],K=sl(u,G);x(K,G)&&h(U,_u(G,u),K)}return U}function cC(u){return function(p){return sl(p,u)}}function bv(u,p,x,A){var D=A?hM:On,U=-1,G=p.length,K=u;for(u===p&&(p=po(p)),x&&(K=ur(u,tn(x)));++U<G;)for(var ie=0,Me=p[U],Pe=x?x(Me):Me;(ie=D(K,Pe,ie,A))>-1;)K!==u&&eh.call(K,ie,1),eh.call(u,ie,1);return u}function e1(u,p){for(var x=u?p.length:0,A=x-1;x--;){var D=p[x];if(x==A||D!==U){var U=D;cl(D)?eh.call(u,D,1):Es(u,D)}}return u}function xv(u,p){return u+Xd(I_()*(p-u+1))}function hC(u,p,x,A){for(var D=-1,U=pn(tl((p-u)/(x||1)),0),G=pe(U);U--;)G[A?U:++D]=u,u+=x;return G}function tp(u,p){var x="";if(!u||p<1||p>J)return x;do p%2&&(x+=u),p=Xd(p/2),p&&(u+=u);while(p);return x}function kt(u,p){return PC(WL(u,p,vo),u+"")}function dC(u){return cv(ap(u))}function y(u,p){var x=ap(u);return l1(x,ol(p,0,x.length))}function h(u,p,x,A){if(!Fr(u))return u;p=_u(p,u);for(var D=-1,U=p.length,G=U-1,K=u;K!=null&&++D<U;){var ie=pa(p[D]),Me=x;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return u;if(D!=G){var Pe=K[ie];Me=A?A(Pe,ie,K):t,Me===t&&(Me=Fr(Pe)?Pe:cl(p[D+1])?[]:{})}sh(K,ie,Me),K=K[ie]}return u}var v=qd?function(u,p){return qd.set(u,p),u}:vo,E=th?function(u,p){return th(u,"toString",{configurable:!0,enumerable:!1,value:VC(p),writable:!0})}:vo;function R(u){return l1(ap(u))}function Y(u,p,x){var A=-1,D=u.length;p<0&&(p=-p>D?0:D+p),x=x>D?D:x,x<0&&(x+=D),D=p>x?0:x-p>>>0,p>>>=0;for(var U=pe(D);++A<D;)U[A]=u[A+p];return U}function oe(u,p){var x;return Hi(u,function(A,D,U){return x=p(A,D,U),!x}),!!x}function Oe(u,p,x){var A=0,D=u==null?A:u.length;if(typeof p=="number"&&p===p&&D<=Se){for(;A<D;){var U=A+D>>>1,G=u[U];G!==null&&!Lo(G)&&(x?G<=p:G<p)?A=U+1:D=U}return D}return ut(u,p,vo,x)}function ut(u,p,x,A){var D=0,U=u==null?0:u.length;if(U===0)return 0;p=x(p);for(var G=p!==p,K=p===null,ie=Lo(p),Me=p===t;D<U;){var Pe=Xd((D+U)/2),ke=x(u[Pe]),We=ke!==t,ot=ke===null,gt=ke===ke,Ot=Lo(ke);if(G)var yt=A||gt;else Me?yt=gt&&(A||We):K?yt=gt&&We&&(A||!ot):ie?yt=gt&&We&&!ot&&(A||!Ot):ot||Ot?yt=!1:yt=A?ke<=p:ke<p;yt?D=Pe+1:U=Pe}return Zn(U,he)}function ft(u,p){for(var x=-1,A=u.length,D=0,U=[];++x<A;){var G=u[x],K=p?p(G):G;if(!x||!Ps(K,ie)){var ie=K;U[D++]=G===0?0:G}}return U}function qt(u){return typeof u=="number"?u:Lo(u)?$:+u}function Tt(u){if(typeof u=="string")return u;if(Et(u))return ur(u,Tt)+"";if(Lo(u))return Zd?Zd.call(u):"";var p=u+"";return p=="0"&&1/u==-me?"-0":p}function ci(u,p,x){var A=-1,D=ia,U=u.length,G=!0,K=[],ie=K;if(x)G=!1,D=qn;else if(U>=i){var Me=p?null:q9(u);if(Me)return Hd(Me);G=!1,D=Qa,ie=new il}else ie=p?[]:K;e:for(;++A<U;){var Pe=u[A],ke=p?p(Pe):Pe;if(Pe=x||Pe!==0?Pe:0,G&&ke===ke){for(var We=ie.length;We--;)if(ie[We]===ke)continue e;p&&ie.push(ke),K.push(Pe)}else D(ie,ke,x)||(ie!==K&&ie.push(ke),K.push(Pe))}return K}function Es(u,p){return p=_u(p,u),u=GL(u,p),u==null||delete u[pa(es(p))]}function al(u,p,x,A){return h(u,p,x(sl(u,p)),A)}function rp(u,p,x,A){for(var D=u.length,U=A?D:-1;(A?U--:++U<D)&&p(u[U],U,u););return x?Y(u,A?0:U,A?U+1:D):Y(u,A?U+1:0,A?D:U)}function _L(u,p){var x=u;return x instanceof Ut&&(x=x.value()),Km(p,function(A,D){return D.func.apply(D.thisArg,Kn([A],D.args))},x)}function pC(u,p,x){var A=u.length;if(A<2)return A?ci(u[0]):[];for(var D=-1,U=pe(A);++D<A;)for(var G=u[D],K=-1;++K<A;)K!=D&&(U[D]=lh(U[D]||G,u[K],p,x));return ci(Rn(U,1),p,x)}function wL(u,p,x){for(var A=-1,D=u.length,U=p.length,G={};++A<D;){var K=A<U?p[A]:t;x(G,u[A],K)}return G}function fC(u){return fn(u)?u:[]}function mC(u){return typeof u=="function"?u:vo}function _u(u,p){return Et(u)?u:MC(u,p)?[u]:KL(cr(u))}var z9=kt;function wu(u,p,x){var A=u.length;return x=x===t?A:x,!p&&x>=A?u:Y(u,p,x)}var bL=rv||function(u){return xn.clearTimeout(u)};function xL(u,p){if(p)return u.slice();var x=u.length,A=tv?tv(x):new u.constructor(x);return u.copy(A),A}function vC(u){var p=new u.constructor(u.byteLength);return new $c(p).set(new $c(u)),p}function B9(u,p){var x=p?vC(u.buffer):u.buffer;return new u.constructor(x,u.byteOffset,u.byteLength)}function F9(u){var p=new u.constructor(u.source,pt.exec(u));return p.lastIndex=u.lastIndex,p}function U9(u){return oh?mr(oh.call(u)):{}}function SL(u,p){var x=p?vC(u.buffer):u.buffer;return new u.constructor(x,u.byteOffset,u.length)}function ML(u,p){if(u!==p){var x=u!==t,A=u===null,D=u===u,U=Lo(u),G=p!==t,K=p===null,ie=p===p,Me=Lo(p);if(!K&&!Me&&!U&&u>p||U&&G&&ie&&!K&&!Me||A&&G&&ie||!x&&ie||!D)return 1;if(!A&&!U&&!Me&&u<p||Me&&x&&D&&!A&&!U||K&&x&&D||!G&&D||!ie)return-1}return 0}function j9(u,p,x){for(var A=-1,D=u.criteria,U=p.criteria,G=D.length,K=x.length;++A<G;){var ie=ML(D[A],U[A]);if(ie){if(A>=K)return ie;var Me=x[A];return ie*(Me=="desc"?-1:1)}}return u.index-p.index}function CL(u,p,x,A){for(var D=-1,U=u.length,G=x.length,K=-1,ie=p.length,Me=pn(U-G,0),Pe=pe(ie+Me),ke=!A;++K<ie;)Pe[K]=p[K];for(;++D<G;)(ke||D<U)&&(Pe[x[D]]=u[D]);for(;Me--;)Pe[K++]=u[D++];return Pe}function EL(u,p,x,A){for(var D=-1,U=u.length,G=-1,K=x.length,ie=-1,Me=p.length,Pe=pn(U-K,0),ke=pe(Pe+Me),We=!A;++D<Pe;)ke[D]=u[D];for(var ot=D;++ie<Me;)ke[ot+ie]=p[ie];for(;++G<K;)(We||D<U)&&(ke[ot+x[G]]=u[D++]);return ke}function po(u,p){var x=-1,A=u.length;for(p||(p=pe(A));++x<A;)p[x]=u[x];return p}function da(u,p,x,A){var D=!x;x||(x={});for(var U=-1,G=p.length;++U<G;){var K=p[U],ie=A?A(x[K],u[K],K,x,u):t;ie===t&&(ie=u[K]),D?Cs(x,K,ie):sh(x,K,ie)}return x}function H9(u,p){return da(u,SC(u),p)}function W9(u,p){return da(u,BL(u),p)}function t1(u,p){return function(x,A){var D=Et(x)?qm:QM,U=p?p():{};return D(x,u,mt(A,2),U)}}function np(u){return kt(function(p,x){var A=-1,D=x.length,U=D>1?x[D-1]:t,G=D>2?x[2]:t;for(U=u.length>3&&typeof U=="function"?(D--,U):t,G&&Wi(x[0],x[1],G)&&(U=D<3?t:U,D=1),p=mr(p);++A<D;){var K=x[A];K&&u(p,K,A,U)}return p})}function PL(u,p){return function(x,A){if(x==null)return x;if(!fo(x))return u(x,A);for(var D=x.length,U=p?D:-1,G=mr(x);(p?U--:++U<D)&&A(G[U],U,G)!==!1;);return x}}function TL(u){return function(p,x,A){for(var D=-1,U=mr(p),G=A(p),K=G.length;K--;){var ie=G[u?K:++D];if(x(U[ie],ie,U)===!1)break}return p}}function G9(u,p,x){var A=p&w,D=Sv(u);function U(){var G=this&&this!==xn&&this instanceof U?D:u;return G.apply(A?x:this,arguments)}return U}function AL(u){return function(p){p=cr(p);var x=pu(p)?Dn(p):t,A=x?x[0]:p.charAt(0),D=x?wu(x,1).join(""):p.slice(1);return A[u]()+D}}function ip(u){return function(p){return Km(PO(EO(p).replace(J2,"")),u,"")}}function Sv(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var x=vu(u.prototype),A=u.apply(x,p);return Fr(A)?A:x}}function Y9(u,p,x){var A=Sv(u);function D(){for(var U=arguments.length,G=pe(U),K=U,ie=op(D);K--;)G[K]=arguments[K];var Me=U<3&&G[0]!==ie&&G[U-1]!==ie?[]:oa(G,ie);if(U-=Me.length,U<x)return RL(u,p,r1,D.placeholder,t,G,Me,t,t,x-U);var Pe=this&&this!==xn&&this instanceof D?A:u;return Si(Pe,this,G)}return D}function kL(u){return function(p,x,A){var D=mr(p);if(!fo(p)){var U=mt(x,3);p=Jn(p),x=function(K){return U(D[K],K,D)}}var G=u(p,x,A);return G>-1?D[U?p[G]:G]:t}}function LL(u){return ul(function(p){var x=p.length,A=x,D=co.prototype.thru;for(u&&p.reverse();A--;){var U=p[A];if(typeof U!="function")throw new Ui(s);if(D&&!G&&s1(U)=="wrapper")var G=new co([],!0)}for(A=G?A:x;++A<x;){U=p[A];var K=s1(U),ie=K=="wrapper"?bC(U):t;ie&&CC(ie[0])&&ie[1]==(O|C|T|k)&&!ie[4].length&&ie[9]==1?G=G[s1(ie[0])].apply(G,ie[3]):G=U.length==1&&CC(U)?G[K]():G.thru(U)}return function(){var Me=arguments,Pe=Me[0];if(G&&Me.length==1&&Et(Pe))return G.plant(Pe).value();for(var ke=0,We=x?p[ke].apply(this,Me):Pe;++ke<x;)We=p[ke].call(this,We);return We}})}function r1(u,p,x,A,D,U,G,K,ie,Me){var Pe=p&O,ke=p&w,We=p&M,ot=p&(C|P),gt=p&N,Ot=We?t:Sv(u);function yt(){for(var jt=arguments.length,Kt=pe(jt),Oo=jt;Oo--;)Kt[Oo]=arguments[Oo];if(ot)var Gi=op(yt),Do=Ud(Kt,Gi);if(A&&(Kt=CL(Kt,A,D,ot)),U&&(Kt=EL(Kt,U,G,ot)),jt-=Do,ot&&jt<Me){var mn=oa(Kt,Gi);return RL(u,p,r1,yt.placeholder,x,Kt,mn,K,ie,Me-jt)}var Ts=ke?x:this,pl=We?Ts[u]:u;return jt=Kt.length,K?Kt=d7(Kt,K):gt&&jt>1&&Kt.reverse(),Pe&&ie<jt&&(Kt.length=ie),this&&this!==xn&&this instanceof yt&&(pl=Ot||Sv(pl)),pl.apply(Ts,Kt)}return yt}function OL(u,p){return function(x,A){return W_(x,u,p(A),{})}}function n1(u,p){return function(x,A){var D;if(x===t&&A===t)return p;if(x!==t&&(D=x),A!==t){if(D===t)return A;typeof x=="string"||typeof A=="string"?(x=Tt(x),A=Tt(A)):(x=qt(x),A=qt(A)),D=u(x,A)}return D}}function gC(u){return ul(function(p){return p=ur(p,tn(mt())),kt(function(x){var A=this;return u(p,function(D){return Si(D,A,x)})})})}function i1(u,p){p=p===t?" ":Tt(p);var x=p.length;if(x<2)return x?tp(p,u):p;var A=tp(p,tl(u/fu(p)));return pu(p)?wu(Dn(A),0,u).join(""):A.slice(0,u)}function X9(u,p,x,A){var D=p&w,U=Sv(u);function G(){for(var K=-1,ie=arguments.length,Me=-1,Pe=A.length,ke=pe(Pe+ie),We=this&&this!==xn&&this instanceof G?U:u;++Me<Pe;)ke[Me]=A[Me];for(;ie--;)ke[Me++]=arguments[++K];return Si(We,D?x:this,ke)}return G}function DL(u){return function(p,x,A){return A&&typeof A!="number"&&Wi(p,x,A)&&(x=A=t),p=dl(p),x===t?(x=p,p=0):x=dl(x),A=A===t?p<x?1:-1:dl(A),hC(p,x,A,u)}}function o1(u){return function(p,x){return typeof p=="string"&&typeof x=="string"||(p=ts(p),x=ts(x)),u(p,x)}}function RL(u,p,x,A,D,U,G,K,ie,Me){var Pe=p&C,ke=Pe?G:t,We=Pe?t:G,ot=Pe?U:t,gt=Pe?t:U;p|=Pe?T:L,p&=~(Pe?L:T),p&S||(p&=~(w|M));var Ot=[u,p,D,ot,ke,gt,We,K,ie,Me],yt=x.apply(t,Ot);return CC(u)&&YL(yt,Ot),yt.placeholder=A,XL(yt,u,p)}function yC(u){var p=Er[u];return function(x,A){if(x=ts(x),A=A==null?0:Zn(Lt(A),292),A&&iv(x)){var D=(cr(x)+"e").split("e"),U=p(D[0]+"e"+(+D[1]+A));return D=(cr(U)+"e").split("e"),+(D[0]+"e"+(+D[1]-A))}return p(x)}}var q9=mu&&1/Hd(new mu([,-0]))[1]==me?function(u){return new mu(u)}:FC;function NL(u){return function(p){var x=Ci(p);return x==Ue?_s(p):x==te?vM(p):zd(p,u(p))}}function ll(u,p,x,A,D,U,G,K){var ie=p&M;if(!ie&&typeof u!="function")throw new Ui(s);var Me=A?A.length:0;if(Me||(p&=~(T|L),A=D=t),G=G===t?G:pn(Lt(G),0),K=K===t?K:Lt(K),Me-=D?D.length:0,p&L){var Pe=A,ke=D;A=D=t}var We=ie?t:bC(u),ot=[u,p,x,A,D,Pe,ke,U,G,K];if(We&&u7(ot,We),u=ot[0],p=ot[1],x=ot[2],A=ot[3],D=ot[4],K=ot[9]=ot[9]===t?ie?0:u.length:pn(ot[9]-Me,0),!K&&p&(C|P)&&(p&=~(C|P)),!p||p==w)var gt=G9(u,p,x);else p==C||p==P?gt=Y9(u,p,K):(p==T||p==(w|T))&&!D.length?gt=X9(u,p,x,A):gt=r1.apply(t,ot);var Ot=We?v:YL;return XL(Ot(gt,ot),u,p)}function IL(u,p,x,A){return u===t||Ps(u,$a[x])&&!nr.call(A,x)?p:u}function VL(u,p,x,A,D,U){return Fr(u)&&Fr(p)&&(U.set(p,u),ph(u,p,t,VL,U),U.delete(p)),u}function K9(u){return Ev(u)?t:u}function zL(u,p,x,A,D,U){var G=x&b,K=u.length,ie=p.length;if(K!=ie&&!(G&&ie>K))return!1;var Me=U.get(u),Pe=U.get(p);if(Me&&Pe)return Me==p&&Pe==u;var ke=-1,We=!0,ot=x&_?new il:t;for(U.set(u,p),U.set(p,u);++ke<K;){var gt=u[ke],Ot=p[ke];if(A)var yt=G?A(Ot,gt,ke,p,u,U):A(gt,Ot,ke,u,p,U);if(yt!==t){if(yt)continue;We=!1;break}if(ot){if(!Gc(p,function(jt,Kt){if(!Qa(ot,Kt)&&(gt===jt||D(gt,jt,x,A,U)))return ot.push(Kt)})){We=!1;break}}else if(!(gt===Ot||D(gt,Ot,x,A,U))){We=!1;break}}return U.delete(u),U.delete(p),We}function Z9(u,p,x,A,D,U,G){switch(x){case nt:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case Be:return!(u.byteLength!=p.byteLength||!U(new $c(u),new $c(p)));case tt:case Ge:case Fe:return Ps(+u,+p);case Ae:return u.name==p.name&&u.message==p.message;case ce:case I:return u==p+"";case Ue:var K=_s;case te:var ie=A&b;if(K||(K=Hd),u.size!=p.size&&!ie)return!1;var Me=G.get(u);if(Me)return Me==p;A|=_,G.set(u,p);var Pe=zL(K(u),K(p),A,D,U,G);return G.delete(u),Pe;case B:if(oh)return oh.call(u)==oh.call(p)}return!1}function J9(u,p,x,A,D,U){var G=x&b,K=_C(u),ie=K.length,Me=_C(p),Pe=Me.length;if(ie!=Pe&&!G)return!1;for(var ke=ie;ke--;){var We=K[ke];if(!(G?We in p:nr.call(p,We)))return!1}var ot=U.get(u),gt=U.get(p);if(ot&&gt)return ot==p&&gt==u;var Ot=!0;U.set(u,p),U.set(p,u);for(var yt=G;++ke<ie;){We=K[ke];var jt=u[We],Kt=p[We];if(A)var Oo=G?A(Kt,jt,We,p,u,U):A(jt,Kt,We,u,p,U);if(!(Oo===t?jt===Kt||D(jt,Kt,x,A,U):Oo)){Ot=!1;break}yt||(yt=We=="constructor")}if(Ot&&!yt){var Gi=u.constructor,Do=p.constructor;Gi!=Do&&"constructor"in u&&"constructor"in p&&!(typeof Gi=="function"&&Gi instanceof Gi&&typeof Do=="function"&&Do instanceof Do)&&(Ot=!1)}return U.delete(u),U.delete(p),Ot}function ul(u){return PC(WL(u,t,$L),u+"")}function _C(u){return j_(u,Jn,SC)}function wC(u){return j_(u,mo,BL)}var bC=qd?function(u){return qd.get(u)}:FC;function s1(u){for(var p=u.name+"",x=la[p],A=nr.call(la,p)?x.length:0;A--;){var D=x[A],U=D.func;if(U==null||U==u)return D.name}return p}function op(u){var p=nr.call(z,"placeholder")?z:u;return p.placeholder}function mt(){var u=z.iteratee||zC;return u=u===zC?X_:u,arguments.length?u(arguments[0],arguments[1]):u}function a1(u,p){var x=u.__data__;return o7(p)?x[typeof p=="string"?"string":"hash"]:x.map}function xC(u){for(var p=Jn(u),x=p.length;x--;){var A=p[x],D=u[A];p[x]=[A,D,jL(D)]}return p}function fh(u,p){var x=pM(u,p);return G_(x)?x:t}function Q9(u){var p=nr.call(u,sa),x=u[sa];try{u[sa]=t;var A=!0}catch{}var D=Jc.call(u);return A&&(p?u[sa]=x:delete u[sa]),D}var SC=nv?function(u){return u==null?[]:(u=mr(u),na(nv(u),function(p){return Yd.call(u,p)}))}:UC,BL=nv?function(u){for(var p=[];u;)Kn(p,SC(u)),u=Gd(u);return p}:UC,Ci=ui;(aa&&Ci(new aa(new ArrayBuffer(1)))!=nt||nh&&Ci(new nh)!=Ue||sv&&Ci(sv.resolve())!=_t||mu&&Ci(new mu)!=te||ih&&Ci(new ih)!=Te)&&(Ci=function(u){var p=ui(u),x=p==lt?u.constructor:t,A=x?mh(x):"";if(A)switch(A){case TM:return nt;case AM:return Ue;case av:return _t;case V_:return te;case kM:return Te}return p});function $9(u,p,x){for(var A=-1,D=x.length;++A<D;){var U=x[A],G=U.size;switch(U.type){case"drop":u+=G;break;case"dropRight":p-=G;break;case"take":p=Zn(p,u+G);break;case"takeRight":u=pn(u,p-G);break}}return{start:u,end:p}}function e7(u){var p=u.match(ue);return p?p[1].split(ye):[]}function FL(u,p,x){p=_u(p,u);for(var A=-1,D=p.length,U=!1;++A<D;){var G=pa(p[A]);if(!(U=u!=null&&x(u,G)))break;u=u[G]}return U||++A!=D?U:(D=u==null?0:u.length,!!D&&f1(D)&&cl(G,D)&&(Et(u)||vh(u)))}function t7(u){var p=u.length,x=new u.constructor(p);return p&&typeof u[0]=="string"&&nr.call(u,"index")&&(x.index=u.index,x.input=u.input),x}function UL(u){return typeof u.constructor=="function"&&!Mv(u)?vu(Gd(u)):{}}function r7(u,p,x){var A=u.constructor;switch(p){case Be:return vC(u);case tt:case Ge:return new A(+u);case nt:return B9(u,x);case ge:case et:case Qe:case it:case qe:case bt:case Gt:case xr:case ne:return SL(u,x);case Ue:return new A;case Fe:case I:return new A(u);case ce:return F9(u);case te:return new A;case B:return U9(u)}}function n7(u,p){var x=p.length;if(!x)return u;var A=x-1;return p[A]=(x>1?"& ":"")+p[A],p=p.join(x>2?", ":" "),u.replace(H,`{
/* [wrapped with `+p+`] */
`)}function i7(u){return Et(u)||vh(u)||!!(D_&&u&&u[D_])}function cl(u,p){var x=typeof u;return p=p==null?J:p,!!p&&(x=="number"||x!="symbol"&&Qr.test(u))&&u>-1&&u%1==0&&u<p}function Wi(u,p,x){if(!Fr(x))return!1;var A=typeof p;return(A=="number"?fo(x)&&cl(p,x.length):A=="string"&&p in x)?Ps(x[p],u):!1}function MC(u,p){if(Et(u))return!1;var x=typeof u;return x=="number"||x=="symbol"||x=="boolean"||u==null||Lo(u)?!0:Ic.test(u)||!Yn.test(u)||p!=null&&u in mr(p)}function o7(u){var p=typeof u;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?u!=="__proto__":u===null}function CC(u){var p=s1(u),x=z[p];if(typeof x!="function"||!(p in Ut.prototype))return!1;if(u===x)return!0;var A=bC(x);return!!A&&u===A[0]}function s7(u){return!!ev&&ev in u}var a7=Kc?hl:jC;function Mv(u){var p=u&&u.constructor,x=typeof p=="function"&&p.prototype||$a;return u===x}function jL(u){return u===u&&!Fr(u)}function HL(u,p){return function(x){return x==null?!1:x[u]===p&&(p!==t||u in mr(x))}}function l7(u){var p=d1(u,function(A){return x.size===c&&x.clear(),A}),x=p.cache;return p}function u7(u,p){var x=u[1],A=p[1],D=x|A,U=D<(w|M|O),G=A==O&&x==C||A==O&&x==k&&u[7].length<=p[8]||A==(O|k)&&p[7].length<=p[8]&&x==C;if(!(U||G))return u;A&w&&(u[2]=p[2],D|=x&w?0:S);var K=p[3];if(K){var ie=u[3];u[3]=ie?CL(ie,K,p[4]):K,u[4]=ie?oa(u[3],d):p[4]}return K=p[5],K&&(ie=u[5],u[5]=ie?EL(ie,K,p[6]):K,u[6]=ie?oa(u[5],d):p[6]),K=p[7],K&&(u[7]=K),A&O&&(u[8]=u[8]==null?p[8]:Zn(u[8],p[8])),u[9]==null&&(u[9]=p[9]),u[0]=p[0],u[1]=D,u}function c7(u){var p=[];if(u!=null)for(var x in mr(u))p.push(x);return p}function h7(u){return Jc.call(u)}function WL(u,p,x){return p=pn(p===t?u.length-1:p,0),function(){for(var A=arguments,D=-1,U=pn(A.length-p,0),G=pe(U);++D<U;)G[D]=A[p+D];D=-1;for(var K=pe(p+1);++D<p;)K[D]=A[D];return K[p]=x(G),Si(u,this,K)}}function GL(u,p){return p.length<2?u:sl(u,Y(p,0,-1))}function d7(u,p){for(var x=u.length,A=Zn(p.length,x),D=po(u);A--;){var U=p[A];u[A]=cl(U,x)?D[U]:t}return u}function EC(u,p){if(!(p==="constructor"&&typeof u[p]=="function")&&p!="__proto__")return u[p]}var YL=qL(v),Cv=MM||function(u,p){return xn.setTimeout(u,p)},PC=qL(E);function XL(u,p,x){var A=p+"";return PC(u,n7(A,p7(e7(A),x)))}function qL(u){var p=0,x=0;return function(){var A=ov(),D=se-(A-x);if(x=A,D>0){if(++p>=ee)return arguments[0]}else p=0;return u.apply(t,arguments)}}function l1(u,p){var x=-1,A=u.length,D=A-1;for(p=p===t?A:p;++x<p;){var U=xv(x,D),G=u[U];u[U]=u[x],u[x]=G}return u.length=p,u}var KL=l7(function(u){var p=[];return u.charCodeAt(0)===46&&p.push(""),u.replace(Vc,function(x,A,D,U){p.push(D?U.replace(at,"$1"):A||x)}),p});function pa(u){if(typeof u=="string"||Lo(u))return u;var p=u+"";return p=="0"&&1/u==-me?"-0":p}function mh(u){if(u!=null){try{return Zc.call(u)}catch{}try{return u+""}catch{}}return""}function p7(u,p){return Fi(Re,function(x){var A="_."+x[0];p&x[1]&&!ia(u,A)&&u.push(A)}),u.sort()}function ZL(u){if(u instanceof Ut)return u.clone();var p=new co(u.__wrapped__,u.__chain__);return p.__actions__=po(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}function f7(u,p,x){(x?Wi(u,p,x):p===t)?p=1:p=pn(Lt(p),0);var A=u==null?0:u.length;if(!A||p<1)return[];for(var D=0,U=0,G=pe(tl(A/p));D<A;)G[U++]=Y(u,D,D+=p);return G}function m7(u){for(var p=-1,x=u==null?0:u.length,A=0,D=[];++p<x;){var U=u[p];U&&(D[A++]=U)}return D}function v7(){var u=arguments.length;if(!u)return[];for(var p=pe(u-1),x=arguments[0],A=u;A--;)p[A-1]=arguments[A];return Kn(Et(x)?po(x):[x],Rn(p,1))}var g7=kt(function(u,p){return fn(u)?lh(u,Rn(p,1,fn,!0)):[]}),y7=kt(function(u,p){var x=es(p);return fn(x)&&(x=t),fn(u)?lh(u,Rn(p,1,fn,!0),mt(x,2)):[]}),_7=kt(function(u,p){var x=es(p);return fn(x)&&(x=t),fn(u)?lh(u,Rn(p,1,fn,!0),t,x):[]});function w7(u,p,x){var A=u==null?0:u.length;return A?(p=x||p===t?1:Lt(p),Y(u,p<0?0:p,A)):[]}function b7(u,p,x){var A=u==null?0:u.length;return A?(p=x||p===t?1:Lt(p),p=A-p,Y(u,0,p<0?0:p)):[]}function x7(u,p){return u&&u.length?rp(u,mt(p,3),!0,!0):[]}function S7(u,p){return u&&u.length?rp(u,mt(p,3),!0):[]}function M7(u,p,x,A){var D=u==null?0:u.length;return D?(x&&typeof x!="number"&&Wi(u,p,x)&&(x=0,A=D),rC(u,p,x,A)):[]}function JL(u,p,x){var A=u==null?0:u.length;if(!A)return-1;var D=x==null?0:Lt(x);return D<0&&(D=pn(A+D,0)),Yc(u,mt(p,3),D)}function QL(u,p,x){var A=u==null?0:u.length;if(!A)return-1;var D=A-1;return x!==t&&(D=Lt(x),D=x<0?pn(A+D,0):Zn(D,A-1)),Yc(u,mt(p,3),D,!0)}function $L(u){var p=u==null?0:u.length;return p?Rn(u,1):[]}function C7(u){var p=u==null?0:u.length;return p?Rn(u,me):[]}function E7(u,p){var x=u==null?0:u.length;return x?(p=p===t?1:Lt(p),Rn(u,p)):[]}function P7(u){for(var p=-1,x=u==null?0:u.length,A={};++p<x;){var D=u[p];A[D[0]]=D[1]}return A}function eO(u){return u&&u.length?u[0]:t}function T7(u,p,x){var A=u==null?0:u.length;if(!A)return-1;var D=x==null?0:Lt(x);return D<0&&(D=pn(A+D,0)),On(u,p,D)}function A7(u){var p=u==null?0:u.length;return p?Y(u,0,-1):[]}var k7=kt(function(u){var p=ur(u,fC);return p.length&&p[0]===u[0]?ch(p):[]}),L7=kt(function(u){var p=es(u),x=ur(u,fC);return p===es(x)?p=t:x.pop(),x.length&&x[0]===u[0]?ch(x,mt(p,2)):[]}),O7=kt(function(u){var p=es(u),x=ur(u,fC);return p=typeof p=="function"?p:t,p&&x.pop(),x.length&&x[0]===u[0]?ch(x,t,p):[]});function D7(u,p){return u==null?"":EM.call(u,p)}function es(u){var p=u==null?0:u.length;return p?u[p-1]:t}function R7(u,p,x){var A=u==null?0:u.length;if(!A)return-1;var D=A;return x!==t&&(D=Lt(x),D=D<0?pn(A+D,0):Zn(D,A-1)),p===p?gM(u,p,D):Yc(u,cu,D,!0)}function N7(u,p){return u&&u.length?wv(u,Lt(p)):t}var I7=kt(tO);function tO(u,p){return u&&u.length&&p&&p.length?bv(u,p):u}function V7(u,p,x){return u&&u.length&&p&&p.length?bv(u,p,mt(x,2)):u}function z7(u,p,x){return u&&u.length&&p&&p.length?bv(u,p,t,x):u}var B7=ul(function(u,p){var x=u==null?0:u.length,A=ko(u,p);return e1(u,ur(p,function(D){return cl(D,x)?+D:D}).sort(ML)),A});function F7(u,p){var x=[];if(!(u&&u.length))return x;var A=-1,D=[],U=u.length;for(p=mt(p,3);++A<U;){var G=u[A];p(G,A,u)&&(x.push(G),D.push(A))}return e1(u,D),x}function TC(u){return u==null?u:PM.call(u)}function U7(u,p,x){var A=u==null?0:u.length;return A?(x&&typeof x!="number"&&Wi(u,p,x)?(p=0,x=A):(p=p==null?0:Lt(p),x=x===t?A:Lt(x)),Y(u,p,x)):[]}function j7(u,p){return Oe(u,p)}function H7(u,p,x){return ut(u,p,mt(x,2))}function W7(u,p){var x=u==null?0:u.length;if(x){var A=Oe(u,p);if(A<x&&Ps(u[A],p))return A}return-1}function G7(u,p){return Oe(u,p,!0)}function Y7(u,p,x){return ut(u,p,mt(x,2),!0)}function X7(u,p){var x=u==null?0:u.length;if(x){var A=Oe(u,p,!0)-1;if(Ps(u[A],p))return A}return-1}function q7(u){return u&&u.length?ft(u):[]}function K7(u,p){return u&&u.length?ft(u,mt(p,2)):[]}function Z7(u){var p=u==null?0:u.length;return p?Y(u,1,p):[]}function J7(u,p,x){return u&&u.length?(p=x||p===t?1:Lt(p),Y(u,0,p<0?0:p)):[]}function Q7(u,p,x){var A=u==null?0:u.length;return A?(p=x||p===t?1:Lt(p),p=A-p,Y(u,p<0?0:p,A)):[]}function $7(u,p){return u&&u.length?rp(u,mt(p,3),!1,!0):[]}function eH(u,p){return u&&u.length?rp(u,mt(p,3)):[]}var tH=kt(function(u){return ci(Rn(u,1,fn,!0))}),rH=kt(function(u){var p=es(u);return fn(p)&&(p=t),ci(Rn(u,1,fn,!0),mt(p,2))}),nH=kt(function(u){var p=es(u);return p=typeof p=="function"?p:t,ci(Rn(u,1,fn,!0),t,p)});function iH(u){return u&&u.length?ci(u):[]}function oH(u,p){return u&&u.length?ci(u,mt(p,2)):[]}function sH(u,p){return p=typeof p=="function"?p:t,u&&u.length?ci(u,t,p):[]}function AC(u){if(!(u&&u.length))return[];var p=0;return u=na(u,function(x){if(fn(x))return p=pn(x.length,p),!0}),Ja(p,function(x){return ur(u,Zm(x))})}function rO(u,p){if(!(u&&u.length))return[];var x=AC(u);return p==null?x:ur(x,function(A){return Si(p,t,A)})}var aH=kt(function(u,p){return fn(u)?lh(u,p):[]}),lH=kt(function(u){return pC(na(u,fn))}),uH=kt(function(u){var p=es(u);return fn(p)&&(p=t),pC(na(u,fn),mt(p,2))}),cH=kt(function(u){var p=es(u);return p=typeof p=="function"?p:t,pC(na(u,fn),t,p)}),hH=kt(AC);function dH(u,p){return wL(u||[],p||[],sh)}function pH(u,p){return wL(u||[],p||[],h)}var fH=kt(function(u){var p=u.length,x=p>1?u[p-1]:t;return x=typeof x=="function"?(u.pop(),x):t,rO(u,x)});function nO(u){var p=z(u);return p.__chain__=!0,p}function mH(u,p){return p(u),u}function u1(u,p){return p(u)}var vH=ul(function(u){var p=u.length,x=p?u[0]:0,A=this.__wrapped__,D=function(U){return ko(U,u)};return p>1||this.__actions__.length||!(A instanceof Ut)||!cl(x)?this.thru(D):(A=A.slice(x,+x+(p?1:0)),A.__actions__.push({func:u1,args:[D],thisArg:t}),new co(A,this.__chain__).thru(function(U){return p&&!U.length&&U.push(t),U}))});function gH(){return nO(this)}function yH(){return new co(this.value(),this.__chain__)}function _H(){this.__values__===t&&(this.__values__=gO(this.value()));var u=this.__index__>=this.__values__.length,p=u?t:this.__values__[this.__index__++];return{done:u,value:p}}function wH(){return this}function bH(u){for(var p,x=this;x instanceof gu;){var A=ZL(x);A.__index__=0,A.__values__=t,p?D.__wrapped__=A:p=A;var D=A;x=x.__wrapped__}return D.__wrapped__=u,p}function xH(){var u=this.__wrapped__;if(u instanceof Ut){var p=u;return this.__actions__.length&&(p=new Ut(this)),p=p.reverse(),p.__actions__.push({func:u1,args:[TC],thisArg:t}),new co(p,this.__chain__)}return this.thru(TC)}function SH(){return _L(this.__wrapped__,this.__actions__)}var MH=t1(function(u,p,x){nr.call(u,x)?++u[x]:Cs(u,x,1)});function CH(u,p,x){var A=Et(u)?x_:tC;return x&&Wi(u,p,x)&&(p=t),A(u,mt(p,3))}function EH(u,p){var x=Et(u)?na:Qd;return x(u,mt(p,3))}var PH=kL(JL),TH=kL(QL);function AH(u,p){return Rn(c1(u,p),1)}function kH(u,p){return Rn(c1(u,p),me)}function LH(u,p,x){return x=x===t?1:Lt(x),Rn(c1(u,p),x)}function iO(u,p){var x=Et(u)?Fi:Hi;return x(u,mt(p,3))}function oO(u,p){var x=Et(u)?cM:dv;return x(u,mt(p,3))}var OH=t1(function(u,p,x){nr.call(u,x)?u[x].push(p):Cs(u,x,[p])});function DH(u,p,x,A){u=fo(u)?u:ap(u),x=x&&!A?Lt(x):0;var D=u.length;return x<0&&(x=pn(D+x,0)),m1(u)?x<=D&&u.indexOf(p,x)>-1:!!D&&On(u,p,x)>-1}var RH=kt(function(u,p,x){var A=-1,D=typeof p=="function",U=fo(u)?pe(u.length):[];return Hi(u,function(G){U[++A]=D?Si(p,G,x):hh(G,p,x)}),U}),NH=t1(function(u,p,x){Cs(u,x,p)});function c1(u,p){var x=Et(u)?ur:q_;return x(u,mt(p,3))}function IH(u,p,x,A){return u==null?[]:(Et(p)||(p=p==null?[]:[p]),x=A?t:x,Et(x)||(x=x==null?[]:[x]),Q_(u,p,x))}var VH=t1(function(u,p,x){u[x?0:1].push(p)},function(){return[[],[]]});function zH(u,p,x){var A=Et(u)?Km:Vd,D=arguments.length<3;return A(u,mt(p,4),x,D,Hi)}function BH(u,p,x){var A=Et(u)?S_:Vd,D=arguments.length<3;return A(u,mt(p,4),x,D,dv)}function FH(u,p){var x=Et(u)?na:Qd;return x(u,p1(mt(p,3)))}function UH(u){var p=Et(u)?cv:dC;return p(u)}function jH(u,p,x){(x?Wi(u,p,x):p===t)?p=1:p=Lt(p);var A=Et(u)?yu:y;return A(u,p)}function HH(u){var p=Et(u)?JM:R;return p(u)}function WH(u){if(u==null)return 0;if(fo(u))return m1(u)?fu(u):u.length;var p=Ci(u);return p==Ue||p==te?u.size:yv(u).length}function GH(u,p,x){var A=Et(u)?Gc:oe;return x&&Wi(u,p,x)&&(p=t),A(u,mt(p,3))}var YH=kt(function(u,p){if(u==null)return[];var x=p.length;return x>1&&Wi(u,p[0],p[1])?p=[]:x>2&&Wi(p[0],p[1],p[2])&&(p=[p[0]]),Q_(u,Rn(p,1),[])}),h1=R_||function(){return xn.Date.now()};function XH(u,p){if(typeof p!="function")throw new Ui(s);return u=Lt(u),function(){if(--u<1)return p.apply(this,arguments)}}function sO(u,p,x){return p=x?t:p,p=u&&p==null?u.length:p,ll(u,O,t,t,t,t,p)}function aO(u,p){var x;if(typeof p!="function")throw new Ui(s);return u=Lt(u),function(){return--u>0&&(x=p.apply(this,arguments)),u<=1&&(p=t),x}}var kC=kt(function(u,p,x){var A=w;if(x.length){var D=oa(x,op(kC));A|=T}return ll(u,A,p,x,D)}),lO=kt(function(u,p,x){var A=w|M;if(x.length){var D=oa(x,op(lO));A|=T}return ll(p,A,u,x,D)});function uO(u,p,x){p=x?t:p;var A=ll(u,C,t,t,t,t,t,p);return A.placeholder=uO.placeholder,A}function cO(u,p,x){p=x?t:p;var A=ll(u,P,t,t,t,t,t,p);return A.placeholder=cO.placeholder,A}function hO(u,p,x){var A,D,U,G,K,ie,Me=0,Pe=!1,ke=!1,We=!0;if(typeof u!="function")throw new Ui(s);p=ts(p)||0,Fr(x)&&(Pe=!!x.leading,ke="maxWait"in x,U=ke?pn(ts(x.maxWait)||0,p):U,We="trailing"in x?!!x.trailing:We);function ot(mn){var Ts=A,pl=D;return A=D=t,Me=mn,G=u.apply(pl,Ts),G}function gt(mn){return Me=mn,K=Cv(jt,p),Pe?ot(mn):G}function Ot(mn){var Ts=mn-ie,pl=mn-Me,kO=p-Ts;return ke?Zn(kO,U-pl):kO}function yt(mn){var Ts=mn-ie,pl=mn-Me;return ie===t||Ts>=p||Ts<0||ke&&pl>=U}function jt(){var mn=h1();if(yt(mn))return Kt(mn);K=Cv(jt,Ot(mn))}function Kt(mn){return K=t,We&&A?ot(mn):(A=D=t,G)}function Oo(){K!==t&&bL(K),Me=0,A=ie=D=K=t}function Gi(){return K===t?G:Kt(h1())}function Do(){var mn=h1(),Ts=yt(mn);if(A=arguments,D=this,ie=mn,Ts){if(K===t)return gt(ie);if(ke)return bL(K),K=Cv(jt,p),ot(ie)}return K===t&&(K=Cv(jt,p)),G}return Do.cancel=Oo,Do.flush=Gi,Do}var qH=kt(function(u,p){return U_(u,1,p)}),KH=kt(function(u,p,x){return U_(u,ts(p)||0,x)});function ZH(u){return ll(u,N)}function d1(u,p){if(typeof u!="function"||p!=null&&typeof p!="function")throw new Ui(s);var x=function(){var A=arguments,D=p?p.apply(this,A):A[0],U=x.cache;if(U.has(D))return U.get(D);var G=u.apply(this,A);return x.cache=U.set(D,G)||U,G};return x.cache=new(d1.Cache||Ss),x}d1.Cache=Ss;function p1(u){if(typeof u!="function")throw new Ui(s);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}function JH(u){return aO(2,u)}var QH=z9(function(u,p){p=p.length==1&&Et(p[0])?ur(p[0],tn(mt())):ur(Rn(p,1),tn(mt()));var x=p.length;return kt(function(A){for(var D=-1,U=Zn(A.length,x);++D<U;)A[D]=p[D].call(this,A[D]);return Si(u,this,A)})}),LC=kt(function(u,p){var x=oa(p,op(LC));return ll(u,T,t,p,x)}),dO=kt(function(u,p){var x=oa(p,op(dO));return ll(u,L,t,p,x)}),$H=ul(function(u,p){return ll(u,k,t,t,t,p)});function eW(u,p){if(typeof u!="function")throw new Ui(s);return p=p===t?p:Lt(p),kt(u,p)}function tW(u,p){if(typeof u!="function")throw new Ui(s);return p=p==null?0:pn(Lt(p),0),kt(function(x){var A=x[p],D=wu(x,0,p);return A&&Kn(D,A),Si(u,this,D)})}function rW(u,p,x){var A=!0,D=!0;if(typeof u!="function")throw new Ui(s);return Fr(x)&&(A="leading"in x?!!x.leading:A,D="trailing"in x?!!x.trailing:D),hO(u,p,{leading:A,maxWait:p,trailing:D})}function nW(u){return sO(u,1)}function iW(u,p){return LC(mC(p),u)}function oW(){if(!arguments.length)return[];var u=arguments[0];return Et(u)?u:[u]}function sW(u){return ji(u,g)}function aW(u,p){return p=typeof p=="function"?p:t,ji(u,g,p)}function lW(u){return ji(u,f|g)}function uW(u,p){return p=typeof p=="function"?p:t,ji(u,f|g,p)}function cW(u,p){return p==null||hv(u,p,Jn(p))}function Ps(u,p){return u===p||u!==u&&p!==p}var hW=o1(mv),dW=o1(function(u,p){return u>=p}),vh=ep(function(){return arguments}())?ep:function(u){return rn(u)&&nr.call(u,"callee")&&!Yd.call(u,"callee")},Et=pe.isArray,pW=Jo?tn(Jo):iC;function fo(u){return u!=null&&f1(u.length)&&!hl(u)}function fn(u){return rn(u)&&fo(u)}function fW(u){return u===!0||u===!1||rn(u)&&ui(u)==tt}var bu=CM||jC,mW=Xm?tn(Xm):ha;function vW(u){return rn(u)&&u.nodeType===1&&!Ev(u)}function gW(u){if(u==null)return!0;if(fo(u)&&(Et(u)||typeof u=="string"||typeof u.splice=="function"||bu(u)||sp(u)||vh(u)))return!u.length;var p=Ci(u);if(p==Ue||p==te)return!u.size;if(Mv(u))return!yv(u).length;for(var x in u)if(nr.call(u,x))return!1;return!0}function yW(u,p){return dh(u,p)}function _W(u,p,x){x=typeof x=="function"?x:t;var A=x?x(u,p):t;return A===t?dh(u,p,t,x):!!A}function OC(u){if(!rn(u))return!1;var p=ui(u);return p==Ae||p==ze||typeof u.message=="string"&&typeof u.name=="string"&&!Ev(u)}function wW(u){return typeof u=="number"&&iv(u)}function hl(u){if(!Fr(u))return!1;var p=ui(u);return p==Ce||p==xe||p==St||p==vt}function pO(u){return typeof u=="number"&&u==Lt(u)}function f1(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=J}function Fr(u){var p=typeof u;return u!=null&&(p=="object"||p=="function")}function rn(u){return u!=null&&typeof u=="object"}var fO=w_?tn(w_):vv;function bW(u,p){return u===p||gv(u,p,xC(p))}function xW(u,p,x){return x=typeof x=="function"?x:t,gv(u,p,xC(p),x)}function SW(u){return mO(u)&&u!=+u}function MW(u){if(a7(u))throw new wt(o);return G_(u)}function CW(u){return u===null}function EW(u){return u==null}function mO(u){return typeof u=="number"||rn(u)&&ui(u)==Fe}function Ev(u){if(!rn(u)||ui(u)!=lt)return!1;var p=Gd(u);if(p===null)return!0;var x=nr.call(p,"constructor")&&p.constructor;return typeof x=="function"&&x instanceof x&&Zc.call(x)==xM}var DC=Sn?tn(Sn):Y_;function PW(u){return pO(u)&&u>=-J&&u<=J}var vO=b_?tn(b_):sC;function m1(u){return typeof u=="string"||!Et(u)&&rn(u)&&ui(u)==I}function Lo(u){return typeof u=="symbol"||rn(u)&&ui(u)==B}var sp=Wc?tn(Wc):aC;function TW(u){return u===t}function AW(u){return rn(u)&&Ci(u)==Te}function kW(u){return rn(u)&&ui(u)==Ne}var LW=o1(_v),OW=o1(function(u,p){return u<=p});function gO(u){if(!u)return[];if(fo(u))return m1(u)?Dn(u):po(u);if(el&&u[el])return mM(u[el]());var p=Ci(u),x=p==Ue?_s:p==te?Hd:ap;return x(u)}function dl(u){if(!u)return u===0?u:0;if(u=ts(u),u===me||u===-me){var p=u<0?-1:1;return p*Q}return u===u?u:0}function Lt(u){var p=dl(u),x=p%1;return p===p?x?p-x:p:0}function yO(u){return u?ol(Lt(u),0,fe):0}function ts(u){if(typeof u=="number")return u;if(Lo(u))return $;if(Fr(u)){var p=typeof u.valueOf=="function"?u.valueOf():u;u=Fr(p)?p+"":p}if(typeof u!="string")return u===0?u:+u;u=Qm(u);var x=Mr.test(u);return x||Ft.test(u)?lM(u.slice(2),x?2:8):Nt.test(u)?$:+u}function _O(u){return da(u,mo(u))}function DW(u){return u?ol(Lt(u),-J,J):u===0?u:0}function cr(u){return u==null?"":Tt(u)}var RW=np(function(u,p){if(Mv(p)||fo(p)){da(p,Jn(p),u);return}for(var x in p)nr.call(p,x)&&sh(u,x,p[x])}),wO=np(function(u,p){da(p,mo(p),u)}),v1=np(function(u,p,x,A){da(p,mo(p),u,A)}),NW=np(function(u,p,x,A){da(p,Jn(p),u,A)}),IW=ul(ko);function VW(u,p){var x=vu(u);return p==null?x:F_(x,p)}var zW=kt(function(u,p){u=mr(u);var x=-1,A=p.length,D=A>2?p[2]:t;for(D&&Wi(p[0],p[1],D)&&(A=1);++x<A;)for(var U=p[x],G=mo(U),K=-1,ie=G.length;++K<ie;){var Me=G[K],Pe=u[Me];(Pe===t||Ps(Pe,$a[Me])&&!nr.call(u,Me))&&(u[Me]=U[Me])}return u}),BW=kt(function(u){return u.push(t,VL),Si(bO,t,u)});function FW(u,p){return en(u,mt(p,3),$o)}function UW(u,p){return en(u,mt(p,3),fv)}function jW(u,p){return u==null?u:ca(u,mt(p,3),mo)}function HW(u,p){return u==null?u:pv(u,mt(p,3),mo)}function WW(u,p){return u&&$o(u,mt(p,3))}function GW(u,p){return u&&fv(u,mt(p,3))}function YW(u){return u==null?[]:$d(u,Jn(u))}function XW(u){return u==null?[]:$d(u,mo(u))}function RC(u,p,x){var A=u==null?t:sl(u,p);return A===t?x:A}function qW(u,p){return u!=null&&FL(u,p,uh)}function NC(u,p){return u!=null&&FL(u,p,H_)}var KW=OL(function(u,p,x){p!=null&&typeof p.toString!="function"&&(p=Jc.call(p)),u[p]=x},VC(vo)),ZW=OL(function(u,p,x){p!=null&&typeof p.toString!="function"&&(p=Jc.call(p)),nr.call(u,p)?u[p].push(x):u[p]=[x]},mt),JW=kt(hh);function Jn(u){return fo(u)?Ms(u):yv(u)}function mo(u){return fo(u)?Ms(u,!0):lC(u)}function QW(u,p){var x={};return p=mt(p,3),$o(u,function(A,D,U){Cs(x,p(A,D,U),A)}),x}function $W(u,p){var x={};return p=mt(p,3),$o(u,function(A,D,U){Cs(x,D,p(A,D,U))}),x}var eG=np(function(u,p,x){ph(u,p,x)}),bO=np(function(u,p,x,A){ph(u,p,x,A)}),tG=ul(function(u,p){var x={};if(u==null)return x;var A=!1;p=ur(p,function(U){return U=_u(U,u),A||(A=U.length>1),U}),da(u,wC(u),x),A&&(x=ji(x,f|m|g,K9));for(var D=p.length;D--;)Es(x,p[D]);return x});function rG(u,p){return xO(u,p1(mt(p)))}var nG=ul(function(u,p){return u==null?{}:uC(u,p)});function xO(u,p){if(u==null)return{};var x=ur(wC(u),function(A){return[A]});return p=mt(p),$_(u,x,function(A,D){return p(A,D[0])})}function iG(u,p,x){p=_u(p,u);var A=-1,D=p.length;for(D||(D=1,u=t);++A<D;){var U=u==null?t:u[pa(p[A])];U===t&&(A=D,U=x),u=hl(U)?U.call(u):U}return u}function oG(u,p,x){return u==null?u:h(u,p,x)}function sG(u,p,x,A){return A=typeof A=="function"?A:t,u==null?u:h(u,p,x,A)}var SO=NL(Jn),MO=NL(mo);function aG(u,p,x){var A=Et(u),D=A||bu(u)||sp(u);if(p=mt(p,4),x==null){var U=u&&u.constructor;D?x=A?new U:[]:Fr(u)?x=hl(U)?vu(Gd(u)):{}:x={}}return(D?Fi:$o)(u,function(G,K,ie){return p(x,G,K,ie)}),x}function lG(u,p){return u==null?!0:Es(u,p)}function uG(u,p,x){return u==null?u:al(u,p,mC(x))}function cG(u,p,x,A){return A=typeof A=="function"?A:t,u==null?u:al(u,p,mC(x),A)}function ap(u){return u==null?[]:Bd(u,Jn(u))}function hG(u){return u==null?[]:Bd(u,mo(u))}function dG(u,p,x){return x===t&&(x=p,p=t),x!==t&&(x=ts(x),x=x===x?x:0),p!==t&&(p=ts(p),p=p===p?p:0),ol(ts(u),p,x)}function pG(u,p,x){return p=dl(p),x===t?(x=p,p=0):x=dl(x),u=ts(u),nC(u,p,x)}function fG(u,p,x){if(x&&typeof x!="boolean"&&Wi(u,p,x)&&(p=x=t),x===t&&(typeof p=="boolean"?(x=p,p=t):typeof u=="boolean"&&(x=u,u=t)),u===t&&p===t?(u=0,p=1):(u=dl(u),p===t?(p=u,u=0):p=dl(p)),u>p){var A=u;u=p,p=A}if(x||u%1||p%1){var D=I_();return Zn(u+D*(p-u+aM("1e-"+((D+"").length-1))),p)}return xv(u,p)}var mG=ip(function(u,p,x){return p=p.toLowerCase(),u+(x?CO(p):p)});function CO(u){return IC(cr(u).toLowerCase())}function EO(u){return u=cr(u),u&&u.replace(gs,hu).replace(Gm,"")}function vG(u,p,x){u=cr(u),p=Tt(p);var A=u.length;x=x===t?A:ol(Lt(x),0,A);var D=x;return x-=p.length,x>=0&&u.slice(x,D)==p}function gG(u){return u=cr(u),u&&Dr.test(u)?u.replace(rr,du):u}function yG(u){return u=cr(u),u&&jm.test(u)?u.replace(iu,"\\$&"):u}var _G=ip(function(u,p,x){return u+(x?"-":"")+p.toLowerCase()}),wG=ip(function(u,p,x){return u+(x?" ":"")+p.toLowerCase()}),bG=AL("toLowerCase");function xG(u,p,x){u=cr(u),p=Lt(p);var A=p?fu(u):0;if(!p||A>=p)return u;var D=(p-A)/2;return i1(Xd(D),x)+u+i1(tl(D),x)}function SG(u,p,x){u=cr(u),p=Lt(p);var A=p?fu(u):0;return p&&A<p?u+i1(p-A,x):u}function MG(u,p,x){u=cr(u),p=Lt(p);var A=p?fu(u):0;return p&&A<p?i1(p-A,x)+u:u}function CG(u,p,x){return x||p==null?p=0:p&&(p=+p),rh(cr(u).replace(zc,""),p||0)}function EG(u,p,x){return(x?Wi(u,p,x):p===t)?p=1:p=Lt(p),tp(cr(u),p)}function PG(){var u=arguments,p=cr(u[0]);return u.length<3?p:p.replace(u[1],u[2])}var TG=ip(function(u,p,x){return u+(x?"_":"")+p.toLowerCase()});function AG(u,p,x){return x&&typeof x!="number"&&Wi(u,p,x)&&(p=x=t),x=x===t?fe:x>>>0,x?(u=cr(u),u&&(typeof p=="string"||p!=null&&!DC(p))&&(p=Tt(p),!p&&pu(u))?wu(Dn(u),0,x):u.split(p,x)):[]}var kG=ip(function(u,p,x){return u+(x?" ":"")+IC(p)});function LG(u,p,x){return u=cr(u),x=x==null?0:ol(Lt(x),0,u.length),p=Tt(p),u.slice(x,x+p.length)==p}function OG(u,p,x){var A=z.templateSettings;x&&Wi(u,p,x)&&(p=t),u=cr(u),p=v1({},p,A,IL);var D=v1({},p.imports,A.imports,IL),U=Jn(D),G=Bd(D,U),K,ie,Me=0,Pe=p.interpolate||ao,ke="__p += '",We=Mi((p.escape||ao).source+"|"+Pe.source+"|"+(Pe===ai?Mt:ao).source+"|"+(p.evaluate||ao).source+"|$","g"),ot="//# sourceURL="+(nr.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rM+"]")+`
`;u.replace(We,function(yt,jt,Kt,Oo,Gi,Do){return Kt||(Kt=Oo),ke+=u.slice(Me,Do).replace(li,jd),jt&&(K=!0,ke+=`' +
__e(`+jt+`) +
'`),Gi&&(ie=!0,ke+=`';
`+Gi+`;
__p += '`),Kt&&(ke+=`' +
((__t = (`+Kt+`)) == null ? '' : __t) +
'`),Me=Do+yt.length,yt}),ke+=`';
`;var gt=nr.call(p,"variable")&&p.variable;if(!gt)ke=`with (obj) {
`+ke+`
}
`;else if(Ee.test(gt))throw new wt(a);ke=(ie?ke.replace(Xe,""):ke).replace(we,"$1").replace(Ke,"$1;"),ke="function("+(gt||"obj")+`) {
`+(gt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ke+`return __p
}`;var Ot=TO(function(){return It(U,ot+"return "+ke).apply(t,G)});if(Ot.source=ke,OC(Ot))throw Ot;return Ot}function DG(u){return cr(u).toLowerCase()}function RG(u){return cr(u).toUpperCase()}function NG(u,p,x){if(u=cr(u),u&&(x||p===t))return Qm(u);if(!u||!(p=Tt(p)))return u;var A=Dn(u),D=Dn(p),U=Fd(A,D),G=C_(A,D)+1;return wu(A,U,G).join("")}function IG(u,p,x){if(u=cr(u),u&&(x||p===t))return u.slice(0,$m(u)+1);if(!u||!(p=Tt(p)))return u;var A=Dn(u),D=C_(A,Dn(p))+1;return wu(A,0,D).join("")}function VG(u,p,x){if(u=cr(u),u&&(x||p===t))return u.replace(zc,"");if(!u||!(p=Tt(p)))return u;var A=Dn(u),D=Fd(A,Dn(p));return wu(A,D).join("")}function zG(u,p){var x=V,A=W;if(Fr(p)){var D="separator"in p?p.separator:D;x="length"in p?Lt(p.length):x,A="omission"in p?Tt(p.omission):A}u=cr(u);var U=u.length;if(pu(u)){var G=Dn(u);U=G.length}if(x>=U)return u;var K=x-fu(A);if(K<1)return A;var ie=G?wu(G,0,K).join(""):u.slice(0,K);if(D===t)return ie+A;if(G&&(K+=ie.length-K),DC(D)){if(u.slice(K).search(D)){var Me,Pe=ie;for(D.global||(D=Mi(D.source,cr(pt.exec(D))+"g")),D.lastIndex=0;Me=D.exec(Pe);)var ke=Me.index;ie=ie.slice(0,ke===t?K:ke)}}else if(u.indexOf(Tt(D),K)!=K){var We=ie.lastIndexOf(D);We>-1&&(ie=ie.slice(0,We))}return ie+A}function BG(u){return u=cr(u),u&&fr.test(u)?u.replace(Ie,yM):u}var FG=ip(function(u,p,x){return u+(x?" ":"")+p.toUpperCase()}),IC=AL("toUpperCase");function PO(u,p,x){return u=cr(u),p=x?t:p,p===t?fM(u)?T_(u):M_(u):u.match(p)||[]}var TO=kt(function(u,p){try{return Si(u,t,p)}catch(x){return OC(x)?x:new wt(x)}}),UG=ul(function(u,p){return Fi(p,function(x){x=pa(x),Cs(u,x,kC(u[x],u))}),u});function jG(u){var p=u==null?0:u.length,x=mt();return u=p?ur(u,function(A){if(typeof A[1]!="function")throw new Ui(s);return[x(A[0]),A[1]]}):[],kt(function(A){for(var D=-1;++D<p;){var U=u[D];if(Si(U[0],this,A))return Si(U[1],this,A)}})}function HG(u){return eC(ji(u,f))}function VC(u){return function(){return u}}function WG(u,p){return u==null||u!==u?p:u}var GG=LL(),YG=LL(!0);function vo(u){return u}function zC(u){return X_(typeof u=="function"?u:ji(u,f))}function XG(u){return K_(ji(u,f))}function qG(u,p){return Z_(u,ji(p,f))}var KG=kt(function(u,p){return function(x){return hh(x,u,p)}}),ZG=kt(function(u,p){return function(x){return hh(u,x,p)}});function BC(u,p,x){var A=Jn(p),D=$d(p,A);x==null&&!(Fr(p)&&(D.length||!A.length))&&(x=p,p=u,u=this,D=$d(p,Jn(p)));var U=!(Fr(x)&&"chain"in x)||!!x.chain,G=hl(u);return Fi(D,function(K){var ie=p[K];u[K]=ie,G&&(u.prototype[K]=function(){var Me=this.__chain__;if(U||Me){var Pe=u(this.__wrapped__),ke=Pe.__actions__=po(this.__actions__);return ke.push({func:ie,args:arguments,thisArg:u}),Pe.__chain__=Me,Pe}return ie.apply(u,Kn([this.value()],arguments))})}),u}function JG(){return xn._===this&&(xn._=L_),this}function FC(){}function QG(u){return u=Lt(u),kt(function(p){return wv(p,u)})}var $G=gC(ur),eY=gC(x_),tY=gC(Gc);function AO(u){return MC(u)?Zm(pa(u)):cC(u)}function rY(u){return function(p){return u==null?t:sl(u,p)}}var nY=DL(),iY=DL(!0);function UC(){return[]}function jC(){return!1}function oY(){return{}}function sY(){return""}function aY(){return!0}function lY(u,p){if(u=Lt(u),u<1||u>J)return[];var x=fe,A=Zn(u,fe);p=mt(p),u-=fe;for(var D=Ja(A,p);++x<u;)p(x);return D}function uY(u){return Et(u)?ur(u,pa):Lo(u)?[u]:po(KL(cr(u)))}function cY(u){var p=++k_;return cr(u)+p}var hY=n1(function(u,p){return u+p},0),dY=yC("ceil"),pY=n1(function(u,p){return u/p},1),fY=yC("floor");function mY(u){return u&&u.length?Jd(u,vo,mv):t}function vY(u,p){return u&&u.length?Jd(u,mt(p,2),mv):t}function gY(u){return Id(u,vo)}function yY(u,p){return Id(u,mt(p,2))}function _Y(u){return u&&u.length?Jd(u,vo,_v):t}function wY(u,p){return u&&u.length?Jd(u,mt(p,2),_v):t}var bY=n1(function(u,p){return u*p},1),xY=yC("round"),SY=n1(function(u,p){return u-p},0);function MY(u){return u&&u.length?Xc(u,vo):0}function CY(u,p){return u&&u.length?Xc(u,mt(p,2)):0}return z.after=XH,z.ary=sO,z.assign=RW,z.assignIn=wO,z.assignInWith=v1,z.assignWith=NW,z.at=IW,z.before=aO,z.bind=kC,z.bindAll=UG,z.bindKey=lO,z.castArray=oW,z.chain=nO,z.chunk=f7,z.compact=m7,z.concat=v7,z.cond=jG,z.conforms=HG,z.constant=VC,z.countBy=MH,z.create=VW,z.curry=uO,z.curryRight=cO,z.debounce=hO,z.defaults=zW,z.defaultsDeep=BW,z.defer=qH,z.delay=KH,z.difference=g7,z.differenceBy=y7,z.differenceWith=_7,z.drop=w7,z.dropRight=b7,z.dropRightWhile=x7,z.dropWhile=S7,z.fill=M7,z.filter=EH,z.flatMap=AH,z.flatMapDeep=kH,z.flatMapDepth=LH,z.flatten=$L,z.flattenDeep=C7,z.flattenDepth=E7,z.flip=ZH,z.flow=GG,z.flowRight=YG,z.fromPairs=P7,z.functions=YW,z.functionsIn=XW,z.groupBy=OH,z.initial=A7,z.intersection=k7,z.intersectionBy=L7,z.intersectionWith=O7,z.invert=KW,z.invertBy=ZW,z.invokeMap=RH,z.iteratee=zC,z.keyBy=NH,z.keys=Jn,z.keysIn=mo,z.map=c1,z.mapKeys=QW,z.mapValues=$W,z.matches=XG,z.matchesProperty=qG,z.memoize=d1,z.merge=eG,z.mergeWith=bO,z.method=KG,z.methodOf=ZG,z.mixin=BC,z.negate=p1,z.nthArg=QG,z.omit=tG,z.omitBy=rG,z.once=JH,z.orderBy=IH,z.over=$G,z.overArgs=QH,z.overEvery=eY,z.overSome=tY,z.partial=LC,z.partialRight=dO,z.partition=VH,z.pick=nG,z.pickBy=xO,z.property=AO,z.propertyOf=rY,z.pull=I7,z.pullAll=tO,z.pullAllBy=V7,z.pullAllWith=z7,z.pullAt=B7,z.range=nY,z.rangeRight=iY,z.rearg=$H,z.reject=FH,z.remove=F7,z.rest=eW,z.reverse=TC,z.sampleSize=jH,z.set=oG,z.setWith=sG,z.shuffle=HH,z.slice=U7,z.sortBy=YH,z.sortedUniq=q7,z.sortedUniqBy=K7,z.split=AG,z.spread=tW,z.tail=Z7,z.take=J7,z.takeRight=Q7,z.takeRightWhile=$7,z.takeWhile=eH,z.tap=mH,z.throttle=rW,z.thru=u1,z.toArray=gO,z.toPairs=SO,z.toPairsIn=MO,z.toPath=uY,z.toPlainObject=_O,z.transform=aG,z.unary=nW,z.union=tH,z.unionBy=rH,z.unionWith=nH,z.uniq=iH,z.uniqBy=oH,z.uniqWith=sH,z.unset=lG,z.unzip=AC,z.unzipWith=rO,z.update=uG,z.updateWith=cG,z.values=ap,z.valuesIn=hG,z.without=aH,z.words=PO,z.wrap=iW,z.xor=lH,z.xorBy=uH,z.xorWith=cH,z.zip=hH,z.zipObject=dH,z.zipObjectDeep=pH,z.zipWith=fH,z.entries=SO,z.entriesIn=MO,z.extend=wO,z.extendWith=v1,BC(z,z),z.add=hY,z.attempt=TO,z.camelCase=mG,z.capitalize=CO,z.ceil=dY,z.clamp=dG,z.clone=sW,z.cloneDeep=lW,z.cloneDeepWith=uW,z.cloneWith=aW,z.conformsTo=cW,z.deburr=EO,z.defaultTo=WG,z.divide=pY,z.endsWith=vG,z.eq=Ps,z.escape=gG,z.escapeRegExp=yG,z.every=CH,z.find=PH,z.findIndex=JL,z.findKey=FW,z.findLast=TH,z.findLastIndex=QL,z.findLastKey=UW,z.floor=fY,z.forEach=iO,z.forEachRight=oO,z.forIn=jW,z.forInRight=HW,z.forOwn=WW,z.forOwnRight=GW,z.get=RC,z.gt=hW,z.gte=dW,z.has=qW,z.hasIn=NC,z.head=eO,z.identity=vo,z.includes=DH,z.indexOf=T7,z.inRange=pG,z.invoke=JW,z.isArguments=vh,z.isArray=Et,z.isArrayBuffer=pW,z.isArrayLike=fo,z.isArrayLikeObject=fn,z.isBoolean=fW,z.isBuffer=bu,z.isDate=mW,z.isElement=vW,z.isEmpty=gW,z.isEqual=yW,z.isEqualWith=_W,z.isError=OC,z.isFinite=wW,z.isFunction=hl,z.isInteger=pO,z.isLength=f1,z.isMap=fO,z.isMatch=bW,z.isMatchWith=xW,z.isNaN=SW,z.isNative=MW,z.isNil=EW,z.isNull=CW,z.isNumber=mO,z.isObject=Fr,z.isObjectLike=rn,z.isPlainObject=Ev,z.isRegExp=DC,z.isSafeInteger=PW,z.isSet=vO,z.isString=m1,z.isSymbol=Lo,z.isTypedArray=sp,z.isUndefined=TW,z.isWeakMap=AW,z.isWeakSet=kW,z.join=D7,z.kebabCase=_G,z.last=es,z.lastIndexOf=R7,z.lowerCase=wG,z.lowerFirst=bG,z.lt=LW,z.lte=OW,z.max=mY,z.maxBy=vY,z.mean=gY,z.meanBy=yY,z.min=_Y,z.minBy=wY,z.stubArray=UC,z.stubFalse=jC,z.stubObject=oY,z.stubString=sY,z.stubTrue=aY,z.multiply=bY,z.nth=N7,z.noConflict=JG,z.noop=FC,z.now=h1,z.pad=xG,z.padEnd=SG,z.padStart=MG,z.parseInt=CG,z.random=fG,z.reduce=zH,z.reduceRight=BH,z.repeat=EG,z.replace=PG,z.result=iG,z.round=xY,z.runInContext=X,z.sample=UH,z.size=WH,z.snakeCase=TG,z.some=GH,z.sortedIndex=j7,z.sortedIndexBy=H7,z.sortedIndexOf=W7,z.sortedLastIndex=G7,z.sortedLastIndexBy=Y7,z.sortedLastIndexOf=X7,z.startCase=kG,z.startsWith=LG,z.subtract=SY,z.sum=MY,z.sumBy=CY,z.template=OG,z.times=lY,z.toFinite=dl,z.toInteger=Lt,z.toLength=yO,z.toLower=DG,z.toNumber=ts,z.toSafeInteger=DW,z.toString=cr,z.toUpper=RG,z.trim=NG,z.trimEnd=IG,z.trimStart=VG,z.truncate=zG,z.unescape=BG,z.uniqueId=cY,z.upperCase=FG,z.upperFirst=IC,z.each=iO,z.eachRight=oO,z.first=eO,BC(z,function(){var u={};return $o(z,function(p,x){nr.call(z.prototype,x)||(u[x]=p)}),u}(),{chain:!1}),z.VERSION=n,Fi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){z[u].placeholder=z}),Fi(["drop","take"],function(u,p){Ut.prototype[u]=function(x){x=x===t?1:pn(Lt(x),0);var A=this.__filtered__&&!p?new Ut(this):this.clone();return A.__filtered__?A.__takeCount__=Zn(x,A.__takeCount__):A.__views__.push({size:Zn(x,fe),type:u+(A.__dir__<0?"Right":"")}),A},Ut.prototype[u+"Right"]=function(x){return this.reverse()[u](x).reverse()}}),Fi(["filter","map","takeWhile"],function(u,p){var x=p+1,A=x==q||x==Z;Ut.prototype[u]=function(D){var U=this.clone();return U.__iteratees__.push({iteratee:mt(D,3),type:x}),U.__filtered__=U.__filtered__||A,U}}),Fi(["head","last"],function(u,p){var x="take"+(p?"Right":"");Ut.prototype[u]=function(){return this[x](1).value()[0]}}),Fi(["initial","tail"],function(u,p){var x="drop"+(p?"":"Right");Ut.prototype[u]=function(){return this.__filtered__?new Ut(this):this[x](1)}}),Ut.prototype.compact=function(){return this.filter(vo)},Ut.prototype.find=function(u){return this.filter(u).head()},Ut.prototype.findLast=function(u){return this.reverse().find(u)},Ut.prototype.invokeMap=kt(function(u,p){return typeof u=="function"?new Ut(this):this.map(function(x){return hh(x,u,p)})}),Ut.prototype.reject=function(u){return this.filter(p1(mt(u)))},Ut.prototype.slice=function(u,p){u=Lt(u);var x=this;return x.__filtered__&&(u>0||p<0)?new Ut(x):(u<0?x=x.takeRight(-u):u&&(x=x.drop(u)),p!==t&&(p=Lt(p),x=p<0?x.dropRight(-p):x.take(p-u)),x)},Ut.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Ut.prototype.toArray=function(){return this.take(fe)},$o(Ut.prototype,function(u,p){var x=/^(?:filter|find|map|reject)|While$/.test(p),A=/^(?:head|last)$/.test(p),D=z[A?"take"+(p=="last"?"Right":""):p],U=A||/^find/.test(p);!D||(z.prototype[p]=function(){var G=this.__wrapped__,K=A?[1]:arguments,ie=G instanceof Ut,Me=K[0],Pe=ie||Et(G),ke=function(jt){var Kt=D.apply(z,Kn([jt],K));return A&&We?Kt[0]:Kt};Pe&&x&&typeof Me=="function"&&Me.length!=1&&(ie=Pe=!1);var We=this.__chain__,ot=!!this.__actions__.length,gt=U&&!We,Ot=ie&&!ot;if(!U&&Pe){G=Ot?G:new Ut(this);var yt=u.apply(G,K);return yt.__actions__.push({func:u1,args:[ke],thisArg:t}),new co(yt,We)}return gt&&Ot?u.apply(this,K):(yt=this.thru(ke),gt?A?yt.value()[0]:yt.value():yt)})}),Fi(["pop","push","shift","sort","splice","unshift"],function(u){var p=qc[u],x=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",A=/^(?:pop|shift)$/.test(u);z.prototype[u]=function(){var D=arguments;if(A&&!this.__chain__){var U=this.value();return p.apply(Et(U)?U:[],D)}return this[x](function(G){return p.apply(Et(G)?G:[],D)})}}),$o(Ut.prototype,function(u,p){var x=z[p];if(x){var A=x.name+"";nr.call(la,A)||(la[A]=[]),la[A].push({name:p,func:x})}}),la[r1(t,M).name]=[{name:"wrapper",func:t}],Ut.prototype.clone=LM,Ut.prototype.reverse=OM,Ut.prototype.value=DM,z.prototype.at=vH,z.prototype.chain=gH,z.prototype.commit=yH,z.prototype.next=_H,z.prototype.plant=bH,z.prototype.reverse=xH,z.prototype.toJSON=z.prototype.valueOf=z.prototype.value=SH,z.prototype.first=z.prototype.head,el&&(z.prototype[el]=wH),z},ws=wM();Ka?((Ka.exports=ws)._=ws,Ym._=ws):xn._=ws}).call(Ve)})(Ri,Ri.exports);const Fa=(r,e,t)=>{if(!r.has(e)){const n=t();return r.set(e,n),n}return r.get(e)},qq=r=>{throw new Error("unexpected value: "+r)},qP=(r,e,t=new WeakSet)=>{if(Array.isArray(r)){if(t.has(r))return;t.add(r);for(let n=0;n<r.length;++n){const i=r[n];e(n,i,r),qP(i,e,t)}}else if(r&&typeof r=="object"){if(t.has(r))return;t.add(r);for(const[n,i]of Object.entries(r))e(n,i,r),qP(i,e,t)}},bB=(r,e)=>{const t=r.indexOf(e);return t===-1?!1:(r.splice(t,1),!0)},Bf=(r,e=-1)=>r[r.length+e],Kq=r=>{const e=r.split(".");if(e.length===1)return e;const t=e.pop();return[e.join("."),t]},xB=(r,e,t)=>{let n,i=!1,o,s,a=t==="trailingPromise"?new Promise(l=>s=l):void 0;return(...l)=>{if(o=l,i)return a!=null?a:n;i=!0,(t==="leading"||t==="both")&&(n=r(...o));const c=()=>{(t==="trailing"||t==="both"||t==="trailingPromise")&&(n=r(...o),s==null||s(n),a=t==="trailingPromise"?new Promise(d=>s=d):void 0),i=!1};return e>0?setTimeout(c,e):queueMicrotask(c),a!=null?a:n}},SB=(r,e)=>{if(e===0){let n=!0;return queueMicrotask(()=>n&&r()),()=>n=!1}const t=setTimeout(r,e);return()=>clearTimeout(t)},Qs=(r,e,t)=>{let n,i,o,s,a=t==="trailingPromise"?new Promise(l=>s=l):void 0;return(...l)=>(o=l,n?n():(t==="leading"||t==="both")&&(i=r(...o)),n=SB(()=>{(t==="trailing"||t==="both"||t==="trailingPromise")&&(i=r(...o),s==null||s(i),a=t==="trailingPromise"?new Promise(c=>s=c):void 0),n=void 0},e),a!=null?a:i)},MB=(r,e,t)=>{const n=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap;return(l,...c)=>{var d;return t==="trailingPromise"&&!a.has(l)&&a.set(l,new Promise(f=>s.set(l,f))),o.set(l,c),n.has(l)?n.get(l)():(t==="leading"||t==="both")&&i.set(l,r(...c)),n.set(l,SB(()=>{var f;if(t==="trailing"||t==="both"||t==="trailingPromise"){const m=r(...o.get(l));i.set(l,m),(f=s.get(l))===null||f===void 0||f(m),a.set(l,t==="trailingPromise"?new Promise(g=>s.set(l,g)):void 0)}n.delete(l)},e)),(d=a.get(l))!==null&&d!==void 0?d:i.get(l)}},Zq=r=>r,dd=(r,e)=>{let t,n=!1,i=e==null?void 0:e();return(...o)=>{if(e){const s=e();i!==s&&(n=!1),i=s}return n?t:(n=!0,t=r(...o))}},q0=(r,e)=>{for(const t of e)for(const n of Object.getOwnPropertyNames(t.prototype))!(n in r.prototype)&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))};class M4{constructor(e=void 0){this._cb=e,this.done=void 0,this._value=void 0,this._callbacks=void 0,this._watched=void 0}then(e){var t;return this.done?(e(this._value),Jq):(((t=this._callbacks)!==null&&t!==void 0?t:this._callbacks=new Set).add(e),new lr(()=>this._callbacks.delete(e)))}watch(e){var t;return this.done?e._resolve(this._value):(((t=this._watched)!==null&&t!==void 0?t:this._watched=new Set).add(e),e.then(()=>this._watched.delete(e)),e)}_resolve(e){var t;if(this.done)return this;if(this.done=!0,this._value=e,(t=this._cb)===null||t===void 0||t.call(this,e),this._callbacks)for(const n of this._callbacks)n(e);if(this._watched)for(const n of this._watched)n._resolve(e);return this}}class CB extends M4{constructor(e){super(e)}resolve(e){return this._resolve(e)}}class lr extends M4{constructor(e){super(e)}cancel(){return this._resolve()}}class EB extends M4{constructor(e){super(e)}_resolve(){return this.dispose(),this}dispose(){return super._resolve()}}const Jq=new lr().cancel();class PB{constructor(){this.cbsMap=new Map}on(e,t){var n;if(Array.isArray(e)){const o=new lr;for(const s of e)o.watch(this.on(s,t));return o}!((n=this.states)===null||n===void 0)&&n.has(e)&&t(this.states.get(e));const i=Fa(this.cbsMap,e,()=>new Set);return i.add(t),new lr(()=>i.delete(t))}once(e,t){const n=new lr;return n.watch(this.on(e,i=>{n.cancel(),t(i)})),n}emit(e,t){if(this.cbsMap.has(e))for(const n of this.cbsMap.get(e))n(t)}hasState(e){var t;return!!(!((t=this.states)===null||t===void 0)&&t.has(e))}setState(e,t){var n;(n=this.states)!==null&&n!==void 0||(this.states=new Map),!(this.states.has(e)&&this.states.get(e)===t)&&(this.states.set(e,t),this.emit(e,t))}getState(e){var t;return(t=this.states)===null||t===void 0?void 0:t.get(e)}deleteState(e){var t;(t=this.states)===null||t===void 0||t.delete(e)}clear(){var e;this.cbsMap.clear(),(e=this.states)===null||e===void 0||e.clear()}}class Qq{constructor(){this.cbs=new Set}on(e){return"state"in this&&e(this.state),this.cbs.add(e),new lr(()=>this.cbs.delete(e))}once(e){const t=new lr;return t.watch(this.on(n=>{t.cancel(),e(n)})),t}emit(e){for(const t of this.cbs)t(e)}setState(e){"state"in this&&this.state===e||(this.state=e,this.emit(e))}getState(){return this.state}}const zi=()=>{const r=new Qq;return[e=>r.emit(e),(e,t)=>t?r.once(e):r.on(e),e=>r.setState(e),()=>r.getState()]},$q=new WeakSet,De=r=>{const[,e,t,n]=zi();t(r);const i=o=>{if(o){const s=new lr;return s.watch(e(a=>o(a,s))),s}return n()};return $q.add(i),[t,i]},vm=(r,e)=>t=>{const n=e();n&&r([...n,t])},gm=(r,e)=>t=>{const n=e();n&&r(n.filter(i=>i!==t))},TB=(r,e)=>()=>{const t=e();!t||(Array.isArray(t)?r([...t]):r({...t}))},eK=(r,e)=>{const t=e();return t&&typeof t=="object"&&(qP(t,(n,i)=>Object.freeze(i)),Object.freeze(t)),()=>r(t)},Na=[],UD=r=>{var e,t,n;const i=Na[Na.length-1];return(e=(t=i.fiber)[n=i.count++])!==null&&e!==void 0?e:t[n]=r()},jD=r=>{var e,t;const n=Na[Na.length-1],i=n.count++;return(e=(t=n.fiber)[i])!==null&&e!==void 0||(t[i]=r),[()=>n.fiber[i],o=>n.fiber[i]=o]},AB=(r,e,t,n,i,o)=>{Na.push({count:0,fiber:t,handle:r});const s=n.map(c=>typeof c=="function"?c():c),a=!i||s.some((c,d)=>c!==i[d]);a&&typeof e=="function"&&e();const l=a?o():void 0;return Na.pop(),[l,s,a]},y0=(r,e)=>{const t=UD(()=>Na[Na.length-1].handle.watch(new lr(()=>{var g;return(g=i())===null||g===void 0?void 0:g()})));if(t.done)return t;const n=UD(()=>[]),[i,o]=jD(void 0),[s,a]=jD(void 0),l=i(),c=s();l&&typeof l!="function"&&console.warn("cleanup is not a function");const[d,f,m]=AB(t,l,n,e,c,r);return m&&o(typeof d=="function"?d:void 0),a(f),t},xt=(r,e)=>{const t=new lr(()=>setTimeout(()=>i==null?void 0:i())),n=[];let i,o;const s=Qs(()=>{const[a,l,c]=AB(t,i,n,e,o,r);c&&(i=typeof a=="function"?a:void 0),o=l},0,"trailing");s();for(const a of e)typeof a=="function"&&t.watch(a(s));return t},tK=r=>{var e,t,n;const i=Na[Na.length-1];return(e=(t=i.fiber)[n=i.count++])!==null&&e!==void 0?e:t[n]={current:typeof r=="function"?r():r}};class ht{constructor(e){[this.set,this.get]=De(e)}}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const C4="143",rK=0,HD=1,nK=2,kB=1,LB=2,hg=3,td=0,Mo=1,Gl=2,iK=1,Cn=0,df=1,xx=2,WD=3,GD=4,KP=5,Yu=100,oK=101,sK=102,YD=103,XD=104,ZP=200,aK=201,lK=202,uK=203,OB=204,DB=205,RB=206,cK=207,NB=208,hK=209,dK=210,pK=0,fK=1,mK=2,JP=3,vK=4,gK=5,yK=6,_K=7,IB=0,wK=1,bK=2,ka=0,VB=1,xK=2,SK=3,MK=4,CK=5,zB=300,Ff=301,Uf=302,_0=303,QP=304,CS=306,jf=1e3,Bo=1001,$P=1002,ln=1003,qD=1004,KD=1005,En=1006,EK=1007,K0=1008,rd=1009,PK=1010,TK=1011,E4=1012,AK=1013,Fh=1014,js=1015,Rl=1016,kK=1017,LK=1018,pf=1020,OK=1021,DK=1022,Hs=1023,RK=1024,NK=1025,Gh=1026,Hf=1027,IK=1028,VK=1029,zK=1030,BK=1031,FK=1033,m3=33776,v3=33777,g3=33778,y3=33779,ZD=35840,JD=35841,QD=35842,$D=35843,UK=36196,eR=37492,tR=37496,rR=37808,nR=37809,iR=37810,oR=37811,sR=37812,aR=37813,lR=37814,uR=37815,cR=37816,hR=37817,dR=37818,pR=37819,fR=37820,mR=37821,vR=36492,eT=2200,tT=2201,jK=2202,Sx=2300,Mx=2301,_3=2302,Jp=2400,Qp=2401,Cx=2402,P4=2500,HK=2501,Z1e=1,J1e=2,fc=3e3,on=3001,WK=3200,ES=3201,Z0=0,BB=1,El="srgb",Uh="srgb-linear",w3=7680,GK=519,rT=35044,gR="300 es",nT=1035;class pd{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const n=this._listeners[e];if(n!==void 0){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const n=t.slice(0);for(let i=0,o=n.length;i<o;i++)n[i].call(this,e);e.target=null}}}const Ti=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let yR=1234567;const Og=Math.PI/180,w0=180/Math.PI;function cs(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ti[r&255]+Ti[r>>8&255]+Ti[r>>16&255]+Ti[r>>24&255]+"-"+Ti[e&255]+Ti[e>>8&255]+"-"+Ti[e>>16&15|64]+Ti[e>>24&255]+"-"+Ti[t&63|128]+Ti[t>>8&255]+"-"+Ti[t>>16&255]+Ti[t>>24&255]+Ti[n&255]+Ti[n>>8&255]+Ti[n>>16&255]+Ti[n>>24&255]).toLowerCase()}function Bn(r,e,t){return Math.max(e,Math.min(t,r))}function T4(r,e){return(r%e+e)%e}function YK(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function XK(r,e,t){return r!==e?(t-r)/(e-r):0}function Dg(r,e,t){return(1-t)*r+t*e}function qK(r,e,t,n){return Dg(r,e,1-Math.exp(-t*n))}function KK(r,e=1){return e-Math.abs(T4(r,e*2)-e)}function ZK(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function JK(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function QK(r,e){return r+Math.floor(Math.random()*(e-r+1))}function $K(r,e){return r+Math.random()*(e-r)}function eZ(r){return r*(.5-Math.random())}function tZ(r){r!==void 0&&(yR=r);let e=yR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function rZ(r){return r*Og}function nZ(r){return r*w0}function iT(r){return(r&r-1)===0&&r!==0}function FB(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Ex(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function iZ(r,e,t,n,i){const o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),c=o((e+n)/2),d=s((e+n)/2),f=o((e-n)/2),m=s((e-n)/2),g=o((n-e)/2),b=s((n-e)/2);switch(i){case"XYX":r.set(a*d,l*f,l*m,a*c);break;case"YZY":r.set(l*m,a*d,l*f,a*c);break;case"ZXZ":r.set(l*f,l*m,a*d,a*c);break;case"XZX":r.set(a*d,l*b,l*g,a*c);break;case"YXY":r.set(l*g,a*d,l*b,a*c);break;case"ZYZ":r.set(l*b,l*g,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function oZ(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function sZ(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}var b3=Object.freeze({__proto__:null,DEG2RAD:Og,RAD2DEG:w0,generateUUID:cs,clamp:Bn,euclideanModulo:T4,mapLinear:YK,inverseLerp:XK,lerp:Dg,damp:qK,pingpong:KK,smoothstep:ZK,smootherstep:JK,randInt:QK,randFloat:$K,randFloatSpread:eZ,seededRandom:tZ,degToRad:rZ,radToDeg:nZ,isPowerOfTwo:iT,ceilPowerOfTwo:FB,floorPowerOfTwo:Ex,setQuaternionFromProperEuler:iZ,normalize:sZ,denormalize:oZ});class be{constructor(e=0,t=0){be.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*n-s*i+e.x,this.y=o*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class mi{constructor(){mi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,o,s,a,l,c){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=t,d[4]=o,d[5]=l,d[6]=n,d[7]=s,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,o=this.elements,s=n[0],a=n[3],l=n[6],c=n[1],d=n[4],f=n[7],m=n[2],g=n[5],b=n[8],_=i[0],w=i[3],M=i[6],S=i[1],C=i[4],P=i[7],T=i[2],L=i[5],O=i[8];return o[0]=s*_+a*S+l*T,o[3]=s*w+a*C+l*L,o[6]=s*M+a*P+l*O,o[1]=c*_+d*S+f*T,o[4]=c*w+d*C+f*L,o[7]=c*M+d*P+f*O,o[2]=m*_+g*S+b*T,o[5]=m*w+g*C+b*L,o[8]=m*M+g*P+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*s*d-t*a*c-n*o*d+n*a*l+i*o*c-i*s*l}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=d*s-a*c,m=a*l-d*o,g=c*o-s*l,b=t*f+n*m+i*g;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/b;return e[0]=f*_,e[1]=(i*c-d*n)*_,e[2]=(a*n-i*s)*_,e[3]=m*_,e[4]=(d*t-i*l)*_,e[5]=(i*o-a*t)*_,e[6]=g*_,e[7]=(n*l-c*t)*_,e[8]=(s*t-n*o)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(n*l,n*c,-n*(l*s+c*a)+s+e,-i*c,i*l,-i*(-c*s+l*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,o=i[0],s=i[3],a=i[6],l=i[1],c=i[4],d=i[7];return i[0]=t*o+n*l,i[3]=t*s+n*c,i[6]=t*a+n*d,i[1]=-n*o+t*l,i[4]=-n*s+t*c,i[7]=-n*a+t*d,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function UB(r){for(let e=r.length-1;e>=0;--e)if(r[e]>65535)return!0;return!1}function b0(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Yh(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Pb(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}const x3={[El]:{[Uh]:Yh},[Uh]:{[El]:Pb}},ks={legacyMode:!0,get workingColorSpace(){return Uh},set workingColorSpace(r){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(r,e,t){if(this.legacyMode||e===t||!e||!t)return r;if(x3[e]&&x3[e][t]!==void 0){const n=x3[e][t];return r.r=n(r.r),r.g=n(r.g),r.b=n(r.b),r}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(r,e){return this.convert(r,this.workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this.workingColorSpace)}},jB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Nn={r:0,g:0,b:0},Ls={h:0,s:0,l:0},R1={h:0,s:0,l:0};function S3(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}function N1(r,e){return e.r=r.r,e.g=r.g,e.b=r.b,e}class Je{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=El){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ks.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Uh){return this.r=e,this.g=t,this.b=n,ks.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Uh){if(e=T4(e,1),t=Bn(t,0,1),n=Bn(n,0,1),t===0)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+t):n+t-n*t,s=2*n-o;this.r=S3(s,o,e+1/3),this.g=S3(s,o,e),this.b=S3(s,o,e-1/3)}return ks.toWorkingColorSpace(this,i),this}setStyle(e,t=El){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,ks.toWorkingColorSpace(this,t),n(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,ks.toWorkingColorSpace(this,t),n(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(o[1])/360,c=parseInt(o[2],10)/100,d=parseInt(o[3],10)/100;return n(o[4]),this.setHSL(l,c,d,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,ks.toWorkingColorSpace(this,t),this;if(s===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,ks.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=El){const n=jB[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Yh(e.r),this.g=Yh(e.g),this.b=Yh(e.b),this}copyLinearToSRGB(e){return this.r=Pb(e.r),this.g=Pb(e.g),this.b=Pb(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=El){return ks.fromWorkingColorSpace(N1(this,Nn),e),Bn(Nn.r*255,0,255)<<16^Bn(Nn.g*255,0,255)<<8^Bn(Nn.b*255,0,255)<<0}getHexString(e=El){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Uh){ks.fromWorkingColorSpace(N1(this,Nn),t);const n=Nn.r,i=Nn.g,o=Nn.b,s=Math.max(n,i,o),a=Math.min(n,i,o);let l,c;const d=(a+s)/2;if(a===s)l=0,c=0;else{const f=s-a;switch(c=d<=.5?f/(s+a):f/(2-s-a),s){case n:l=(i-o)/f+(i<o?6:0);break;case i:l=(o-n)/f+2;break;case o:l=(n-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=Uh){return ks.fromWorkingColorSpace(N1(this,Nn),t),e.r=Nn.r,e.g=Nn.g,e.b=Nn.b,e}getStyle(e=El){return ks.fromWorkingColorSpace(N1(this,Nn),e),e!==El?`color(${e} ${Nn.r} ${Nn.g} ${Nn.b})`:`rgb(${Nn.r*255|0},${Nn.g*255|0},${Nn.b*255|0})`}offsetHSL(e,t,n){return this.getHSL(Ls),Ls.h+=e,Ls.s+=t,Ls.l+=n,this.setHSL(Ls.h,Ls.s,Ls.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ls),e.getHSL(R1);const n=Dg(Ls.h,R1.h,t),i=Dg(Ls.s,R1.s,t),o=Dg(Ls.l,R1.l,t);return this.setHSL(n,i,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Je.NAMES=jB;let up;class HB{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{up===void 0&&(up=b0("canvas")),up.width=e.width,up.height=e.height;const n=up.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=up}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=b0("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=Yh(o[s]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Yh(t[n]/255)*255):t[n]=Yh(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class WB{constructor(e=null){this.isSource=!0,this.uuid=cs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(M3(i[s].image)):o.push(M3(i[s]))}else o=M3(i);n.url=o}return t||(e.images[this.uuid]=n),n}}function M3(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?HB.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aZ=0;class Ii extends pd{constructor(e=Ii.DEFAULT_IMAGE,t=Ii.DEFAULT_MAPPING,n=Bo,i=Bo,o=En,s=K0,a=Hs,l=rd,c=1,d=fc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aZ++}),this.uuid=cs(),this.name="",this.source=new WB(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new be(0,0),this.repeat=new be(1,1),this.center=new be(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new mi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==zB)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case jf:e.x=e.x-Math.floor(e.x);break;case Bo:e.x=e.x<0?0:1;break;case $P:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case jf:e.y=e.y-Math.floor(e.y);break;case Bo:e.y=e.y<0?0:1;break;case $P:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Ii.DEFAULT_IMAGE=null;Ii.DEFAULT_MAPPING=zB;class ir{constructor(e=0,t=0,n=0,i=1){ir.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*o,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*o,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*o,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,o;const s=e.elements,a=s[0],l=s[4],c=s[8],d=s[1],f=s[5],m=s[9],g=s[2],b=s[6],_=s[10];if(Math.abs(l-d)<.01&&Math.abs(c-g)<.01&&Math.abs(m-b)<.01){if(Math.abs(l+d)<.1&&Math.abs(c+g)<.1&&Math.abs(m+b)<.1&&Math.abs(a+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(a+1)/2,S=(f+1)/2,C=(_+1)/2,P=(l+d)/4,T=(c+g)/4,L=(m+b)/4;return M>S&&M>C?M<.01?(n=0,i=.707106781,o=.707106781):(n=Math.sqrt(M),i=P/n,o=T/n):S>C?S<.01?(n=.707106781,i=0,o=.707106781):(i=Math.sqrt(S),n=P/i,o=L/i):C<.01?(n=.707106781,i=.707106781,o=0):(o=Math.sqrt(C),n=T/o,i=L/o),this.set(n,i,o,t),this}let w=Math.sqrt((b-m)*(b-m)+(c-g)*(c-g)+(d-l)*(d-l));return Math.abs(w)<.001&&(w=1),this.x=(b-m)/w,this.y=(c-g)/w,this.z=(d-l)/w,this.w=Math.acos((a+f+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ir extends pd{constructor(e,t,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ir(0,0,e,t),this.scissorTest=!1,this.viewport=new ir(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new Ii(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:En,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new WB(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class GB extends Ii{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ln,this.minFilter=ln,this.wrapR=Bo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lZ extends Ii{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ln,this.minFilter=ln,this.wrapR=Bo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $i{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,o,s,a){let l=n[i+0],c=n[i+1],d=n[i+2],f=n[i+3];const m=o[s+0],g=o[s+1],b=o[s+2],_=o[s+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f;return}if(a===1){e[t+0]=m,e[t+1]=g,e[t+2]=b,e[t+3]=_;return}if(f!==_||l!==m||c!==g||d!==b){let w=1-a;const M=l*m+c*g+d*b+f*_,S=M>=0?1:-1,C=1-M*M;if(C>Number.EPSILON){const T=Math.sqrt(C),L=Math.atan2(T,M*S);w=Math.sin(w*L)/T,a=Math.sin(a*L)/T}const P=a*S;if(l=l*w+m*P,c=c*w+g*P,d=d*w+b*P,f=f*w+_*P,w===1-a){const T=1/Math.sqrt(l*l+c*c+d*d+f*f);l*=T,c*=T,d*=T,f*=T}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f}static multiplyQuaternionsFlat(e,t,n,i,o,s){const a=n[i],l=n[i+1],c=n[i+2],d=n[i+3],f=o[s],m=o[s+1],g=o[s+2],b=o[s+3];return e[t]=a*b+d*f+l*g-c*m,e[t+1]=l*b+d*m+c*f-a*g,e[t+2]=c*b+d*g+a*m-l*f,e[t+3]=d*b-a*f-l*m-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(n/2),d=a(i/2),f=a(o/2),m=l(n/2),g=l(i/2),b=l(o/2);switch(s){case"XYZ":this._x=m*d*f+c*g*b,this._y=c*g*f-m*d*b,this._z=c*d*b+m*g*f,this._w=c*d*f-m*g*b;break;case"YXZ":this._x=m*d*f+c*g*b,this._y=c*g*f-m*d*b,this._z=c*d*b-m*g*f,this._w=c*d*f+m*g*b;break;case"ZXY":this._x=m*d*f-c*g*b,this._y=c*g*f+m*d*b,this._z=c*d*b+m*g*f,this._w=c*d*f-m*g*b;break;case"ZYX":this._x=m*d*f-c*g*b,this._y=c*g*f+m*d*b,this._z=c*d*b-m*g*f,this._w=c*d*f+m*g*b;break;case"YZX":this._x=m*d*f+c*g*b,this._y=c*g*f+m*d*b,this._z=c*d*b-m*g*f,this._w=c*d*f-m*g*b;break;case"XZY":this._x=m*d*f-c*g*b,this._y=c*g*f-m*d*b,this._z=c*d*b+m*g*f,this._w=c*d*f+m*g*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],o=t[8],s=t[1],a=t[5],l=t[9],c=t[2],d=t[6],f=t[10],m=n+a+f;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(d-l)*g,this._y=(o-c)*g,this._z=(s-i)*g}else if(n>a&&n>f){const g=2*Math.sqrt(1+n-a-f);this._w=(d-l)/g,this._x=.25*g,this._y=(i+s)/g,this._z=(o+c)/g}else if(a>f){const g=2*Math.sqrt(1+a-n-f);this._w=(o-c)/g,this._x=(i+s)/g,this._y=.25*g,this._z=(l+d)/g}else{const g=2*Math.sqrt(1+f-n-a);this._w=(s-i)/g,this._x=(o+c)/g,this._y=(l+d)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Bn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,o=e._z,s=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=n*d+s*a+i*c-o*l,this._y=i*d+s*l+o*a-n*c,this._z=o*d+s*c+n*l-i*a,this._w=s*d-n*a-i*l-o*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+n*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*s+t*this._w,this._x=g*n+t*this._x,this._y=g*i+t*this._y,this._z=g*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),f=Math.sin((1-t)*d)/c,m=Math.sin(t*d)/c;return this._w=s*f+this._w*m,this._x=n*f+this._x*m,this._y=i*f+this._y*m,this._z=o*f+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(o),n*Math.cos(o),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,n=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_R.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_R.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*i,this.y=o[1]*t+o[4]*n+o[7]*i,this.z=o[2]*t+o[5]*n+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,o=e.elements,s=1/(o[3]*t+o[7]*n+o[11]*i+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*i+o[12])*s,this.y=(o[1]*t+o[5]*n+o[9]*i+o[13])*s,this.z=(o[2]*t+o[6]*n+o[10]*i+o[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=l*t+s*i-a*n,d=l*n+a*t-o*i,f=l*i+o*n-s*t,m=-o*t-s*n-a*i;return this.x=c*l+m*-o+d*-a-f*-s,this.y=d*l+m*-s+f*-o-c*-a,this.z=f*l+m*-a+c*-s-d*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i,this.y=o[1]*t+o[5]*n+o[9]*i,this.z=o[2]*t+o[6]*n+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=i*l-o*a,this.y=o*s-n*l,this.z=n*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return C3.copy(this).projectOnVector(e),this.sub(C3)}reflect(e){return this.sub(C3.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Bn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const C3=new j,_R=new $i;class wi{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const d=e[l],f=e[l+1],m=e[l+2];d<t&&(t=d),f<n&&(n=f),m<i&&(i=m),d>o&&(o=d),f>s&&(s=f),m>a&&(a=m)}return this.min.set(t,n,i),this.max.set(o,s,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const d=e.getX(l),f=e.getY(l),m=e.getZ(l);d<t&&(t=d),f<n&&(n=f),m<i&&(i=m),d>o&&(o=d),f>s&&(s=f),m>a&&(a=m)}return this.min.set(t,n,i),this.max.set(o,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=gh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0)if(t&&n.attributes!=null&&n.attributes.position!==void 0){const o=n.attributes.position;for(let s=0,a=o.count;s<a;s++)gh.fromBufferAttribute(o,s).applyMatrix4(e.matrixWorld),this.expandByPoint(gh)}else n.boundingBox===null&&n.computeBoundingBox(),E3.copy(n.boundingBox),E3.applyMatrix4(e.matrixWorld),this.union(E3);const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,gh),gh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Nv),I1.subVectors(this.max,Nv),cp.subVectors(e.a,Nv),hp.subVectors(e.b,Nv),dp.subVectors(e.c,Nv),Su.subVectors(hp,cp),Mu.subVectors(dp,hp),yh.subVectors(cp,dp);let t=[0,-Su.z,Su.y,0,-Mu.z,Mu.y,0,-yh.z,yh.y,Su.z,0,-Su.x,Mu.z,0,-Mu.x,yh.z,0,-yh.x,-Su.y,Su.x,0,-Mu.y,Mu.x,0,-yh.y,yh.x,0];return!P3(t,cp,hp,dp,I1)||(t=[1,0,0,0,1,0,0,0,1],!P3(t,cp,hp,dp,I1))?!1:(V1.crossVectors(Su,Mu),t=[V1.x,V1.y,V1.z],P3(t,cp,hp,dp,I1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return gh.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(gh).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(fl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const fl=[new j,new j,new j,new j,new j,new j,new j,new j],gh=new j,E3=new wi,cp=new j,hp=new j,dp=new j,Su=new j,Mu=new j,yh=new j,Nv=new j,I1=new j,V1=new j,_h=new j;function P3(r,e,t,n,i){for(let o=0,s=r.length-3;o<=s;o+=3){_h.fromArray(r,o);const a=i.x*Math.abs(_h.x)+i.y*Math.abs(_h.y)+i.z*Math.abs(_h.z),l=e.dot(_h),c=t.dot(_h),d=n.dot(_h);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const uZ=new wi,wR=new j,z1=new j,T3=new j;class fd{constructor(e=new j,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):uZ.setFromPoints(e).getCenter(n);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){T3.subVectors(e,this.center);const t=T3.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.add(T3.multiplyScalar(i/n)),this.radius+=i}return this}union(e){return this.center.equals(e.center)===!0?z1.set(0,0,1).multiplyScalar(e.radius):z1.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(wR.copy(e.center).add(z1)),this.expandByPoint(wR.copy(e.center).sub(z1)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ml=new j,A3=new j,B1=new j,Cu=new j,k3=new j,F1=new j,L3=new j;class ym{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ml)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ml.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ml.copy(this.direction).multiplyScalar(t).add(this.origin),ml.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){A3.copy(e).add(t).multiplyScalar(.5),B1.copy(t).sub(e).normalize(),Cu.copy(this.origin).sub(A3);const o=e.distanceTo(t)*.5,s=-this.direction.dot(B1),a=Cu.dot(this.direction),l=-Cu.dot(B1),c=Cu.lengthSq(),d=Math.abs(1-s*s);let f,m,g,b;if(d>0)if(f=s*l-a,m=s*a-l,b=o*d,f>=0)if(m>=-b)if(m<=b){const _=1/d;f*=_,m*=_,g=f*(f+s*m+2*a)+m*(s*f+m+2*l)+c}else m=o,f=Math.max(0,-(s*m+a)),g=-f*f+m*(m+2*l)+c;else m=-o,f=Math.max(0,-(s*m+a)),g=-f*f+m*(m+2*l)+c;else m<=-b?(f=Math.max(0,-(-s*o+a)),m=f>0?-o:Math.min(Math.max(-o,-l),o),g=-f*f+m*(m+2*l)+c):m<=b?(f=0,m=Math.min(Math.max(-o,-l),o),g=m*(m+2*l)+c):(f=Math.max(0,-(s*o+a)),m=f>0?o:Math.min(Math.max(-o,-l),o),g=-f*f+m*(m+2*l)+c);else m=s>0?-o:o,f=Math.max(0,-(s*m+a)),g=-f*f+m*(m+2*l)+c;return n&&n.copy(this.direction).multiplyScalar(f).add(this.origin),i&&i.copy(B1).multiplyScalar(m).add(A3),g}intersectSphere(e,t){ml.subVectors(e.center,this.origin);const n=ml.dot(this.direction),i=ml.dot(ml)-n*n,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=n-s,l=n+s;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,o,s,a,l;const c=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,m=this.origin;return c>=0?(n=(e.min.x-m.x)*c,i=(e.max.x-m.x)*c):(n=(e.max.x-m.x)*c,i=(e.min.x-m.x)*c),d>=0?(o=(e.min.y-m.y)*d,s=(e.max.y-m.y)*d):(o=(e.max.y-m.y)*d,s=(e.min.y-m.y)*d),n>s||o>i||((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),f>=0?(a=(e.min.z-m.z)*f,l=(e.max.z-m.z)*f):(a=(e.max.z-m.z)*f,l=(e.min.z-m.z)*f),n>l||a>i)||((a>n||n!==n)&&(n=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,ml)!==null}intersectTriangle(e,t,n,i,o){k3.subVectors(t,e),F1.subVectors(n,e),L3.crossVectors(k3,F1);let s=this.direction.dot(L3),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Cu.subVectors(this.origin,e);const l=a*this.direction.dot(F1.crossVectors(Cu,F1));if(l<0)return null;const c=a*this.direction.dot(k3.cross(Cu));if(c<0||l+c>s)return null;const d=-a*Cu.dot(L3);return d<0?null:this.at(d/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ct{constructor(){Ct.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,o,s,a,l,c,d,f,m,g,b,_,w){const M=this.elements;return M[0]=e,M[4]=t,M[8]=n,M[12]=i,M[1]=o,M[5]=s,M[9]=a,M[13]=l,M[2]=c,M[6]=d,M[10]=f,M[14]=m,M[3]=g,M[7]=b,M[11]=_,M[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ct().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/pp.setFromMatrixColumn(e,0).length(),o=1/pp.setFromMatrixColumn(e,1).length(),s=1/pp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,o=e.z,s=Math.cos(n),a=Math.sin(n),l=Math.cos(i),c=Math.sin(i),d=Math.cos(o),f=Math.sin(o);if(e.order==="XYZ"){const m=s*d,g=s*f,b=a*d,_=a*f;t[0]=l*d,t[4]=-l*f,t[8]=c,t[1]=g+b*c,t[5]=m-_*c,t[9]=-a*l,t[2]=_-m*c,t[6]=b+g*c,t[10]=s*l}else if(e.order==="YXZ"){const m=l*d,g=l*f,b=c*d,_=c*f;t[0]=m+_*a,t[4]=b*a-g,t[8]=s*c,t[1]=s*f,t[5]=s*d,t[9]=-a,t[2]=g*a-b,t[6]=_+m*a,t[10]=s*l}else if(e.order==="ZXY"){const m=l*d,g=l*f,b=c*d,_=c*f;t[0]=m-_*a,t[4]=-s*f,t[8]=b+g*a,t[1]=g+b*a,t[5]=s*d,t[9]=_-m*a,t[2]=-s*c,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){const m=s*d,g=s*f,b=a*d,_=a*f;t[0]=l*d,t[4]=b*c-g,t[8]=m*c+_,t[1]=l*f,t[5]=_*c+m,t[9]=g*c-b,t[2]=-c,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){const m=s*l,g=s*c,b=a*l,_=a*c;t[0]=l*d,t[4]=_-m*f,t[8]=b*f+g,t[1]=f,t[5]=s*d,t[9]=-a*d,t[2]=-c*d,t[6]=g*f+b,t[10]=m-_*f}else if(e.order==="XZY"){const m=s*l,g=s*c,b=a*l,_=a*c;t[0]=l*d,t[4]=-f,t[8]=c*d,t[1]=m*f+_,t[5]=s*d,t[9]=g*f-b,t[2]=b*f-g,t[6]=a*d,t[10]=_*f+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(cZ,e,hZ)}lookAt(e,t,n){const i=this.elements;return Ro.subVectors(e,t),Ro.lengthSq()===0&&(Ro.z=1),Ro.normalize(),Eu.crossVectors(n,Ro),Eu.lengthSq()===0&&(Math.abs(n.z)===1?Ro.x+=1e-4:Ro.z+=1e-4,Ro.normalize(),Eu.crossVectors(n,Ro)),Eu.normalize(),U1.crossVectors(Ro,Eu),i[0]=Eu.x,i[4]=U1.x,i[8]=Ro.x,i[1]=Eu.y,i[5]=U1.y,i[9]=Ro.y,i[2]=Eu.z,i[6]=U1.z,i[10]=Ro.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,o=this.elements,s=n[0],a=n[4],l=n[8],c=n[12],d=n[1],f=n[5],m=n[9],g=n[13],b=n[2],_=n[6],w=n[10],M=n[14],S=n[3],C=n[7],P=n[11],T=n[15],L=i[0],O=i[4],k=i[8],N=i[12],V=i[1],W=i[5],ee=i[9],se=i[13],q=i[2],re=i[6],Z=i[10],me=i[14],J=i[3],Q=i[7],$=i[11],fe=i[15];return o[0]=s*L+a*V+l*q+c*J,o[4]=s*O+a*W+l*re+c*Q,o[8]=s*k+a*ee+l*Z+c*$,o[12]=s*N+a*se+l*me+c*fe,o[1]=d*L+f*V+m*q+g*J,o[5]=d*O+f*W+m*re+g*Q,o[9]=d*k+f*ee+m*Z+g*$,o[13]=d*N+f*se+m*me+g*fe,o[2]=b*L+_*V+w*q+M*J,o[6]=b*O+_*W+w*re+M*Q,o[10]=b*k+_*ee+w*Z+M*$,o[14]=b*N+_*se+w*me+M*fe,o[3]=S*L+C*V+P*q+T*J,o[7]=S*O+C*W+P*re+T*Q,o[11]=S*k+C*ee+P*Z+T*$,o[15]=S*N+C*se+P*me+T*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],d=e[2],f=e[6],m=e[10],g=e[14],b=e[3],_=e[7],w=e[11],M=e[15];return b*(+o*l*f-i*c*f-o*a*m+n*c*m+i*a*g-n*l*g)+_*(+t*l*g-t*c*m+o*s*m-i*s*g+i*c*d-o*l*d)+w*(+t*c*f-t*a*g-o*s*f+n*s*g+o*a*d-n*c*d)+M*(-i*a*d-t*l*f+t*a*m+i*s*f-n*s*m+n*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],m=e[10],g=e[11],b=e[12],_=e[13],w=e[14],M=e[15],S=f*w*c-_*m*c+_*l*g-a*w*g-f*l*M+a*m*M,C=b*m*c-d*w*c-b*l*g+s*w*g+d*l*M-s*m*M,P=d*_*c-b*f*c+b*a*g-s*_*g-d*a*M+s*f*M,T=b*f*l-d*_*l-b*a*m+s*_*m+d*a*w-s*f*w,L=t*S+n*C+i*P+o*T;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/L;return e[0]=S*O,e[1]=(_*m*o-f*w*o-_*i*g+n*w*g+f*i*M-n*m*M)*O,e[2]=(a*w*o-_*l*o+_*i*c-n*w*c-a*i*M+n*l*M)*O,e[3]=(f*l*o-a*m*o-f*i*c+n*m*c+a*i*g-n*l*g)*O,e[4]=C*O,e[5]=(d*w*o-b*m*o+b*i*g-t*w*g-d*i*M+t*m*M)*O,e[6]=(b*l*o-s*w*o-b*i*c+t*w*c+s*i*M-t*l*M)*O,e[7]=(s*m*o-d*l*o+d*i*c-t*m*c-s*i*g+t*l*g)*O,e[8]=P*O,e[9]=(b*f*o-d*_*o-b*n*g+t*_*g+d*n*M-t*f*M)*O,e[10]=(s*_*o-b*a*o+b*n*c-t*_*c-s*n*M+t*a*M)*O,e[11]=(d*a*o-s*f*o-d*n*c+t*f*c+s*n*g-t*a*g)*O,e[12]=T*O,e[13]=(d*_*i-b*f*i+b*n*m-t*_*m-d*n*w+t*f*w)*O,e[14]=(b*a*i-s*_*i-b*n*l+t*_*l+s*n*w-t*a*w)*O,e[15]=(s*f*i-d*a*i+d*n*l-t*f*l-s*n*m+t*a*m)*O,this}scale(e){const t=this.elements,n=e.x,i=e.y,o=e.z;return t[0]*=n,t[4]*=i,t[8]*=o,t[1]*=n,t[5]*=i,t[9]*=o,t[2]*=n,t[6]*=i,t[10]*=o,t[3]*=n,t[7]*=i,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),o=1-n,s=e.x,a=e.y,l=e.z,c=o*s,d=o*a;return this.set(c*s+n,c*a-i*l,c*l+i*a,0,c*a+i*l,d*a+n,d*l-i*s,0,c*l-i*a,d*l+i*s,o*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,o,s){return this.set(1,n,o,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,c=o+o,d=s+s,f=a+a,m=o*c,g=o*d,b=o*f,_=s*d,w=s*f,M=a*f,S=l*c,C=l*d,P=l*f,T=n.x,L=n.y,O=n.z;return i[0]=(1-(_+M))*T,i[1]=(g+P)*T,i[2]=(b-C)*T,i[3]=0,i[4]=(g-P)*L,i[5]=(1-(m+M))*L,i[6]=(w+S)*L,i[7]=0,i[8]=(b+C)*O,i[9]=(w-S)*O,i[10]=(1-(m+_))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let o=pp.set(i[0],i[1],i[2]).length();const s=pp.set(i[4],i[5],i[6]).length(),a=pp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Os.copy(this);const l=1/o,c=1/s,d=1/a;return Os.elements[0]*=l,Os.elements[1]*=l,Os.elements[2]*=l,Os.elements[4]*=c,Os.elements[5]*=c,Os.elements[6]*=c,Os.elements[8]*=d,Os.elements[9]*=d,Os.elements[10]*=d,t.setFromRotationMatrix(Os),n.x=o,n.y=s,n.z=a,this}makePerspective(e,t,n,i,o,s){const a=this.elements,l=2*o/(t-e),c=2*o/(n-i),d=(t+e)/(t-e),f=(n+i)/(n-i),m=-(s+o)/(s-o),g=-2*s*o/(s-o);return a[0]=l,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=m,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,o,s){const a=this.elements,l=1/(t-e),c=1/(n-i),d=1/(s-o),f=(t+e)*l,m=(n+i)*c,g=(s+o)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-m,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const pp=new j,Os=new Ct,cZ=new j(0,0,0),hZ=new j(1,1,1),Eu=new j,U1=new j,Ro=new j,bR=new Ct,xR=new $i;class _m{constructor(e=0,t=0,n=0,i=_m.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],c=i[5],d=i[9],f=i[2],m=i[6],g=i[10];switch(t){case"XYZ":this._y=Math.asin(Bn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Bn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(Bn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Bn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(Bn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-Bn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return bR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bR,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return xR.setFromEuler(this),this.setFromQuaternion(xR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}_m.DefaultOrder="XYZ";_m.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class A4{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let dZ=0;const SR=new j,fp=new $i,vl=new Ct,j1=new j,Iv=new j,pZ=new j,fZ=new $i,MR=new j(1,0,0),CR=new j(0,1,0),ER=new j(0,0,1),mZ={type:"added"},PR={type:"removed"};class pr extends pd{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:dZ++}),this.uuid=cs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pr.DefaultUp.clone();const e=new j,t=new _m,n=new $i,i=new j(1,1,1);function o(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(o),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ct},normalMatrix:{value:new mi}}),this.matrix=new Ct,this.matrixWorld=new Ct,this.matrixAutoUpdate=pr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new A4,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return fp.setFromAxisAngle(e,t),this.quaternion.multiply(fp),this}rotateOnWorldAxis(e,t){return fp.setFromAxisAngle(e,t),this.quaternion.premultiply(fp),this}rotateX(e){return this.rotateOnAxis(MR,e)}rotateY(e){return this.rotateOnAxis(CR,e)}rotateZ(e){return this.rotateOnAxis(ER,e)}translateOnAxis(e,t){return SR.copy(e).applyQuaternion(this.quaternion),this.position.add(SR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(MR,e)}translateY(e){return this.translateOnAxis(CR,e)}translateZ(e){return this.translateOnAxis(ER,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(vl.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?j1.copy(e):j1.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Iv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vl.lookAt(Iv,j1,this.up):vl.lookAt(j1,Iv,this.up),this.quaternion.setFromRotationMatrix(vl),i&&(vl.extractRotation(i.matrixWorld),fp.setFromRotationMatrix(vl),this.quaternion.premultiply(fp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(mZ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(PR)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(PR)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),vl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),vl.multiply(e.parent.matrixWorld)),e.applyMatrix4(vl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Iv,e,pZ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Iv,fZ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const f=l[c];o(e.shapes,f)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(t){const a=s(e.geometries),l=s(e.materials),c=s(e.textures),d=s(e.images),f=s(e.shapes),m=s(e.skeletons),g=s(e.animations),b=s(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),d.length>0&&(n.images=d),f.length>0&&(n.shapes=f),m.length>0&&(n.skeletons=m),g.length>0&&(n.animations=g),b.length>0&&(n.nodes=b)}return n.object=i,n;function s(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}pr.DefaultUp=new j(0,1,0);pr.DefaultMatrixAutoUpdate=!0;const Ds=new j,gl=new j,O3=new j,yl=new j,mp=new j,vp=new j,TR=new j,D3=new j,R3=new j,N3=new j;class Fo{constructor(e=new j,t=new j,n=new j){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Ds.subVectors(e,t),i.cross(Ds);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,t,n,i,o){Ds.subVectors(i,t),gl.subVectors(n,t),O3.subVectors(e,t);const s=Ds.dot(Ds),a=Ds.dot(gl),l=Ds.dot(O3),c=gl.dot(gl),d=gl.dot(O3),f=s*c-a*a;if(f===0)return o.set(-2,-1,-1);const m=1/f,g=(c*l-a*d)*m,b=(s*d-a*l)*m;return o.set(1-g-b,b,g)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,yl),yl.x>=0&&yl.y>=0&&yl.x+yl.y<=1}static getUV(e,t,n,i,o,s,a,l){return this.getBarycoord(e,t,n,i,yl),l.set(0,0),l.addScaledVector(o,yl.x),l.addScaledVector(s,yl.y),l.addScaledVector(a,yl.z),l}static isFrontFacing(e,t,n,i){return Ds.subVectors(n,t),gl.subVectors(e,t),Ds.cross(gl).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ds.subVectors(this.c,this.b),gl.subVectors(this.a,this.b),Ds.cross(gl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Fo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,o){return Fo.getUV(e,this.a,this.b,this.c,t,n,i,o)}containsPoint(e){return Fo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,o=this.c;let s,a;mp.subVectors(i,n),vp.subVectors(o,n),D3.subVectors(e,n);const l=mp.dot(D3),c=vp.dot(D3);if(l<=0&&c<=0)return t.copy(n);R3.subVectors(e,i);const d=mp.dot(R3),f=vp.dot(R3);if(d>=0&&f<=d)return t.copy(i);const m=l*f-d*c;if(m<=0&&l>=0&&d<=0)return s=l/(l-d),t.copy(n).addScaledVector(mp,s);N3.subVectors(e,o);const g=mp.dot(N3),b=vp.dot(N3);if(b>=0&&g<=b)return t.copy(o);const _=g*c-l*b;if(_<=0&&c>=0&&b<=0)return a=c/(c-b),t.copy(n).addScaledVector(vp,a);const w=d*b-g*f;if(w<=0&&f-d>=0&&g-b>=0)return TR.subVectors(o,i),a=(f-d)/(f-d+(g-b)),t.copy(i).addScaledVector(TR,a);const M=1/(w+_+m);return s=_*M,a=m*M,t.copy(n).addScaledVector(mp,s).addScaledVector(vp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let vZ=0;class Ua extends pd{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vZ++}),this.uuid=cs(),this.name="",this.type="Material",this.blending=df,this.side=td,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=OB,this.blendDst=DB,this.blendEquation=Yu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=JP,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=GK,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=w3,this.stencilZFail=w3,this.stencilZPass=w3,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===iK;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==df&&(n.blending=this.blending),this.side!==td&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(t){const o=i(e.textures),s=i(e.images);o.length>0&&(n.textures=o),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let o=0;o!==i;++o)n[o]=t[o].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class wm extends Ua{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=IB,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Mn=new j,H1=new be;class eo{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=rT,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let i=0,o=e.length;i<o;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Je),t[n++]=s.r,t[n++]=s.g,t[n++]=s.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let i=0,o=e.length;i<o;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new be),t[n++]=s.x,t[n++]=s.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let i=0,o=e.length;i<o;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new j),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let i=0,o=e.length;i<o;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new ir),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z,t[n++]=s.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)H1.fromBufferAttribute(this,t),H1.applyMatrix3(e),this.setXY(t,H1.x,H1.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Mn.fromBufferAttribute(this,t),Mn.applyMatrix3(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Mn.fromBufferAttribute(this,t),Mn.applyMatrix4(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Mn.fromBufferAttribute(this,t),Mn.applyNormalMatrix(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Mn.fromBufferAttribute(this,t),Mn.transformDirection(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==rT&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class YB extends eo{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class XB extends eo{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Vt extends eo{constructor(e,t,n){super(new Float32Array(e),t,n)}}let gZ=0;const rs=new Ct,I3=new pr,gp=new j,No=new wi,Vv=new wi,Qn=new j;class zr extends pd{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:gZ++}),this.uuid=cs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(UB(e)?XB:YB)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new mi().getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return rs.makeRotationFromQuaternion(e),this.applyMatrix4(rs),this}rotateX(e){return rs.makeRotationX(e),this.applyMatrix4(rs),this}rotateY(e){return rs.makeRotationY(e),this.applyMatrix4(rs),this}rotateZ(e){return rs.makeRotationZ(e),this.applyMatrix4(rs),this}translate(e,t,n){return rs.makeTranslation(e,t,n),this.applyMatrix4(rs),this}scale(e,t,n){return rs.makeScale(e,t,n),this.applyMatrix4(rs),this}lookAt(e){return I3.lookAt(e),I3.updateMatrix(),this.applyMatrix4(I3.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(gp).negate(),this.translate(gp.x,gp.y,gp.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const o=e[n];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Vt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new wi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const o=t[n];No.setFromBufferAttribute(o),this.morphTargetsRelative?(Qn.addVectors(this.boundingBox.min,No.min),this.boundingBox.expandByPoint(Qn),Qn.addVectors(this.boundingBox.max,No.max),this.boundingBox.expandByPoint(Qn)):(this.boundingBox.expandByPoint(No.min),this.boundingBox.expandByPoint(No.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new fd);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new j,1/0);return}if(e){const n=this.boundingSphere.center;if(No.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){const a=t[o];Vv.setFromBufferAttribute(a),this.morphTargetsRelative?(Qn.addVectors(No.min,Vv.min),No.expandByPoint(Qn),Qn.addVectors(No.max,Vv.max),No.expandByPoint(Qn)):(No.expandByPoint(Vv.min),No.expandByPoint(Vv.max))}No.getCenter(n);let i=0;for(let o=0,s=e.count;o<s;o++)Qn.fromBufferAttribute(e,o),i=Math.max(i,n.distanceToSquared(Qn));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)Qn.fromBufferAttribute(a,c),l&&(gp.fromBufferAttribute(e,c),Qn.add(gp)),i=Math.max(i,n.distanceToSquared(Qn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,o=t.normal.array,s=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new eo(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let V=0;V<a;V++)c[V]=new j,d[V]=new j;const f=new j,m=new j,g=new j,b=new be,_=new be,w=new be,M=new j,S=new j;function C(V,W,ee){f.fromArray(i,V*3),m.fromArray(i,W*3),g.fromArray(i,ee*3),b.fromArray(s,V*2),_.fromArray(s,W*2),w.fromArray(s,ee*2),m.sub(f),g.sub(f),_.sub(b),w.sub(b);const se=1/(_.x*w.y-w.x*_.y);!isFinite(se)||(M.copy(m).multiplyScalar(w.y).addScaledVector(g,-_.y).multiplyScalar(se),S.copy(g).multiplyScalar(_.x).addScaledVector(m,-w.x).multiplyScalar(se),c[V].add(M),c[W].add(M),c[ee].add(M),d[V].add(S),d[W].add(S),d[ee].add(S))}let P=this.groups;P.length===0&&(P=[{start:0,count:n.length}]);for(let V=0,W=P.length;V<W;++V){const ee=P[V],se=ee.start,q=ee.count;for(let re=se,Z=se+q;re<Z;re+=3)C(n[re+0],n[re+1],n[re+2])}const T=new j,L=new j,O=new j,k=new j;function N(V){O.fromArray(o,V*3),k.copy(O);const W=c[V];T.copy(W),T.sub(O.multiplyScalar(O.dot(W))).normalize(),L.crossVectors(k,W);const ee=L.dot(d[V])<0?-1:1;l[V*4]=T.x,l[V*4+1]=T.y,l[V*4+2]=T.z,l[V*4+3]=ee}for(let V=0,W=P.length;V<W;++V){const ee=P[V],se=ee.start,q=ee.count;for(let re=se,Z=se+q;re<Z;re+=3)N(n[re+0]),N(n[re+1]),N(n[re+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new eo(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let m=0,g=n.count;m<g;m++)n.setXYZ(m,0,0,0);const i=new j,o=new j,s=new j,a=new j,l=new j,c=new j,d=new j,f=new j;if(e)for(let m=0,g=e.count;m<g;m+=3){const b=e.getX(m+0),_=e.getX(m+1),w=e.getX(m+2);i.fromBufferAttribute(t,b),o.fromBufferAttribute(t,_),s.fromBufferAttribute(t,w),d.subVectors(s,o),f.subVectors(i,o),d.cross(f),a.fromBufferAttribute(n,b),l.fromBufferAttribute(n,_),c.fromBufferAttribute(n,w),a.add(d),l.add(d),c.add(d),n.setXYZ(b,a.x,a.y,a.z),n.setXYZ(_,l.x,l.y,l.z),n.setXYZ(w,c.x,c.y,c.z)}else for(let m=0,g=t.count;m<g;m+=3)i.fromBufferAttribute(t,m+0),o.fromBufferAttribute(t,m+1),s.fromBufferAttribute(t,m+2),d.subVectors(s,o),f.subVectors(i,o),d.cross(f),n.setXYZ(m+0,d.x,d.y,d.z),n.setXYZ(m+1,d.x,d.y,d.z),n.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(e.attributes[i]===void 0)continue;const o=n[i].array,s=e.attributes[i],a=s.array,l=s.itemSize*t,c=Math.min(a.length,o.length-l);for(let d=0,f=l;d<c;d++,f++)o[f]=a[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Qn.fromBufferAttribute(e,t),Qn.normalize(),e.setXYZ(t,Qn.x,Qn.y,Qn.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,f=a.normalized,m=new c.constructor(l.length*d);let g=0,b=0;for(let _=0,w=l.length;_<w;_++){a.isInterleavedBufferAttribute?g=l[_]*a.data.stride+a.offset:g=l[_]*d;for(let M=0;M<d;M++)m[b++]=c[g++]}return new eo(m,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new zr,n=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,n);t.setAttribute(a,c)}const o=this.morphAttributes;for(const a in o){const l=[],c=o[a];for(let d=0,f=c.length;d<f;d++){const m=c[d],g=e(m,n);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let f=0,m=c.length;f<m;f++){const g=c[f];d.push(g.toJSON(e.data))}d.length>0&&(i[l]=d,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const c in i){const d=i[c];this.setAttribute(c,d.clone(t))}const o=e.morphAttributes;for(const c in o){const d=[],f=o[c];for(let m=0,g=f.length;m<g;m++)d.push(f[m].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,d=s.length;c<d;c++){const f=s[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const AR=new Ct,yp=new ym,V3=new fd,Pu=new j,Tu=new j,Au=new j,z3=new j,B3=new j,F3=new j,W1=new j,G1=new j,Y1=new j,X1=new be,q1=new be,K1=new be,U3=new j,Z1=new j;class vi extends pr{constructor(e=new zr,t=new wm){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=n.length;i<o;i++){const s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}raycast(e,t){const n=this.geometry,i=this.material,o=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),V3.copy(n.boundingSphere),V3.applyMatrix4(o),e.ray.intersectsSphere(V3)===!1)||(AR.copy(o).invert(),yp.copy(e.ray).applyMatrix4(AR),n.boundingBox!==null&&yp.intersectsBox(n.boundingBox)===!1))return;let s;const a=n.index,l=n.attributes.position,c=n.morphAttributes.position,d=n.morphTargetsRelative,f=n.attributes.uv,m=n.attributes.uv2,g=n.groups,b=n.drawRange;if(a!==null)if(Array.isArray(i))for(let _=0,w=g.length;_<w;_++){const M=g[_],S=i[M.materialIndex],C=Math.max(M.start,b.start),P=Math.min(a.count,Math.min(M.start+M.count,b.start+b.count));for(let T=C,L=P;T<L;T+=3){const O=a.getX(T),k=a.getX(T+1),N=a.getX(T+2);s=J1(this,S,e,yp,l,c,d,f,m,O,k,N),s&&(s.faceIndex=Math.floor(T/3),s.face.materialIndex=M.materialIndex,t.push(s))}}else{const _=Math.max(0,b.start),w=Math.min(a.count,b.start+b.count);for(let M=_,S=w;M<S;M+=3){const C=a.getX(M),P=a.getX(M+1),T=a.getX(M+2);s=J1(this,i,e,yp,l,c,d,f,m,C,P,T),s&&(s.faceIndex=Math.floor(M/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(i))for(let _=0,w=g.length;_<w;_++){const M=g[_],S=i[M.materialIndex],C=Math.max(M.start,b.start),P=Math.min(l.count,Math.min(M.start+M.count,b.start+b.count));for(let T=C,L=P;T<L;T+=3){const O=T,k=T+1,N=T+2;s=J1(this,S,e,yp,l,c,d,f,m,O,k,N),s&&(s.faceIndex=Math.floor(T/3),s.face.materialIndex=M.materialIndex,t.push(s))}}else{const _=Math.max(0,b.start),w=Math.min(l.count,b.start+b.count);for(let M=_,S=w;M<S;M+=3){const C=M,P=M+1,T=M+2;s=J1(this,i,e,yp,l,c,d,f,m,C,P,T),s&&(s.faceIndex=Math.floor(M/3),t.push(s))}}}}function yZ(r,e,t,n,i,o,s,a){let l;if(e.side===Mo?l=n.intersectTriangle(s,o,i,!0,a):l=n.intersectTriangle(i,o,s,e.side!==Gl,a),l===null)return null;Z1.copy(a),Z1.applyMatrix4(r.matrixWorld);const c=t.ray.origin.distanceTo(Z1);return c<t.near||c>t.far?null:{distance:c,point:Z1.clone(),object:r}}function J1(r,e,t,n,i,o,s,a,l,c,d,f){Pu.fromBufferAttribute(i,c),Tu.fromBufferAttribute(i,d),Au.fromBufferAttribute(i,f);const m=r.morphTargetInfluences;if(o&&m){W1.set(0,0,0),G1.set(0,0,0),Y1.set(0,0,0);for(let b=0,_=o.length;b<_;b++){const w=m[b],M=o[b];w!==0&&(z3.fromBufferAttribute(M,c),B3.fromBufferAttribute(M,d),F3.fromBufferAttribute(M,f),s?(W1.addScaledVector(z3,w),G1.addScaledVector(B3,w),Y1.addScaledVector(F3,w)):(W1.addScaledVector(z3.sub(Pu),w),G1.addScaledVector(B3.sub(Tu),w),Y1.addScaledVector(F3.sub(Au),w)))}Pu.add(W1),Tu.add(G1),Au.add(Y1)}r.isSkinnedMesh&&(r.boneTransform(c,Pu),r.boneTransform(d,Tu),r.boneTransform(f,Au));const g=yZ(r,e,t,n,Pu,Tu,Au,U3);if(g){a&&(X1.fromBufferAttribute(a,c),q1.fromBufferAttribute(a,d),K1.fromBufferAttribute(a,f),g.uv=Fo.getUV(U3,Pu,Tu,Au,X1,q1,K1,new be)),l&&(X1.fromBufferAttribute(l,c),q1.fromBufferAttribute(l,d),K1.fromBufferAttribute(l,f),g.uv2=Fo.getUV(U3,Pu,Tu,Au,X1,q1,K1,new be));const b={a:c,b:d,c:f,normal:new j,materialIndex:0};Fo.getNormal(Pu,Tu,Au,b.normal),g.face=b}return g}class md extends zr{constructor(e=1,t=1,n=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],c=[],d=[],f=[];let m=0,g=0;b("z","y","x",-1,-1,n,t,e,s,o,0),b("z","y","x",1,-1,n,t,-e,s,o,1),b("x","z","y",1,1,e,n,t,i,s,2),b("x","z","y",1,-1,e,n,-t,i,s,3),b("x","y","z",1,-1,e,t,n,i,o,4),b("x","y","z",-1,-1,e,t,-n,i,o,5),this.setIndex(l),this.setAttribute("position",new Vt(c,3)),this.setAttribute("normal",new Vt(d,3)),this.setAttribute("uv",new Vt(f,2));function b(_,w,M,S,C,P,T,L,O,k,N){const V=P/O,W=T/k,ee=P/2,se=T/2,q=L/2,re=O+1,Z=k+1;let me=0,J=0;const Q=new j;for(let $=0;$<Z;$++){const fe=$*W-se;for(let he=0;he<re;he++){const Se=he*V-ee;Q[_]=Se*S,Q[w]=fe*C,Q[M]=q,c.push(Q.x,Q.y,Q.z),Q[_]=0,Q[w]=0,Q[M]=L>0?1:-1,d.push(Q.x,Q.y,Q.z),f.push(he/O),f.push(1-$/k),me+=1}}for(let $=0;$<k;$++)for(let fe=0;fe<O;fe++){const he=m+fe+re*$,Se=m+fe+re*($+1),Re=m+(fe+1)+re*($+1),st=m+(fe+1)+re*$;l.push(he,Se,st),l.push(Se,Re,st),J+=6}a.addGroup(g,J,N),g+=J,m+=me}}static fromJSON(e){return new md(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Wf(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function ki(r){const e={};for(let t=0;t<r.length;t++){const n=Wf(r[t]);for(const i in n)e[i]=n[i]}return e}function _Z(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}const fi={clone:Wf,merge:ki};var wZ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,bZ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ar extends Ua{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=wZ,this.fragmentShader=bZ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wf(e.uniforms),this.uniformsGroups=_Z(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class k4 extends pr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ct,this.projectionMatrix=new Ct,this.projectionMatrixInverse=new Ct}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Fn extends k4{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=w0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Og*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return w0*2*Math.atan(Math.tan(Og*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Og*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*i/l,t-=s.offsetY*n/c,i*=s.width/l,n*=s.height/c}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const _p=90,wp=1;class qB extends pr{constructor(e,t,n){if(super(),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new Fn(_p,wp,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new j(1,0,0)),this.add(i);const o=new Fn(_p,wp,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new j(-1,0,0)),this.add(o);const s=new Fn(_p,wp,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new j(0,1,0)),this.add(s);const a=new Fn(_p,wp,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new j(0,-1,0)),this.add(a);const l=new Fn(_p,wp,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new j(0,0,1)),this.add(l);const c=new Fn(_p,wp,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new j(0,0,-1)),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[i,o,s,a,l,c]=this.children,d=e.getRenderTarget(),f=e.toneMapping,m=e.xr.enabled;e.toneMapping=ka,e.xr.enabled=!1;const g=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,o),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=g,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(d),e.toneMapping=f,e.xr.enabled=m,n.texture.needsPMREMUpdate=!0}}class L4 extends Ii{constructor(e,t,n,i,o,s,a,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:Ff,super(e,t,n,i,o,s,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class KB extends Ir{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new L4(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:En}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new md(5,5,5),o=new ar({name:"CubemapFromEquirect",uniforms:Wf(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Mo,blending:Cn});o.uniforms.tEquirect.value=t;const s=new vi(i,o),a=t.minFilter;return t.minFilter===K0&&(t.minFilter=En),new qB(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,i);e.setRenderTarget(o)}}const j3=new j,xZ=new j,SZ=new mi;class Tl{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=j3.subVectors(n,t).cross(xZ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(j3),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:t.copy(n).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||SZ.getNormalMatrix(e),i=this.coplanarPoint(j3).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const bp=new fd,Q1=new j;class PS{constructor(e=new Tl,t=new Tl,n=new Tl,i=new Tl,o=new Tl,s=new Tl){this.planes=[e,t,n,i,o,s]}set(e,t,n,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],o=n[1],s=n[2],a=n[3],l=n[4],c=n[5],d=n[6],f=n[7],m=n[8],g=n[9],b=n[10],_=n[11],w=n[12],M=n[13],S=n[14],C=n[15];return t[0].setComponents(a-i,f-l,_-m,C-w).normalize(),t[1].setComponents(a+i,f+l,_+m,C+w).normalize(),t[2].setComponents(a+o,f+c,_+g,C+M).normalize(),t[3].setComponents(a-o,f-c,_-g,C-M).normalize(),t[4].setComponents(a-s,f-d,_-b,C-S).normalize(),t[5].setComponents(a+s,f+d,_+b,C+S).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),bp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(bp)}intersectsSprite(e){return bp.center.set(0,0,0),bp.radius=.7071067811865476,bp.applyMatrix4(e.matrixWorld),this.intersectsSphere(bp)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Q1.x=i.normal.x>0?e.max.x:e.min.x,Q1.y=i.normal.y>0?e.max.y:e.min.y,Q1.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Q1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ZB(){let r=null,e=!1,t=null,n=null;function i(o,s){t(o,s),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){r=o}}}function MZ(r,e){const t=e.isWebGL2,n=new WeakMap;function i(c,d){const f=c.array,m=c.usage,g=r.createBuffer();r.bindBuffer(d,g),r.bufferData(d,f,m),c.onUploadCallback();let b;if(f instanceof Float32Array)b=5126;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)b=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else b=5123;else if(f instanceof Int16Array)b=5122;else if(f instanceof Uint32Array)b=5125;else if(f instanceof Int32Array)b=5124;else if(f instanceof Int8Array)b=5120;else if(f instanceof Uint8Array)b=5121;else if(f instanceof Uint8ClampedArray)b=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:g,type:b,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function o(c,d,f){const m=d.array,g=d.updateRange;r.bindBuffer(f,c),g.count===-1?r.bufferSubData(f,0,m):(t?r.bufferSubData(f,g.offset*m.BYTES_PER_ELEMENT,m,g.offset,g.count):r.bufferSubData(f,g.offset*m.BYTES_PER_ELEMENT,m.subarray(g.offset,g.offset+g.count)),g.count=-1)}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=n.get(c);d&&(r.deleteBuffer(d.buffer),n.delete(c))}function l(c,d){if(c.isGLBufferAttribute){const m=n.get(c);(!m||m.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=n.get(c);f===void 0?n.set(c,i(c,d)):f.version<c.version&&(o(f.buffer,c,d),f.version=c.version)}return{get:s,remove:a,update:l}}class J0 extends zr{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const o=e/2,s=t/2,a=Math.floor(n),l=Math.floor(i),c=a+1,d=l+1,f=e/a,m=t/l,g=[],b=[],_=[],w=[];for(let M=0;M<d;M++){const S=M*m-s;for(let C=0;C<c;C++){const P=C*f-o;b.push(P,-S,0),_.push(0,0,1),w.push(C/a),w.push(1-M/l)}}for(let M=0;M<l;M++)for(let S=0;S<a;S++){const C=S+c*M,P=S+c*(M+1),T=S+1+c*(M+1),L=S+1+c*M;g.push(C,P,L),g.push(P,T,L)}this.setIndex(g),this.setAttribute("position",new Vt(b,3)),this.setAttribute("normal",new Vt(_,3)),this.setAttribute("uv",new Vt(w,2))}static fromJSON(e){return new J0(e.width,e.height,e.widthSegments,e.heightSegments)}}var CZ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,EZ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PZ=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,TZ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,AZ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,kZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,LZ="vec3 transformed = vec3( position );",OZ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,DZ=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,RZ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,NZ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,IZ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,VZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,zZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,BZ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,FZ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,UZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,jZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,HZ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,WZ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,GZ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,YZ=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,XZ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,qZ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,KZ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ZZ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,JZ="gl_FragColor = linearToOutputTexel( gl_FragColor );",QZ=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,$Z=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,eJ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,tJ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rJ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,iJ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,oJ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sJ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,aJ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,lJ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,uJ=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,cJ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hJ=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,dJ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,pJ=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,fJ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,mJ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,vJ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gJ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,yJ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,_J=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,wJ=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,bJ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,xJ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,SJ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,MJ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,CJ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,EJ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,PJ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,TJ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,kJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,LJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,OJ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,DJ=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,RJ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,NJ=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,IJ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,VJ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,zJ=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,BJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,FJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,UJ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,jJ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,HJ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,WJ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,GJ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,YJ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,XJ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qJ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,KJ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ZJ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,JJ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,QJ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$J=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eQ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tQ=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,rQ=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,nQ=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,iQ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,oQ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,sQ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,aQ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,lQ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,uQ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,cQ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,hQ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dQ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,pQ=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,fQ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,mQ=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,vQ=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,gQ=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,yQ=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,_Q=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,wQ=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,bQ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const xQ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,SQ=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,MQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,CQ=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,EQ=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,PQ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,TQ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,AQ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,kQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,LQ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,OQ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,DQ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,RQ=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,NQ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IQ=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VQ=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zQ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,BQ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FQ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,UQ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,jQ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HQ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WQ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,GQ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YQ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XQ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qQ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,KQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZQ=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JQ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,QQ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$Q=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ht={alphamap_fragment:CZ,alphamap_pars_fragment:EZ,alphatest_fragment:PZ,alphatest_pars_fragment:TZ,aomap_fragment:AZ,aomap_pars_fragment:kZ,begin_vertex:LZ,beginnormal_vertex:OZ,bsdfs:DZ,iridescence_fragment:RZ,bumpmap_pars_fragment:NZ,clipping_planes_fragment:IZ,clipping_planes_pars_fragment:VZ,clipping_planes_pars_vertex:zZ,clipping_planes_vertex:BZ,color_fragment:FZ,color_pars_fragment:UZ,color_pars_vertex:jZ,color_vertex:HZ,common:WZ,cube_uv_reflection_fragment:GZ,defaultnormal_vertex:YZ,displacementmap_pars_vertex:XZ,displacementmap_vertex:qZ,emissivemap_fragment:KZ,emissivemap_pars_fragment:ZZ,encodings_fragment:JZ,encodings_pars_fragment:QZ,envmap_fragment:$Z,envmap_common_pars_fragment:eJ,envmap_pars_fragment:tJ,envmap_pars_vertex:rJ,envmap_physical_pars_fragment:pJ,envmap_vertex:nJ,fog_vertex:iJ,fog_pars_vertex:oJ,fog_fragment:sJ,fog_pars_fragment:aJ,gradientmap_pars_fragment:lJ,lightmap_fragment:uJ,lightmap_pars_fragment:cJ,lights_lambert_vertex:hJ,lights_pars_begin:dJ,lights_toon_fragment:fJ,lights_toon_pars_fragment:mJ,lights_phong_fragment:vJ,lights_phong_pars_fragment:gJ,lights_physical_fragment:yJ,lights_physical_pars_fragment:_J,lights_fragment_begin:wJ,lights_fragment_maps:bJ,lights_fragment_end:xJ,logdepthbuf_fragment:SJ,logdepthbuf_pars_fragment:MJ,logdepthbuf_pars_vertex:CJ,logdepthbuf_vertex:EJ,map_fragment:PJ,map_pars_fragment:TJ,map_particle_fragment:AJ,map_particle_pars_fragment:kJ,metalnessmap_fragment:LJ,metalnessmap_pars_fragment:OJ,morphcolor_vertex:DJ,morphnormal_vertex:RJ,morphtarget_pars_vertex:NJ,morphtarget_vertex:IJ,normal_fragment_begin:VJ,normal_fragment_maps:zJ,normal_pars_fragment:BJ,normal_pars_vertex:FJ,normal_vertex:UJ,normalmap_pars_fragment:jJ,clearcoat_normal_fragment_begin:HJ,clearcoat_normal_fragment_maps:WJ,clearcoat_pars_fragment:GJ,iridescence_pars_fragment:YJ,output_fragment:XJ,packing:qJ,premultiplied_alpha_fragment:KJ,project_vertex:ZJ,dithering_fragment:JJ,dithering_pars_fragment:QJ,roughnessmap_fragment:$J,roughnessmap_pars_fragment:eQ,shadowmap_pars_fragment:tQ,shadowmap_pars_vertex:rQ,shadowmap_vertex:nQ,shadowmask_pars_fragment:iQ,skinbase_vertex:oQ,skinning_pars_vertex:sQ,skinning_vertex:aQ,skinnormal_vertex:lQ,specularmap_fragment:uQ,specularmap_pars_fragment:cQ,tonemapping_fragment:hQ,tonemapping_pars_fragment:dQ,transmission_fragment:pQ,transmission_pars_fragment:fQ,uv_pars_fragment:mQ,uv_pars_vertex:vQ,uv_vertex:gQ,uv2_pars_fragment:yQ,uv2_pars_vertex:_Q,uv2_vertex:wQ,worldpos_vertex:bQ,background_vert:xQ,background_frag:SQ,cube_vert:MQ,cube_frag:CQ,depth_vert:EQ,depth_frag:PQ,distanceRGBA_vert:TQ,distanceRGBA_frag:AQ,equirect_vert:kQ,equirect_frag:LQ,linedashed_vert:OQ,linedashed_frag:DQ,meshbasic_vert:RQ,meshbasic_frag:NQ,meshlambert_vert:IQ,meshlambert_frag:VQ,meshmatcap_vert:zQ,meshmatcap_frag:BQ,meshnormal_vert:FQ,meshnormal_frag:UQ,meshphong_vert:jQ,meshphong_frag:HQ,meshphysical_vert:WQ,meshphysical_frag:GQ,meshtoon_vert:YQ,meshtoon_frag:XQ,points_vert:qQ,points_frag:KQ,shadow_vert:ZQ,shadow_frag:JQ,sprite_vert:QQ,sprite_frag:$Q},je={common:{diffuse:{value:new Je(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new mi},uv2Transform:{value:new mi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new be(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Je(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new mi}},sprite:{diffuse:{value:new Je(16777215)},opacity:{value:1},center:{value:new be(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new mi}}},Us={basic:{uniforms:ki([je.common,je.specularmap,je.envmap,je.aomap,je.lightmap,je.fog]),vertexShader:Ht.meshbasic_vert,fragmentShader:Ht.meshbasic_frag},lambert:{uniforms:ki([je.common,je.specularmap,je.envmap,je.aomap,je.lightmap,je.emissivemap,je.fog,je.lights,{emissive:{value:new Je(0)}}]),vertexShader:Ht.meshlambert_vert,fragmentShader:Ht.meshlambert_frag},phong:{uniforms:ki([je.common,je.specularmap,je.envmap,je.aomap,je.lightmap,je.emissivemap,je.bumpmap,je.normalmap,je.displacementmap,je.fog,je.lights,{emissive:{value:new Je(0)},specular:{value:new Je(1118481)},shininess:{value:30}}]),vertexShader:Ht.meshphong_vert,fragmentShader:Ht.meshphong_frag},standard:{uniforms:ki([je.common,je.envmap,je.aomap,je.lightmap,je.emissivemap,je.bumpmap,je.normalmap,je.displacementmap,je.roughnessmap,je.metalnessmap,je.fog,je.lights,{emissive:{value:new Je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ht.meshphysical_vert,fragmentShader:Ht.meshphysical_frag},toon:{uniforms:ki([je.common,je.aomap,je.lightmap,je.emissivemap,je.bumpmap,je.normalmap,je.displacementmap,je.gradientmap,je.fog,je.lights,{emissive:{value:new Je(0)}}]),vertexShader:Ht.meshtoon_vert,fragmentShader:Ht.meshtoon_frag},matcap:{uniforms:ki([je.common,je.bumpmap,je.normalmap,je.displacementmap,je.fog,{matcap:{value:null}}]),vertexShader:Ht.meshmatcap_vert,fragmentShader:Ht.meshmatcap_frag},points:{uniforms:ki([je.points,je.fog]),vertexShader:Ht.points_vert,fragmentShader:Ht.points_frag},dashed:{uniforms:ki([je.common,je.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ht.linedashed_vert,fragmentShader:Ht.linedashed_frag},depth:{uniforms:ki([je.common,je.displacementmap]),vertexShader:Ht.depth_vert,fragmentShader:Ht.depth_frag},normal:{uniforms:ki([je.common,je.bumpmap,je.normalmap,je.displacementmap,{opacity:{value:1}}]),vertexShader:Ht.meshnormal_vert,fragmentShader:Ht.meshnormal_frag},sprite:{uniforms:ki([je.sprite,je.fog]),vertexShader:Ht.sprite_vert,fragmentShader:Ht.sprite_frag},background:{uniforms:{uvTransform:{value:new mi},t2D:{value:null}},vertexShader:Ht.background_vert,fragmentShader:Ht.background_frag},cube:{uniforms:ki([je.envmap,{opacity:{value:1}}]),vertexShader:Ht.cube_vert,fragmentShader:Ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ht.equirect_vert,fragmentShader:Ht.equirect_frag},distanceRGBA:{uniforms:ki([je.common,je.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ht.distanceRGBA_vert,fragmentShader:Ht.distanceRGBA_frag},shadow:{uniforms:ki([je.lights,je.fog,{color:{value:new Je(0)},opacity:{value:1}}]),vertexShader:Ht.shadow_vert,fragmentShader:Ht.shadow_frag}};Us.physical={uniforms:ki([Us.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new be(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Je(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new be},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Je(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Je(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ht.meshphysical_vert,fragmentShader:Ht.meshphysical_frag};function e$(r,e,t,n,i,o){const s=new Je(0);let a=i===!0?0:1,l,c,d=null,f=0,m=null;function g(_,w){let M=!1,S=w.isScene===!0?w.background:null;S&&S.isTexture&&(S=e.get(S));const C=r.xr,P=C.getSession&&C.getSession();P&&P.environmentBlendMode==="additive"&&(S=null),S===null?b(s,a):S&&S.isColor&&(b(S,1),M=!0),(r.autoClear||M)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),S&&(S.isCubeTexture||S.mapping===CS)?(c===void 0&&(c=new vi(new md(1,1,1),new ar({name:"BackgroundCubeMaterial",uniforms:Wf(Us.cube.uniforms),vertexShader:Us.cube.vertexShader,fragmentShader:Us.cube.fragmentShader,side:Mo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(T,L,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=S,c.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,(d!==S||f!==S.version||m!==r.toneMapping)&&(c.material.needsUpdate=!0,d=S,f=S.version,m=r.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null)):S&&S.isTexture&&(l===void 0&&(l=new vi(new J0(2,2),new ar({name:"BackgroundMaterial",uniforms:Wf(Us.background.uniforms),vertexShader:Us.background.vertexShader,fragmentShader:Us.background.fragmentShader,side:td,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(l)),l.material.uniforms.t2D.value=S,S.matrixAutoUpdate===!0&&S.updateMatrix(),l.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||f!==S.version||m!==r.toneMapping)&&(l.material.needsUpdate=!0,d=S,f=S.version,m=r.toneMapping),l.layers.enableAll(),_.unshift(l,l.geometry,l.material,0,0,null))}function b(_,w){t.buffers.color.setClear(_.r,_.g,_.b,w,o)}return{getClearColor:function(){return s},setClearColor:function(_,w=1){s.set(_),a=w,b(s,a)},getClearAlpha:function(){return a},setClearAlpha:function(_){a=_,b(s,a)},render:g}}function t$(r,e,t,n){const i=r.getParameter(34921),o=n.isWebGL2?null:e.get("OES_vertex_array_object"),s=n.isWebGL2||o!==null,a={},l=w(null);let c=l,d=!1;function f(q,re,Z,me,J){let Q=!1;if(s){const $=_(me,Z,re);c!==$&&(c=$,g(c.object)),Q=M(q,me,Z,J),Q&&S(q,me,Z,J)}else{const $=re.wireframe===!0;(c.geometry!==me.id||c.program!==Z.id||c.wireframe!==$)&&(c.geometry=me.id,c.program=Z.id,c.wireframe=$,Q=!0)}J!==null&&t.update(J,34963),(Q||d)&&(d=!1,k(q,re,Z,me),J!==null&&r.bindBuffer(34963,t.get(J).buffer))}function m(){return n.isWebGL2?r.createVertexArray():o.createVertexArrayOES()}function g(q){return n.isWebGL2?r.bindVertexArray(q):o.bindVertexArrayOES(q)}function b(q){return n.isWebGL2?r.deleteVertexArray(q):o.deleteVertexArrayOES(q)}function _(q,re,Z){const me=Z.wireframe===!0;let J=a[q.id];J===void 0&&(J={},a[q.id]=J);let Q=J[re.id];Q===void 0&&(Q={},J[re.id]=Q);let $=Q[me];return $===void 0&&($=w(m()),Q[me]=$),$}function w(q){const re=[],Z=[],me=[];for(let J=0;J<i;J++)re[J]=0,Z[J]=0,me[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:re,enabledAttributes:Z,attributeDivisors:me,object:q,attributes:{},index:null}}function M(q,re,Z,me){const J=c.attributes,Q=re.attributes;let $=0;const fe=Z.getAttributes();for(const he in fe)if(fe[he].location>=0){const Se=J[he];let Re=Q[he];if(Re===void 0&&(he==="instanceMatrix"&&q.instanceMatrix&&(Re=q.instanceMatrix),he==="instanceColor"&&q.instanceColor&&(Re=q.instanceColor)),Se===void 0||Se.attribute!==Re||Re&&Se.data!==Re.data)return!0;$++}return c.attributesNum!==$||c.index!==me}function S(q,re,Z,me){const J={},Q=re.attributes;let $=0;const fe=Z.getAttributes();for(const he in fe)if(fe[he].location>=0){let Se=Q[he];Se===void 0&&(he==="instanceMatrix"&&q.instanceMatrix&&(Se=q.instanceMatrix),he==="instanceColor"&&q.instanceColor&&(Se=q.instanceColor));const Re={};Re.attribute=Se,Se&&Se.data&&(Re.data=Se.data),J[he]=Re,$++}c.attributes=J,c.attributesNum=$,c.index=me}function C(){const q=c.newAttributes;for(let re=0,Z=q.length;re<Z;re++)q[re]=0}function P(q){T(q,0)}function T(q,re){const Z=c.newAttributes,me=c.enabledAttributes,J=c.attributeDivisors;Z[q]=1,me[q]===0&&(r.enableVertexAttribArray(q),me[q]=1),J[q]!==re&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](q,re),J[q]=re)}function L(){const q=c.newAttributes,re=c.enabledAttributes;for(let Z=0,me=re.length;Z<me;Z++)re[Z]!==q[Z]&&(r.disableVertexAttribArray(Z),re[Z]=0)}function O(q,re,Z,me,J,Q){n.isWebGL2===!0&&(Z===5124||Z===5125)?r.vertexAttribIPointer(q,re,Z,J,Q):r.vertexAttribPointer(q,re,Z,me,J,Q)}function k(q,re,Z,me){if(n.isWebGL2===!1&&(q.isInstancedMesh||me.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;C();const J=me.attributes,Q=Z.getAttributes(),$=re.defaultAttributeValues;for(const fe in Q){const he=Q[fe];if(he.location>=0){let Se=J[fe];if(Se===void 0&&(fe==="instanceMatrix"&&q.instanceMatrix&&(Se=q.instanceMatrix),fe==="instanceColor"&&q.instanceColor&&(Se=q.instanceColor)),Se!==void 0){const Re=Se.normalized,st=Se.itemSize,ve=t.get(Se);if(ve===void 0)continue;const St=ve.buffer,tt=ve.type,Ge=ve.bytesPerElement;if(Se.isInterleavedBufferAttribute){const ze=Se.data,Ae=ze.stride,Ce=Se.offset;if(ze.isInstancedInterleavedBuffer){for(let xe=0;xe<he.locationSize;xe++)T(he.location+xe,ze.meshPerAttribute);q.isInstancedMesh!==!0&&me._maxInstanceCount===void 0&&(me._maxInstanceCount=ze.meshPerAttribute*ze.count)}else for(let xe=0;xe<he.locationSize;xe++)P(he.location+xe);r.bindBuffer(34962,St);for(let xe=0;xe<he.locationSize;xe++)O(he.location+xe,st/he.locationSize,tt,Re,Ae*Ge,(Ce+st/he.locationSize*xe)*Ge)}else{if(Se.isInstancedBufferAttribute){for(let ze=0;ze<he.locationSize;ze++)T(he.location+ze,Se.meshPerAttribute);q.isInstancedMesh!==!0&&me._maxInstanceCount===void 0&&(me._maxInstanceCount=Se.meshPerAttribute*Se.count)}else for(let ze=0;ze<he.locationSize;ze++)P(he.location+ze);r.bindBuffer(34962,St);for(let ze=0;ze<he.locationSize;ze++)O(he.location+ze,st/he.locationSize,tt,Re,st*Ge,st/he.locationSize*ze*Ge)}}else if($!==void 0){const Re=$[fe];if(Re!==void 0)switch(Re.length){case 2:r.vertexAttrib2fv(he.location,Re);break;case 3:r.vertexAttrib3fv(he.location,Re);break;case 4:r.vertexAttrib4fv(he.location,Re);break;default:r.vertexAttrib1fv(he.location,Re)}}}}L()}function N(){ee();for(const q in a){const re=a[q];for(const Z in re){const me=re[Z];for(const J in me)b(me[J].object),delete me[J];delete re[Z]}delete a[q]}}function V(q){if(a[q.id]===void 0)return;const re=a[q.id];for(const Z in re){const me=re[Z];for(const J in me)b(me[J].object),delete me[J];delete re[Z]}delete a[q.id]}function W(q){for(const re in a){const Z=a[re];if(Z[q.id]===void 0)continue;const me=Z[q.id];for(const J in me)b(me[J].object),delete me[J];delete Z[q.id]}}function ee(){se(),d=!0,c!==l&&(c=l,g(c.object))}function se(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:ee,resetDefaultState:se,dispose:N,releaseStatesOfGeometry:V,releaseStatesOfProgram:W,initAttributes:C,enableAttribute:P,disableUnusedAttributes:L}}function r$(r,e,t,n){const i=n.isWebGL2;let o;function s(c){o=c}function a(c,d){r.drawArrays(o,c,d),t.update(d,o,1)}function l(c,d,f){if(f===0)return;let m,g;if(i)m=r,g="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](o,c,d,f),t.update(d,o,f)}this.setMode=s,this.render=a,this.renderInstances=l}function n$(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function o(O){if(O==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";O="mediump"}return O==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=s||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,f=r.getParameter(34930),m=r.getParameter(35660),g=r.getParameter(3379),b=r.getParameter(34076),_=r.getParameter(34921),w=r.getParameter(36347),M=r.getParameter(36348),S=r.getParameter(36349),C=m>0,P=s||e.has("OES_texture_float"),T=C&&P,L=s?r.getParameter(36183):0;return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:d,maxTextures:f,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:b,maxAttributes:_,maxVertexUniforms:w,maxVaryings:M,maxFragmentUniforms:S,vertexTextures:C,floatFragmentTextures:P,floatVertexTextures:T,maxSamples:L}}function i$(r){const e=this;let t=null,n=0,i=!1,o=!1;const s=new Tl,a=new mi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,m,g){const b=f.length!==0||m||n!==0||i;return i=m,t=d(f,g,0),n=f.length,b},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1,c()},this.setState=function(f,m,g){const b=f.clippingPlanes,_=f.clipIntersection,w=f.clipShadows,M=r.get(f);if(!i||b===null||b.length===0||o&&!w)o?d(null):c();else{const S=o?0:n,C=S*4;let P=M.clippingState||null;l.value=P,P=d(b,m,C,g);for(let T=0;T!==C;++T)P[T]=t[T];M.clippingState=P,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function d(f,m,g,b){const _=f!==null?f.length:0;let w=null;if(_!==0){if(w=l.value,b!==!0||w===null){const M=g+_*4,S=m.matrixWorldInverse;a.getNormalMatrix(S),(w===null||w.length<M)&&(w=new Float32Array(M));for(let C=0,P=g;C!==_;++C,P+=4)s.copy(f[C]).applyMatrix4(S,a),s.normal.toArray(w,P),w[P+3]=s.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,w}}function o$(r){let e=new WeakMap;function t(s,a){return a===_0?s.mapping=Ff:a===QP&&(s.mapping=Uf),s}function n(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const a=s.mapping;if(a===_0||a===QP)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new KB(l.height/2);return c.fromEquirectangularTexture(r,s),e.set(s,c),s.addEventListener("dispose",i),t(c.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:n,dispose:o}}class Q0 extends k4{constructor(e=-1,t=1,n=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=n-e,s=n+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const $p=4,kR=[.125,.215,.35,.446,.526,.582],Nh=20,H3=new Q0,LR=new Je;let W3=null;const Dh=(1+Math.sqrt(5))/2,xp=1/Dh,OR=[new j(1,1,1),new j(-1,1,1),new j(1,1,-1),new j(-1,1,-1),new j(0,Dh,xp),new j(0,Dh,-xp),new j(xp,0,Dh),new j(-xp,0,Dh),new j(Dh,xp,0),new j(-Dh,xp,0)];class DR{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){W3=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,i,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=IR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=NR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(W3),e.scissorTest=!1,$1(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ff||e.mapping===Uf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),W3=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:En,minFilter:En,generateMipmaps:!1,type:Rl,format:Hs,encoding:fc,depthBuffer:!1},i=RR(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=RR(e,t,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=s$(o)),this._blurMaterial=a$(o,e,t)}return i}_compileMaterial(e){const t=new vi(this._lodPlanes[0],e);this._renderer.compile(t,H3)}_sceneToCubeUV(e,t,n,i){const o=new Fn(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,d=l.toneMapping;l.getClearColor(LR),l.toneMapping=ka,l.autoClear=!1;const f=new wm({name:"PMREM.Background",side:Mo,depthWrite:!1,depthTest:!1}),m=new vi(new md,f);let g=!1;const b=e.background;b?b.isColor&&(f.color.copy(b),e.background=null,g=!0):(f.color.copy(LR),g=!0);for(let _=0;_<6;_++){const w=_%3;w===0?(o.up.set(0,s[_],0),o.lookAt(a[_],0,0)):w===1?(o.up.set(0,0,s[_]),o.lookAt(0,a[_],0)):(o.up.set(0,s[_],0),o.lookAt(0,0,a[_]));const M=this._cubeSize;$1(i,w*M,_>2?M:0,M,M),l.setRenderTarget(i),g&&l.render(m,o),l.render(e,o)}m.geometry.dispose(),m.material.dispose(),l.toneMapping=d,l.autoClear=c,e.background=b}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Ff||e.mapping===Uf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=IR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=NR());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new vi(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;$1(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(s,H3)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=OR[(i-1)%OR.length];this._blur(e,i-1,i,o,s)}t.autoClear=n}_blur(e,t,n,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,i,"latitudinal",o),this._halfBlur(s,e,n,n,i,"longitudinal",o)}_halfBlur(e,t,n,i,o,s,a){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new vi(this._lodPlanes[i],c),m=c.uniforms,g=this._sizeLods[n]-1,b=isFinite(o)?Math.PI/(2*g):2*Math.PI/(2*Nh-1),_=o/b,w=isFinite(o)?1+Math.floor(d*_):Nh;w>Nh&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Nh}`);const M=[];let S=0;for(let O=0;O<Nh;++O){const k=O/_,N=Math.exp(-k*k/2);M.push(N),O===0?S+=N:O<w&&(S+=2*N)}for(let O=0;O<M.length;O++)M[O]=M[O]/S;m.envMap.value=e.texture,m.samples.value=w,m.weights.value=M,m.latitudinal.value=s==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:C}=this;m.dTheta.value=b,m.mipInt.value=C-n;const P=this._sizeLods[i],T=3*P*(i>C-$p?i-C+$p:0),L=4*(this._cubeSize-P);$1(t,T,L,3*P,2*P),l.setRenderTarget(t),l.render(f,H3)}}function s$(r){const e=[],t=[],n=[];let i=r;const o=r-$p+1+kR.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);t.push(a);let l=1/a;s>r-$p?l=kR[s-r+$p-1]:s===0&&(l=0),n.push(l);const c=1/(a-2),d=-c,f=1+c,m=[d,d,f,d,f,f,d,d,f,f,d,f],g=6,b=6,_=3,w=2,M=1,S=new Float32Array(_*b*g),C=new Float32Array(w*b*g),P=new Float32Array(M*b*g);for(let L=0;L<g;L++){const O=L%3*2/3-1,k=L>2?0:-1,N=[O,k,0,O+2/3,k,0,O+2/3,k+1,0,O,k,0,O+2/3,k+1,0,O,k+1,0];S.set(N,_*b*L),C.set(m,w*b*L);const V=[L,L,L,L,L,L];P.set(V,M*b*L)}const T=new zr;T.setAttribute("position",new eo(S,_)),T.setAttribute("uv",new eo(C,w)),T.setAttribute("faceIndex",new eo(P,M)),e.push(T),i>$p&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function RR(r,e,t){const n=new Ir(r,e,t);return n.texture.mapping=CS,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function $1(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function a$(r,e,t){const n=new Float32Array(Nh),i=new j(0,1,0);return new ar({name:"SphericalGaussianBlur",defines:{n:Nh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:O4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Cn,depthTest:!1,depthWrite:!1})}function NR(){return new ar({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:O4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Cn,depthTest:!1,depthWrite:!1})}function IR(){return new ar({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:O4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Cn,depthTest:!1,depthWrite:!1})}function O4(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function l$(r){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===_0||l===QP,d=l===Ff||l===Uf;if(c||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new DR(r)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||d&&f&&i(f)){t===null&&(t=new DR(r));const m=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,m),a.addEventListener("dispose",o),m.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:s}}function u$(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function c$(r,e,t,n){const i={},o=new WeakMap;function s(f){const m=f.target;m.index!==null&&e.remove(m.index);for(const b in m.attributes)e.remove(m.attributes[b]);m.removeEventListener("dispose",s),delete i[m.id];const g=o.get(m);g&&(e.remove(g),o.delete(m)),n.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(f,m){return i[m.id]===!0||(m.addEventListener("dispose",s),i[m.id]=!0,t.memory.geometries++),m}function l(f){const m=f.attributes;for(const b in m)e.update(m[b],34962);const g=f.morphAttributes;for(const b in g){const _=g[b];for(let w=0,M=_.length;w<M;w++)e.update(_[w],34962)}}function c(f){const m=[],g=f.index,b=f.attributes.position;let _=0;if(g!==null){const S=g.array;_=g.version;for(let C=0,P=S.length;C<P;C+=3){const T=S[C+0],L=S[C+1],O=S[C+2];m.push(T,L,L,O,O,T)}}else{const S=b.array;_=b.version;for(let C=0,P=S.length/3-1;C<P;C+=3){const T=C+0,L=C+1,O=C+2;m.push(T,L,L,O,O,T)}}const w=new(UB(m)?XB:YB)(m,1);w.version=_;const M=o.get(f);M&&e.remove(M),o.set(f,w)}function d(f){const m=o.get(f);if(m){const g=f.index;g!==null&&m.version<g.version&&c(f)}else c(f);return o.get(f)}return{get:a,update:l,getWireframeAttribute:d}}function h$(r,e,t,n){const i=n.isWebGL2;let o;function s(m){o=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function d(m,g){r.drawElements(o,g,a,m*l),t.update(g,o,1)}function f(m,g,b){if(b===0)return;let _,w;if(i)_=r,w="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[w](o,g,a,m*l,b),t.update(g,o,b)}this.setMode=s,this.setIndex=c,this.render=d,this.renderInstances=f}function d$(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,s,a){switch(t.calls++,s){case 4:t.triangles+=a*(o/3);break;case 1:t.lines+=a*(o/2);break;case 3:t.lines+=a*(o-1);break;case 2:t.lines+=a*o;break;case 0:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function p$(r,e){return r[0]-e[0]}function f$(r,e){return Math.abs(e[1])-Math.abs(r[1])}function G3(r,e){let t=1;const n=e.isInterleavedBufferAttribute?e.data.array:e.array;n instanceof Int8Array?t=127:n instanceof Uint8Array?t=255:n instanceof Uint16Array?t=65535:n instanceof Int16Array?t=32767:n instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),r.divideScalar(t)}function m$(r,e,t){const n={},i=new Float32Array(8),o=new WeakMap,s=new ir,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,d,f,m){const g=c.morphTargetInfluences;if(e.isWebGL2===!0){const b=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,_=b!==void 0?b.length:0;let w=o.get(d);if(w===void 0||w.count!==_){let C=function(){q.dispose(),o.delete(d),d.removeEventListener("dispose",C)};w!==void 0&&w.texture.dispose();const P=d.morphAttributes.position!==void 0,T=d.morphAttributes.normal!==void 0,L=d.morphAttributes.color!==void 0,O=d.morphAttributes.position||[],k=d.morphAttributes.normal||[],N=d.morphAttributes.color||[];let V=0;P===!0&&(V=1),T===!0&&(V=2),L===!0&&(V=3);let W=d.attributes.position.count*V,ee=1;W>e.maxTextureSize&&(ee=Math.ceil(W/e.maxTextureSize),W=e.maxTextureSize);const se=new Float32Array(W*ee*4*_),q=new GB(se,W,ee,_);q.type=js,q.needsUpdate=!0;const re=V*4;for(let Z=0;Z<_;Z++){const me=O[Z],J=k[Z],Q=N[Z],$=W*ee*4*Z;for(let fe=0;fe<me.count;fe++){const he=fe*re;P===!0&&(s.fromBufferAttribute(me,fe),me.normalized===!0&&G3(s,me),se[$+he+0]=s.x,se[$+he+1]=s.y,se[$+he+2]=s.z,se[$+he+3]=0),T===!0&&(s.fromBufferAttribute(J,fe),J.normalized===!0&&G3(s,J),se[$+he+4]=s.x,se[$+he+5]=s.y,se[$+he+6]=s.z,se[$+he+7]=0),L===!0&&(s.fromBufferAttribute(Q,fe),Q.normalized===!0&&G3(s,Q),se[$+he+8]=s.x,se[$+he+9]=s.y,se[$+he+10]=s.z,se[$+he+11]=Q.itemSize===4?s.w:1)}}w={count:_,texture:q,size:new be(W,ee)},o.set(d,w),d.addEventListener("dispose",C)}let M=0;for(let C=0;C<g.length;C++)M+=g[C];const S=d.morphTargetsRelative?1:1-M;m.getUniforms().setValue(r,"morphTargetBaseInfluence",S),m.getUniforms().setValue(r,"morphTargetInfluences",g),m.getUniforms().setValue(r,"morphTargetsTexture",w.texture,t),m.getUniforms().setValue(r,"morphTargetsTextureSize",w.size)}else{const b=g===void 0?0:g.length;let _=n[d.id];if(_===void 0||_.length!==b){_=[];for(let P=0;P<b;P++)_[P]=[P,0];n[d.id]=_}for(let P=0;P<b;P++){const T=_[P];T[0]=P,T[1]=g[P]}_.sort(f$);for(let P=0;P<8;P++)P<b&&_[P][1]?(a[P][0]=_[P][0],a[P][1]=_[P][1]):(a[P][0]=Number.MAX_SAFE_INTEGER,a[P][1]=0);a.sort(p$);const w=d.morphAttributes.position,M=d.morphAttributes.normal;let S=0;for(let P=0;P<8;P++){const T=a[P],L=T[0],O=T[1];L!==Number.MAX_SAFE_INTEGER&&O?(w&&d.getAttribute("morphTarget"+P)!==w[L]&&d.setAttribute("morphTarget"+P,w[L]),M&&d.getAttribute("morphNormal"+P)!==M[L]&&d.setAttribute("morphNormal"+P,M[L]),i[P]=O,S+=O):(w&&d.hasAttribute("morphTarget"+P)===!0&&d.deleteAttribute("morphTarget"+P),M&&d.hasAttribute("morphNormal"+P)===!0&&d.deleteAttribute("morphNormal"+P),i[P]=0)}const C=d.morphTargetsRelative?1:1-S;m.getUniforms().setValue(r,"morphTargetBaseInfluence",C),m.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:l}}function v$(r,e,t,n){let i=new WeakMap;function o(l){const c=n.render.frame,d=l.geometry,f=e.get(l,d);return i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),f}function s(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:o,dispose:s}}const JB=new Ii,QB=new GB,$B=new lZ,e8=new L4,VR=[],zR=[],BR=new Float32Array(16),FR=new Float32Array(9),UR=new Float32Array(4);function bm(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let o=VR[i];if(o===void 0&&(o=new Float32Array(i),VR[i]=o),e!==0){n.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,r[s].toArray(o,a)}return o}function ro(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function no(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function TS(r,e){let t=zR[e];t===void 0&&(t=new Int32Array(e),zR[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function g$(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function y$(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ro(t,e))return;r.uniform2fv(this.addr,e),no(t,e)}}function _$(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ro(t,e))return;r.uniform3fv(this.addr,e),no(t,e)}}function w$(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ro(t,e))return;r.uniform4fv(this.addr,e),no(t,e)}}function b$(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ro(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),no(t,e)}else{if(ro(t,n))return;UR.set(n),r.uniformMatrix2fv(this.addr,!1,UR),no(t,n)}}function x$(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ro(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),no(t,e)}else{if(ro(t,n))return;FR.set(n),r.uniformMatrix3fv(this.addr,!1,FR),no(t,n)}}function S$(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ro(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),no(t,e)}else{if(ro(t,n))return;BR.set(n),r.uniformMatrix4fv(this.addr,!1,BR),no(t,n)}}function M$(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function C$(r,e){const t=this.cache;ro(t,e)||(r.uniform2iv(this.addr,e),no(t,e))}function E$(r,e){const t=this.cache;ro(t,e)||(r.uniform3iv(this.addr,e),no(t,e))}function P$(r,e){const t=this.cache;ro(t,e)||(r.uniform4iv(this.addr,e),no(t,e))}function T$(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function A$(r,e){const t=this.cache;ro(t,e)||(r.uniform2uiv(this.addr,e),no(t,e))}function k$(r,e){const t=this.cache;ro(t,e)||(r.uniform3uiv(this.addr,e),no(t,e))}function L$(r,e){const t=this.cache;ro(t,e)||(r.uniform4uiv(this.addr,e),no(t,e))}function O$(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2D(e||JB,i)}function D$(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||$B,i)}function R$(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||e8,i)}function N$(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||QB,i)}function I$(r){switch(r){case 5126:return g$;case 35664:return y$;case 35665:return _$;case 35666:return w$;case 35674:return b$;case 35675:return x$;case 35676:return S$;case 5124:case 35670:return M$;case 35667:case 35671:return C$;case 35668:case 35672:return E$;case 35669:case 35673:return P$;case 5125:return T$;case 36294:return A$;case 36295:return k$;case 36296:return L$;case 35678:case 36198:case 36298:case 36306:case 35682:return O$;case 35679:case 36299:case 36307:return D$;case 35680:case 36300:case 36308:case 36293:return R$;case 36289:case 36303:case 36311:case 36292:return N$}}function V$(r,e){r.uniform1fv(this.addr,e)}function z$(r,e){const t=bm(e,this.size,2);r.uniform2fv(this.addr,t)}function B$(r,e){const t=bm(e,this.size,3);r.uniform3fv(this.addr,t)}function F$(r,e){const t=bm(e,this.size,4);r.uniform4fv(this.addr,t)}function U$(r,e){const t=bm(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function j$(r,e){const t=bm(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function H$(r,e){const t=bm(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function W$(r,e){r.uniform1iv(this.addr,e)}function G$(r,e){r.uniform2iv(this.addr,e)}function Y$(r,e){r.uniform3iv(this.addr,e)}function X$(r,e){r.uniform4iv(this.addr,e)}function q$(r,e){r.uniform1uiv(this.addr,e)}function K$(r,e){r.uniform2uiv(this.addr,e)}function Z$(r,e){r.uniform3uiv(this.addr,e)}function J$(r,e){r.uniform4uiv(this.addr,e)}function Q$(r,e,t){const n=e.length,i=TS(t,n);r.uniform1iv(this.addr,i);for(let o=0;o!==n;++o)t.setTexture2D(e[o]||JB,i[o])}function $$(r,e,t){const n=e.length,i=TS(t,n);r.uniform1iv(this.addr,i);for(let o=0;o!==n;++o)t.setTexture3D(e[o]||$B,i[o])}function eee(r,e,t){const n=e.length,i=TS(t,n);r.uniform1iv(this.addr,i);for(let o=0;o!==n;++o)t.setTextureCube(e[o]||e8,i[o])}function tee(r,e,t){const n=e.length,i=TS(t,n);r.uniform1iv(this.addr,i);for(let o=0;o!==n;++o)t.setTexture2DArray(e[o]||QB,i[o])}function ree(r){switch(r){case 5126:return V$;case 35664:return z$;case 35665:return B$;case 35666:return F$;case 35674:return U$;case 35675:return j$;case 35676:return H$;case 5124:case 35670:return W$;case 35667:case 35671:return G$;case 35668:case 35672:return Y$;case 35669:case 35673:return X$;case 5125:return q$;case 36294:return K$;case 36295:return Z$;case 36296:return J$;case 35678:case 36198:case 36298:case 36306:case 35682:return Q$;case 35679:case 36299:case 36307:return $$;case 35680:case 36300:case 36308:case 36293:return eee;case 36289:case 36303:case 36311:case 36292:return tee}}class nee{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=I$(t.type)}}class iee{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=ree(t.type)}}class oee{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,t[a.id],n)}}}const Y3=/(\w+)(\])?(\[|\.)?/g;function jR(r,e){r.seq.push(e),r.map[e.id]=e}function see(r,e,t){const n=r.name,i=n.length;for(Y3.lastIndex=0;;){const o=Y3.exec(n),s=Y3.lastIndex;let a=o[1];const l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===i){jR(t,c===void 0?new nee(a,r,e):new iee(a,r,e));break}else{let d=t.map[a];d===void 0&&(d=new oee(a),jR(t,d)),t=d}}}class Tb{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const o=e.getActiveUniform(t,i),s=e.getUniformLocation(t,o.name);see(o,s,this)}}setValue(e,t,n,i){const o=this.map[t];o!==void 0&&o.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let o=0,s=t.length;o!==s;++o){const a=t[o],l=n[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in t&&n.push(s)}return n}}function HR(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}let aee=0;function lee(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=i;s<o;s++){const a=s+1;n.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return n.join(`
`)}function uee(r){switch(r){case fc:return["Linear","( value )"];case on:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function WR(r,e,t){const n=r.getShaderParameter(e,35713),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return t.toUpperCase()+`

`+i+`

`+lee(r.getShaderSource(e),s)}else return i}function cee(r,e){const t=uee(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function hee(r,e){let t;switch(e){case VB:t="Linear";break;case xK:t="Reinhard";break;case SK:t="OptimizedCineon";break;case MK:t="ACESFilmic";break;case CK:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function dee(r){return[r.extensionDerivatives||!!r.envMapCubeUVHeight||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(dg).join(`
`)}function pee(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function fee(r,e){const t={},n=r.getProgramParameter(e,35721);for(let i=0;i<n;i++){const o=r.getActiveAttrib(e,i),s=o.name;let a=1;o.type===35674&&(a=2),o.type===35675&&(a=3),o.type===35676&&(a=4),t[s]={type:o.type,location:r.getAttribLocation(e,s),locationSize:a}}return t}function dg(r){return r!==""}function GR(r,e){return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function YR(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const mee=/^[ \t]*#include +<([\w\d./]+)>/gm;function oT(r){return r.replace(mee,vee)}function vee(r,e){const t=Ht[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return oT(t)}const gee=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,yee=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function XR(r){return r.replace(yee,t8).replace(gee,_ee)}function _ee(r,e,t,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),t8(r,e,t,n)}function t8(r,e,t,n){let i="";for(let o=parseInt(e);o<parseInt(t);o++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function qR(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function wee(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===kB?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===LB?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===hg&&(e="SHADOWMAP_TYPE_VSM"),e}function bee(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Ff:case Uf:e="ENVMAP_TYPE_CUBE";break;case CS:e="ENVMAP_TYPE_CUBE_UV";break}return e}function xee(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Uf:e="ENVMAP_MODE_REFRACTION";break}return e}function See(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case IB:e="ENVMAP_BLENDING_MULTIPLY";break;case wK:e="ENVMAP_BLENDING_MIX";break;case bK:e="ENVMAP_BLENDING_ADD";break}return e}function Mee(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function Cee(r,e,t,n){const i=r.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=wee(t),c=bee(t),d=xee(t),f=See(t),m=Mee(t),g=t.isWebGL2?"":dee(t),b=pee(o),_=i.createProgram();let w,M,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=[b].filter(dg).join(`
`),w.length>0&&(w+=`
`),M=[g,b].filter(dg).join(`
`),M.length>0&&(M+=`
`)):(w=[qR(t),"#define SHADER_NAME "+t.shaderName,b,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(dg).join(`
`),M=[g,qR(t),"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ka?"#define TONE_MAPPING":"",t.toneMapping!==ka?Ht.tonemapping_pars_fragment:"",t.toneMapping!==ka?hee("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ht.encodings_pars_fragment,cee("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(dg).join(`
`)),s=oT(s),s=GR(s,t),s=YR(s,t),a=oT(a),a=GR(a,t),a=YR(a,t),s=XR(s),a=XR(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,M=["#define varying in",t.glslVersion===gR?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===gR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const C=S+w+s,P=S+M+a,T=HR(i,35633,C),L=HR(i,35632,P);if(i.attachShader(_,T),i.attachShader(_,L),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_),r.debug.checkShaderErrors){const N=i.getProgramInfoLog(_).trim(),V=i.getShaderInfoLog(T).trim(),W=i.getShaderInfoLog(L).trim();let ee=!0,se=!0;if(i.getProgramParameter(_,35714)===!1){ee=!1;const q=WR(i,T,"vertex"),re=WR(i,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,35715)+`

Program Info Log: `+N+`
`+q+`
`+re)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(V===""||W==="")&&(se=!1);se&&(this.diagnostics={runnable:ee,programLog:N,vertexShader:{log:V,prefix:w},fragmentShader:{log:W,prefix:M}})}i.deleteShader(T),i.deleteShader(L);let O;this.getUniforms=function(){return O===void 0&&(O=new Tb(i,_)),O};let k;return this.getAttributes=function(){return k===void 0&&(k=fee(i,_)),k},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.name=t.shaderName,this.id=aee++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=T,this.fragmentShader=L,this}let Eee=0;class Pee{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),o=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const n=new Tee(e);t.set(e,n)}return t.get(e)}}class Tee{constructor(e){this.id=Eee++,this.code=e,this.usedTimes=0}}function Aee(r,e,t,n,i,o,s){const a=new A4,l=new Pee,c=[],d=i.isWebGL2,f=i.logarithmicDepthBuffer,m=i.vertexTextures;let g=i.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(k,N,V,W,ee){const se=W.fog,q=ee.geometry,re=k.isMeshStandardMaterial?W.environment:null,Z=(k.isMeshStandardMaterial?t:e).get(k.envMap||re),me=!!Z&&Z.mapping===CS?Z.image.height:null,J=b[k.type];k.precision!==null&&(g=i.getMaxPrecision(k.precision),g!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",g,"instead."));const Q=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,$=Q!==void 0?Q.length:0;let fe=0;q.morphAttributes.position!==void 0&&(fe=1),q.morphAttributes.normal!==void 0&&(fe=2),q.morphAttributes.color!==void 0&&(fe=3);let he,Se,Re,st;if(J){const ze=Us[J];he=ze.vertexShader,Se=ze.fragmentShader}else he=k.vertexShader,Se=k.fragmentShader,l.update(k),Re=l.getVertexShaderID(k),st=l.getFragmentShaderID(k);const ve=r.getRenderTarget(),St=k.alphaTest>0,tt=k.clearcoat>0,Ge=k.iridescence>0;return{isWebGL2:d,shaderID:J,shaderName:k.type,vertexShader:he,fragmentShader:Se,defines:k.defines,customVertexShaderID:Re,customFragmentShaderID:st,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:g,instancing:ee.isInstancedMesh===!0,instancingColor:ee.isInstancedMesh===!0&&ee.instanceColor!==null,supportsVertexTextures:m,outputEncoding:ve===null?r.outputEncoding:ve.isXRRenderTarget===!0?ve.texture.encoding:fc,map:!!k.map,matcap:!!k.matcap,envMap:!!Z,envMapMode:Z&&Z.mapping,envMapCubeUVHeight:me,lightMap:!!k.lightMap,aoMap:!!k.aoMap,emissiveMap:!!k.emissiveMap,bumpMap:!!k.bumpMap,normalMap:!!k.normalMap,objectSpaceNormalMap:k.normalMapType===BB,tangentSpaceNormalMap:k.normalMapType===Z0,decodeVideoTexture:!!k.map&&k.map.isVideoTexture===!0&&k.map.encoding===on,clearcoat:tt,clearcoatMap:tt&&!!k.clearcoatMap,clearcoatRoughnessMap:tt&&!!k.clearcoatRoughnessMap,clearcoatNormalMap:tt&&!!k.clearcoatNormalMap,iridescence:Ge,iridescenceMap:Ge&&!!k.iridescenceMap,iridescenceThicknessMap:Ge&&!!k.iridescenceThicknessMap,displacementMap:!!k.displacementMap,roughnessMap:!!k.roughnessMap,metalnessMap:!!k.metalnessMap,specularMap:!!k.specularMap,specularIntensityMap:!!k.specularIntensityMap,specularColorMap:!!k.specularColorMap,opaque:k.transparent===!1&&k.blending===df,alphaMap:!!k.alphaMap,alphaTest:St,gradientMap:!!k.gradientMap,sheen:k.sheen>0,sheenColorMap:!!k.sheenColorMap,sheenRoughnessMap:!!k.sheenRoughnessMap,transmission:k.transmission>0,transmissionMap:!!k.transmissionMap,thicknessMap:!!k.thicknessMap,combine:k.combine,vertexTangents:!!k.normalMap&&!!q.attributes.tangent,vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,vertexUvs:!!k.map||!!k.bumpMap||!!k.normalMap||!!k.specularMap||!!k.alphaMap||!!k.emissiveMap||!!k.roughnessMap||!!k.metalnessMap||!!k.clearcoatMap||!!k.clearcoatRoughnessMap||!!k.clearcoatNormalMap||!!k.iridescenceMap||!!k.iridescenceThicknessMap||!!k.displacementMap||!!k.transmissionMap||!!k.thicknessMap||!!k.specularIntensityMap||!!k.specularColorMap||!!k.sheenColorMap||!!k.sheenRoughnessMap,uvsVertexOnly:!(!!k.map||!!k.bumpMap||!!k.normalMap||!!k.specularMap||!!k.alphaMap||!!k.emissiveMap||!!k.roughnessMap||!!k.metalnessMap||!!k.clearcoatNormalMap||!!k.iridescenceMap||!!k.iridescenceThicknessMap||k.transmission>0||!!k.transmissionMap||!!k.thicknessMap||!!k.specularIntensityMap||!!k.specularColorMap||k.sheen>0||!!k.sheenColorMap||!!k.sheenRoughnessMap)&&!!k.displacementMap,fog:!!se,useFog:k.fog===!0,fogExp2:se&&se.isFogExp2,flatShading:!!k.flatShading,sizeAttenuation:k.sizeAttenuation,logarithmicDepthBuffer:f,skinning:ee.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:$,morphTextureStride:fe,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:k.dithering,shadowMapEnabled:r.shadowMap.enabled&&V.length>0,shadowMapType:r.shadowMap.type,toneMapping:k.toneMapped?r.toneMapping:ka,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Gl,flipSided:k.side===Mo,useDepthPacking:!!k.depthPacking,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionDerivatives:k.extensions&&k.extensions.derivatives,extensionFragDepth:k.extensions&&k.extensions.fragDepth,extensionDrawBuffers:k.extensions&&k.extensions.drawBuffers,extensionShaderTextureLOD:k.extensions&&k.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||n.has("EXT_shader_texture_lod"),customProgramCacheKey:k.customProgramCacheKey()}}function w(k){const N=[];if(k.shaderID?N.push(k.shaderID):(N.push(k.customVertexShaderID),N.push(k.customFragmentShaderID)),k.defines!==void 0)for(const V in k.defines)N.push(V),N.push(k.defines[V]);return k.isRawShaderMaterial===!1&&(M(N,k),S(N,k),N.push(r.outputEncoding)),N.push(k.customProgramCacheKey),N.join()}function M(k,N){k.push(N.precision),k.push(N.outputEncoding),k.push(N.envMapMode),k.push(N.envMapCubeUVHeight),k.push(N.combine),k.push(N.vertexUvs),k.push(N.fogExp2),k.push(N.sizeAttenuation),k.push(N.morphTargetsCount),k.push(N.morphAttributeCount),k.push(N.numDirLights),k.push(N.numPointLights),k.push(N.numSpotLights),k.push(N.numHemiLights),k.push(N.numRectAreaLights),k.push(N.numDirLightShadows),k.push(N.numPointLightShadows),k.push(N.numSpotLightShadows),k.push(N.shadowMapType),k.push(N.toneMapping),k.push(N.numClippingPlanes),k.push(N.numClipIntersection),k.push(N.depthPacking)}function S(k,N){a.disableAll(),N.isWebGL2&&a.enable(0),N.supportsVertexTextures&&a.enable(1),N.instancing&&a.enable(2),N.instancingColor&&a.enable(3),N.map&&a.enable(4),N.matcap&&a.enable(5),N.envMap&&a.enable(6),N.lightMap&&a.enable(7),N.aoMap&&a.enable(8),N.emissiveMap&&a.enable(9),N.bumpMap&&a.enable(10),N.normalMap&&a.enable(11),N.objectSpaceNormalMap&&a.enable(12),N.tangentSpaceNormalMap&&a.enable(13),N.clearcoat&&a.enable(14),N.clearcoatMap&&a.enable(15),N.clearcoatRoughnessMap&&a.enable(16),N.clearcoatNormalMap&&a.enable(17),N.iridescence&&a.enable(18),N.iridescenceMap&&a.enable(19),N.iridescenceThicknessMap&&a.enable(20),N.displacementMap&&a.enable(21),N.specularMap&&a.enable(22),N.roughnessMap&&a.enable(23),N.metalnessMap&&a.enable(24),N.gradientMap&&a.enable(25),N.alphaMap&&a.enable(26),N.alphaTest&&a.enable(27),N.vertexColors&&a.enable(28),N.vertexAlphas&&a.enable(29),N.vertexUvs&&a.enable(30),N.vertexTangents&&a.enable(31),N.uvsVertexOnly&&a.enable(32),N.fog&&a.enable(33),k.push(a.mask),a.disableAll(),N.useFog&&a.enable(0),N.flatShading&&a.enable(1),N.logarithmicDepthBuffer&&a.enable(2),N.skinning&&a.enable(3),N.morphTargets&&a.enable(4),N.morphNormals&&a.enable(5),N.morphColors&&a.enable(6),N.premultipliedAlpha&&a.enable(7),N.shadowMapEnabled&&a.enable(8),N.physicallyCorrectLights&&a.enable(9),N.doubleSided&&a.enable(10),N.flipSided&&a.enable(11),N.useDepthPacking&&a.enable(12),N.dithering&&a.enable(13),N.specularIntensityMap&&a.enable(14),N.specularColorMap&&a.enable(15),N.transmission&&a.enable(16),N.transmissionMap&&a.enable(17),N.thicknessMap&&a.enable(18),N.sheen&&a.enable(19),N.sheenColorMap&&a.enable(20),N.sheenRoughnessMap&&a.enable(21),N.decodeVideoTexture&&a.enable(22),N.opaque&&a.enable(23),k.push(a.mask)}function C(k){const N=b[k.type];let V;if(N){const W=Us[N];V=fi.clone(W.uniforms)}else V=k.uniforms;return V}function P(k,N){let V;for(let W=0,ee=c.length;W<ee;W++){const se=c[W];if(se.cacheKey===N){V=se,++V.usedTimes;break}}return V===void 0&&(V=new Cee(r,N,k,o),c.push(V)),V}function T(k){if(--k.usedTimes===0){const N=c.indexOf(k);c[N]=c[c.length-1],c.pop(),k.destroy()}}function L(k){l.remove(k)}function O(){l.dispose()}return{getParameters:_,getProgramCacheKey:w,getUniforms:C,acquireProgram:P,releaseProgram:T,releaseShaderCache:L,programs:c,dispose:O}}function kee(){let r=new WeakMap;function e(o){let s=r.get(o);return s===void 0&&(s={},r.set(o,s)),s}function t(o){r.delete(o)}function n(o,s,a){r.get(o)[s]=a}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function Lee(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function KR(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function ZR(){const r=[];let e=0;const t=[],n=[],i=[];function o(){e=0,t.length=0,n.length=0,i.length=0}function s(f,m,g,b,_,w){let M=r[e];return M===void 0?(M={id:f.id,object:f,geometry:m,material:g,groupOrder:b,renderOrder:f.renderOrder,z:_,group:w},r[e]=M):(M.id=f.id,M.object=f,M.geometry=m,M.material=g,M.groupOrder=b,M.renderOrder=f.renderOrder,M.z=_,M.group=w),e++,M}function a(f,m,g,b,_,w){const M=s(f,m,g,b,_,w);g.transmission>0?n.push(M):g.transparent===!0?i.push(M):t.push(M)}function l(f,m,g,b,_,w){const M=s(f,m,g,b,_,w);g.transmission>0?n.unshift(M):g.transparent===!0?i.unshift(M):t.unshift(M)}function c(f,m){t.length>1&&t.sort(f||Lee),n.length>1&&n.sort(m||KR),i.length>1&&i.sort(m||KR)}function d(){for(let f=e,m=r.length;f<m;f++){const g=r[f];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:n,transparent:i,init:o,push:a,unshift:l,finish:d,sort:c}}function Oee(){let r=new WeakMap;function e(n,i){let o;return r.has(n)===!1?(o=new ZR,r.set(n,[o])):i>=r.get(n).length?(o=new ZR,r.get(n).push(o)):o=r.get(n)[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function Dee(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new Je};break;case"SpotLight":t={position:new j,direction:new j,color:new Je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new Je,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new Je,groundColor:new Je};break;case"RectAreaLight":t={color:new Je,position:new j,halfWidth:new j,halfHeight:new j};break}return r[e.id]=t,t}}}function Ree(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new be};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new be};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new be,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let Nee=0;function Iee(r,e){return(e.castShadow?1:0)-(r.castShadow?1:0)}function Vee(r,e){const t=new Dee,n=Ree(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)i.probe.push(new j);const o=new j,s=new Ct,a=new Ct;function l(d,f){let m=0,g=0,b=0;for(let N=0;N<9;N++)i.probe[N].set(0,0,0);let _=0,w=0,M=0,S=0,C=0,P=0,T=0,L=0;d.sort(Iee);const O=f!==!0?Math.PI:1;for(let N=0,V=d.length;N<V;N++){const W=d[N],ee=W.color,se=W.intensity,q=W.distance,re=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)m+=ee.r*se*O,g+=ee.g*se*O,b+=ee.b*se*O;else if(W.isLightProbe)for(let Z=0;Z<9;Z++)i.probe[Z].addScaledVector(W.sh.coefficients[Z],se);else if(W.isDirectionalLight){const Z=t.get(W);if(Z.color.copy(W.color).multiplyScalar(W.intensity*O),W.castShadow){const me=W.shadow,J=n.get(W);J.shadowBias=me.bias,J.shadowNormalBias=me.normalBias,J.shadowRadius=me.radius,J.shadowMapSize=me.mapSize,i.directionalShadow[_]=J,i.directionalShadowMap[_]=re,i.directionalShadowMatrix[_]=W.shadow.matrix,P++}i.directional[_]=Z,_++}else if(W.isSpotLight){const Z=t.get(W);if(Z.position.setFromMatrixPosition(W.matrixWorld),Z.color.copy(ee).multiplyScalar(se*O),Z.distance=q,Z.coneCos=Math.cos(W.angle),Z.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),Z.decay=W.decay,W.castShadow){const me=W.shadow,J=n.get(W);J.shadowBias=me.bias,J.shadowNormalBias=me.normalBias,J.shadowRadius=me.radius,J.shadowMapSize=me.mapSize,i.spotShadow[M]=J,i.spotShadowMap[M]=re,i.spotShadowMatrix[M]=W.shadow.matrix,L++}i.spot[M]=Z,M++}else if(W.isRectAreaLight){const Z=t.get(W);Z.color.copy(ee).multiplyScalar(se),Z.halfWidth.set(W.width*.5,0,0),Z.halfHeight.set(0,W.height*.5,0),i.rectArea[S]=Z,S++}else if(W.isPointLight){const Z=t.get(W);if(Z.color.copy(W.color).multiplyScalar(W.intensity*O),Z.distance=W.distance,Z.decay=W.decay,W.castShadow){const me=W.shadow,J=n.get(W);J.shadowBias=me.bias,J.shadowNormalBias=me.normalBias,J.shadowRadius=me.radius,J.shadowMapSize=me.mapSize,J.shadowCameraNear=me.camera.near,J.shadowCameraFar=me.camera.far,i.pointShadow[w]=J,i.pointShadowMap[w]=re,i.pointShadowMatrix[w]=W.shadow.matrix,T++}i.point[w]=Z,w++}else if(W.isHemisphereLight){const Z=t.get(W);Z.skyColor.copy(W.color).multiplyScalar(se*O),Z.groundColor.copy(W.groundColor).multiplyScalar(se*O),i.hemi[C]=Z,C++}}S>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=je.LTC_FLOAT_1,i.rectAreaLTC2=je.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=je.LTC_HALF_1,i.rectAreaLTC2=je.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=m,i.ambient[1]=g,i.ambient[2]=b;const k=i.hash;(k.directionalLength!==_||k.pointLength!==w||k.spotLength!==M||k.rectAreaLength!==S||k.hemiLength!==C||k.numDirectionalShadows!==P||k.numPointShadows!==T||k.numSpotShadows!==L)&&(i.directional.length=_,i.spot.length=M,i.rectArea.length=S,i.point.length=w,i.hemi.length=C,i.directionalShadow.length=P,i.directionalShadowMap.length=P,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=L,i.spotShadowMap.length=L,i.directionalShadowMatrix.length=P,i.pointShadowMatrix.length=T,i.spotShadowMatrix.length=L,k.directionalLength=_,k.pointLength=w,k.spotLength=M,k.rectAreaLength=S,k.hemiLength=C,k.numDirectionalShadows=P,k.numPointShadows=T,k.numSpotShadows=L,i.version=Nee++)}function c(d,f){let m=0,g=0,b=0,_=0,w=0;const M=f.matrixWorldInverse;for(let S=0,C=d.length;S<C;S++){const P=d[S];if(P.isDirectionalLight){const T=i.directional[m];T.direction.setFromMatrixPosition(P.matrixWorld),o.setFromMatrixPosition(P.target.matrixWorld),T.direction.sub(o),T.direction.transformDirection(M),m++}else if(P.isSpotLight){const T=i.spot[b];T.position.setFromMatrixPosition(P.matrixWorld),T.position.applyMatrix4(M),T.direction.setFromMatrixPosition(P.matrixWorld),o.setFromMatrixPosition(P.target.matrixWorld),T.direction.sub(o),T.direction.transformDirection(M),b++}else if(P.isRectAreaLight){const T=i.rectArea[_];T.position.setFromMatrixPosition(P.matrixWorld),T.position.applyMatrix4(M),a.identity(),s.copy(P.matrixWorld),s.premultiply(M),a.extractRotation(s),T.halfWidth.set(P.width*.5,0,0),T.halfHeight.set(0,P.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),_++}else if(P.isPointLight){const T=i.point[g];T.position.setFromMatrixPosition(P.matrixWorld),T.position.applyMatrix4(M),g++}else if(P.isHemisphereLight){const T=i.hemi[w];T.direction.setFromMatrixPosition(P.matrixWorld),T.direction.transformDirection(M),w++}}}return{setup:l,setupView:c,state:i}}function JR(r,e){const t=new Vee(r,e),n=[],i=[];function o(){n.length=0,i.length=0}function s(d){n.push(d)}function a(d){i.push(d)}function l(d){t.setup(n,d)}function c(d){t.setupView(n,d)}return{init:o,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function zee(r,e){let t=new WeakMap;function n(o,s=0){let a;return t.has(o)===!1?(a=new JR(r,e),t.set(o,[a])):s>=t.get(o).length?(a=new JR(r,e),t.get(o).push(a)):a=t.get(o)[s],a}function i(){t=new WeakMap}return{get:n,dispose:i}}class AS extends Ua{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=WK,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Bee extends Ua{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new j,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Fee=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Uee=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jee(r,e,t){let n=new PS;const i=new be,o=new be,s=new ir,a=new AS({depthPacking:ES}),l=new Bee,c={},d=t.maxTextureSize,f={0:Mo,1:td,2:Gl},m=new ar({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new be},radius:{value:4}},vertexShader:Fee,fragmentShader:Uee}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const b=new zr;b.setAttribute("position",new eo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new vi(b,m),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=kB,this.render=function(P,T,L){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||P.length===0)return;const O=r.getRenderTarget(),k=r.getActiveCubeFace(),N=r.getActiveMipmapLevel(),V=r.state;V.setBlending(Cn),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);for(let W=0,ee=P.length;W<ee;W++){const se=P[W],q=se.shadow;if(q===void 0){console.warn("THREE.WebGLShadowMap:",se,"has no shadow.");continue}if(q.autoUpdate===!1&&q.needsUpdate===!1)continue;i.copy(q.mapSize);const re=q.getFrameExtents();if(i.multiply(re),o.copy(q.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(o.x=Math.floor(d/re.x),i.x=o.x*re.x,q.mapSize.x=o.x),i.y>d&&(o.y=Math.floor(d/re.y),i.y=o.y*re.y,q.mapSize.y=o.y)),q.map===null){const me=this.type!==hg?{minFilter:ln,magFilter:ln}:{};q.map=new Ir(i.x,i.y,me),q.map.texture.name=se.name+".shadowMap",q.camera.updateProjectionMatrix()}r.setRenderTarget(q.map),r.clear();const Z=q.getViewportCount();for(let me=0;me<Z;me++){const J=q.getViewport(me);s.set(o.x*J.x,o.y*J.y,o.x*J.z,o.y*J.w),V.viewport(s),q.updateMatrices(se,me),n=q.getFrustum(),C(T,L,q.camera,se,this.type)}q.isPointLightShadow!==!0&&this.type===hg&&M(q,L),q.needsUpdate=!1}w.needsUpdate=!1,r.setRenderTarget(O,k,N)};function M(P,T){const L=e.update(_);m.defines.VSM_SAMPLES!==P.blurSamples&&(m.defines.VSM_SAMPLES=P.blurSamples,g.defines.VSM_SAMPLES=P.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Ir(i.x,i.y)),m.uniforms.shadow_pass.value=P.map.texture,m.uniforms.resolution.value=P.mapSize,m.uniforms.radius.value=P.radius,r.setRenderTarget(P.mapPass),r.clear(),r.renderBufferDirect(T,null,L,m,_,null),g.uniforms.shadow_pass.value=P.mapPass.texture,g.uniforms.resolution.value=P.mapSize,g.uniforms.radius.value=P.radius,r.setRenderTarget(P.map),r.clear(),r.renderBufferDirect(T,null,L,g,_,null)}function S(P,T,L,O,k,N){let V=null;const W=L.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(W!==void 0?V=W:V=L.isPointLight===!0?l:a,r.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0){const ee=V.uuid,se=T.uuid;let q=c[ee];q===void 0&&(q={},c[ee]=q);let re=q[se];re===void 0&&(re=V.clone(),q[se]=re),V=re}return V.visible=T.visible,V.wireframe=T.wireframe,N===hg?V.side=T.shadowSide!==null?T.shadowSide:T.side:V.side=T.shadowSide!==null?T.shadowSide:f[T.side],V.alphaMap=T.alphaMap,V.alphaTest=T.alphaTest,V.clipShadows=T.clipShadows,V.clippingPlanes=T.clippingPlanes,V.clipIntersection=T.clipIntersection,V.displacementMap=T.displacementMap,V.displacementScale=T.displacementScale,V.displacementBias=T.displacementBias,V.wireframeLinewidth=T.wireframeLinewidth,V.linewidth=T.linewidth,L.isPointLight===!0&&V.isMeshDistanceMaterial===!0&&(V.referencePosition.setFromMatrixPosition(L.matrixWorld),V.nearDistance=O,V.farDistance=k),V}function C(P,T,L,O,k){if(P.visible===!1)return;if(P.layers.test(T.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&k===hg)&&(!P.frustumCulled||n.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,P.matrixWorld);const V=e.update(P),W=P.material;if(Array.isArray(W)){const ee=V.groups;for(let se=0,q=ee.length;se<q;se++){const re=ee[se],Z=W[re.materialIndex];if(Z&&Z.visible){const me=S(P,Z,O,L.near,L.far,k);r.renderBufferDirect(L,null,V,me,P,re)}}}else if(W.visible){const ee=S(P,W,O,L.near,L.far,k);r.renderBufferDirect(L,null,V,ee,P,null)}}const N=P.children;for(let V=0,W=N.length;V<W;V++)C(N[V],T,L,O,k)}}function Hee(r,e,t){const n=t.isWebGL2;function i(){let ne=!1;const Xe=new ir;let we=null;const Ke=new ir(0,0,0,0);return{setMask:function(Ie){we!==Ie&&!ne&&(r.colorMask(Ie,Ie,Ie,Ie),we=Ie)},setLocked:function(Ie){ne=Ie},setClear:function(Ie,rr,fr,Dr,xi){xi===!0&&(Ie*=Dr,rr*=Dr,fr*=Dr),Xe.set(Ie,rr,fr,Dr),Ke.equals(Xe)===!1&&(r.clearColor(Ie,rr,fr,Dr),Ke.copy(Xe))},reset:function(){ne=!1,we=null,Ke.set(-1,0,0,0)}}}function o(){let ne=!1,Xe=null,we=null,Ke=null;return{setTest:function(Ie){Ie?St(2929):tt(2929)},setMask:function(Ie){Xe!==Ie&&!ne&&(r.depthMask(Ie),Xe=Ie)},setFunc:function(Ie){if(we!==Ie){if(Ie)switch(Ie){case pK:r.depthFunc(512);break;case fK:r.depthFunc(519);break;case mK:r.depthFunc(513);break;case JP:r.depthFunc(515);break;case vK:r.depthFunc(514);break;case gK:r.depthFunc(518);break;case yK:r.depthFunc(516);break;case _K:r.depthFunc(517);break;default:r.depthFunc(515)}else r.depthFunc(515);we=Ie}},setLocked:function(Ie){ne=Ie},setClear:function(Ie){Ke!==Ie&&(r.clearDepth(Ie),Ke=Ie)},reset:function(){ne=!1,Xe=null,we=null,Ke=null}}}function s(){let ne=!1,Xe=null,we=null,Ke=null,Ie=null,rr=null,fr=null,Dr=null,xi=null;return{setTest:function(Sr){ne||(Sr?St(2960):tt(2960))},setMask:function(Sr){Xe!==Sr&&!ne&&(r.stencilMask(Sr),Xe=Sr)},setFunc:function(Sr,ai,Yn){(we!==Sr||Ke!==ai||Ie!==Yn)&&(r.stencilFunc(Sr,ai,Yn),we=Sr,Ke=ai,Ie=Yn)},setOp:function(Sr,ai,Yn){(rr!==Sr||fr!==ai||Dr!==Yn)&&(r.stencilOp(Sr,ai,Yn),rr=Sr,fr=ai,Dr=Yn)},setLocked:function(Sr){ne=Sr},setClear:function(Sr){xi!==Sr&&(r.clearStencil(Sr),xi=Sr)},reset:function(){ne=!1,Xe=null,we=null,Ke=null,Ie=null,rr=null,fr=null,Dr=null,xi=null}}}const a=new i,l=new o,c=new s,d=new WeakMap,f=new WeakMap;let m={},g={},b=new WeakMap,_=[],w=null,M=!1,S=null,C=null,P=null,T=null,L=null,O=null,k=null,N=!1,V=null,W=null,ee=null,se=null,q=null;const re=r.getParameter(35661);let Z=!1,me=0;const J=r.getParameter(7938);J.indexOf("WebGL")!==-1?(me=parseFloat(/^WebGL (\d)/.exec(J)[1]),Z=me>=1):J.indexOf("OpenGL ES")!==-1&&(me=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),Z=me>=2);let Q=null,$={};const fe=r.getParameter(3088),he=r.getParameter(2978),Se=new ir().fromArray(fe),Re=new ir().fromArray(he);function st(ne,Xe,we){const Ke=new Uint8Array(4),Ie=r.createTexture();r.bindTexture(ne,Ie),r.texParameteri(ne,10241,9728),r.texParameteri(ne,10240,9728);for(let rr=0;rr<we;rr++)r.texImage2D(Xe+rr,0,6408,1,1,0,6408,5121,Ke);return Ie}const ve={};ve[3553]=st(3553,3553,1),ve[34067]=st(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),St(2929),l.setFunc(JP),dt(!1),lt(HD),St(2884),Ue(Cn);function St(ne){m[ne]!==!0&&(r.enable(ne),m[ne]=!0)}function tt(ne){m[ne]!==!1&&(r.disable(ne),m[ne]=!1)}function Ge(ne,Xe){return g[ne]!==Xe?(r.bindFramebuffer(ne,Xe),g[ne]=Xe,n&&(ne===36009&&(g[36160]=Xe),ne===36160&&(g[36009]=Xe)),!0):!1}function ze(ne,Xe){let we=_,Ke=!1;if(ne)if(we=b.get(Xe),we===void 0&&(we=[],b.set(Xe,we)),ne.isWebGLMultipleRenderTargets){const Ie=ne.texture;if(we.length!==Ie.length||we[0]!==36064){for(let rr=0,fr=Ie.length;rr<fr;rr++)we[rr]=36064+rr;we.length=Ie.length,Ke=!0}}else we[0]!==36064&&(we[0]=36064,Ke=!0);else we[0]!==1029&&(we[0]=1029,Ke=!0);Ke&&(t.isWebGL2?r.drawBuffers(we):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(we))}function Ae(ne){return w!==ne?(r.useProgram(ne),w=ne,!0):!1}const Ce={[Yu]:32774,[oK]:32778,[sK]:32779};if(n)Ce[YD]=32775,Ce[XD]=32776;else{const ne=e.get("EXT_blend_minmax");ne!==null&&(Ce[YD]=ne.MIN_EXT,Ce[XD]=ne.MAX_EXT)}const xe={[ZP]:0,[aK]:1,[lK]:768,[OB]:770,[dK]:776,[NB]:774,[RB]:772,[uK]:769,[DB]:771,[hK]:775,[cK]:773};function Ue(ne,Xe,we,Ke,Ie,rr,fr,Dr){if(ne===Cn){M===!0&&(tt(3042),M=!1);return}if(M===!1&&(St(3042),M=!0),ne!==KP){if(ne!==S||Dr!==N){if((C!==Yu||L!==Yu)&&(r.blendEquation(32774),C=Yu,L=Yu),Dr)switch(ne){case df:r.blendFuncSeparate(1,771,1,771);break;case xx:r.blendFunc(1,1);break;case WD:r.blendFuncSeparate(0,769,0,1);break;case GD:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}else switch(ne){case df:r.blendFuncSeparate(770,771,1,771);break;case xx:r.blendFunc(770,1);break;case WD:r.blendFuncSeparate(0,769,0,1);break;case GD:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}P=null,T=null,O=null,k=null,S=ne,N=Dr}return}Ie=Ie||Xe,rr=rr||we,fr=fr||Ke,(Xe!==C||Ie!==L)&&(r.blendEquationSeparate(Ce[Xe],Ce[Ie]),C=Xe,L=Ie),(we!==P||Ke!==T||rr!==O||fr!==k)&&(r.blendFuncSeparate(xe[we],xe[Ke],xe[rr],xe[fr]),P=we,T=Ke,O=rr,k=fr),S=ne,N=null}function Fe(ne,Xe){ne.side===Gl?tt(2884):St(2884);let we=ne.side===Mo;Xe&&(we=!we),dt(we),ne.blending===df&&ne.transparent===!1?Ue(Cn):Ue(ne.blending,ne.blendEquation,ne.blendSrc,ne.blendDst,ne.blendEquationAlpha,ne.blendSrcAlpha,ne.blendDstAlpha,ne.premultipliedAlpha),l.setFunc(ne.depthFunc),l.setTest(ne.depthTest),l.setMask(ne.depthWrite),a.setMask(ne.colorWrite);const Ke=ne.stencilWrite;c.setTest(Ke),Ke&&(c.setMask(ne.stencilWriteMask),c.setFunc(ne.stencilFunc,ne.stencilRef,ne.stencilFuncMask),c.setOp(ne.stencilFail,ne.stencilZFail,ne.stencilZPass)),vt(ne.polygonOffset,ne.polygonOffsetFactor,ne.polygonOffsetUnits),ne.alphaToCoverage===!0?St(32926):tt(32926)}function dt(ne){V!==ne&&(ne?r.frontFace(2304):r.frontFace(2305),V=ne)}function lt(ne){ne!==rK?(St(2884),ne!==W&&(ne===HD?r.cullFace(1029):ne===nK?r.cullFace(1028):r.cullFace(1032))):tt(2884),W=ne}function _t(ne){ne!==ee&&(Z&&r.lineWidth(ne),ee=ne)}function vt(ne,Xe,we){ne?(St(32823),(se!==Xe||q!==we)&&(r.polygonOffset(Xe,we),se=Xe,q=we)):tt(32823)}function ce(ne){ne?St(3089):tt(3089)}function te(ne){ne===void 0&&(ne=33984+re-1),Q!==ne&&(r.activeTexture(ne),Q=ne)}function I(ne,Xe){Q===null&&te();let we=$[Q];we===void 0&&(we={type:void 0,texture:void 0},$[Q]=we),(we.type!==ne||we.texture!==Xe)&&(r.bindTexture(ne,Xe||ve[ne]),we.type=ne,we.texture=Xe)}function B(){const ne=$[Q];ne!==void 0&&ne.type!==void 0&&(r.bindTexture(ne.type,null),ne.type=void 0,ne.texture=void 0)}function le(){try{r.compressedTexImage2D.apply(r,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Te(){try{r.texSubImage2D.apply(r,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Ne(){try{r.texSubImage3D.apply(r,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Be(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function nt(){try{r.texStorage2D.apply(r,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function ge(){try{r.texStorage3D.apply(r,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function et(){try{r.texImage2D.apply(r,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Qe(){try{r.texImage3D.apply(r,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function it(ne){Se.equals(ne)===!1&&(r.scissor(ne.x,ne.y,ne.z,ne.w),Se.copy(ne))}function qe(ne){Re.equals(ne)===!1&&(r.viewport(ne.x,ne.y,ne.z,ne.w),Re.copy(ne))}function bt(ne,Xe){let we=f.get(Xe);we===void 0&&(we=new WeakMap,f.set(Xe,we));let Ke=we.get(ne);Ke===void 0&&(Ke=r.getUniformBlockIndex(Xe,ne.name),we.set(ne,Ke))}function Gt(ne,Xe){const we=f.get(Xe).get(ne);d.get(ne)!==we&&(r.uniformBlockBinding(Xe,we,ne.__bindingPointIndex),d.set(ne,we))}function xr(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),n===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),m={},Q=null,$={},g={},b=new WeakMap,_=[],w=null,M=!1,S=null,C=null,P=null,T=null,L=null,O=null,k=null,N=!1,V=null,W=null,ee=null,se=null,q=null,Se.set(0,0,r.canvas.width,r.canvas.height),Re.set(0,0,r.canvas.width,r.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:St,disable:tt,bindFramebuffer:Ge,drawBuffers:ze,useProgram:Ae,setBlending:Ue,setMaterial:Fe,setFlipSided:dt,setCullFace:lt,setLineWidth:_t,setPolygonOffset:vt,setScissorTest:ce,activeTexture:te,bindTexture:I,unbindTexture:B,compressedTexImage2D:le,texImage2D:et,texImage3D:Qe,updateUBOMapping:bt,uniformBlockBinding:Gt,texStorage2D:nt,texStorage3D:ge,texSubImage2D:Te,texSubImage3D:Ne,compressedTexSubImage2D:Be,scissor:it,viewport:qe,reset:xr}}function Wee(r,e,t,n,i,o,s){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,d=i.maxTextureSize,f=i.maxSamples,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=/OculusBrowser/g.test(navigator.userAgent),b=new WeakMap;let _;const w=new WeakMap;let M=!1;try{M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(I,B){return M?new OffscreenCanvas(I,B):b0("canvas")}function C(I,B,le,Te){let Ne=1;if((I.width>Te||I.height>Te)&&(Ne=Te/Math.max(I.width,I.height)),Ne<1||B===!0)if(typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&I instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&I instanceof ImageBitmap){const Be=B?Ex:Math.floor,nt=Be(Ne*I.width),ge=Be(Ne*I.height);_===void 0&&(_=S(nt,ge));const et=le?S(nt,ge):_;return et.width=nt,et.height=ge,et.getContext("2d").drawImage(I,0,0,nt,ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+I.width+"x"+I.height+") to ("+nt+"x"+ge+")."),et}else return"data"in I&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+I.width+"x"+I.height+")."),I;return I}function P(I){return iT(I.width)&&iT(I.height)}function T(I){return a?!1:I.wrapS!==Bo||I.wrapT!==Bo||I.minFilter!==ln&&I.minFilter!==En}function L(I,B){return I.generateMipmaps&&B&&I.minFilter!==ln&&I.minFilter!==En}function O(I){r.generateMipmap(I)}function k(I,B,le,Te,Ne=!1){if(a===!1)return B;if(I!==null){if(r[I]!==void 0)return r[I];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+I+"'")}let Be=B;return B===6403&&(le===5126&&(Be=33326),le===5131&&(Be=33325),le===5121&&(Be=33321)),B===33319&&(le===5126&&(Be=33328),le===5131&&(Be=33327),le===5121&&(Be=33323)),B===6408&&(le===5126&&(Be=34836),le===5131&&(Be=34842),le===5121&&(Be=Te===on&&Ne===!1?35907:32856),le===32819&&(Be=32854),le===32820&&(Be=32855)),(Be===33325||Be===33326||Be===33327||Be===33328||Be===34842||Be===34836)&&e.get("EXT_color_buffer_float"),Be}function N(I,B,le){return L(I,le)===!0||I.isFramebufferTexture&&I.minFilter!==ln&&I.minFilter!==En?Math.log2(Math.max(B.width,B.height))+1:I.mipmaps!==void 0&&I.mipmaps.length>0?I.mipmaps.length:I.isCompressedTexture&&Array.isArray(I.image)?B.mipmaps.length:1}function V(I){return I===ln||I===qD||I===KD?9728:9729}function W(I){const B=I.target;B.removeEventListener("dispose",W),se(B),B.isVideoTexture&&b.delete(B)}function ee(I){const B=I.target;B.removeEventListener("dispose",ee),re(B)}function se(I){const B=n.get(I);if(B.__webglInit===void 0)return;const le=I.source,Te=w.get(le);if(Te){const Ne=Te[B.__cacheKey];Ne.usedTimes--,Ne.usedTimes===0&&q(I),Object.keys(Te).length===0&&w.delete(le)}n.remove(I)}function q(I){const B=n.get(I);r.deleteTexture(B.__webglTexture);const le=I.source,Te=w.get(le);delete Te[B.__cacheKey],s.memory.textures--}function re(I){const B=I.texture,le=n.get(I),Te=n.get(B);if(Te.__webglTexture!==void 0&&(r.deleteTexture(Te.__webglTexture),s.memory.textures--),I.depthTexture&&I.depthTexture.dispose(),I.isWebGLCubeRenderTarget)for(let Ne=0;Ne<6;Ne++)r.deleteFramebuffer(le.__webglFramebuffer[Ne]),le.__webglDepthbuffer&&r.deleteRenderbuffer(le.__webglDepthbuffer[Ne]);else{if(r.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&r.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&r.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let Ne=0;Ne<le.__webglColorRenderbuffer.length;Ne++)le.__webglColorRenderbuffer[Ne]&&r.deleteRenderbuffer(le.__webglColorRenderbuffer[Ne]);le.__webglDepthRenderbuffer&&r.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(I.isWebGLMultipleRenderTargets)for(let Ne=0,Be=B.length;Ne<Be;Ne++){const nt=n.get(B[Ne]);nt.__webglTexture&&(r.deleteTexture(nt.__webglTexture),s.memory.textures--),n.remove(B[Ne])}n.remove(B),n.remove(I)}let Z=0;function me(){Z=0}function J(){const I=Z;return I>=l&&console.warn("THREE.WebGLTextures: Trying to use "+I+" texture units while this GPU supports only "+l),Z+=1,I}function Q(I){const B=[];return B.push(I.wrapS),B.push(I.wrapT),B.push(I.magFilter),B.push(I.minFilter),B.push(I.anisotropy),B.push(I.internalFormat),B.push(I.format),B.push(I.type),B.push(I.generateMipmaps),B.push(I.premultiplyAlpha),B.push(I.flipY),B.push(I.unpackAlignment),B.push(I.encoding),B.join()}function $(I,B){const le=n.get(I);if(I.isVideoTexture&&ce(I),I.isRenderTargetTexture===!1&&I.version>0&&le.__version!==I.version){const Te=I.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{tt(le,I,B);return}}t.activeTexture(33984+B),t.bindTexture(3553,le.__webglTexture)}function fe(I,B){const le=n.get(I);if(I.version>0&&le.__version!==I.version){tt(le,I,B);return}t.activeTexture(33984+B),t.bindTexture(35866,le.__webglTexture)}function he(I,B){const le=n.get(I);if(I.version>0&&le.__version!==I.version){tt(le,I,B);return}t.activeTexture(33984+B),t.bindTexture(32879,le.__webglTexture)}function Se(I,B){const le=n.get(I);if(I.version>0&&le.__version!==I.version){Ge(le,I,B);return}t.activeTexture(33984+B),t.bindTexture(34067,le.__webglTexture)}const Re={[jf]:10497,[Bo]:33071,[$P]:33648},st={[ln]:9728,[qD]:9984,[KD]:9986,[En]:9729,[EK]:9985,[K0]:9987};function ve(I,B,le){if(le?(r.texParameteri(I,10242,Re[B.wrapS]),r.texParameteri(I,10243,Re[B.wrapT]),(I===32879||I===35866)&&r.texParameteri(I,32882,Re[B.wrapR]),r.texParameteri(I,10240,st[B.magFilter]),r.texParameteri(I,10241,st[B.minFilter])):(r.texParameteri(I,10242,33071),r.texParameteri(I,10243,33071),(I===32879||I===35866)&&r.texParameteri(I,32882,33071),(B.wrapS!==Bo||B.wrapT!==Bo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(I,10240,V(B.magFilter)),r.texParameteri(I,10241,V(B.minFilter)),B.minFilter!==ln&&B.minFilter!==En&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Te=e.get("EXT_texture_filter_anisotropic");if(B.type===js&&e.has("OES_texture_float_linear")===!1||a===!1&&B.type===Rl&&e.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||n.get(B).__currentAnisotropy)&&(r.texParameterf(I,Te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,i.getMaxAnisotropy())),n.get(B).__currentAnisotropy=B.anisotropy)}}function St(I,B){let le=!1;I.__webglInit===void 0&&(I.__webglInit=!0,B.addEventListener("dispose",W));const Te=B.source;let Ne=w.get(Te);Ne===void 0&&(Ne={},w.set(Te,Ne));const Be=Q(B);if(Be!==I.__cacheKey){Ne[Be]===void 0&&(Ne[Be]={texture:r.createTexture(),usedTimes:0},s.memory.textures++,le=!0),Ne[Be].usedTimes++;const nt=Ne[I.__cacheKey];nt!==void 0&&(Ne[I.__cacheKey].usedTimes--,nt.usedTimes===0&&q(B)),I.__cacheKey=Be,I.__webglTexture=Ne[Be].texture}return le}function tt(I,B,le){let Te=3553;B.isDataArrayTexture&&(Te=35866),B.isData3DTexture&&(Te=32879);const Ne=St(I,B),Be=B.source;if(t.activeTexture(33984+le),t.bindTexture(Te,I.__webglTexture),Be.version!==Be.__currentVersion||Ne===!0){r.pixelStorei(37440,B.flipY),r.pixelStorei(37441,B.premultiplyAlpha),r.pixelStorei(3317,B.unpackAlignment),r.pixelStorei(37443,0);const nt=T(B)&&P(B.image)===!1;let ge=C(B.image,nt,!1,d);ge=te(B,ge);const et=P(ge)||a,Qe=o.convert(B.format,B.encoding);let it=o.convert(B.type),qe=k(B.internalFormat,Qe,it,B.encoding,B.isVideoTexture);ve(Te,B,et);let bt;const Gt=B.mipmaps,xr=a&&B.isVideoTexture!==!0,ne=Be.__currentVersion===void 0||Ne===!0,Xe=N(B,ge,et);if(B.isDepthTexture)qe=6402,a?B.type===js?qe=36012:B.type===Fh?qe=33190:B.type===pf?qe=35056:qe=33189:B.type===js&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===Gh&&qe===6402&&B.type!==E4&&B.type!==Fh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=Fh,it=o.convert(B.type)),B.format===Hf&&qe===6402&&(qe=34041,B.type!==pf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=pf,it=o.convert(B.type))),ne&&(xr?t.texStorage2D(3553,1,qe,ge.width,ge.height):t.texImage2D(3553,0,qe,ge.width,ge.height,0,Qe,it,null));else if(B.isDataTexture)if(Gt.length>0&&et){xr&&ne&&t.texStorage2D(3553,Xe,qe,Gt[0].width,Gt[0].height);for(let we=0,Ke=Gt.length;we<Ke;we++)bt=Gt[we],xr?t.texSubImage2D(3553,we,0,0,bt.width,bt.height,Qe,it,bt.data):t.texImage2D(3553,we,qe,bt.width,bt.height,0,Qe,it,bt.data);B.generateMipmaps=!1}else xr?(ne&&t.texStorage2D(3553,Xe,qe,ge.width,ge.height),t.texSubImage2D(3553,0,0,0,ge.width,ge.height,Qe,it,ge.data)):t.texImage2D(3553,0,qe,ge.width,ge.height,0,Qe,it,ge.data);else if(B.isCompressedTexture){xr&&ne&&t.texStorage2D(3553,Xe,qe,Gt[0].width,Gt[0].height);for(let we=0,Ke=Gt.length;we<Ke;we++)bt=Gt[we],B.format!==Hs?Qe!==null?xr?t.compressedTexSubImage2D(3553,we,0,0,bt.width,bt.height,Qe,bt.data):t.compressedTexImage2D(3553,we,qe,bt.width,bt.height,0,bt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xr?t.texSubImage2D(3553,we,0,0,bt.width,bt.height,Qe,it,bt.data):t.texImage2D(3553,we,qe,bt.width,bt.height,0,Qe,it,bt.data)}else if(B.isDataArrayTexture)xr?(ne&&t.texStorage3D(35866,Xe,qe,ge.width,ge.height,ge.depth),t.texSubImage3D(35866,0,0,0,0,ge.width,ge.height,ge.depth,Qe,it,ge.data)):t.texImage3D(35866,0,qe,ge.width,ge.height,ge.depth,0,Qe,it,ge.data);else if(B.isData3DTexture)xr?(ne&&t.texStorage3D(32879,Xe,qe,ge.width,ge.height,ge.depth),t.texSubImage3D(32879,0,0,0,0,ge.width,ge.height,ge.depth,Qe,it,ge.data)):t.texImage3D(32879,0,qe,ge.width,ge.height,ge.depth,0,Qe,it,ge.data);else if(B.isFramebufferTexture){if(ne)if(xr)t.texStorage2D(3553,Xe,qe,ge.width,ge.height);else{let we=ge.width,Ke=ge.height;for(let Ie=0;Ie<Xe;Ie++)t.texImage2D(3553,Ie,qe,we,Ke,0,Qe,it,null),we>>=1,Ke>>=1}}else if(Gt.length>0&&et){xr&&ne&&t.texStorage2D(3553,Xe,qe,Gt[0].width,Gt[0].height);for(let we=0,Ke=Gt.length;we<Ke;we++)bt=Gt[we],xr?t.texSubImage2D(3553,we,0,0,Qe,it,bt):t.texImage2D(3553,we,qe,Qe,it,bt);B.generateMipmaps=!1}else xr?(ne&&t.texStorage2D(3553,Xe,qe,ge.width,ge.height),t.texSubImage2D(3553,0,0,0,Qe,it,ge)):t.texImage2D(3553,0,qe,Qe,it,ge);L(B,et)&&O(Te),Be.__currentVersion=Be.version,B.onUpdate&&B.onUpdate(B)}I.__version=B.version}function Ge(I,B,le){if(B.image.length!==6)return;const Te=St(I,B),Ne=B.source;if(t.activeTexture(33984+le),t.bindTexture(34067,I.__webglTexture),Ne.version!==Ne.__currentVersion||Te===!0){r.pixelStorei(37440,B.flipY),r.pixelStorei(37441,B.premultiplyAlpha),r.pixelStorei(3317,B.unpackAlignment),r.pixelStorei(37443,0);const Be=B.isCompressedTexture||B.image[0].isCompressedTexture,nt=B.image[0]&&B.image[0].isDataTexture,ge=[];for(let we=0;we<6;we++)!Be&&!nt?ge[we]=C(B.image[we],!1,!0,c):ge[we]=nt?B.image[we].image:B.image[we],ge[we]=te(B,ge[we]);const et=ge[0],Qe=P(et)||a,it=o.convert(B.format,B.encoding),qe=o.convert(B.type),bt=k(B.internalFormat,it,qe,B.encoding),Gt=a&&B.isVideoTexture!==!0,xr=Ne.__currentVersion===void 0||Te===!0;let ne=N(B,et,Qe);ve(34067,B,Qe);let Xe;if(Be){Gt&&xr&&t.texStorage2D(34067,ne,bt,et.width,et.height);for(let we=0;we<6;we++){Xe=ge[we].mipmaps;for(let Ke=0;Ke<Xe.length;Ke++){const Ie=Xe[Ke];B.format!==Hs?it!==null?Gt?t.compressedTexSubImage2D(34069+we,Ke,0,0,Ie.width,Ie.height,it,Ie.data):t.compressedTexImage2D(34069+we,Ke,bt,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Gt?t.texSubImage2D(34069+we,Ke,0,0,Ie.width,Ie.height,it,qe,Ie.data):t.texImage2D(34069+we,Ke,bt,Ie.width,Ie.height,0,it,qe,Ie.data)}}}else{Xe=B.mipmaps,Gt&&xr&&(Xe.length>0&&ne++,t.texStorage2D(34067,ne,bt,ge[0].width,ge[0].height));for(let we=0;we<6;we++)if(nt){Gt?t.texSubImage2D(34069+we,0,0,0,ge[we].width,ge[we].height,it,qe,ge[we].data):t.texImage2D(34069+we,0,bt,ge[we].width,ge[we].height,0,it,qe,ge[we].data);for(let Ke=0;Ke<Xe.length;Ke++){const Ie=Xe[Ke].image[we].image;Gt?t.texSubImage2D(34069+we,Ke+1,0,0,Ie.width,Ie.height,it,qe,Ie.data):t.texImage2D(34069+we,Ke+1,bt,Ie.width,Ie.height,0,it,qe,Ie.data)}}else{Gt?t.texSubImage2D(34069+we,0,0,0,it,qe,ge[we]):t.texImage2D(34069+we,0,bt,it,qe,ge[we]);for(let Ke=0;Ke<Xe.length;Ke++){const Ie=Xe[Ke];Gt?t.texSubImage2D(34069+we,Ke+1,0,0,it,qe,Ie.image[we]):t.texImage2D(34069+we,Ke+1,bt,it,qe,Ie.image[we])}}}L(B,Qe)&&O(34067),Ne.__currentVersion=Ne.version,B.onUpdate&&B.onUpdate(B)}I.__version=B.version}function ze(I,B,le,Te,Ne){const Be=o.convert(le.format,le.encoding),nt=o.convert(le.type),ge=k(le.internalFormat,Be,nt,le.encoding);n.get(B).__hasExternalTextures||(Ne===32879||Ne===35866?t.texImage3D(Ne,0,ge,B.width,B.height,B.depth,0,Be,nt,null):t.texImage2D(Ne,0,ge,B.width,B.height,0,Be,nt,null)),t.bindFramebuffer(36160,I),vt(B)?m.framebufferTexture2DMultisampleEXT(36160,Te,Ne,n.get(le).__webglTexture,0,_t(B)):r.framebufferTexture2D(36160,Te,Ne,n.get(le).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ae(I,B,le){if(r.bindRenderbuffer(36161,I),B.depthBuffer&&!B.stencilBuffer){let Te=33189;if(le||vt(B)){const Ne=B.depthTexture;Ne&&Ne.isDepthTexture&&(Ne.type===js?Te=36012:Ne.type===Fh&&(Te=33190));const Be=_t(B);vt(B)?m.renderbufferStorageMultisampleEXT(36161,Be,Te,B.width,B.height):r.renderbufferStorageMultisample(36161,Be,Te,B.width,B.height)}else r.renderbufferStorage(36161,Te,B.width,B.height);r.framebufferRenderbuffer(36160,36096,36161,I)}else if(B.depthBuffer&&B.stencilBuffer){const Te=_t(B);le&&vt(B)===!1?r.renderbufferStorageMultisample(36161,Te,35056,B.width,B.height):vt(B)?m.renderbufferStorageMultisampleEXT(36161,Te,35056,B.width,B.height):r.renderbufferStorage(36161,34041,B.width,B.height),r.framebufferRenderbuffer(36160,33306,36161,I)}else{const Te=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Ne=0;Ne<Te.length;Ne++){const Be=Te[Ne],nt=o.convert(Be.format,Be.encoding),ge=o.convert(Be.type),et=k(Be.internalFormat,nt,ge,Be.encoding),Qe=_t(B);le&&vt(B)===!1?r.renderbufferStorageMultisample(36161,Qe,et,B.width,B.height):vt(B)?m.renderbufferStorageMultisampleEXT(36161,Qe,et,B.width,B.height):r.renderbufferStorage(36161,et,B.width,B.height)}}r.bindRenderbuffer(36161,null)}function Ce(I,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,I),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),$(B.depthTexture,0);const le=n.get(B.depthTexture).__webglTexture,Te=_t(B);if(B.depthTexture.format===Gh)vt(B)?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,le,0,Te):r.framebufferTexture2D(36160,36096,3553,le,0);else if(B.depthTexture.format===Hf)vt(B)?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,le,0,Te):r.framebufferTexture2D(36160,33306,3553,le,0);else throw new Error("Unknown depthTexture format")}function xe(I){const B=n.get(I),le=I.isWebGLCubeRenderTarget===!0;if(I.depthTexture&&!B.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");Ce(B.__webglFramebuffer,I)}else if(le){B.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)t.bindFramebuffer(36160,B.__webglFramebuffer[Te]),B.__webglDepthbuffer[Te]=r.createRenderbuffer(),Ae(B.__webglDepthbuffer[Te],I,!1)}else t.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=r.createRenderbuffer(),Ae(B.__webglDepthbuffer,I,!1);t.bindFramebuffer(36160,null)}function Ue(I,B,le){const Te=n.get(I);B!==void 0&&ze(Te.__webglFramebuffer,I,I.texture,36064,3553),le!==void 0&&xe(I)}function Fe(I){const B=I.texture,le=n.get(I),Te=n.get(B);I.addEventListener("dispose",ee),I.isWebGLMultipleRenderTargets!==!0&&(Te.__webglTexture===void 0&&(Te.__webglTexture=r.createTexture()),Te.__version=B.version,s.memory.textures++);const Ne=I.isWebGLCubeRenderTarget===!0,Be=I.isWebGLMultipleRenderTargets===!0,nt=P(I)||a;if(Ne){le.__webglFramebuffer=[];for(let ge=0;ge<6;ge++)le.__webglFramebuffer[ge]=r.createFramebuffer()}else{if(le.__webglFramebuffer=r.createFramebuffer(),Be)if(i.drawBuffers){const ge=I.texture;for(let et=0,Qe=ge.length;et<Qe;et++){const it=n.get(ge[et]);it.__webglTexture===void 0&&(it.__webglTexture=r.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&I.samples>0&&vt(I)===!1){const ge=Be?B:[B];le.__webglMultisampledFramebuffer=r.createFramebuffer(),le.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,le.__webglMultisampledFramebuffer);for(let et=0;et<ge.length;et++){const Qe=ge[et];le.__webglColorRenderbuffer[et]=r.createRenderbuffer(),r.bindRenderbuffer(36161,le.__webglColorRenderbuffer[et]);const it=o.convert(Qe.format,Qe.encoding),qe=o.convert(Qe.type),bt=k(Qe.internalFormat,it,qe,Qe.encoding),Gt=_t(I);r.renderbufferStorageMultisample(36161,Gt,bt,I.width,I.height),r.framebufferRenderbuffer(36160,36064+et,36161,le.__webglColorRenderbuffer[et])}r.bindRenderbuffer(36161,null),I.depthBuffer&&(le.__webglDepthRenderbuffer=r.createRenderbuffer(),Ae(le.__webglDepthRenderbuffer,I,!0)),t.bindFramebuffer(36160,null)}}if(Ne){t.bindTexture(34067,Te.__webglTexture),ve(34067,B,nt);for(let ge=0;ge<6;ge++)ze(le.__webglFramebuffer[ge],I,B,36064,34069+ge);L(B,nt)&&O(34067),t.unbindTexture()}else if(Be){const ge=I.texture;for(let et=0,Qe=ge.length;et<Qe;et++){const it=ge[et],qe=n.get(it);t.bindTexture(3553,qe.__webglTexture),ve(3553,it,nt),ze(le.__webglFramebuffer,I,it,36064+et,3553),L(it,nt)&&O(3553)}t.unbindTexture()}else{let ge=3553;(I.isWebGL3DRenderTarget||I.isWebGLArrayRenderTarget)&&(a?ge=I.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ge,Te.__webglTexture),ve(ge,B,nt),ze(le.__webglFramebuffer,I,B,36064,ge),L(B,nt)&&O(ge),t.unbindTexture()}I.depthBuffer&&xe(I)}function dt(I){const B=P(I)||a,le=I.isWebGLMultipleRenderTargets===!0?I.texture:[I.texture];for(let Te=0,Ne=le.length;Te<Ne;Te++){const Be=le[Te];if(L(Be,B)){const nt=I.isWebGLCubeRenderTarget?34067:3553,ge=n.get(Be).__webglTexture;t.bindTexture(nt,ge),O(nt),t.unbindTexture()}}}function lt(I){if(a&&I.samples>0&&vt(I)===!1){const B=I.isWebGLMultipleRenderTargets?I.texture:[I.texture],le=I.width,Te=I.height;let Ne=16384;const Be=[],nt=I.stencilBuffer?33306:36096,ge=n.get(I),et=I.isWebGLMultipleRenderTargets===!0;if(et)for(let Qe=0;Qe<B.length;Qe++)t.bindFramebuffer(36160,ge.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+Qe,36161,null),t.bindFramebuffer(36160,ge.__webglFramebuffer),r.framebufferTexture2D(36009,36064+Qe,3553,null,0);t.bindFramebuffer(36008,ge.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ge.__webglFramebuffer);for(let Qe=0;Qe<B.length;Qe++){Be.push(36064+Qe),I.depthBuffer&&Be.push(nt);const it=ge.__ignoreDepthValues!==void 0?ge.__ignoreDepthValues:!1;if(it===!1&&(I.depthBuffer&&(Ne|=256),I.stencilBuffer&&(Ne|=1024)),et&&r.framebufferRenderbuffer(36008,36064,36161,ge.__webglColorRenderbuffer[Qe]),it===!0&&(r.invalidateFramebuffer(36008,[nt]),r.invalidateFramebuffer(36009,[nt])),et){const qe=n.get(B[Qe]).__webglTexture;r.framebufferTexture2D(36009,36064,3553,qe,0)}r.blitFramebuffer(0,0,le,Te,0,0,le,Te,Ne,9728),g&&r.invalidateFramebuffer(36008,Be)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),et)for(let Qe=0;Qe<B.length;Qe++){t.bindFramebuffer(36160,ge.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+Qe,36161,ge.__webglColorRenderbuffer[Qe]);const it=n.get(B[Qe]).__webglTexture;t.bindFramebuffer(36160,ge.__webglFramebuffer),r.framebufferTexture2D(36009,36064+Qe,3553,it,0)}t.bindFramebuffer(36009,ge.__webglMultisampledFramebuffer)}}function _t(I){return Math.min(f,I.samples)}function vt(I){const B=n.get(I);return a&&I.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function ce(I){const B=s.render.frame;b.get(I)!==B&&(b.set(I,B),I.update())}function te(I,B){const le=I.encoding,Te=I.format,Ne=I.type;return I.isCompressedTexture===!0||I.isVideoTexture===!0||I.format===nT||le!==fc&&(le===on?a===!1?e.has("EXT_sRGB")===!0&&Te===Hs?(I.format=nT,I.minFilter=En,I.generateMipmaps=!1):B=HB.sRGBToLinear(B):(Te!==Hs||Ne!==rd)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",le)),B}this.allocateTextureUnit=J,this.resetTextureUnits=me,this.setTexture2D=$,this.setTexture2DArray=fe,this.setTexture3D=he,this.setTextureCube=Se,this.rebindTextures=Ue,this.setupRenderTarget=Fe,this.updateRenderTargetMipmap=dt,this.updateMultisampleRenderTarget=lt,this.setupDepthRenderbuffer=xe,this.setupFrameBufferTexture=ze,this.useMultisampledRTT=vt}function Gee(r,e,t){const n=t.isWebGL2;function i(o,s=null){let a;if(o===rd)return 5121;if(o===kK)return 32819;if(o===LK)return 32820;if(o===PK)return 5120;if(o===TK)return 5122;if(o===E4)return 5123;if(o===AK)return 5124;if(o===Fh)return 5125;if(o===js)return 5126;if(o===Rl)return n?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===OK)return 6406;if(o===Hs)return 6408;if(o===RK)return 6409;if(o===NK)return 6410;if(o===Gh)return 6402;if(o===Hf)return 34041;if(o===IK)return 6403;if(o===DK)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(o===nT)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(o===VK)return 36244;if(o===zK)return 33319;if(o===BK)return 33320;if(o===FK)return 36249;if(o===m3||o===v3||o===g3||o===y3)if(s===on)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(o===m3)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===v3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===g3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===y3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===m3)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===v3)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===g3)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===y3)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===ZD||o===JD||o===QD||o===$D)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===ZD)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===JD)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===QD)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===$D)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===UK)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===eR||o===tR)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(o===eR)return s===on?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(o===tR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===rR||o===nR||o===iR||o===oR||o===sR||o===aR||o===lR||o===uR||o===cR||o===hR||o===dR||o===pR||o===fR||o===mR)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(o===rR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===nR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===iR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===oR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===sR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===aR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===lR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===uR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===cR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===hR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===dR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===pR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===fR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===mR)return s===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===vR)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(o===vR)return s===on?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return o===pf?n?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):r[o]!==void 0?r[o]:null}return{convert:i}}class Yee extends Fn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ls extends pr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Xee={type:"move"};class X3{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ls,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ls,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ls,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const _ of e.hand.values()){const w=t.getJointPose(_,n);if(c.joints[_.jointName]===void 0){const S=new ls;S.matrixAutoUpdate=!1,S.visible=!1,c.joints[_.jointName]=S,c.add(S)}const M=c.joints[_.jointName];w!==null&&(M.matrix.fromArray(w.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.jointRadius=w.radius),M.visible=w!==null}const d=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],m=d.position.distanceTo(f.position),g=.02,b=.005;c.inputState.pinching&&m>g+b?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&m<=g-b&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,n),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Xee)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),this}}class r8 extends Ii{constructor(e,t,n,i,o,s,a,l,c,d){if(d=d!==void 0?d:Gh,d!==Gh&&d!==Hf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&d===Gh&&(n=Fh),n===void 0&&d===Hf&&(n=pf),super(null,i,o,s,a,l,d,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ln,this.minFilter=l!==void 0?l:ln,this.flipY=!1,this.generateMipmaps=!1}}class qee extends pd{constructor(e,t){super();const n=this;let i=null,o=1,s=null,a="local-floor",l=null,c=null,d=null,f=null,m=null,g=null;const b=t.getContextAttributes();let _=null,w=null;const M=[],S=[],C=new Fn;C.layers.enable(1),C.viewport=new ir;const P=new Fn;P.layers.enable(2),P.viewport=new ir;const T=[C,P],L=new Yee;L.layers.enable(1),L.layers.enable(2);let O=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let $=M[Q];return $===void 0&&($=new X3,M[Q]=$),$.getTargetRaySpace()},this.getControllerGrip=function(Q){let $=M[Q];return $===void 0&&($=new X3,M[Q]=$),$.getGripSpace()},this.getHand=function(Q){let $=M[Q];return $===void 0&&($=new X3,M[Q]=$),$.getHandSpace()};function N(Q){const $=S.indexOf(Q.inputSource);if($===-1)return;const fe=M[$];fe!==void 0&&fe.dispatchEvent({type:Q.type,data:Q.inputSource})}function V(){i.removeEventListener("select",N),i.removeEventListener("selectstart",N),i.removeEventListener("selectend",N),i.removeEventListener("squeeze",N),i.removeEventListener("squeezestart",N),i.removeEventListener("squeezeend",N),i.removeEventListener("end",V),i.removeEventListener("inputsourceschange",W);for(let Q=0;Q<M.length;Q++){const $=S[Q];$!==null&&(S[Q]=null,M[Q].disconnect($))}O=null,k=null,e.setRenderTarget(_),m=null,f=null,d=null,i=null,w=null,J.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){o=Q,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){a=Q,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(Q){l=Q},this.getBaseLayer=function(){return f!==null?f:m},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(Q){if(i=Q,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",N),i.addEventListener("selectstart",N),i.addEventListener("selectend",N),i.addEventListener("squeeze",N),i.addEventListener("squeezestart",N),i.addEventListener("squeezeend",N),i.addEventListener("end",V),i.addEventListener("inputsourceschange",W),b.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const $={antialias:i.renderState.layers===void 0?b.antialias:!0,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:o};m=new XRWebGLLayer(i,t,$),i.updateRenderState({baseLayer:m}),w=new Ir(m.framebufferWidth,m.framebufferHeight,{format:Hs,type:rd,encoding:e.outputEncoding})}else{let $=null,fe=null,he=null;b.depth&&(he=b.stencil?35056:33190,$=b.stencil?Hf:Gh,fe=b.stencil?pf:Fh);const Se={colorFormat:32856,depthFormat:he,scaleFactor:o};d=new XRWebGLBinding(i,t),f=d.createProjectionLayer(Se),i.updateRenderState({layers:[f]}),w=new Ir(f.textureWidth,f.textureHeight,{format:Hs,type:rd,depthTexture:new r8(f.textureWidth,f.textureHeight,fe,void 0,void 0,void 0,void 0,void 0,void 0,$),stencilBuffer:b.stencil,encoding:e.outputEncoding,samples:b.antialias?4:0});const Re=e.properties.get(w);Re.__ignoreDepthValues=f.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(1),l=null,s=await i.requestReferenceSpace(a),J.setContext(i),J.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function W(Q){for(let $=0;$<Q.removed.length;$++){const fe=Q.removed[$],he=S.indexOf(fe);he>=0&&(S[he]=null,M[he].dispatchEvent({type:"disconnected",data:fe}))}for(let $=0;$<Q.added.length;$++){const fe=Q.added[$];let he=S.indexOf(fe);if(he===-1){for(let Re=0;Re<M.length;Re++)if(Re>=S.length){S.push(fe),he=Re;break}else if(S[Re]===null){S[Re]=fe,he=Re;break}if(he===-1)break}const Se=M[he];Se&&Se.dispatchEvent({type:"connected",data:fe})}}const ee=new j,se=new j;function q(Q,$,fe){ee.setFromMatrixPosition($.matrixWorld),se.setFromMatrixPosition(fe.matrixWorld);const he=ee.distanceTo(se),Se=$.projectionMatrix.elements,Re=fe.projectionMatrix.elements,st=Se[14]/(Se[10]-1),ve=Se[14]/(Se[10]+1),St=(Se[9]+1)/Se[5],tt=(Se[9]-1)/Se[5],Ge=(Se[8]-1)/Se[0],ze=(Re[8]+1)/Re[0],Ae=st*Ge,Ce=st*ze,xe=he/(-Ge+ze),Ue=xe*-Ge;$.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(Ue),Q.translateZ(xe),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();const Fe=st+xe,dt=ve+xe,lt=Ae-Ue,_t=Ce+(he-Ue),vt=St*ve/dt*Fe,ce=tt*ve/dt*Fe;Q.projectionMatrix.makePerspective(lt,_t,vt,ce,Fe,dt)}function re(Q,$){$===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices($.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(i===null)return;L.near=P.near=C.near=Q.near,L.far=P.far=C.far=Q.far,(O!==L.near||k!==L.far)&&(i.updateRenderState({depthNear:L.near,depthFar:L.far}),O=L.near,k=L.far);const $=Q.parent,fe=L.cameras;re(L,$);for(let Se=0;Se<fe.length;Se++)re(fe[Se],$);L.matrixWorld.decompose(L.position,L.quaternion,L.scale),Q.position.copy(L.position),Q.quaternion.copy(L.quaternion),Q.scale.copy(L.scale),Q.matrix.copy(L.matrix),Q.matrixWorld.copy(L.matrixWorld);const he=Q.children;for(let Se=0,Re=he.length;Se<Re;Se++)he[Se].updateMatrixWorld(!0);fe.length===2?q(L,C,P):L.projectionMatrix.copy(C.projectionMatrix)},this.getCamera=function(){return L},this.getFoveation=function(){if(f!==null)return f.fixedFoveation;if(m!==null)return m.fixedFoveation},this.setFoveation=function(Q){f!==null&&(f.fixedFoveation=Q),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=Q)};let Z=null;function me(Q,$){if(c=$.getViewerPose(l||s),g=$,c!==null){const fe=c.views;m!==null&&(e.setRenderTargetFramebuffer(w,m.framebuffer),e.setRenderTarget(w));let he=!1;fe.length!==L.cameras.length&&(L.cameras.length=0,he=!0);for(let Se=0;Se<fe.length;Se++){const Re=fe[Se];let st=null;if(m!==null)st=m.getViewport(Re);else{const St=d.getViewSubImage(f,Re);st=St.viewport,Se===0&&(e.setRenderTargetTextures(w,St.colorTexture,f.ignoreDepthValues?void 0:St.depthStencilTexture),e.setRenderTarget(w))}let ve=T[Se];ve===void 0&&(ve=new Fn,ve.layers.enable(Se),ve.viewport=new ir,T[Se]=ve),ve.matrix.fromArray(Re.transform.matrix),ve.projectionMatrix.fromArray(Re.projectionMatrix),ve.viewport.set(st.x,st.y,st.width,st.height),Se===0&&L.matrix.copy(ve.matrix),he===!0&&L.cameras.push(ve)}}for(let fe=0;fe<M.length;fe++){const he=S[fe],Se=M[fe];he!==null&&Se!==void 0&&Se.update(he,$,l||s)}Z&&Z(Q,$),g=null}const J=new ZB;J.setAnimationLoop(me),this.setAnimationLoop=function(Q){Z=Q},this.dispose=function(){}}}function Kee(r,e){function t(_,w){_.fogColor.value.copy(w.color),w.isFog?(_.fogNear.value=w.near,_.fogFar.value=w.far):w.isFogExp2&&(_.fogDensity.value=w.density)}function n(_,w,M,S,C){w.isMeshBasicMaterial||w.isMeshLambertMaterial?i(_,w):w.isMeshToonMaterial?(i(_,w),d(_,w)):w.isMeshPhongMaterial?(i(_,w),c(_,w)):w.isMeshStandardMaterial?(i(_,w),f(_,w),w.isMeshPhysicalMaterial&&m(_,w,C)):w.isMeshMatcapMaterial?(i(_,w),g(_,w)):w.isMeshDepthMaterial?i(_,w):w.isMeshDistanceMaterial?(i(_,w),b(_,w)):w.isMeshNormalMaterial?i(_,w):w.isLineBasicMaterial?(o(_,w),w.isLineDashedMaterial&&s(_,w)):w.isPointsMaterial?a(_,w,M,S):w.isSpriteMaterial?l(_,w):w.isShadowMaterial?(_.color.value.copy(w.color),_.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function i(_,w){_.opacity.value=w.opacity,w.color&&_.diffuse.value.copy(w.color),w.emissive&&_.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(_.map.value=w.map),w.alphaMap&&(_.alphaMap.value=w.alphaMap),w.bumpMap&&(_.bumpMap.value=w.bumpMap,_.bumpScale.value=w.bumpScale,w.side===Mo&&(_.bumpScale.value*=-1)),w.displacementMap&&(_.displacementMap.value=w.displacementMap,_.displacementScale.value=w.displacementScale,_.displacementBias.value=w.displacementBias),w.emissiveMap&&(_.emissiveMap.value=w.emissiveMap),w.normalMap&&(_.normalMap.value=w.normalMap,_.normalScale.value.copy(w.normalScale),w.side===Mo&&_.normalScale.value.negate()),w.specularMap&&(_.specularMap.value=w.specularMap),w.alphaTest>0&&(_.alphaTest.value=w.alphaTest);const M=e.get(w).envMap;if(M&&(_.envMap.value=M,_.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=w.reflectivity,_.ior.value=w.ior,_.refractionRatio.value=w.refractionRatio),w.lightMap){_.lightMap.value=w.lightMap;const P=r.physicallyCorrectLights!==!0?Math.PI:1;_.lightMapIntensity.value=w.lightMapIntensity*P}w.aoMap&&(_.aoMap.value=w.aoMap,_.aoMapIntensity.value=w.aoMapIntensity);let S;w.map?S=w.map:w.specularMap?S=w.specularMap:w.displacementMap?S=w.displacementMap:w.normalMap?S=w.normalMap:w.bumpMap?S=w.bumpMap:w.roughnessMap?S=w.roughnessMap:w.metalnessMap?S=w.metalnessMap:w.alphaMap?S=w.alphaMap:w.emissiveMap?S=w.emissiveMap:w.clearcoatMap?S=w.clearcoatMap:w.clearcoatNormalMap?S=w.clearcoatNormalMap:w.clearcoatRoughnessMap?S=w.clearcoatRoughnessMap:w.iridescenceMap?S=w.iridescenceMap:w.iridescenceThicknessMap?S=w.iridescenceThicknessMap:w.specularIntensityMap?S=w.specularIntensityMap:w.specularColorMap?S=w.specularColorMap:w.transmissionMap?S=w.transmissionMap:w.thicknessMap?S=w.thicknessMap:w.sheenColorMap?S=w.sheenColorMap:w.sheenRoughnessMap&&(S=w.sheenRoughnessMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),_.uvTransform.value.copy(S.matrix));let C;w.aoMap?C=w.aoMap:w.lightMap&&(C=w.lightMap),C!==void 0&&(C.isWebGLRenderTarget&&(C=C.texture),C.matrixAutoUpdate===!0&&C.updateMatrix(),_.uv2Transform.value.copy(C.matrix))}function o(_,w){_.diffuse.value.copy(w.color),_.opacity.value=w.opacity}function s(_,w){_.dashSize.value=w.dashSize,_.totalSize.value=w.dashSize+w.gapSize,_.scale.value=w.scale}function a(_,w,M,S){_.diffuse.value.copy(w.color),_.opacity.value=w.opacity,_.size.value=w.size*M,_.scale.value=S*.5,w.map&&(_.map.value=w.map),w.alphaMap&&(_.alphaMap.value=w.alphaMap),w.alphaTest>0&&(_.alphaTest.value=w.alphaTest);let C;w.map?C=w.map:w.alphaMap&&(C=w.alphaMap),C!==void 0&&(C.matrixAutoUpdate===!0&&C.updateMatrix(),_.uvTransform.value.copy(C.matrix))}function l(_,w){_.diffuse.value.copy(w.color),_.opacity.value=w.opacity,_.rotation.value=w.rotation,w.map&&(_.map.value=w.map),w.alphaMap&&(_.alphaMap.value=w.alphaMap),w.alphaTest>0&&(_.alphaTest.value=w.alphaTest);let M;w.map?M=w.map:w.alphaMap&&(M=w.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),_.uvTransform.value.copy(M.matrix))}function c(_,w){_.specular.value.copy(w.specular),_.shininess.value=Math.max(w.shininess,1e-4)}function d(_,w){w.gradientMap&&(_.gradientMap.value=w.gradientMap)}function f(_,w){_.roughness.value=w.roughness,_.metalness.value=w.metalness,w.roughnessMap&&(_.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(_.metalnessMap.value=w.metalnessMap),e.get(w).envMap&&(_.envMapIntensity.value=w.envMapIntensity)}function m(_,w,M){_.ior.value=w.ior,w.sheen>0&&(_.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),_.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(_.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(_.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(_.clearcoat.value=w.clearcoat,_.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(_.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(_.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),_.clearcoatNormalMap.value=w.clearcoatNormalMap,w.side===Mo&&_.clearcoatNormalScale.value.negate())),w.iridescence>0&&(_.iridescence.value=w.iridescence,_.iridescenceIOR.value=w.iridescenceIOR,_.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(_.iridescenceMap.value=w.iridescenceMap),w.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=w.iridescenceThicknessMap)),w.transmission>0&&(_.transmission.value=w.transmission,_.transmissionSamplerMap.value=M.texture,_.transmissionSamplerSize.value.set(M.width,M.height),w.transmissionMap&&(_.transmissionMap.value=w.transmissionMap),_.thickness.value=w.thickness,w.thicknessMap&&(_.thicknessMap.value=w.thicknessMap),_.attenuationDistance.value=w.attenuationDistance,_.attenuationColor.value.copy(w.attenuationColor)),_.specularIntensity.value=w.specularIntensity,_.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(_.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(_.specularColorMap.value=w.specularColorMap)}function g(_,w){w.matcap&&(_.matcap.value=w.matcap)}function b(_,w){_.referencePosition.value.copy(w.referencePosition),_.nearDistance.value=w.nearDistance,_.farDistance.value=w.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function Zee(r,e,t,n){let i={},o={},s=[];const a=t.isWebGL2?r.getParameter(35375):0;function l(S,C){const P=C.program;n.uniformBlockBinding(S,P)}function c(S,C){let P=i[S.id];P===void 0&&(b(S),P=d(S),i[S.id]=P,S.addEventListener("dispose",w));const T=C.program;n.updateUBOMapping(S,T);const L=e.render.frame;o[S.id]!==L&&(m(S),o[S.id]=L)}function d(S){const C=f();S.__bindingPointIndex=C;const P=r.createBuffer(),T=S.__size,L=S.usage;return r.bindBuffer(35345,P),r.bufferData(35345,T,L),r.bindBuffer(35345,null),r.bindBufferBase(35345,C,P),P}function f(){for(let S=0;S<a;S++)if(s.indexOf(S)===-1)return s.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(S){const C=i[S.id],P=S.uniforms,T=S.__cache;r.bindBuffer(35345,C);for(let L=0,O=P.length;L<O;L++){const k=P[L];if(g(k,L,T)===!0){const N=k.value,V=k.__offset;typeof N=="number"?(k.__data[0]=N,r.bufferSubData(35345,V,k.__data)):(k.value.isMatrix3?(k.__data[0]=k.value.elements[0],k.__data[1]=k.value.elements[1],k.__data[2]=k.value.elements[2],k.__data[3]=k.value.elements[0],k.__data[4]=k.value.elements[3],k.__data[5]=k.value.elements[4],k.__data[6]=k.value.elements[5],k.__data[7]=k.value.elements[0],k.__data[8]=k.value.elements[6],k.__data[9]=k.value.elements[7],k.__data[10]=k.value.elements[8],k.__data[11]=k.value.elements[0]):N.toArray(k.__data),r.bufferSubData(35345,V,k.__data))}}r.bindBuffer(35345,null)}function g(S,C,P){const T=S.value;if(P[C]===void 0)return typeof T=="number"?P[C]=T:P[C]=T.clone(),!0;if(typeof T=="number"){if(P[C]!==T)return P[C]=T,!0}else{const L=P[C];if(L.equals(T)===!1)return L.copy(T),!0}return!1}function b(S){const C=S.uniforms;let P=0;const T=16;let L=0;for(let O=0,k=C.length;O<k;O++){const N=C[O],V=_(N);if(N.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=P,O>0){L=P%T;const W=T-L;L!==0&&W-V.boundary<0&&(P+=T-L,N.__offset=P)}P+=V.storage}return L=P%T,L>0&&(P+=T-L),S.__size=P,S.__cache={},this}function _(S){const C=S.value,P={boundary:0,storage:0};return typeof C=="number"?(P.boundary=4,P.storage=4):C.isVector2?(P.boundary=8,P.storage=8):C.isVector3||C.isColor?(P.boundary=16,P.storage=12):C.isVector4?(P.boundary=16,P.storage=16):C.isMatrix3?(P.boundary=48,P.storage=48):C.isMatrix4?(P.boundary=64,P.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),P}function w(S){const C=S.target;C.removeEventListener("dispose",w);const P=s.indexOf(C.__bindingPointIndex);s.splice(P,1),r.deleteBuffer(i[C.id]),delete i[C.id],delete o[C.id]}function M(){for(const S in i)r.deleteBuffer(i[S]);s=[],i={},o={}}return{bind:l,update:c,dispose:M}}function Jee(){const r=b0("canvas");return r.style.display="block",r}function n8(r={}){this.isWebGLRenderer=!0;const e=r.canvas!==void 0?r.canvas:Jee(),t=r.context!==void 0?r.context:null,n=r.depth!==void 0?r.depth:!0,i=r.stencil!==void 0?r.stencil:!0,o=r.antialias!==void 0?r.antialias:!1,s=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,a=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,l=r.powerPreference!==void 0?r.powerPreference:"default",c=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let d;t!==null?d=t.getContextAttributes().alpha:d=r.alpha!==void 0?r.alpha:!1;let f=null,m=null;const g=[],b=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=fc,this.physicallyCorrectLights=!1,this.toneMapping=ka,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const _=this;let w=!1,M=0,S=0,C=null,P=-1,T=null;const L=new ir,O=new ir;let k=null,N=e.width,V=e.height,W=1,ee=null,se=null;const q=new ir(0,0,N,V),re=new ir(0,0,N,V);let Z=!1;const me=new PS;let J=!1,Q=!1,$=null;const fe=new Ct,he=new be,Se=new j,Re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function st(){return C===null?W:1}let ve=t;function St(H,ue){for(let ye=0;ye<H.length;ye++){const de=H[ye],Ee=e.getContext(de,ue);if(Ee!==null)return Ee}return null}try{const H={alpha:!0,depth:n,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${C4}`),e.addEventListener("webglcontextlost",bt,!1),e.addEventListener("webglcontextrestored",Gt,!1),e.addEventListener("webglcontextcreationerror",xr,!1),ve===null){const ue=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&ue.shift(),ve=St(ue,H),ve===null)throw St(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ve.getShaderPrecisionFormat===void 0&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}let tt,Ge,ze,Ae,Ce,xe,Ue,Fe,dt,lt,_t,vt,ce,te,I,B,le,Te,Ne,Be,nt,ge,et,Qe;function it(){tt=new u$(ve),Ge=new n$(ve,tt,r),tt.init(Ge),ge=new Gee(ve,tt,Ge),ze=new Hee(ve,tt,Ge),Ae=new d$,Ce=new kee,xe=new Wee(ve,tt,ze,Ce,Ge,ge,Ae),Ue=new o$(_),Fe=new l$(_),dt=new MZ(ve,Ge),et=new t$(ve,tt,dt,Ge),lt=new c$(ve,dt,Ae,et),_t=new v$(ve,lt,dt,Ae),Ne=new m$(ve,Ge,xe),B=new i$(Ce),vt=new Aee(_,Ue,Fe,tt,Ge,et,B),ce=new Kee(_,Ce),te=new Oee,I=new zee(tt,Ge),Te=new e$(_,Ue,ze,_t,d,s),le=new jee(_,_t,Ge),Qe=new Zee(ve,Ae,Ge,ze),Be=new r$(ve,tt,Ae,Ge),nt=new h$(ve,tt,Ae,Ge),Ae.programs=vt.programs,_.capabilities=Ge,_.extensions=tt,_.properties=Ce,_.renderLists=te,_.shadowMap=le,_.state=ze,_.info=Ae}it();const qe=new qee(_,ve);this.xr=qe,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const H=tt.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=tt.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(H){H!==void 0&&(W=H,this.setSize(N,V,!1))},this.getSize=function(H){return H.set(N,V)},this.setSize=function(H,ue,ye){if(qe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}N=H,V=ue,e.width=Math.floor(H*W),e.height=Math.floor(ue*W),ye!==!1&&(e.style.width=H+"px",e.style.height=ue+"px"),this.setViewport(0,0,H,ue)},this.getDrawingBufferSize=function(H){return H.set(N*W,V*W).floor()},this.setDrawingBufferSize=function(H,ue,ye){N=H,V=ue,W=ye,e.width=Math.floor(H*ye),e.height=Math.floor(ue*ye),this.setViewport(0,0,H,ue)},this.getCurrentViewport=function(H){return H.copy(L)},this.getViewport=function(H){return H.copy(q)},this.setViewport=function(H,ue,ye,de){H.isVector4?q.set(H.x,H.y,H.z,H.w):q.set(H,ue,ye,de),ze.viewport(L.copy(q).multiplyScalar(W).floor())},this.getScissor=function(H){return H.copy(re)},this.setScissor=function(H,ue,ye,de){H.isVector4?re.set(H.x,H.y,H.z,H.w):re.set(H,ue,ye,de),ze.scissor(O.copy(re).multiplyScalar(W).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(H){ze.setScissorTest(Z=H)},this.setOpaqueSort=function(H){ee=H},this.setTransparentSort=function(H){se=H},this.getClearColor=function(H){return H.copy(Te.getClearColor())},this.setClearColor=function(){Te.setClearColor.apply(Te,arguments)},this.getClearAlpha=function(){return Te.getClearAlpha()},this.setClearAlpha=function(){Te.setClearAlpha.apply(Te,arguments)},this.clear=function(H=!0,ue=!0,ye=!0){let de=0;H&&(de|=16384),ue&&(de|=256),ye&&(de|=1024),ve.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",bt,!1),e.removeEventListener("webglcontextrestored",Gt,!1),e.removeEventListener("webglcontextcreationerror",xr,!1),te.dispose(),I.dispose(),Ce.dispose(),Ue.dispose(),Fe.dispose(),_t.dispose(),et.dispose(),Qe.dispose(),vt.dispose(),qe.dispose(),qe.removeEventListener("sessionstart",rr),qe.removeEventListener("sessionend",fr),$&&($.dispose(),$=null),Dr.stop()};function bt(H){H.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Gt(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const H=Ae.autoReset,ue=le.enabled,ye=le.autoUpdate,de=le.needsUpdate,Ee=le.type;it(),Ae.autoReset=H,le.enabled=ue,le.autoUpdate=ye,le.needsUpdate=de,le.type=Ee}function xr(H){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",H.statusMessage)}function ne(H){const ue=H.target;ue.removeEventListener("dispose",ne),Xe(ue)}function Xe(H){we(H),Ce.remove(H)}function we(H){const ue=Ce.get(H).programs;ue!==void 0&&(ue.forEach(function(ye){vt.releaseProgram(ye)}),H.isShaderMaterial&&vt.releaseShaderCache(H))}this.renderBufferDirect=function(H,ue,ye,de,Ee,at){ue===null&&(ue=Re);const Mt=Ee.isMesh&&Ee.matrixWorld.determinant()<0,pt=jm(H,ue,ye,de,Ee);ze.setMaterial(de,Mt);let Nt=ye.index;const Mr=ye.attributes.position;if(Nt===null){if(Mr===void 0||Mr.count===0)return}else if(Nt.count===0)return;let Bt=1;de.wireframe===!0&&(Nt=lt.getWireframeAttribute(ye),Bt=2),et.setup(Ee,de,pt,ye,Nt);let Ft,Qr=Be;Nt!==null&&(Ft=dt.get(Nt),Qr=nt,Qr.setIndex(Ft));const gs=Nt!==null?Nt.count:Mr.count,ao=ye.drawRange.start*Bt,li=ye.drawRange.count*Bt,dn=at!==null?at.start*Bt:0,Qt=at!==null?at.count*Bt:1/0,ea=Math.max(ao,dn),ta=Math.min(gs,ao+li,dn+Qt)-1,Xn=Math.max(0,ta-ea+1);if(Xn!==0){if(Ee.isMesh)de.wireframe===!0?(ze.setLineWidth(de.wireframeLinewidth*st()),Qr.setMode(1)):Qr.setMode(4);else if(Ee.isLine){let lo=de.linewidth;lo===void 0&&(lo=1),ze.setLineWidth(lo*st()),Ee.isLineSegments?Qr.setMode(1):Ee.isLineLoop?Qr.setMode(2):Qr.setMode(3)}else Ee.isPoints?Qr.setMode(0):Ee.isSprite&&Qr.setMode(4);if(Ee.isInstancedMesh)Qr.renderInstances(ea,Xn,Ee.count);else if(ye.isInstancedBufferGeometry){const lo=Math.min(ye.instanceCount,ye._maxInstanceCount);Qr.renderInstances(ea,Xn,lo)}else Qr.render(ea,Xn)}},this.compile=function(H,ue){m=I.get(H),m.init(),b.push(m),H.traverseVisible(function(ye){ye.isLight&&ye.layers.test(ue.layers)&&(m.pushLight(ye),ye.castShadow&&m.pushShadow(ye))}),m.setupLights(_.physicallyCorrectLights),H.traverse(function(ye){const de=ye.material;if(de)if(Array.isArray(de))for(let Ee=0;Ee<de.length;Ee++){const at=de[Ee];Vc(at,H,ye)}else Vc(de,H,ye)}),b.pop(),m=null};let Ke=null;function Ie(H){Ke&&Ke(H)}function rr(){Dr.stop()}function fr(){Dr.start()}const Dr=new ZB;Dr.setAnimationLoop(Ie),typeof self<"u"&&Dr.setContext(self),this.setAnimationLoop=function(H){Ke=H,qe.setAnimationLoop(H),H===null?Dr.stop():Dr.start()},qe.addEventListener("sessionstart",rr),qe.addEventListener("sessionend",fr),this.render=function(H,ue){if(ue!==void 0&&ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;H.autoUpdate===!0&&H.updateMatrixWorld(),ue.parent===null&&ue.updateMatrixWorld(),qe.enabled===!0&&qe.isPresenting===!0&&(qe.cameraAutoUpdate===!0&&qe.updateCamera(ue),ue=qe.getCamera()),H.isScene===!0&&H.onBeforeRender(_,H,ue,C),m=I.get(H,b.length),m.init(),b.push(m),fe.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),me.setFromProjectionMatrix(fe),Q=this.localClippingEnabled,J=B.init(this.clippingPlanes,Q,ue),f=te.get(H,g.length),f.init(),g.push(f),xi(H,ue,0,_.sortObjects),f.finish(),_.sortObjects===!0&&f.sort(ee,se),J===!0&&B.beginShadows();const ye=m.state.shadowsArray;if(le.render(ye,H,ue),J===!0&&B.endShadows(),this.info.autoReset===!0&&this.info.reset(),Te.render(f,H),m.setupLights(_.physicallyCorrectLights),ue.isArrayCamera){const de=ue.cameras;for(let Ee=0,at=de.length;Ee<at;Ee++){const Mt=de[Ee];Sr(f,H,Mt,Mt.viewport)}}else Sr(f,H,ue);C!==null&&(xe.updateMultisampleRenderTarget(C),xe.updateRenderTargetMipmap(C)),H.isScene===!0&&H.onAfterRender(_,H,ue),et.resetDefaultState(),P=-1,T=null,b.pop(),b.length>0?m=b[b.length-1]:m=null,g.pop(),g.length>0?f=g[g.length-1]:f=null};function xi(H,ue,ye,de){if(H.visible===!1)return;if(H.layers.test(ue.layers)){if(H.isGroup)ye=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(ue);else if(H.isLight)m.pushLight(H),H.castShadow&&m.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||me.intersectsSprite(H)){de&&Se.setFromMatrixPosition(H.matrixWorld).applyMatrix4(fe);const at=_t.update(H),Mt=H.material;Mt.visible&&f.push(H,at,Mt,ye,Se.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(H.isSkinnedMesh&&H.skeleton.frame!==Ae.render.frame&&(H.skeleton.update(),H.skeleton.frame=Ae.render.frame),!H.frustumCulled||me.intersectsObject(H))){de&&Se.setFromMatrixPosition(H.matrixWorld).applyMatrix4(fe);const at=_t.update(H),Mt=H.material;if(Array.isArray(Mt)){const pt=at.groups;for(let Nt=0,Mr=pt.length;Nt<Mr;Nt++){const Bt=pt[Nt],Ft=Mt[Bt.materialIndex];Ft&&Ft.visible&&f.push(H,at,Ft,ye,Se.z,Bt)}}else Mt.visible&&f.push(H,at,Mt,ye,Se.z,null)}}const Ee=H.children;for(let at=0,Mt=Ee.length;at<Mt;at++)xi(Ee[at],ue,ye,de)}function Sr(H,ue,ye,de){const Ee=H.opaque,at=H.transmissive,Mt=H.transparent;m.setupLightsView(ye),at.length>0&&ai(Ee,ue,ye),de&&ze.viewport(L.copy(de)),Ee.length>0&&Yn(Ee,ue,ye),at.length>0&&Yn(at,ue,ye),Mt.length>0&&Yn(Mt,ue,ye),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1)}function ai(H,ue,ye){const de=Ge.isWebGL2;$===null&&($=new Ir(1,1,{generateMipmaps:!0,type:tt.has("EXT_color_buffer_half_float")?Rl:rd,minFilter:K0,samples:de&&o===!0?4:0})),_.getDrawingBufferSize(he),de?$.setSize(he.x,he.y):$.setSize(Ex(he.x),Ex(he.y));const Ee=_.getRenderTarget();_.setRenderTarget($),_.clear();const at=_.toneMapping;_.toneMapping=ka,Yn(H,ue,ye),_.toneMapping=at,xe.updateMultisampleRenderTarget($),xe.updateRenderTargetMipmap($),_.setRenderTarget(Ee)}function Yn(H,ue,ye){const de=ue.isScene===!0?ue.overrideMaterial:null;for(let Ee=0,at=H.length;Ee<at;Ee++){const Mt=H[Ee],pt=Mt.object,Nt=Mt.geometry,Mr=de===null?Mt.material:de,Bt=Mt.group;pt.layers.test(ye.layers)&&Ic(pt,ue,ye,Nt,Mr,Bt)}}function Ic(H,ue,ye,de,Ee,at){H.onBeforeRender(_,ue,ye,de,Ee,at),H.modelViewMatrix.multiplyMatrices(ye.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),Ee.onBeforeRender(_,ue,ye,de,H,at),Ee.transparent===!0&&Ee.side===Gl?(Ee.side=Mo,Ee.needsUpdate=!0,_.renderBufferDirect(ye,ue,de,Ee,H,at),Ee.side=td,Ee.needsUpdate=!0,_.renderBufferDirect(ye,ue,de,Ee,H,at),Ee.side=Gl):_.renderBufferDirect(ye,ue,de,Ee,H,at),H.onAfterRender(_,ue,ye,de,Ee,at)}function Vc(H,ue,ye){ue.isScene!==!0&&(ue=Re);const de=Ce.get(H),Ee=m.state.lights,at=m.state.shadowsArray,Mt=Ee.state.version,pt=vt.getParameters(H,Ee.state,at,ue,ye),Nt=vt.getProgramCacheKey(pt);let Mr=de.programs;de.environment=H.isMeshStandardMaterial?ue.environment:null,de.fog=ue.fog,de.envMap=(H.isMeshStandardMaterial?Fe:Ue).get(H.envMap||de.environment),Mr===void 0&&(H.addEventListener("dispose",ne),Mr=new Map,de.programs=Mr);let Bt=Mr.get(Nt);if(Bt!==void 0){if(de.currentProgram===Bt&&de.lightsStateVersion===Mt)return iu(H,pt),Bt}else pt.uniforms=vt.getUniforms(H),H.onBuild(ye,pt,_),H.onBeforeCompile(pt,_),Bt=vt.acquireProgram(pt,Nt),Mr.set(Nt,Bt),de.uniforms=pt.uniforms;const Ft=de.uniforms;(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(Ft.clippingPlanes=B.uniform),iu(H,pt),de.needsLights=Bc(H),de.lightsStateVersion=Mt,de.needsLights&&(Ft.ambientLightColor.value=Ee.state.ambient,Ft.lightProbe.value=Ee.state.probe,Ft.directionalLights.value=Ee.state.directional,Ft.directionalLightShadows.value=Ee.state.directionalShadow,Ft.spotLights.value=Ee.state.spot,Ft.spotLightShadows.value=Ee.state.spotShadow,Ft.rectAreaLights.value=Ee.state.rectArea,Ft.ltc_1.value=Ee.state.rectAreaLTC1,Ft.ltc_2.value=Ee.state.rectAreaLTC2,Ft.pointLights.value=Ee.state.point,Ft.pointLightShadows.value=Ee.state.pointShadow,Ft.hemisphereLights.value=Ee.state.hemi,Ft.directionalShadowMap.value=Ee.state.directionalShadowMap,Ft.directionalShadowMatrix.value=Ee.state.directionalShadowMatrix,Ft.spotShadowMap.value=Ee.state.spotShadowMap,Ft.spotShadowMatrix.value=Ee.state.spotShadowMatrix,Ft.pointShadowMap.value=Ee.state.pointShadowMap,Ft.pointShadowMatrix.value=Ee.state.pointShadowMatrix);const Qr=Bt.getUniforms(),gs=Tb.seqWithValue(Qr.seq,Ft);return de.currentProgram=Bt,de.uniformsList=gs,Bt}function iu(H,ue){const ye=Ce.get(H);ye.outputEncoding=ue.outputEncoding,ye.instancing=ue.instancing,ye.skinning=ue.skinning,ye.morphTargets=ue.morphTargets,ye.morphNormals=ue.morphNormals,ye.morphColors=ue.morphColors,ye.morphTargetsCount=ue.morphTargetsCount,ye.numClippingPlanes=ue.numClippingPlanes,ye.numIntersection=ue.numClipIntersection,ye.vertexAlphas=ue.vertexAlphas,ye.vertexTangents=ue.vertexTangents,ye.toneMapping=ue.toneMapping}function jm(H,ue,ye,de,Ee){ue.isScene!==!0&&(ue=Re),xe.resetTextureUnits();const at=ue.fog,Mt=de.isMeshStandardMaterial?ue.environment:null,pt=C===null?_.outputEncoding:C.isXRRenderTarget===!0?C.texture.encoding:fc,Nt=(de.isMeshStandardMaterial?Fe:Ue).get(de.envMap||Mt),Mr=de.vertexColors===!0&&!!ye.attributes.color&&ye.attributes.color.itemSize===4,Bt=!!de.normalMap&&!!ye.attributes.tangent,Ft=!!ye.morphAttributes.position,Qr=!!ye.morphAttributes.normal,gs=!!ye.morphAttributes.color,ao=de.toneMapped?_.toneMapping:ka,li=ye.morphAttributes.position||ye.morphAttributes.normal||ye.morphAttributes.color,dn=li!==void 0?li.length:0,Qt=Ce.get(de),ea=m.state.lights;if(J===!0&&(Q===!0||H!==T)){const Ln=H===T&&de.id===P;B.setState(de,H,Ln)}let ta=!1;de.version===Qt.__version?(Qt.needsLights&&Qt.lightsStateVersion!==ea.state.version||Qt.outputEncoding!==pt||Ee.isInstancedMesh&&Qt.instancing===!1||!Ee.isInstancedMesh&&Qt.instancing===!0||Ee.isSkinnedMesh&&Qt.skinning===!1||!Ee.isSkinnedMesh&&Qt.skinning===!0||Qt.envMap!==Nt||de.fog===!0&&Qt.fog!==at||Qt.numClippingPlanes!==void 0&&(Qt.numClippingPlanes!==B.numPlanes||Qt.numIntersection!==B.numIntersection)||Qt.vertexAlphas!==Mr||Qt.vertexTangents!==Bt||Qt.morphTargets!==Ft||Qt.morphNormals!==Qr||Qt.morphColors!==gs||Qt.toneMapping!==ao||Ge.isWebGL2===!0&&Qt.morphTargetsCount!==dn)&&(ta=!0):(ta=!0,Qt.__version=de.version);let Xn=Qt.currentProgram;ta===!0&&(Xn=Vc(de,ue,Ee));let lo=!1,ys=!1,Fc=!1;const $r=Xn.getUniforms(),Ya=Qt.uniforms;if(ze.useProgram(Xn.program)&&(lo=!0,ys=!0,Fc=!0),de.id!==P&&(P=de.id,ys=!0),lo||T!==H){if($r.setValue(ve,"projectionMatrix",H.projectionMatrix),Ge.logarithmicDepthBuffer&&$r.setValue(ve,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),T!==H&&(T=H,ys=!0,Fc=!0),de.isShaderMaterial||de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshStandardMaterial||de.envMap){const Ln=$r.map.cameraPosition;Ln!==void 0&&Ln.setValue(ve,Se.setFromMatrixPosition(H.matrixWorld))}(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&$r.setValue(ve,"isOrthographic",H.isOrthographicCamera===!0),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial||de.isShadowMaterial||Ee.isSkinnedMesh)&&$r.setValue(ve,"viewMatrix",H.matrixWorldInverse)}if(Ee.isSkinnedMesh){$r.setOptional(ve,Ee,"bindMatrix"),$r.setOptional(ve,Ee,"bindMatrixInverse");const Ln=Ee.skeleton;Ln&&(Ge.floatVertexTextures?(Ln.boneTexture===null&&Ln.computeBoneTexture(),$r.setValue(ve,"boneTexture",Ln.boneTexture,xe),$r.setValue(ve,"boneTextureSize",Ln.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ou=ye.morphAttributes;if((ou.position!==void 0||ou.normal!==void 0||ou.color!==void 0&&Ge.isWebGL2===!0)&&Ne.update(Ee,ye,de,Xn),(ys||Qt.receiveShadow!==Ee.receiveShadow)&&(Qt.receiveShadow=Ee.receiveShadow,$r.setValue(ve,"receiveShadow",Ee.receiveShadow)),ys&&($r.setValue(ve,"toneMappingExposure",_.toneMappingExposure),Qt.needsLights&&zc(Ya,Fc),at&&de.fog===!0&&ce.refreshFogUniforms(Ya,at),ce.refreshMaterialUniforms(Ya,de,W,V,$),Tb.upload(ve,Qt.uniformsList,Ya,xe)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(Tb.upload(ve,Qt.uniformsList,Ya,xe),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&$r.setValue(ve,"center",Ee.center),$r.setValue(ve,"modelViewMatrix",Ee.modelViewMatrix),$r.setValue(ve,"normalMatrix",Ee.normalMatrix),$r.setValue(ve,"modelMatrix",Ee.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){const Ln=de.uniformsGroups;for(let su=0,Ad=Ln.length;su<Ad;su++)if(Ge.isWebGL2){const au=Ln[su];Qe.update(au,Xn),Qe.bind(au,Xn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Xn}function zc(H,ue){H.ambientLightColor.needsUpdate=ue,H.lightProbe.needsUpdate=ue,H.directionalLights.needsUpdate=ue,H.directionalLightShadows.needsUpdate=ue,H.pointLights.needsUpdate=ue,H.pointLightShadows.needsUpdate=ue,H.spotLights.needsUpdate=ue,H.spotLightShadows.needsUpdate=ue,H.rectAreaLights.needsUpdate=ue,H.hemisphereLights.needsUpdate=ue}function Bc(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(H,ue,ye){Ce.get(H.texture).__webglTexture=ue,Ce.get(H.depthTexture).__webglTexture=ye;const de=Ce.get(H);de.__hasExternalTextures=!0,de.__hasExternalTextures&&(de.__autoAllocateDepthBuffer=ye===void 0,de.__autoAllocateDepthBuffer||tt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),de.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(H,ue){const ye=Ce.get(H);ye.__webglFramebuffer=ue,ye.__useDefaultFramebuffer=ue===void 0},this.setRenderTarget=function(H,ue=0,ye=0){C=H,M=ue,S=ye;let de=!0;if(H){const pt=Ce.get(H);pt.__useDefaultFramebuffer!==void 0?(ze.bindFramebuffer(36160,null),de=!1):pt.__webglFramebuffer===void 0?xe.setupRenderTarget(H):pt.__hasExternalTextures&&xe.rebindTextures(H,Ce.get(H.texture).__webglTexture,Ce.get(H.depthTexture).__webglTexture)}let Ee=null,at=!1,Mt=!1;if(H){const pt=H.texture;(pt.isData3DTexture||pt.isDataArrayTexture)&&(Mt=!0);const Nt=Ce.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Ee=Nt[ue],at=!0):Ge.isWebGL2&&H.samples>0&&xe.useMultisampledRTT(H)===!1?Ee=Ce.get(H).__webglMultisampledFramebuffer:Ee=Nt,L.copy(H.viewport),O.copy(H.scissor),k=H.scissorTest}else L.copy(q).multiplyScalar(W).floor(),O.copy(re).multiplyScalar(W).floor(),k=Z;if(ze.bindFramebuffer(36160,Ee)&&Ge.drawBuffers&&de&&ze.drawBuffers(H,Ee),ze.viewport(L),ze.scissor(O),ze.setScissorTest(k),at){const pt=Ce.get(H.texture);ve.framebufferTexture2D(36160,36064,34069+ue,pt.__webglTexture,ye)}else if(Mt){const pt=Ce.get(H.texture),Nt=ue||0;ve.framebufferTextureLayer(36160,36064,pt.__webglTexture,ye||0,Nt)}P=-1},this.readRenderTargetPixels=function(H,ue,ye,de,Ee,at,Mt){if(!(H&&H.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pt=Ce.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Mt!==void 0&&(pt=pt[Mt]),pt){ze.bindFramebuffer(36160,pt);try{const Nt=H.texture,Mr=Nt.format,Bt=Nt.type;if(Mr!==Hs&&ge.convert(Mr)!==ve.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ft=Bt===Rl&&(tt.has("EXT_color_buffer_half_float")||Ge.isWebGL2&&tt.has("EXT_color_buffer_float"));if(Bt!==rd&&ge.convert(Bt)!==ve.getParameter(35738)&&!(Bt===js&&(Ge.isWebGL2||tt.has("OES_texture_float")||tt.has("WEBGL_color_buffer_float")))&&!Ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=H.width-de&&ye>=0&&ye<=H.height-Ee&&ve.readPixels(ue,ye,de,Ee,ge.convert(Mr),ge.convert(Bt),at)}finally{const Nt=C!==null?Ce.get(C).__webglFramebuffer:null;ze.bindFramebuffer(36160,Nt)}}},this.copyFramebufferToTexture=function(H,ue,ye=0){const de=Math.pow(2,-ye),Ee=Math.floor(ue.image.width*de),at=Math.floor(ue.image.height*de);xe.setTexture2D(ue,0),ve.copyTexSubImage2D(3553,ye,0,0,H.x,H.y,Ee,at),ze.unbindTexture()},this.copyTextureToTexture=function(H,ue,ye,de=0){const Ee=ue.image.width,at=ue.image.height,Mt=ge.convert(ye.format),pt=ge.convert(ye.type);xe.setTexture2D(ye,0),ve.pixelStorei(37440,ye.flipY),ve.pixelStorei(37441,ye.premultiplyAlpha),ve.pixelStorei(3317,ye.unpackAlignment),ue.isDataTexture?ve.texSubImage2D(3553,de,H.x,H.y,Ee,at,Mt,pt,ue.image.data):ue.isCompressedTexture?ve.compressedTexSubImage2D(3553,de,H.x,H.y,ue.mipmaps[0].width,ue.mipmaps[0].height,Mt,ue.mipmaps[0].data):ve.texSubImage2D(3553,de,H.x,H.y,Mt,pt,ue.image),de===0&&ye.generateMipmaps&&ve.generateMipmap(3553),ze.unbindTexture()},this.copyTextureToTexture3D=function(H,ue,ye,de,Ee=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const at=H.max.x-H.min.x+1,Mt=H.max.y-H.min.y+1,pt=H.max.z-H.min.z+1,Nt=ge.convert(de.format),Mr=ge.convert(de.type);let Bt;if(de.isData3DTexture)xe.setTexture3D(de,0),Bt=32879;else if(de.isDataArrayTexture)xe.setTexture2DArray(de,0),Bt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ve.pixelStorei(37440,de.flipY),ve.pixelStorei(37441,de.premultiplyAlpha),ve.pixelStorei(3317,de.unpackAlignment);const Ft=ve.getParameter(3314),Qr=ve.getParameter(32878),gs=ve.getParameter(3316),ao=ve.getParameter(3315),li=ve.getParameter(32877),dn=ye.isCompressedTexture?ye.mipmaps[0]:ye.image;ve.pixelStorei(3314,dn.width),ve.pixelStorei(32878,dn.height),ve.pixelStorei(3316,H.min.x),ve.pixelStorei(3315,H.min.y),ve.pixelStorei(32877,H.min.z),ye.isDataTexture||ye.isData3DTexture?ve.texSubImage3D(Bt,Ee,ue.x,ue.y,ue.z,at,Mt,pt,Nt,Mr,dn.data):ye.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(Bt,Ee,ue.x,ue.y,ue.z,at,Mt,pt,Nt,dn.data)):ve.texSubImage3D(Bt,Ee,ue.x,ue.y,ue.z,at,Mt,pt,Nt,Mr,dn),ve.pixelStorei(3314,Ft),ve.pixelStorei(32878,Qr),ve.pixelStorei(3316,gs),ve.pixelStorei(3315,ao),ve.pixelStorei(32877,li),Ee===0&&de.generateMipmaps&&ve.generateMipmap(Bt),ze.unbindTexture()},this.initTexture=function(H){H.isCubeTexture?xe.setTextureCube(H,0):H.isData3DTexture?xe.setTexture3D(H,0):H.isDataArrayTexture?xe.setTexture2DArray(H,0):xe.setTexture2D(H,0),ze.unbindTexture()},this.resetState=function(){M=0,S=0,C=null,ze.reset(),et.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Qee extends n8{}Qee.prototype.isWebGL1Renderer=!0;class $ee extends pr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}class ete{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=rT,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=cs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yi=new j;class Px{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Yi.fromBufferAttribute(this,t),Yi.applyMatrix4(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Yi.fromBufferAttribute(this,t),Yi.applyNormalMatrix(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Yi.fromBufferAttribute(this,t),Yi.transformDirection(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return new eo(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Px(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class i8 extends Ua{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Sp;const zv=new j,Mp=new j,Cp=new j,Ep=new be,Bv=new be,o8=new Ct,ew=new j,Fv=new j,tw=new j,QR=new be,q3=new be,$R=new be;class tte extends pr{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Sp===void 0){Sp=new zr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new ete(t,5);Sp.setIndex([0,1,2,0,2,3]),Sp.setAttribute("position",new Px(n,3,0,!1)),Sp.setAttribute("uv",new Px(n,2,3,!1))}this.geometry=Sp,this.material=e!==void 0?e:new i8,this.center=new be(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Mp.setFromMatrixScale(this.matrixWorld),o8.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Mp.multiplyScalar(-Cp.z);const n=this.material.rotation;let i,o;n!==0&&(o=Math.cos(n),i=Math.sin(n));const s=this.center;rw(ew.set(-.5,-.5,0),Cp,s,Mp,i,o),rw(Fv.set(.5,-.5,0),Cp,s,Mp,i,o),rw(tw.set(.5,.5,0),Cp,s,Mp,i,o),QR.set(0,0),q3.set(1,0),$R.set(1,1);let a=e.ray.intersectTriangle(ew,Fv,tw,!1,zv);if(a===null&&(rw(Fv.set(-.5,.5,0),Cp,s,Mp,i,o),q3.set(0,1),a=e.ray.intersectTriangle(ew,tw,Fv,!1,zv),a===null))return;const l=e.ray.origin.distanceTo(zv);l<e.near||l>e.far||t.push({distance:l,point:zv.clone(),uv:Fo.getUV(zv,ew,Fv,tw,QR,q3,$R,new be),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function rw(r,e,t,n,i,o){Ep.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(Bv.x=o*Ep.x-i*Ep.y,Bv.y=i*Ep.x+o*Ep.y):Bv.copy(Ep),r.copy(e),r.x+=Bv.x,r.y+=Bv.y,r.applyMatrix4(o8)}const e5=new j,t5=new ir,r5=new ir,rte=new j,n5=new Ct;class Q1e extends vi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ct,this.bindMatrixInverse=new Ct}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ir,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,i=this.geometry;t5.fromBufferAttribute(i.attributes.skinIndex,e),r5.fromBufferAttribute(i.attributes.skinWeight,e),e5.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const s=r5.getComponent(o);if(s!==0){const a=t5.getComponent(o);n5.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(rte.copy(e5).applyMatrix4(n5),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class s8 extends pr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class a8 extends Ii{constructor(e=null,t=1,n=1,i,o,s,a,l,c=ln,d=ln,f,m){super(null,s,a,l,c,d,i,o,f,m),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const i5=new Ct,nte=new Ct;class l8{constructor(e=[],t=[]){this.uuid=cs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ct)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ct;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let o=0,s=e.length;o<s;o++){const a=e[o]?e[o].matrixWorld:nte;i5.multiplyMatrices(a,t[o]),i5.toArray(n,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new l8(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=FB(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new a8(t,e,e,Hs,js);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const o=e.bones[n];let s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new s8),this.bones.push(s),this.boneInverses.push(new Ct().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,o=t.length;i<o;i++){const s=t[i];e.bones.push(s.uuid);const a=n[i];e.boneInverses.push(a.toArray())}return e}}class vd extends Ua{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Je(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const o5=new j,s5=new j,a5=new Ct,K3=new ym,nw=new fd;class D4 extends pr{constructor(e=new zr,t=new vd){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,o=t.count;i<o;i++)o5.fromBufferAttribute(t,i-1),s5.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=o5.distanceTo(s5);e.setAttribute("lineDistance",new Vt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),nw.copy(n.boundingSphere),nw.applyMatrix4(i),nw.radius+=o,e.ray.intersectsSphere(nw)===!1)return;a5.copy(i).invert(),K3.copy(e.ray).applyMatrix4(a5);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new j,d=new j,f=new j,m=new j,g=this.isLineSegments?2:1,b=n.index,_=n.attributes.position;if(b!==null){const w=Math.max(0,s.start),M=Math.min(b.count,s.start+s.count);for(let S=w,C=M-1;S<C;S+=g){const P=b.getX(S),T=b.getX(S+1);if(c.fromBufferAttribute(_,P),d.fromBufferAttribute(_,T),K3.distanceSqToSegment(c,d,m,f)>l)continue;m.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(m);L<e.near||L>e.far||t.push({distance:L,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const w=Math.max(0,s.start),M=Math.min(_.count,s.start+s.count);for(let S=w,C=M-1;S<C;S+=g){if(c.fromBufferAttribute(_,S),d.fromBufferAttribute(_,S+1),K3.distanceSqToSegment(c,d,m,f)>l)continue;m.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(m);P<e.near||P>e.far||t.push({distance:P,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=n.length;i<o;i++){const s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}}const l5=new j,u5=new j;class $0 extends D4{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,o=t.count;i<o;i+=2)l5.fromBufferAttribute(t,i),u5.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+l5.distanceTo(u5);e.setAttribute("lineDistance",new Vt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $1e extends D4{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ite extends Ua{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const c5=new Ct,sT=new ym,iw=new fd,ow=new j;class ewe extends pr{constructor(e=new zr,t=new ite){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),iw.copy(n.boundingSphere),iw.applyMatrix4(i),iw.radius+=o,e.ray.intersectsSphere(iw)===!1)return;c5.copy(i).invert(),sT.copy(e.ray).applyMatrix4(c5);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,d=n.attributes.position;if(c!==null){const f=Math.max(0,s.start),m=Math.min(c.count,s.start+s.count);for(let g=f,b=m;g<b;g++){const _=c.getX(g);ow.fromBufferAttribute(d,_),h5(ow,_,l,i,e,t,this)}}else{const f=Math.max(0,s.start),m=Math.min(d.count,s.start+s.count);for(let g=f,b=m;g<b;g++)ow.fromBufferAttribute(d,g),h5(ow,g,l,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=n.length;i<o;i++){const s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}}function h5(r,e,t,n,i,o,s){const a=sT.distanceSqToPoint(r);if(a<t){const l=new j;sT.closestPointToPoint(r,l),l.applyMatrix4(n);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}class ote extends Ii{constructor(e,t,n,i,o,s,a,l,c){super(e,t,n,i,o,s,a,l,c),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:En,this.magFilter=o!==void 0?o:En,this.generateMipmaps=!1;const d=this;function f(){d.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ja{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),o+=n.distanceTo(i),t.push(o),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const o=n.length;let s;t?s=t:s=e*n[o-1];let a=0,l=o-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=n[i]-s,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,n[i]===s)return i/(o-1);const d=n[i],f=n[i+1]-d,m=(s-d)/f;return(i+m)/(o-1)}getTangent(e,t){let n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);const o=this.getPoint(n),s=this.getPoint(i),a=t||(o.isVector2?new be:new j);return a.copy(s).sub(o).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new j,i=[],o=[],s=[],a=new j,l=new Ct;for(let g=0;g<=e;g++){const b=g/e;i[g]=this.getTangentAt(b,new j)}o[0]=new j,s[0]=new j;let c=Number.MAX_VALUE;const d=Math.abs(i[0].x),f=Math.abs(i[0].y),m=Math.abs(i[0].z);d<=c&&(c=d,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),m<=c&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let g=1;g<=e;g++){if(o[g]=o[g-1].clone(),s[g]=s[g-1].clone(),a.crossVectors(i[g-1],i[g]),a.length()>Number.EPSILON){a.normalize();const b=Math.acos(Bn(i[g-1].dot(i[g]),-1,1));o[g].applyMatrix4(l.makeRotationAxis(a,b))}s[g].crossVectors(i[g],o[g])}if(t===!0){let g=Math.acos(Bn(o[0].dot(o[e]),-1,1));g/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(g=-g);for(let b=1;b<=e;b++)o[b].applyMatrix4(l.makeRotationAxis(i[b],g*b)),s[b].crossVectors(i[b],o[b])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class R4 extends ja{constructor(e=0,t=0,n=1,i=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new be,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),m=l-this.aX,g=c-this.aY;l=m*d-g*f+this.aX,c=m*f+g*d+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class ste extends R4{constructor(e,t,n,i,o,s){super(e,t,n,n,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function N4(){let r=0,e=0,t=0,n=0;function i(o,s,a,l){r=o,e=a,t=-3*o+3*s-2*a-l,n=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){i(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,d,f){let m=(s-o)/c-(a-o)/(c+d)+(a-s)/d,g=(a-s)/d-(l-s)/(d+f)+(l-a)/f;m*=d,g*=d,i(s,a,m,g)},calc:function(o){const s=o*o,a=s*o;return r+e*o+t*s+n*a}}}const sw=new j,Z3=new N4,J3=new N4,Q3=new N4;class ate extends ja{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new j){const n=t,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let c,d;this.closed||a>0?c=i[(a-1)%o]:(sw.subVectors(i[0],i[1]).add(i[0]),c=sw);const f=i[a%o],m=i[(a+1)%o];if(this.closed||a+2<o?d=i[(a+2)%o]:(sw.subVectors(i[o-1],i[o-2]).add(i[o-1]),d=sw),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let b=Math.pow(c.distanceToSquared(f),g),_=Math.pow(f.distanceToSquared(m),g),w=Math.pow(m.distanceToSquared(d),g);_<1e-4&&(_=1),b<1e-4&&(b=_),w<1e-4&&(w=_),Z3.initNonuniformCatmullRom(c.x,f.x,m.x,d.x,b,_,w),J3.initNonuniformCatmullRom(c.y,f.y,m.y,d.y,b,_,w),Q3.initNonuniformCatmullRom(c.z,f.z,m.z,d.z,b,_,w)}else this.curveType==="catmullrom"&&(Z3.initCatmullRom(c.x,f.x,m.x,d.x,this.tension),J3.initCatmullRom(c.y,f.y,m.y,d.y,this.tension),Q3.initCatmullRom(c.z,f.z,m.z,d.z,this.tension));return n.set(Z3.calc(l),J3.calc(l),Q3.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new j().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function d5(r,e,t,n,i){const o=(n-e)*.5,s=(i-t)*.5,a=r*r,l=r*a;return(2*t-2*n+o+s)*l+(-3*t+3*n-2*o-s)*a+o*r+t}function lte(r,e){const t=1-r;return t*t*e}function ute(r,e){return 2*(1-r)*r*e}function cte(r,e){return r*r*e}function Rg(r,e,t,n){return lte(r,e)+ute(r,t)+cte(r,n)}function hte(r,e){const t=1-r;return t*t*t*e}function dte(r,e){const t=1-r;return 3*t*t*r*e}function pte(r,e){return 3*(1-r)*r*r*e}function fte(r,e){return r*r*r*e}function Ng(r,e,t,n,i){return hte(r,e)+dte(r,t)+pte(r,n)+fte(r,i)}class u8 extends ja{constructor(e=new be,t=new be,n=new be,i=new be){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new be){const n=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(Ng(e,i.x,o.x,s.x,a.x),Ng(e,i.y,o.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class mte extends ja{constructor(e=new j,t=new j,n=new j,i=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new j){const n=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(Ng(e,i.x,o.x,s.x,a.x),Ng(e,i.y,o.y,s.y,a.y),Ng(e,i.z,o.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class I4 extends ja{constructor(e=new be,t=new be){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new be){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new be;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vte extends ja{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class c8 extends ja{constructor(e=new be,t=new be,n=new be){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new be){const n=t,i=this.v0,o=this.v1,s=this.v2;return n.set(Rg(e,i.x,o.x,s.x),Rg(e,i.y,o.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gte extends ja{constructor(e=new j,t=new j,n=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new j){const n=t,i=this.v0,o=this.v1,s=this.v2;return n.set(Rg(e,i.x,o.x,s.x),Rg(e,i.y,o.y,s.y),Rg(e,i.z,o.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class h8 extends ja{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new be){const n=t,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,l=i[s===0?s:s-1],c=i[s],d=i[s>i.length-2?i.length-1:s+1],f=i[s>i.length-3?i.length-1:s+2];return n.set(d5(a,l.x,c.x,d.x,f.x),d5(a,l.y,c.y,d.y,f.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new be().fromArray(i))}return this}}var d8=Object.freeze({__proto__:null,ArcCurve:ste,CatmullRomCurve3:ate,CubicBezierCurve:u8,CubicBezierCurve3:mte,EllipseCurve:R4,LineCurve:I4,LineCurve3:vte,QuadraticBezierCurve:c8,QuadraticBezierCurve3:gte,SplineCurve:h8});class yte extends ja{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new I4(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=n){const s=i[o]-n,a=this.curves[o],l=a.getLength(),c=l===0?0:1-s/l;return a.getPointAt(c,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new d8[i.type]().fromJSON(i))}return this}}class aT extends yte{constructor(e){super(),this.type="Path",this.currentPoint=new be,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new I4(this.currentPoint.clone(),new be(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const o=new c8(this.currentPoint.clone(),new be(e,t),new be(n,i));return this.curves.push(o),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,o,s){const a=new u8(this.currentPoint.clone(),new be(e,t),new be(n,i),new be(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new h8(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,i,o,s),this}absarc(e,t,n,i,o,s){return this.absellipse(e,t,n,n,i,o,s),this}ellipse(e,t,n,i,o,s,a,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,t+d,n,i,o,s,a,l),this}absellipse(e,t,n,i,o,s,a,l){const c=new R4(e,t,n,i,o,s,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class V4 extends zr{constructor(e=1,t=8,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const o=[],s=[],a=[],l=[],c=new j,d=new be;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,m=3;f<=t;f++,m+=3){const g=n+f/t*i;c.x=e*Math.cos(g),c.y=e*Math.sin(g),s.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(s[m]/e+1)/2,d.y=(s[m+1]/e+1)/2,l.push(d.x,d.y)}for(let f=1;f<=t;f++)o.push(f,f+1,0);this.setIndex(o),this.setAttribute("position",new Vt(s,3)),this.setAttribute("normal",new Vt(a,3)),this.setAttribute("uv",new Vt(l,2))}static fromJSON(e){return new V4(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class kS extends zr{constructor(e=1,t=1,n=1,i=8,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),o=Math.floor(o);const d=[],f=[],m=[],g=[];let b=0;const _=[],w=n/2;let M=0;S(),s===!1&&(e>0&&C(!0),t>0&&C(!1)),this.setIndex(d),this.setAttribute("position",new Vt(f,3)),this.setAttribute("normal",new Vt(m,3)),this.setAttribute("uv",new Vt(g,2));function S(){const P=new j,T=new j;let L=0;const O=(t-e)/n;for(let k=0;k<=o;k++){const N=[],V=k/o,W=V*(t-e)+e;for(let ee=0;ee<=i;ee++){const se=ee/i,q=se*l+a,re=Math.sin(q),Z=Math.cos(q);T.x=W*re,T.y=-V*n+w,T.z=W*Z,f.push(T.x,T.y,T.z),P.set(re,O,Z).normalize(),m.push(P.x,P.y,P.z),g.push(se,1-V),N.push(b++)}_.push(N)}for(let k=0;k<i;k++)for(let N=0;N<o;N++){const V=_[N][k],W=_[N+1][k],ee=_[N+1][k+1],se=_[N][k+1];d.push(V,W,se),d.push(W,ee,se),L+=6}c.addGroup(M,L,0),M+=L}function C(P){const T=b,L=new be,O=new j;let k=0;const N=P===!0?e:t,V=P===!0?1:-1;for(let ee=1;ee<=i;ee++)f.push(0,w*V,0),m.push(0,V,0),g.push(.5,.5),b++;const W=b;for(let ee=0;ee<=i;ee++){const se=ee/i*l+a,q=Math.cos(se),re=Math.sin(se);O.x=N*re,O.y=w*V,O.z=N*q,f.push(O.x,O.y,O.z),m.push(0,V,0),L.x=q*.5+.5,L.y=re*.5*V+.5,g.push(L.x,L.y),b++}for(let ee=0;ee<i;ee++){const se=T+ee,q=W+ee;P===!0?d.push(q,q+1,se):d.push(q+1,q,se),k+=3}c.addGroup(M,k,P===!0?1:2),M+=k}}static fromJSON(e){return new kS(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class z4 extends kS{constructor(e=1,t=1,n=8,i=1,o=!1,s=0,a=Math.PI*2){super(0,e,t,n,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new z4(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class LS extends zr{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const o=[],s=[];a(i),c(n),d(),this.setAttribute("position",new Vt(o,3)),this.setAttribute("normal",new Vt(o.slice(),3)),this.setAttribute("uv",new Vt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const C=new j,P=new j,T=new j;for(let L=0;L<t.length;L+=3)g(t[L+0],C),g(t[L+1],P),g(t[L+2],T),l(C,P,T,S)}function l(S,C,P,T){const L=T+1,O=[];for(let k=0;k<=L;k++){O[k]=[];const N=S.clone().lerp(P,k/L),V=C.clone().lerp(P,k/L),W=L-k;for(let ee=0;ee<=W;ee++)ee===0&&k===L?O[k][ee]=N:O[k][ee]=N.clone().lerp(V,ee/W)}for(let k=0;k<L;k++)for(let N=0;N<2*(L-k)-1;N++){const V=Math.floor(N/2);N%2===0?(m(O[k][V+1]),m(O[k+1][V]),m(O[k][V])):(m(O[k][V+1]),m(O[k+1][V+1]),m(O[k+1][V]))}}function c(S){const C=new j;for(let P=0;P<o.length;P+=3)C.x=o[P+0],C.y=o[P+1],C.z=o[P+2],C.normalize().multiplyScalar(S),o[P+0]=C.x,o[P+1]=C.y,o[P+2]=C.z}function d(){const S=new j;for(let C=0;C<o.length;C+=3){S.x=o[C+0],S.y=o[C+1],S.z=o[C+2];const P=w(S)/2/Math.PI+.5,T=M(S)/Math.PI+.5;s.push(P,1-T)}b(),f()}function f(){for(let S=0;S<s.length;S+=6){const C=s[S+0],P=s[S+2],T=s[S+4],L=Math.max(C,P,T),O=Math.min(C,P,T);L>.9&&O<.1&&(C<.2&&(s[S+0]+=1),P<.2&&(s[S+2]+=1),T<.2&&(s[S+4]+=1))}}function m(S){o.push(S.x,S.y,S.z)}function g(S,C){const P=S*3;C.x=e[P+0],C.y=e[P+1],C.z=e[P+2]}function b(){const S=new j,C=new j,P=new j,T=new j,L=new be,O=new be,k=new be;for(let N=0,V=0;N<o.length;N+=9,V+=6){S.set(o[N+0],o[N+1],o[N+2]),C.set(o[N+3],o[N+4],o[N+5]),P.set(o[N+6],o[N+7],o[N+8]),L.set(s[V+0],s[V+1]),O.set(s[V+2],s[V+3]),k.set(s[V+4],s[V+5]),T.copy(S).add(C).add(P).divideScalar(3);const W=w(T);_(L,V+0,S,W),_(O,V+2,C,W),_(k,V+4,P,W)}}function _(S,C,P,T){T<0&&S.x===1&&(s[C]=S.x-1),P.x===0&&P.z===0&&(s[C]=T/2/Math.PI+.5)}function w(S){return Math.atan2(S.z,-S.x)}function M(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}static fromJSON(e){return new LS(e.vertices,e.indices,e.radius,e.details)}}class Ab extends aT{constructor(e){super(e),this.uuid=cs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new aT().fromJSON(i))}return this}}const _te={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let o=p8(r,0,i,t,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c,d,f,m,g;if(n&&(o=Mte(r,e,o,t)),r.length>80*t){a=c=r[0],l=d=r[1];for(let b=t;b<i;b+=t)f=r[b],m=r[b+1],f<a&&(a=f),m<l&&(l=m),f>c&&(c=f),m>d&&(d=m);g=Math.max(c-a,d-l),g=g!==0?1/g:0}return x0(o,s,t,a,l,g),s}};function p8(r,e,t,n,i){let o,s;if(i===Nte(r,e,t,n)>0)for(o=e;o<t;o+=n)s=p5(o,r[o],r[o+1],s);else for(o=t-n;o>=e;o-=n)s=p5(o,r[o],r[o+1],s);return s&&OS(s,s.next)&&(M0(s),s=s.next),s}function mc(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(OS(t,t.next)||Gr(t.prev,t,t.next)===0)){if(M0(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function x0(r,e,t,n,i,o,s){if(!r)return;!s&&o&&Ate(r,n,i,o);let a=r,l,c;for(;r.prev!==r.next;){if(l=r.prev,c=r.next,o?bte(r,n,i,o):wte(r)){e.push(l.i/t),e.push(r.i/t),e.push(c.i/t),M0(r),r=c.next,a=c.next;continue}if(r=c,r===a){s?s===1?(r=xte(mc(r),e,t),x0(r,e,t,n,i,o,2)):s===2&&Ste(r,e,t,n,i,o):x0(mc(r),e,t,n,i,o,1);break}}}function wte(r){const e=r.prev,t=r,n=r.next;if(Gr(e,t,n)>=0)return!1;let i=r.next.next;for(;i!==r.prev;){if(ef(e.x,e.y,t.x,t.y,n.x,n.y,i.x,i.y)&&Gr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function bte(r,e,t,n){const i=r.prev,o=r,s=r.next;if(Gr(i,o,s)>=0)return!1;const a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,l=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,d=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,f=lT(a,l,e,t,n),m=lT(c,d,e,t,n);let g=r.prevZ,b=r.nextZ;for(;g&&g.z>=f&&b&&b.z<=m;){if(g!==r.prev&&g!==r.next&&ef(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&Gr(g.prev,g,g.next)>=0||(g=g.prevZ,b!==r.prev&&b!==r.next&&ef(i.x,i.y,o.x,o.y,s.x,s.y,b.x,b.y)&&Gr(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;g&&g.z>=f;){if(g!==r.prev&&g!==r.next&&ef(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&Gr(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;b&&b.z<=m;){if(b!==r.prev&&b!==r.next&&ef(i.x,i.y,o.x,o.y,s.x,s.y,b.x,b.y)&&Gr(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function xte(r,e,t){let n=r;do{const i=n.prev,o=n.next.next;!OS(i,o)&&f8(i,n,n.next,o)&&S0(i,o)&&S0(o,i)&&(e.push(i.i/t),e.push(n.i/t),e.push(o.i/t),M0(n),M0(n.next),n=r=o),n=n.next}while(n!==r);return mc(n)}function Ste(r,e,t,n,i,o){let s=r;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&Ote(s,a)){let l=m8(s,a);s=mc(s,s.next),l=mc(l,l.next),x0(s,e,t,n,i,o),x0(l,e,t,n,i,o);return}a=a.next}s=s.next}while(s!==r)}function Mte(r,e,t,n){const i=[];let o,s,a,l,c;for(o=0,s=e.length;o<s;o++)a=e[o]*n,l=o<s-1?e[o+1]*n:r.length,c=p8(r,a,l,n,!1),c===c.next&&(c.steiner=!0),i.push(Lte(c));for(i.sort(Cte),o=0;o<i.length;o++)Ete(i[o],t),t=mc(t,t.next);return t}function Cte(r,e){return r.x-e.x}function Ete(r,e){if(e=Pte(r,e),e){const t=m8(e,r);mc(e,e.next),mc(t,t.next)}}function Pte(r,e){let t=e;const n=r.x,i=r.y;let o=-1/0,s;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const m=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=n&&m>o){if(o=m,m===n){if(i===t.y)return t;if(i===t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!s)return null;if(n===o)return s;const a=s,l=s.x,c=s.y;let d=1/0,f;t=s;do n>=t.x&&t.x>=l&&n!==t.x&&ef(i<c?n:o,i,l,c,i<c?o:n,i,t.x,t.y)&&(f=Math.abs(i-t.y)/(n-t.x),S0(t,r)&&(f<d||f===d&&(t.x>s.x||t.x===s.x&&Tte(s,t)))&&(s=t,d=f)),t=t.next;while(t!==a);return s}function Tte(r,e){return Gr(r.prev,r,e.prev)<0&&Gr(e.next,r,r.next)<0}function Ate(r,e,t,n){let i=r;do i.z===null&&(i.z=lT(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,kte(i)}function kte(r){let e,t,n,i,o,s,a,l,c=1;do{for(t=r,r=null,o=null,s=0;t;){for(s++,n=t,a=0,e=0;e<c&&(a++,n=n.nextZ,!!n);e++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:r=i,i.prevZ=o,o=i;t=n}o.nextZ=null,c*=2}while(s>1);return r}function lT(r,e,t,n,i){return r=32767*(r-t)*i,e=32767*(e-n)*i,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function Lte(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function ef(r,e,t,n,i,o,s,a){return(i-s)*(e-a)-(r-s)*(o-a)>=0&&(r-s)*(n-a)-(t-s)*(e-a)>=0&&(t-s)*(o-a)-(i-s)*(n-a)>=0}function Ote(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!Dte(r,e)&&(S0(r,e)&&S0(e,r)&&Rte(r,e)&&(Gr(r.prev,r,e.prev)||Gr(r,e.prev,e))||OS(r,e)&&Gr(r.prev,r,r.next)>0&&Gr(e.prev,e,e.next)>0)}function Gr(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function OS(r,e){return r.x===e.x&&r.y===e.y}function f8(r,e,t,n){const i=lw(Gr(r,e,t)),o=lw(Gr(r,e,n)),s=lw(Gr(t,n,r)),a=lw(Gr(t,n,e));return!!(i!==o&&s!==a||i===0&&aw(r,t,e)||o===0&&aw(r,n,e)||s===0&&aw(t,r,n)||a===0&&aw(t,e,n))}function aw(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function lw(r){return r>0?1:r<0?-1:0}function Dte(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&f8(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function S0(r,e){return Gr(r.prev,r,r.next)<0?Gr(r,e,r.next)>=0&&Gr(r,r.prev,e)>=0:Gr(r,e,r.prev)<0||Gr(r,r.next,e)<0}function Rte(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,o=(r.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function m8(r,e){const t=new uT(r.i,r.x,r.y),n=new uT(e.i,e.x,e.y),i=r.next,o=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,o.next=n,n.prev=o,n}function p5(r,e,t,n){const i=new uT(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function M0(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function uT(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nte(r,e,t,n){let i=0;for(let o=e,s=t-n;o<t;o+=n)i+=(r[s]-r[o])*(r[o+1]+r[s+1]),s=o;return i}class ff{static area(e){const t=e.length;let n=0;for(let i=t-1,o=0;o<t;i=o++)n+=e[i].x*e[o].y-e[o].x*e[i].y;return n*.5}static isClockWise(e){return ff.area(e)<0}static triangulateShape(e,t){const n=[],i=[],o=[];f5(e),m5(n,e);let s=e.length;t.forEach(f5);for(let l=0;l<t.length;l++)i.push(s),s+=t[l].length,m5(n,t[l]);const a=_te.triangulate(n,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function f5(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function m5(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Tx extends zr{constructor(e=new Ab([new be(.5,.5),new be(-.5,.5),new be(-.5,-.5),new be(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];s(c)}this.setAttribute("position",new Vt(i,3)),this.setAttribute("uv",new Vt(o,2)),this.computeVertexNormals();function s(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:g-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:Ite;let C,P=!1,T,L,O,k;M&&(C=M.getSpacedPoints(d),P=!0,m=!1,T=M.computeFrenetFrames(d,!1),L=new j,O=new j,k=new j),m||(w=0,g=0,b=0,_=0);const N=a.extractPoints(c);let V=N.shape;const W=N.holes;if(!ff.isClockWise(V)){V=V.reverse();for(let Ae=0,Ce=W.length;Ae<Ce;Ae++){const xe=W[Ae];ff.isClockWise(xe)&&(W[Ae]=xe.reverse())}}const ee=ff.triangulateShape(V,W),se=V;for(let Ae=0,Ce=W.length;Ae<Ce;Ae++){const xe=W[Ae];V=V.concat(xe)}function q(Ae,Ce,xe){return Ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ce.clone().multiplyScalar(xe).add(Ae)}const re=V.length,Z=ee.length;function me(Ae,Ce,xe){let Ue,Fe,dt;const lt=Ae.x-Ce.x,_t=Ae.y-Ce.y,vt=xe.x-Ae.x,ce=xe.y-Ae.y,te=lt*lt+_t*_t,I=lt*ce-_t*vt;if(Math.abs(I)>Number.EPSILON){const B=Math.sqrt(te),le=Math.sqrt(vt*vt+ce*ce),Te=Ce.x-_t/B,Ne=Ce.y+lt/B,Be=xe.x-ce/le,nt=xe.y+vt/le,ge=((Be-Te)*ce-(nt-Ne)*vt)/(lt*ce-_t*vt);Ue=Te+lt*ge-Ae.x,Fe=Ne+_t*ge-Ae.y;const et=Ue*Ue+Fe*Fe;if(et<=2)return new be(Ue,Fe);dt=Math.sqrt(et/2)}else{let B=!1;lt>Number.EPSILON?vt>Number.EPSILON&&(B=!0):lt<-Number.EPSILON?vt<-Number.EPSILON&&(B=!0):Math.sign(_t)===Math.sign(ce)&&(B=!0),B?(Ue=-_t,Fe=lt,dt=Math.sqrt(te)):(Ue=lt,Fe=_t,dt=Math.sqrt(te/2))}return new be(Ue/dt,Fe/dt)}const J=[];for(let Ae=0,Ce=se.length,xe=Ce-1,Ue=Ae+1;Ae<Ce;Ae++,xe++,Ue++)xe===Ce&&(xe=0),Ue===Ce&&(Ue=0),J[Ae]=me(se[Ae],se[xe],se[Ue]);const Q=[];let $,fe=J.concat();for(let Ae=0,Ce=W.length;Ae<Ce;Ae++){const xe=W[Ae];$=[];for(let Ue=0,Fe=xe.length,dt=Fe-1,lt=Ue+1;Ue<Fe;Ue++,dt++,lt++)dt===Fe&&(dt=0),lt===Fe&&(lt=0),$[Ue]=me(xe[Ue],xe[dt],xe[lt]);Q.push($),fe=fe.concat($)}for(let Ae=0;Ae<w;Ae++){const Ce=Ae/w,xe=g*Math.cos(Ce*Math.PI/2),Ue=b*Math.sin(Ce*Math.PI/2)+_;for(let Fe=0,dt=se.length;Fe<dt;Fe++){const lt=q(se[Fe],J[Fe],Ue);ve(lt.x,lt.y,-xe)}for(let Fe=0,dt=W.length;Fe<dt;Fe++){const lt=W[Fe];$=Q[Fe];for(let _t=0,vt=lt.length;_t<vt;_t++){const ce=q(lt[_t],$[_t],Ue);ve(ce.x,ce.y,-xe)}}}const he=b+_;for(let Ae=0;Ae<re;Ae++){const Ce=m?q(V[Ae],fe[Ae],he):V[Ae];P?(O.copy(T.normals[0]).multiplyScalar(Ce.x),L.copy(T.binormals[0]).multiplyScalar(Ce.y),k.copy(C[0]).add(O).add(L),ve(k.x,k.y,k.z)):ve(Ce.x,Ce.y,0)}for(let Ae=1;Ae<=d;Ae++)for(let Ce=0;Ce<re;Ce++){const xe=m?q(V[Ce],fe[Ce],he):V[Ce];P?(O.copy(T.normals[Ae]).multiplyScalar(xe.x),L.copy(T.binormals[Ae]).multiplyScalar(xe.y),k.copy(C[Ae]).add(O).add(L),ve(k.x,k.y,k.z)):ve(xe.x,xe.y,f/d*Ae)}for(let Ae=w-1;Ae>=0;Ae--){const Ce=Ae/w,xe=g*Math.cos(Ce*Math.PI/2),Ue=b*Math.sin(Ce*Math.PI/2)+_;for(let Fe=0,dt=se.length;Fe<dt;Fe++){const lt=q(se[Fe],J[Fe],Ue);ve(lt.x,lt.y,f+xe)}for(let Fe=0,dt=W.length;Fe<dt;Fe++){const lt=W[Fe];$=Q[Fe];for(let _t=0,vt=lt.length;_t<vt;_t++){const ce=q(lt[_t],$[_t],Ue);P?ve(ce.x,ce.y+C[d-1].y,C[d-1].x+xe):ve(ce.x,ce.y,f+xe)}}}Se(),Re();function Se(){const Ae=i.length/3;if(m){let Ce=0,xe=re*Ce;for(let Ue=0;Ue<Z;Ue++){const Fe=ee[Ue];St(Fe[2]+xe,Fe[1]+xe,Fe[0]+xe)}Ce=d+w*2,xe=re*Ce;for(let Ue=0;Ue<Z;Ue++){const Fe=ee[Ue];St(Fe[0]+xe,Fe[1]+xe,Fe[2]+xe)}}else{for(let Ce=0;Ce<Z;Ce++){const xe=ee[Ce];St(xe[2],xe[1],xe[0])}for(let Ce=0;Ce<Z;Ce++){const xe=ee[Ce];St(xe[0]+re*d,xe[1]+re*d,xe[2]+re*d)}}n.addGroup(Ae,i.length/3-Ae,0)}function Re(){const Ae=i.length/3;let Ce=0;st(se,Ce),Ce+=se.length;for(let xe=0,Ue=W.length;xe<Ue;xe++){const Fe=W[xe];st(Fe,Ce),Ce+=Fe.length}n.addGroup(Ae,i.length/3-Ae,1)}function st(Ae,Ce){let xe=Ae.length;for(;--xe>=0;){const Ue=xe;let Fe=xe-1;Fe<0&&(Fe=Ae.length-1);for(let dt=0,lt=d+w*2;dt<lt;dt++){const _t=re*dt,vt=re*(dt+1),ce=Ce+Ue+_t,te=Ce+Fe+_t,I=Ce+Fe+vt,B=Ce+Ue+vt;tt(ce,te,I,B)}}}function ve(Ae,Ce,xe){l.push(Ae),l.push(Ce),l.push(xe)}function St(Ae,Ce,xe){Ge(Ae),Ge(Ce),Ge(xe);const Ue=i.length/3,Fe=S.generateTopUV(n,i,Ue-3,Ue-2,Ue-1);ze(Fe[0]),ze(Fe[1]),ze(Fe[2])}function tt(Ae,Ce,xe,Ue){Ge(Ae),Ge(Ce),Ge(Ue),Ge(Ce),Ge(xe),Ge(Ue);const Fe=i.length/3,dt=S.generateSideWallUV(n,i,Fe-6,Fe-3,Fe-2,Fe-1);ze(dt[0]),ze(dt[1]),ze(dt[3]),ze(dt[1]),ze(dt[2]),ze(dt[3])}function Ge(Ae){i.push(l[Ae*3+0]),i.push(l[Ae*3+1]),i.push(l[Ae*3+2])}function ze(Ae){o.push(Ae.x),o.push(Ae.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return Vte(t,n,e)}static fromJSON(e,t){const n=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=t[e.shapes[o]];n.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new d8[i.type]().fromJSON(i)),new Tx(n,e.options)}}const Ite={generateTopUV:function(r,e,t,n,i){const o=e[t*3],s=e[t*3+1],a=e[n*3],l=e[n*3+1],c=e[i*3],d=e[i*3+1];return[new be(o,s),new be(a,l),new be(c,d)]},generateSideWallUV:function(r,e,t,n,i,o){const s=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[n*3],d=e[n*3+1],f=e[n*3+2],m=e[i*3],g=e[i*3+1],b=e[i*3+2],_=e[o*3],w=e[o*3+1],M=e[o*3+2];return Math.abs(a-d)<Math.abs(s-c)?[new be(s,1-l),new be(c,1-f),new be(m,1-b),new be(_,1-M)]:[new be(a,1-l),new be(d,1-f),new be(g,1-b),new be(w,1-M)]}};function Vte(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const o=r[n];t.shapes.push(o.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class B4 extends LS{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new B4(e.radius,e.detail)}}class F4 extends zr{constructor(e=1,t=32,n=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(s+a,Math.PI);let c=0;const d=[],f=new j,m=new j,g=[],b=[],_=[],w=[];for(let M=0;M<=n;M++){const S=[],C=M/n;let P=0;M==0&&s==0?P=.5/t:M==n&&l==Math.PI&&(P=-.5/t);for(let T=0;T<=t;T++){const L=T/t;f.x=-e*Math.cos(i+L*o)*Math.sin(s+C*a),f.y=e*Math.cos(s+C*a),f.z=e*Math.sin(i+L*o)*Math.sin(s+C*a),b.push(f.x,f.y,f.z),m.copy(f).normalize(),_.push(m.x,m.y,m.z),w.push(L+P,1-C),S.push(c++)}d.push(S)}for(let M=0;M<n;M++)for(let S=0;S<t;S++){const C=d[M][S+1],P=d[M][S],T=d[M+1][S],L=d[M+1][S+1];(M!==0||s>0)&&g.push(C,P,L),(M!==n-1||l<Math.PI)&&g.push(P,T,L)}this.setIndex(g),this.setAttribute("position",new Vt(b,3)),this.setAttribute("normal",new Vt(_,3)),this.setAttribute("uv",new Vt(w,2))}static fromJSON(e){return new F4(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class U4 extends LS{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new U4(e.radius,e.detail)}}class j4 extends zr{constructor(e=1,t=.4,n=8,i=6,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:o},n=Math.floor(n),i=Math.floor(i);const s=[],a=[],l=[],c=[],d=new j,f=new j,m=new j;for(let g=0;g<=n;g++)for(let b=0;b<=i;b++){const _=b/i*o,w=g/n*Math.PI*2;f.x=(e+t*Math.cos(w))*Math.cos(_),f.y=(e+t*Math.cos(w))*Math.sin(_),f.z=t*Math.sin(w),a.push(f.x,f.y,f.z),d.x=e*Math.cos(_),d.y=e*Math.sin(_),m.subVectors(f,d).normalize(),l.push(m.x,m.y,m.z),c.push(b/i),c.push(g/n)}for(let g=1;g<=n;g++)for(let b=1;b<=i;b++){const _=(i+1)*g+b-1,w=(i+1)*(g-1)+b-1,M=(i+1)*(g-1)+b,S=(i+1)*g+b;s.push(_,w,S),s.push(w,M,S)}this.setIndex(s),this.setAttribute("position",new Vt(a,3)),this.setAttribute("normal",new Vt(l,3)),this.setAttribute("uv",new Vt(c,2))}static fromJSON(e){return new j4(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class v8 extends Ua{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Je(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Z0,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class twe extends v8{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new be(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Bn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Je(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Je(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Je(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class zte extends Ua{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Je(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Z0,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Bte extends Ua{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Z0,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}function ku(r,e,t){return g8(r)?new r.constructor(r.subarray(e,t!==void 0?t:r.length)):r.slice(e,t)}function uw(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function g8(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Fte(r){function e(i,o){return r[i]-r[o]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function v5(r,e,t){const n=r.length,i=new r.constructor(n);for(let o=0,s=0;s!==n;++o){const a=t[o]*e;for(let l=0;l!==e;++l)i[s++]=r[a+l]}return i}function y8(r,e,t,n){let i=1,o=r[0];for(;o!==void 0&&o[n]===void 0;)o=r[i++];if(o===void 0)return;let s=o[n];if(s!==void 0)if(Array.isArray(s))do s=o[n],s!==void 0&&(e.push(o.time),t.push.apply(t,s)),o=r[i++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[n],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=r[i++];while(o!==void 0);else do s=o[n],s!==void 0&&(e.push(o.time),t.push(s)),o=r[i++];while(o!==void 0)}class DS{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],o=t[n-1];e:{t:{let s;r:{n:if(!(e<i)){for(let a=n+2;;){if(i===void 0){if(e<o)break n;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(o=i,i=t[++n],e<i)break t}s=t.length;break r}if(!(e>=o)){const a=t[1];e<a&&(n=2,o=a);for(let l=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=o,o=t[--n-1],e>=o)break t}s=n,n=0;break r}break e}for(;n<s;){const a=n+s>>>1;e<t[a]?s=a:n=a+1}if(i=t[n],o=t[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,i)}return this.interpolate_(n,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,o=e*i;for(let s=0;s!==i;++s)t[s]=n[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ute extends DS{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Jp,endingEnd:Jp}}intervalChanged_(e,t,n){const i=this.parameterPositions;let o=e-2,s=e+1,a=i[o],l=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case Qp:o=e,a=2*t-n;break;case Cx:o=i.length-2,a=t+i[o]-i[o+1];break;default:o=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Qp:s=e,l=2*n-t;break;case Cx:s=1,l=n+i[1]-i[0];break;default:s=e-1,l=t}const c=(n-t)*.5,d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=o*d,this._offsetNext=s*d}interpolate_(e,t,n,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,f=this._offsetNext,m=this._weightPrev,g=this._weightNext,b=(n-t)/(i-t),_=b*b,w=_*b,M=-m*w+2*m*_-m*b,S=(1+m)*w+(-1.5-2*m)*_+(-.5+m)*b+1,C=(-1-g)*w+(1.5+g)*_+.5*b,P=g*w-g*_;for(let T=0;T!==a;++T)o[T]=M*s[d+T]+S*s[c+T]+C*s[l+T]+P*s[f+T];return o}}class _8 extends DS{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(n-t)/(i-t),f=1-d;for(let m=0;m!==a;++m)o[m]=s[c+m]*f+s[l+m]*d;return o}}class jte extends DS{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ha{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=uw(t,this.TimeBufferType),this.values=uw(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:uw(e.times,Array),values:uw(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new jte(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new _8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ute(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Sx:t=this.InterpolantFactoryMethodDiscrete;break;case Mx:t=this.InterpolantFactoryMethodLinear;break;case _3:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Sx;case this.InterpolantFactoryMethodLinear:return Mx;case this.InterpolantFactoryMethodSmooth:return _3}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let o=0,s=i-1;for(;o!==i&&n[o]<e;)++o;for(;s!==-1&&n[s]>t;)--s;if(++s,o!==0||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=ku(n,o,s),this.values=ku(this.values,o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,o=n.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=n[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(i!==void 0&&g8(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=ku(this.times),t=ku(this.values),n=this.getValueSize(),i=this.getInterpolation()===_3,o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(i)l=!0;else{const f=a*n,m=f-n,g=f+n;for(let b=0;b!==n;++b){const _=t[f+b];if(_!==t[m+b]||_!==t[g+b]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const f=a*n,m=s*n;for(let g=0;g!==n;++g)t[m+g]=t[f+g]}++s}}if(o>0){e[s]=e[o];for(let a=o*n,l=s*n,c=0;c!==n;++c)t[l+c]=t[a+c];++s}return s!==e.length?(this.times=ku(e,0,s),this.values=ku(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=ku(this.times,0),t=ku(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ha.prototype.TimeBufferType=Float32Array;Ha.prototype.ValueBufferType=Float32Array;Ha.prototype.DefaultInterpolation=Mx;class xm extends Ha{}xm.prototype.ValueTypeName="bool";xm.prototype.ValueBufferType=Array;xm.prototype.DefaultInterpolation=Sx;xm.prototype.InterpolantFactoryMethodLinear=void 0;xm.prototype.InterpolantFactoryMethodSmooth=void 0;class w8 extends Ha{}w8.prototype.ValueTypeName="color";class C0 extends Ha{}C0.prototype.ValueTypeName="number";class Hte extends DS{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(n-t)/(i-t);let c=e*a;for(let d=c+a;c!==d;c+=4)$i.slerpFlat(o,0,s,c-a,s,c,l);return o}}class ey extends Ha{InterpolantFactoryMethodLinear(e){return new Hte(this.times,this.values,this.getValueSize(),e)}}ey.prototype.ValueTypeName="quaternion";ey.prototype.DefaultInterpolation=Mx;ey.prototype.InterpolantFactoryMethodSmooth=void 0;class Sm extends Ha{}Sm.prototype.ValueTypeName="string";Sm.prototype.ValueBufferType=Array;Sm.prototype.DefaultInterpolation=Sx;Sm.prototype.InterpolantFactoryMethodLinear=void 0;Sm.prototype.InterpolantFactoryMethodSmooth=void 0;class Ax extends Ha{}Ax.prototype.ValueTypeName="vector";class cT{constructor(e,t=-1,n,i=P4){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=cs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let s=0,a=n.length;s!==a;++s)t.push(Gte(n[s]).scale(i));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=n.length;o!==s;++o)t.push(Ha.toJSON(n[o]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const o=t.length,s=[];for(let a=0;a<o;a++){let l=[],c=[];l.push((a+o-1)%o,a,(a+1)%o),c.push(0,1,0);const d=Fte(l);l=v5(l,1,d),c=v5(c,1,d),!i&&l[0]===0&&(l.push(o),c.push(c[0])),s.push(new C0(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(o);if(d&&d.length>1){const f=d[1];let m=i[f];m||(i[f]=m=[]),m.push(c)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(d,f,m,g,b){if(m.length!==0){const _=[],w=[];y8(m,_,w,g),_.length!==0&&b.push(new d(f,_,w))}},i=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const m={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let b=0;b<f[g].morphTargets.length;b++)m[f[g].morphTargets[b]]=-1;for(const b in m){const _=[],w=[];for(let M=0;M!==f[g].morphTargets.length;++M){const S=f[g];_.push(S.time),w.push(S.morphTarget===b?1:0)}i.push(new C0(".morphTargetInfluence["+b+"]",_,w))}l=m.length*s}else{const m=".bones["+t[d].name+"]";n(Ax,m+".position",f,"pos",i),n(ey,m+".quaternion",f,"rot",i),n(Ax,m+".scale",f,"scl",i)}}return i.length===0?null:new this(o,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const o=this.tracks[n];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Wte(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return C0;case"vector":case"vector2":case"vector3":case"vector4":return Ax;case"color":return w8;case"quaternion":return ey;case"bool":case"boolean":return xm;case"string":return Sm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function Gte(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Wte(r.type);if(r.times===void 0){const t=[],n=[];y8(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Gf={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class Yte{constructor(e,t,n){const i=this;let o=!1,s=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(d){a++,o===!1&&i.onStart!==void 0&&i.onStart(d,s,a),o=!0},this.itemEnd=function(d){s++,i.onProgress!==void 0&&i.onProgress(d,s,a),s===a&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,f){return c.push(d,f),this},this.removeHandler=function(d){const f=c.indexOf(d);return f!==-1&&c.splice(f,2),this},this.getHandler=function(d){for(let f=0,m=c.length;f<m;f+=2){const g=c[f],b=c[f+1];if(g.global&&(g.lastIndex=0),g.test(d))return b}return null}}}const Xte=new Yte;class gd{constructor(e){this.manager=e!==void 0?e:Xte,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,o){n.load(e,i,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const _l={};class qte extends Error{constructor(e,t){super(e),this.response=t}}class b8 extends gd{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Gf.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(_l[e]!==void 0){_l[e].push({onLoad:t,onProgress:n,onError:i});return}_l[e]=[],_l[e].push({onLoad:t,onProgress:n,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=_l[e],f=c.body.getReader(),m=c.headers.get("Content-Length"),g=m?parseInt(m):0,b=g!==0;let _=0;const w=new ReadableStream({start(M){S();function S(){f.read().then(({done:C,value:P})=>{if(C)M.close();else{_+=P.byteLength;const T=new ProgressEvent("progress",{lengthComputable:b,loaded:_,total:g});for(let L=0,O=d.length;L<O;L++){const k=d[L];k.onProgress&&k.onProgress(T)}M.enqueue(P),S()}})}}});return new Response(w)}else throw new qte(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(f);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{Gf.add(e,c);const d=_l[e];delete _l[e];for(let f=0,m=d.length;f<m;f++){const g=d[f];g.onLoad&&g.onLoad(c)}}).catch(c=>{const d=_l[e];if(d===void 0)throw this.manager.itemError(e),c;delete _l[e];for(let f=0,m=d.length;f<m;f++){const g=d[f];g.onError&&g.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class x8 extends gd{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Gf.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a=b0("img");function l(){d(),Gf.add(e,this),t&&t(this),o.manager.itemEnd(e)}function c(f){d(),i&&i(f),o.manager.itemError(e),o.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class Kte extends gd{constructor(e){super(e)}load(e,t,n,i){const o=new L4,s=new x8(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(c){s.load(e[c],function(d){o.images[c]=d,a++,a===6&&(o.needsUpdate=!0,t&&t(o))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return o}}class Zte extends gd{constructor(e){super(e)}load(e,t,n,i){const o=this,s=new a8,a=new b8(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){const c=o.parse(l);!c||(c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:Bo,s.wrapT=c.wrapT!==void 0?c.wrapT:Bo,s.magFilter=c.magFilter!==void 0?c.magFilter:En,s.minFilter=c.minFilter!==void 0?c.minFilter:En,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(s.encoding=c.encoding),c.flipY!==void 0&&(s.flipY=c.flipY),c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=K0),c.mipmapCount===1&&(s.minFilter=En),c.generateMipmaps!==void 0&&(s.generateMipmaps=c.generateMipmaps),s.needsUpdate=!0,t&&t(s,c))},n,i),s}}class Jte extends gd{constructor(e){super(e)}load(e,t,n,i){const o=new Ii,s=new x8(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},n,i),o}}class Mm extends pr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Je(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class Qte extends Mm{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(pr.DefaultUp),this.updateMatrix(),this.groundColor=new Je(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const g5=new Ct,y5=new j,_5=new j;class H4{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new be(512,512),this.map=null,this.mapPass=null,this.matrix=new Ct,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new PS,this._frameExtents=new be(1,1),this._viewportCount=1,this._viewports=[new ir(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;y5.setFromMatrixPosition(e.matrixWorld),t.position.copy(y5),_5.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_5),t.updateMatrixWorld(),g5.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(g5),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class $te extends H4{constructor(){super(new Fn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=w0*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(n!==t.fov||i!==t.aspect||o!==t.far)&&(t.fov=n,t.aspect=i,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ere extends Mm{constructor(e,t,n=0,i=Math.PI/3,o=0,s=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(pr.DefaultUp),this.updateMatrix(),this.target=new pr,this.distance=n,this.angle=i,this.penumbra=o,this.decay=s,this.shadow=new $te}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const w5=new Ct,Uv=new j,$3=new j;class tre extends H4{constructor(){super(new Fn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new be(4,2),this._viewportCount=6,this._viewports=[new ir(2,1,1,1),new ir(0,1,1,1),new ir(3,1,1,1),new ir(1,1,1,1),new ir(3,0,1,1),new ir(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,o=e.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),Uv.setFromMatrixPosition(e.matrixWorld),n.position.copy(Uv),$3.copy(n.position),$3.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt($3),n.updateMatrixWorld(),i.makeTranslation(-Uv.x,-Uv.y,-Uv.z),w5.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(w5)}}class rre extends Mm{constructor(e,t,n=0,i=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new tre}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class nre extends H4{constructor(){super(new Q0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ire extends Mm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pr.DefaultUp),this.updateMatrix(),this.target=new pr,this.shadow=new nre}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ore extends Mm{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class sre extends Mm{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class rwe{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class nwe extends gd{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Gf.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){Gf.add(e,l),t&&t(l),o.manager.itemEnd(e)}).catch(function(l){i&&i(l),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let cw;const S8={getContext:function(){return cw===void 0&&(cw=new(window.AudioContext||window.webkitAudioContext)),cw},setContext:function(r){cw=r}};class are extends gd{constructor(e){super(e)}load(e,t,n,i){const o=this,s=new b8(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{const l=a.slice(0);S8.getContext().decodeAudioData(l,function(c){t(c)})}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},n,i)}}class W4{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=b5(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=b5();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function b5(){return(typeof performance>"u"?Date:performance).now()}const wh=new j,x5=new $i,lre=new j,bh=new j;class ure extends pr{constructor(){super(),this.type="AudioListener",this.context=S8.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new W4}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(wh,x5,lre),bh.set(0,0,-1).applyQuaternion(x5),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(wh.x,i),t.positionY.linearRampToValueAtTime(wh.y,i),t.positionZ.linearRampToValueAtTime(wh.z,i),t.forwardX.linearRampToValueAtTime(bh.x,i),t.forwardY.linearRampToValueAtTime(bh.y,i),t.forwardZ.linearRampToValueAtTime(bh.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(wh.x,wh.y,wh.z),t.setOrientation(bh.x,bh.y,bh.z,n.x,n.y,n.z)}}class cre extends pr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const xh=new j,S5=new $i,hre=new j,Sh=new j;class dre extends cre{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(xh,S5,hre),Sh.set(0,0,1).applyQuaternion(S5);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(xh.x,n),t.positionY.linearRampToValueAtTime(xh.y,n),t.positionZ.linearRampToValueAtTime(xh.z,n),t.orientationX.linearRampToValueAtTime(Sh.x,n),t.orientationY.linearRampToValueAtTime(Sh.y,n),t.orientationZ.linearRampToValueAtTime(Sh.z,n)}else t.setPosition(xh.x,xh.y,xh.z),t.setOrientation(Sh.x,Sh.y,Sh.z)}}class pre{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,o,s;switch(t){case"quaternion":i=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,o=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)n[o+a]=n[a];s=t}else{s+=t;const a=t/s;this._mixBufferRegion(n,o,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=t*this._origIndex;this._mixBufferRegion(n,i,l,1-o,t)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){a.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let o=n,s=i;o!==s;++o)t[o]=t[i+o%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,o){if(i>=.5)for(let s=0;s!==o;++s)e[t+s]=e[n+s]}_slerp(e,t,n,i){$i.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,o){const s=this._workIndex*o;$i.multiplyQuaternionsFlat(e,s,e,t,e,n),$i.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,n,i,o){const s=1-i;for(let a=0;a!==o;++a){const l=t+a;e[l]=e[l]*s+e[n+a]*i}}_lerpAdditive(e,t,n,i,o){for(let s=0;s!==o;++s){const a=t+s;e[a]=e[a]+e[n+s]*i}}}const G4="\\[\\]\\.:\\/",fre=new RegExp("["+G4+"]","g"),Y4="[^"+G4+"]",mre="[^"+G4.replace("\\.","")+"]",vre=/((?:WC+[\/:])*)/.source.replace("WC",Y4),gre=/(WCOD+)?/.source.replace("WCOD",mre),yre=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Y4),_re=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Y4),wre=new RegExp("^"+vre+gre+yre+_re+"$"),bre=["material","materials","bones"];class xre{constructor(e,t,n){const i=n||sr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=n.length;i!==o;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class sr{constructor(e,t,n){this.path=t,this.parsedPath=n||sr.parseTrackName(t),this.node=sr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new sr.Composite(e,t,n):new sr(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(fre,"")}static parseTrackName(e){const t=wre.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=n.nodeName.substring(i+1);bre.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let o=t.propertyIndex;if(e||(e=sr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const s=e[i];if(s===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}sr.Composite=xre;sr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};sr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};sr.prototype.GetterByBindingType=[sr.prototype._getValue_direct,sr.prototype._getValue_array,sr.prototype._getValue_arrayElement,sr.prototype._getValue_toArray];sr.prototype.SetterByBindingTypeAndVersioning=[[sr.prototype._setValue_direct,sr.prototype._setValue_direct_setNeedsUpdate,sr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[sr.prototype._setValue_array,sr.prototype._setValue_array_setNeedsUpdate,sr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[sr.prototype._setValue_arrayElement,sr.prototype._setValue_arrayElement_setNeedsUpdate,sr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[sr.prototype._setValue_fromArray,sr.prototype._setValue_fromArray_setNeedsUpdate,sr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Sre{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const o=t.tracks,s=o.length,a=new Array(s),l={endingStart:Jp,endingEnd:Jp};for(let c=0;c!==s;++c){const d=o[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=tT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,o=e._clip.duration,s=o/i,a=i/o;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,o=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=o,l[1]=o+n,c[0]=e/s,c[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*n;if(l<0||n===0)return;this._startTime=null,t=n*l}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case HK:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(s),c[d].accumulateAdditive(a);break;case P4:default:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(s),c[d].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;n!==null&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,o=this._loopCount;const s=n===jK;if(e===0)return o===-1?i:s&&(o&1)===1?t-i:i;if(n===eT){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(o&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Qp,i.endingEnd=Qp):(e?i.endingStart=this.zeroSlopeAtStart?Qp:Jp:i.endingStart=Cx,t?i.endingEnd=this.zeroSlopeAtEnd?Qp:Jp:i.endingEnd=Cx)}_scheduleFading(e,t,n){const i=this._mixer,o=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=t,a[1]=o+e,l[1]=n,this}}const Mre=new Float32Array(1);class Cre extends pd{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,o=i.length,s=e._propertyBindings,a=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let f=0;f!==o;++f){const m=i[f],g=m.name;let b=d[g];if(b!==void 0)++b.referenceCount,s[f]=b;else{if(b=s[f],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,l,g));continue}const _=t&&t._propertyBindings[f].binding.parsedPath;b=new pre(sr.create(n,g,_),m.ValueTypeName,m.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,l,g),s[f]=b}a[f].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const o=t[n];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const o=t[n];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,o=this._actionsByClip;let s=o[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete f[m],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const o=t[n];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=n,t[n]=o}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=n,t[n]=o}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,o=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[n]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,o=n.path,s=this._bindingsByRootAndName,a=s[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[o],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=n,t[n]=o}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=n,t[n]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new _8(new Float32Array(2),new Float32Array(2),1,Mre),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=t[i];e.__cacheIndex=i,t[i]=e,o.__cacheIndex=n,t[n]=o}clipAction(e,t,n){const i=t||this._root,o=i.uuid;let s=typeof e=="string"?cT.findByName(i,e):e;const a=s!==null?s.uuid:e,l=this._actionsByClip[a];let c=null;if(n===void 0&&(s!==null?n=s.blendMode:n=P4),l!==void 0){const f=l.actionByRoot[o];if(f!==void 0&&f.blendMode===n)return f;c=l.knownActions[0],s===null&&(s=c._clip)}if(s===null)return null;const d=new Sre(this,s,t,n);return this._bindAction(d,c),this._addInactiveAction(d,a,o),d}existingAction(e,t){const n=t||this._root,i=n.uuid,o=typeof e=="string"?cT.findByName(n,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(i,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,o=i[n];if(o!==void 0){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const c=s[a];this._deactivateAction(c);const d=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=d,t[d]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const a=n[s].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[t];if(o!==void 0)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class M8{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new M8(this.value.clone===void 0?this.value:this.value.clone())}}class Ere{constructor(e,t,n=0,i=1/0){this.ray=new ym(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new A4,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return hT(e,this,n,t),n.sort(M5),n}intersectObjects(e,t=!0,n=[]){for(let i=0,o=e.length;i<o;i++)hT(e[i],this,n,t);return n.sort(M5),n}}function M5(r,e){return r.distance-e.distance}function hT(r,e,t,n){if(r.layers.test(e.layers)&&r.raycast(e,t),n===!0){const i=r.children;for(let o=0,s=i.length;o<s;o++)hT(i[o],e,t,!0)}}const C5=new be;class iwe{constructor(e=new be(1/0,1/0),t=new be(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=C5.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return C5.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const E5=new j,hw=new j;class Ys{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){E5.subVectors(e,this.start),hw.subVectors(this.end,this.start);const n=hw.dot(hw);let i=hw.dot(E5)/n;return t&&(i=Bn(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const P5=new j;class Pre extends pr{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new zr,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const c=s/l*Math.PI*2,d=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new Vt(i,3));const o=new vd({fog:!1,toneMapped:!1});this.cone=new $0(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),P5.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(P5),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Lu=new j,dw=new Ct,eE=new Ct;class Tre extends $0{constructor(e){const t=C8(e),n=new zr,i=[],o=[],s=new Je(0,0,1),a=new Je(0,1,0);for(let c=0;c<t.length;c++){const d=t[c];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}n.setAttribute("position",new Vt(i,3)),n.setAttribute("color",new Vt(o,3));const l=new vd({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");eE.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<t.length;o++){const a=t[o];a.parent&&a.parent.isBone&&(dw.multiplyMatrices(eE,a.matrixWorld),Lu.setFromMatrixPosition(dw),i.setXYZ(s,Lu.x,Lu.y,Lu.z),dw.multiplyMatrices(eE,a.parent.matrixWorld),Lu.setFromMatrixPosition(dw),i.setXYZ(s+1,Lu.x,Lu.y,Lu.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function C8(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,C8(r.children[t]));return e}class Are extends $0{constructor(e=10,t=10,n=4473924,i=8947848){n=new Je(n),i=new Je(i);const o=t/2,s=e/t,a=e/2,l=[],c=[];for(let m=0,g=0,b=-a;m<=t;m++,b+=s){l.push(-a,0,b,a,0,b),l.push(b,0,-a,b,0,a);const _=m===o?n:i;_.toArray(c,g),g+=3,_.toArray(c,g),g+=3,_.toArray(c,g),g+=3,_.toArray(c,g),g+=3}const d=new zr;d.setAttribute("position",new Vt(l,3)),d.setAttribute("color",new Vt(c,3));const f=new vd({vertexColors:!0,toneMapped:!1});super(d,f),this.type="GridHelper"}}const pw=new j,nn=new k4;class kre extends $0{constructor(e){const t=new zr,n=new vd({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(b,_){l(b),l(_)}function l(b){i.push(0,0,0),o.push(0,0,0),s[b]===void 0&&(s[b]=[]),s[b].push(i.length/3-1)}t.setAttribute("position",new Vt(i,3)),t.setAttribute("color",new Vt(o,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const c=new Je(16755200),d=new Je(16711680),f=new Je(43775),m=new Je(16777215),g=new Je(3355443);this.setColors(c,d,f,m,g)}setColors(e,t,n,i,o){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,o.r,o.g,o.b),s.setXYZ(41,o.r,o.g,o.b),s.setXYZ(42,o.r,o.g,o.b),s.setXYZ(43,o.r,o.g,o.b),s.setXYZ(44,o.r,o.g,o.b),s.setXYZ(45,o.r,o.g,o.b),s.setXYZ(46,o.r,o.g,o.b),s.setXYZ(47,o.r,o.g,o.b),s.setXYZ(48,o.r,o.g,o.b),s.setXYZ(49,o.r,o.g,o.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;nn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),vn("c",t,e,nn,0,0,-1),vn("t",t,e,nn,0,0,1),vn("n1",t,e,nn,-n,-i,-1),vn("n2",t,e,nn,n,-i,-1),vn("n3",t,e,nn,-n,i,-1),vn("n4",t,e,nn,n,i,-1),vn("f1",t,e,nn,-n,-i,1),vn("f2",t,e,nn,n,-i,1),vn("f3",t,e,nn,-n,i,1),vn("f4",t,e,nn,n,i,1),vn("u1",t,e,nn,n*.7,i*1.1,-1),vn("u2",t,e,nn,-n*.7,i*1.1,-1),vn("u3",t,e,nn,0,i*2,-1),vn("cf1",t,e,nn,-n,0,1),vn("cf2",t,e,nn,n,0,1),vn("cf3",t,e,nn,0,-i,1),vn("cf4",t,e,nn,0,i,1),vn("cn1",t,e,nn,-n,0,-1),vn("cn2",t,e,nn,n,0,-1),vn("cn3",t,e,nn,0,-i,-1),vn("cn4",t,e,nn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function vn(r,e,t,n,i,o,s){pw.set(i,o,s).unproject(n);const a=e[r];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],pw.x,pw.y,pw.z)}}const fw=new wi;class E8 extends $0{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new zr;o.setIndex(new eo(n,1)),o.setAttribute("position",new eo(i,3)),super(o,new vd({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&fw.setFromObject(this.object),fw.isEmpty())return;const t=fw.min,n=fw.max,i=this.geometry.attributes.position,o=i.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=t.x,o[4]=n.y,o[5]=n.z,o[6]=t.x,o[7]=t.y,o[8]=n.z,o[9]=n.x,o[10]=t.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=t.z,o[15]=t.x,o[16]=n.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=n.x,o[22]=t.y,o[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class owe{constructor(){this.type="ShapePath",this.color=new Je,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new aT,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,o,s){return this.currentPath.bezierCurveTo(e,t,n,i,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(S){const C=[];for(let P=0,T=S.length;P<T;P++){const L=S[P],O=new Ab;O.curves=L.curves,C.push(O)}return C}function i(S,C){const P=C.length;let T=!1;for(let L=P-1,O=0;O<P;L=O++){let k=C[L],N=C[O],V=N.x-k.x,W=N.y-k.y;if(Math.abs(W)>Number.EPSILON){if(W<0&&(k=C[O],V=-V,N=C[L],W=-W),S.y<k.y||S.y>N.y)continue;if(S.y===k.y){if(S.x===k.x)return!0}else{const ee=W*(S.x-k.x)-V*(S.y-k.y);if(ee===0)return!0;if(ee<0)continue;T=!T}}else{if(S.y!==k.y)continue;if(N.x<=S.x&&S.x<=k.x||k.x<=S.x&&S.x<=N.x)return!0}}return T}const o=ff.isClockWise,s=this.subPaths;if(s.length===0)return[];if(t===!0)return n(s);let a,l,c;const d=[];if(s.length===1)return l=s[0],c=new Ab,c.curves=l.curves,d.push(c),d;let f=!o(s[0].getPoints());f=e?!f:f;const m=[],g=[];let b=[],_=0,w;g[_]=void 0,b[_]=[];for(let S=0,C=s.length;S<C;S++)l=s[S],w=l.getPoints(),a=o(w),a=e?!a:a,a?(!f&&g[_]&&_++,g[_]={s:new Ab,p:w},g[_].s.curves=l.curves,f&&_++,b[_]=[]):b[_].push({h:l,p:w[0]});if(!g[0])return n(s);if(g.length>1){let S=!1,C=0;for(let P=0,T=g.length;P<T;P++)m[P]=[];for(let P=0,T=g.length;P<T;P++){const L=b[P];for(let O=0;O<L.length;O++){const k=L[O];let N=!0;for(let V=0;V<g.length;V++)i(k.p,g[V].p)&&(P!==V&&C++,N?(N=!1,m[V].push(k)):S=!0);N&&m[P].push(k)}}C>0&&S===!1&&(b=m)}let M;for(let S=0,C=g.length;S<C;S++){c=g[S].s,d.push(c),M=b[S];for(let P=0,T=M.length;P<T;P++)c.holes.push(M[P].h)}return d}}const kl=Lre();function Lre(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;(c&8388608)===0;)c<<=1,d-=8388608;c&=-8388609,d+=947912704,o[l]=c|d}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:o,exponentTable:s,offsetTable:a}}function Ore(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Bn(r,-65504,65504),kl.floatView[0]=r;const e=kl.uint32View[0],t=e>>23&511;return kl.baseTable[t]+((e&8388607)>>kl.shiftTable[t])}function Dre(r){const e=r>>10;return kl.uint32View[0]=kl.mantissaTable[kl.offsetTable[e]+(r&1023)]+kl.exponentTable[e],kl.floatView[0]}var mw=Object.freeze({__proto__:null,toHalfFloat:Ore,fromHalfFloat:Dre});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:C4}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=C4);const[vw,Or]=zi(),[RS,Zs]=De([]),T5=vm(RS,Zs),Rre=gm(RS,Zs),X4=eK(RS,Zs),P8=new WeakSet,[swe,T8]=De(!1),[Nre,hn]=De(void 0),Yf=r=>{!T8()&&Nre(r)},rt=new $ee;xt(()=>{const r=hn();if(!r)return;const e=new E8(r.nativeObject3d),t=requestAnimationFrame(()=>rt.add(e)),n=Or(()=>e.update());return()=>{cancelAnimationFrame(t),rt.remove(e),n.cancel()}},[hn]);xt(()=>{const r=Zs();if(!r.length)return;const e=[];for(const n of r){const i=new E8(n.outerObject3d);rt.add(i),e.push(i)}const t=Or(()=>{for(const n of e)n.update()});return()=>{for(const n of e)rt.remove(n);t.cancel()}},[Zs]);const A8=100,Wt=1/A8,Pn=A8,k8=Number.EPSILON,Wo=100*Wt,Vl=Wo*.5;class pg{constructor(e,t){this.x=e,this.y=t}}class Xh{constructor(e,t,n){this.x=e,this.y=t,this.z=n}}const qh=180/Math.PI,ti=Math.PI/180,q4=(r,e,t,n,i,o)=>Math.sqrt((r-n)**2+(e-i)**2+(t-o)**2),Ire=(r,e,t,n)=>{const i=t*=ti;return new pg(r+n*Math.cos(i),e+n*Math.sin(i))},L8=new Set,NS=r=>{for(const e of r)L8.add(e)},Cc={onLoop:Function,proxy:Object};NS(["proxy"]);const Ec={onLoop:void 0,proxy:void 0},Al=()=>{};class Yr{constructor(e){F(this,"value"),this.value=e}}const Vre={...Cc,onClick:Function,onMouseDown:Function,onMouseUp:Function,onMouseOver:Function,onMouseOut:Function,onMouseMove:Function,onLookToEnd:Function,lookAt:[Function,Array],lookTo:[Function,Array],name:String,id:String,bloom:Boolean,outline:Boolean,visible:Boolean,frustumCulled:Boolean,castShadow:Boolean,receiveShadow:Boolean,metalnessFactor:Number,roughnessFactor:Number,opacityFactor:Number,adjustColor:String,toon:Boolean};NS(["lookAt","lookTo"]);const zre={...Ec,onClick:void 0,onMouseDown:void 0,onMouseUp:void 0,onMouseOver:void 0,onMouseOut:void 0,onMouseMove:void 0,onLookToEnd:void 0,lookAt:Al,lookTo:Al,name:"",id:void 0,bloom:!1,outline:!1,visible:!0,frustumCulled:!0,castShadow:!0,receiveShadow:!0,metalnessFactor:new Yr(0),roughnessFactor:new Yr(1),opacityFactor:new Yr(1),adjustColor:new Yr("#ffffff"),toon:!1},Bre={...Vre,animations:Object,animation:[String,Number,Array,Boolean,Object],animationPaused:Boolean,animationRepeat:Boolean,onAnimationFinish:Function},Fre={...zre,animations:{},animation:void 0,animationPaused:new Yr(!1),animationRepeat:new Yr(!0),onAnimationFinish:void 0},K4={...Cc,x:Number,y:Number,z:Number},Z4={...Ec,x:0,y:0,z:0},O8={...Bre,...K4,onIntersect:Function,onIntersectOut:Function,onMoveToEnd:Function,moveTo:[Function,Array],lerpTo:[Function,Array],placeAt:[Function,Array],translateX:[Function,Array],translateY:[Function,Array],translateZ:[Function,Array],intersectIds:Array,scaleX:Number,scaleY:Number,scaleZ:Number,scale:Number,rotationX:Number,rotationY:Number,rotationZ:Number,rotation:Number};NS(["intersectIds","moveTo","lerpTo"]);const D8={...Fre,...Z4,onIntersect:void 0,onIntersectOut:void 0,onMoveToEnd:void 0,moveTo:Al,lerpTo:Al,placeAt:Al,translateX:Al,translateY:Al,translateZ:Al,intersectIds:void 0,scaleX:1,scaleY:1,scaleZ:1,scale:1,rotationX:0,rotationY:0,rotationZ:0,rotation:0},IS={color:String,fog:Boolean,opacity:Number,texture:[String,Object],videoTexture:[String,Object],alphaMap:String,textureRepeat:[Object,Number],textureFlipY:Boolean},VS={color:"#ffffff",fog:!0,opacity:1,texture:void 0,videoTexture:void 0,alphaMap:void 0,textureRepeat:new Yr({x:1,y:1}),textureFlipY:new Yr(!1)},J4={color:String,wireframe:Boolean,envMap:String,aoMap:String,aoMapIntensity:Number,bumpMap:String,bumpScale:Number,displacementMap:String,displacementScale:Number,displacementBias:Number,emissive:Boolean,emissiveColor:String,emissiveMap:String,emissiveIntensity:Number,lightMap:String,lightMapIntensity:Number,metalnessMap:String,metalness:Number,roughnessMap:String,roughness:Number,normalMap:String,normalScale:[Object,Number],normalMapType:String},Q4={color:"#ffffff",wireframe:!1,envMap:void 0,aoMap:void 0,aoMapIntensity:1,bumpMap:void 0,bumpScale:1,displacementMap:void 0,displacementScale:1,displacementBias:0,emissive:!1,emissiveColor:"#000000",emissiveMap:void 0,emissiveIntensity:1,lightMap:void 0,lightMapIntensity:1,metalnessMap:void 0,metalness:0,roughnessMap:void 0,roughness:1,normalMap:void 0,normalScale:{x:1,y:1},normalMapType:void 0},Ure={...O8,...IS,...J4},jre={...D8,...VS,...Q4},[R8,N8]=De(0),$4=()=>R8(N8()+1),Xf=()=>R8(N8()-1),A5=[0],k5=new Map,Hre=new Set,ek=r=>e=>{k5.set(r,e.loaded),A5[0]=[...k5.values()].reduce((t,n)=>t+n,0),Hre.forEach(t=>{try{t(A5[0])}finally{}})};class Wre extends Zte{constructor(e){super(e),this.type=Rl}parse(e){const t=function(f,m){switch(f){case 1:console.error("THREE.RGBELoader Read Error: "+(m||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(m||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(m||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(m||""))}return-1},n=`
`,i=function(f,m,g){m=m||1024;let b=f.pos,_=-1,w=0,M="",S=String.fromCharCode.apply(null,new Uint16Array(f.subarray(b,b+128)));for(;0>(_=S.indexOf(n))&&w<m&&b<f.byteLength;)M+=S,w+=S.length,b+=128,S+=String.fromCharCode.apply(null,new Uint16Array(f.subarray(b,b+128)));return-1<_?(g!==!1&&(f.pos+=w+_+1),M+S.slice(0,_)):!1},o=function(f){const m=/^#\?(\S+)/,g=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,b=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,_=/^\s*FORMAT=(\S+)\s*$/,w=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,M={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let S,C;if(f.pos>=f.byteLength||!(S=i(f)))return t(1,"no header found");if(!(C=S.match(m)))return t(3,"bad initial token");for(M.valid|=1,M.programtype=C[1],M.string+=S+`
`;S=i(f),S!==!1;){if(M.string+=S+`
`,S.charAt(0)==="#"){M.comments+=S+`
`;continue}if((C=S.match(g))&&(M.gamma=parseFloat(C[1])),(C=S.match(b))&&(M.exposure=parseFloat(C[1])),(C=S.match(_))&&(M.valid|=2,M.format=C[1]),(C=S.match(w))&&(M.valid|=4,M.height=parseInt(C[1],10),M.width=parseInt(C[2],10)),M.valid&2&&M.valid&4)break}return M.valid&2?M.valid&4?M:t(3,"missing image size specifier"):t(3,"missing format specifier")},s=function(f,m,g){const b=m;if(b<8||b>32767||f[0]!==2||f[1]!==2||f[2]&128)return new Uint8Array(f);if(b!==(f[2]<<8|f[3]))return t(3,"wrong scanline width");const _=new Uint8Array(4*m*g);if(!_.length)return t(4,"unable to allocate buffer space");let w=0,M=0;const S=4*b,C=new Uint8Array(4),P=new Uint8Array(S);let T=g;for(;T>0&&M<f.byteLength;){if(M+4>f.byteLength)return t(1);if(C[0]=f[M++],C[1]=f[M++],C[2]=f[M++],C[3]=f[M++],C[0]!=2||C[1]!=2||(C[2]<<8|C[3])!=b)return t(3,"bad rgbe scanline format");let L=0,O;for(;L<S&&M<f.byteLength;){O=f[M++];const N=O>128;if(N&&(O-=128),O===0||L+O>S)return t(3,"bad scanline data");if(N){const V=f[M++];for(let W=0;W<O;W++)P[L++]=V}else P.set(f.subarray(M,M+O),L),L+=O,M+=O}const k=b;for(let N=0;N<k;N++){let V=0;_[w]=P[N+V],V+=b,_[w+1]=P[N+V],V+=b,_[w+2]=P[N+V],V+=b,_[w+3]=P[N+V],w+=4}T--}return _},a=function(f,m,g,b){const _=f[m+3],w=Math.pow(2,_-128)/255;g[b+0]=f[m+0]*w,g[b+1]=f[m+1]*w,g[b+2]=f[m+2]*w,g[b+3]=1},l=function(f,m,g,b){const _=f[m+3],w=Math.pow(2,_-128)/255;g[b+0]=mw.toHalfFloat(Math.min(f[m+0]*w,65504)),g[b+1]=mw.toHalfFloat(Math.min(f[m+1]*w,65504)),g[b+2]=mw.toHalfFloat(Math.min(f[m+2]*w,65504)),g[b+3]=mw.toHalfFloat(1)},c=new Uint8Array(e);c.pos=0;const d=o(c);if(d!==-1){const f=d.width,m=d.height,g=s(c.subarray(c.pos),f,m);if(g!==-1){let b,_,w;switch(this.type){case js:w=g.length/4;const M=new Float32Array(w*4);for(let C=0;C<w;C++)a(g,C*4,M,C*4);b=M,_=js;break;case Rl:w=g.length/4;const S=new Uint16Array(w*4);for(let C=0;C<w;C++)l(g,C*4,S,C*4);b=S,_=Rl;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:f,height:m,data:b,header:d.string,gamma:d.gamma,exposure:d.exposure,type:_}}}return null}setDataType(e){return this.type=e,this}load(e,t,n,i){function o(s,a){switch(s.type){case js:case Rl:s.encoding=fc,s.minFilter=En,s.magFilter=En,s.generateMipmaps=!1,s.flipY=!0;break}t&&t(s,a)}return super.load(e,o,n,i)}}const Gre=new Map,Yre=new Jte,Xre=new Wre,tE=new PB,Li=(r,e)=>(e&&tE.once(r,()=>queueMicrotask(e)),Fa(Gre,r,()=>($4(),(r.toLowerCase().toLowerCase().endsWith(".hdr")?Xre:Yre).load(r,t=>{t.wrapS=t.wrapT=jf,tE.setState(r),Xf()},ek(r),()=>{tE.setState(r),Xf()})))),qre=()=>{const r=new Map,e=Qs(()=>{for(const t of r.values())t();r.clear()},0,"trailing");return(t,n)=>{r.set(t,n),e()}},jv=["map","alphaMap"],Kre=qre();class ty{constructor(){F(this,"materialCloned"),F(this,"_opacity"),F(this,"videoTextureState"),F(this,"textureState"),F(this,"_alphaMap"),F(this,"_textureRepeat"),F(this,"_textureFlipY")}tryCloneMaterial(){this.materialCloned||(this.materialCloned=!0,this.material=this.nativeObject3d.material=this.material.clone(),this.then(()=>this.material.dispose()))}get color(){return"#"+this.material.color.getHexString()}set color(e){this.tryCloneMaterial(),this.material.color=new Je(e)}get fog(){return this.material.fog}set fog(e){this.tryCloneMaterial(),this.material.fog=e}get opacity(){var e;return(e=this._opacity)!=null?e:this._opacity=1}set opacity(e){this.tryCloneMaterial(),this._opacity=e,this.material.opacity=e,this.material.transparent=e<=1,this.nativeObject3d.visible=!!e}applyTexture(e){const t=this._textureRepeat,n=this._textureFlipY;Kre(this,()=>{this.tryCloneMaterial();for(const i of e){const o=this.material[i];if(!o)return;t!==void 0&&(o.repeat=t),n!==void 0&&(o.flipY=n),o.needsUpdate=!0}})}initTexture(){if(this.textureState)return;this.tryCloneMaterial();const e=this.videoTextureState=new ht(void 0),t=this.textureState=new ht(void 0);this.createEffect(()=>{const n=t.get(),i=e.get();if(i){let a;typeof i=="string"?(a=document.createElement("video"),a.crossOrigin="anonymous",a.src=i,a.loop=!0,a.autoplay=!0,a.muted=!0,a.playsInline=!0,a.play()):a=i;const l=new ote(a,void 0,jf,jf),{material:c}=this,{map:d}=c;return c.map=l,c.needsUpdate=!0,this.applyTexture(jv),()=>{a.pause(),l.dispose(),c.map=d,c.needsUpdate=!0}}if(!n)return;const{material:o}=this,{map:s}=o;return o.map=Li(n),this.applyTexture(jv),()=>{o.map=s,this.material.needsUpdate=!0}},[e.get,t.get])}get videoTexture(){var e;return(e=this.videoTextureState)==null?void 0:e.get()}set videoTexture(e){this.initTexture(),this.videoTextureState.set(e)}get texture(){var e;return(e=this.textureState)==null?void 0:e.get()}set texture(e){this.initTexture(),this.textureState.set(e)}get alphaMap(){return this._alphaMap}set alphaMap(e){this.tryCloneMaterial(),this._alphaMap=e,this.material.alphaMap=e?Li(e):null,this.applyTexture(jv)}get textureRepeat(){return this._textureRepeat}set textureRepeat(e){typeof e=="number"&&(e=new be(e,e)),this._textureRepeat=e,this.applyTexture(jv)}get textureFlipY(){return this._textureFlipY}set textureFlipY(e){this._textureFlipY=e,this.applyTexture(jv)}}const wl=["map","alphaMap","envMap","aoMap","bumpMap","displacementMap","emissiveMap","lightMap","metalnessMap","roughnessMap","normalMap"];class tk extends ty{constructor(){super(...arguments),F(this,"_envMap"),F(this,"_aoMap"),F(this,"_bumpMap"),F(this,"_displacementMap"),F(this,"_emissiveMap"),F(this,"_emissive"),F(this,"_lightMap"),F(this,"_metalnessMap"),F(this,"_roughnessMap"),F(this,"_normalMap"),F(this,"_normalMapType")}get wireframe(){return this.material.wireframe}set wireframe(e){this.tryCloneMaterial(),this.material.wireframe=e}get envMap(){return this._envMap}set envMap(e){this.tryCloneMaterial(),this._envMap=e,this.material.envMap=e?Li(e):null,this.applyTexture(wl)}get aoMap(){return this._aoMap}set aoMap(e){this.tryCloneMaterial(),this._aoMap=e,this.material.aoMap=e?Li(e):null,this.applyTexture(wl)}get aoMapIntensity(){return this.material.aoMapIntensity}set aoMapIntensity(e){this.tryCloneMaterial(),this.material.aoMapIntensity=e}get bumpMap(){return this._bumpMap}set bumpMap(e){this.tryCloneMaterial(),this._bumpMap=e,this.material.bumpMap=e?Li(e):null,this.applyTexture(wl)}get bumpScale(){return this.material.bumpScale}set bumpScale(e){this.tryCloneMaterial(),this.material.bumpScale=e}get displacementMap(){return this._displacementMap}set displacementMap(e){this.tryCloneMaterial(),this._displacementMap=e,this.material.displacementMap=e?Li(e):null,this.applyTexture(wl)}get displacementScale(){return this.material.displacementScale}set displacementScale(e){this.tryCloneMaterial(),this.material.displacementScale=e}get displacementBias(){return this.material.displacementBias}set displacementBias(e){this.tryCloneMaterial(),this.material.displacementBias=e}get emissiveColor(){return"#"+this.material.emissive.getHexString()}set emissiveColor(e){this.tryCloneMaterial(),this.material.emissive=new Je(e)}get emissiveMap(){return this._emissiveMap}set emissiveMap(e){this.tryCloneMaterial(),this._emissiveMap=e,this.material.emissiveMap=e?Li(e):null,this.applyTexture(wl)}get emissiveIntensity(){return this.material.emissiveIntensity}set emissiveIntensity(e){this.tryCloneMaterial(),this.material.emissiveIntensity=e}get emissive(){return!!this._emissive}set emissive(e){this._emissive=e,e&&(this.tryCloneMaterial(),this.material.emissiveMap=this.material.map,this.material.emissive=this.material.color)}get lightMap(){return this._lightMap}set lightMap(e){this.tryCloneMaterial(),this._lightMap=e,this.material.lightMap=e?Li(e):null,this.applyTexture(wl)}get lightMapIntensity(){return this.material.lightMapIntensity}set lightMapIntensity(e){this.tryCloneMaterial(),this.material.lightMapIntensity=e}get metalnessMap(){return this._metalnessMap}set metalnessMap(e){this.tryCloneMaterial(),this._metalnessMap=e,this.material.metalnessMap=e?Li(e):null,this.applyTexture(wl)}get metalness(){return this.material.metalness}set metalness(e){this.tryCloneMaterial(),this.material.metalness=e}get roughnessMap(){return this._roughnessMap}set roughnessMap(e){this.tryCloneMaterial(),this._roughnessMap=e,this.material.roughnessMap=e?Li(e):null,this.applyTexture(wl)}get roughness(){return this.material.roughness}set roughness(e){this.tryCloneMaterial(),this.material.roughness=e}get normalMap(){return this._normalMap}set normalMap(e){this.tryCloneMaterial(),this._normalMap=e,this.material.normalMap=e?Li(e):null,this.applyTexture(wl)}get normalScale(){return this.material.normalScale}set normalScale(e){this.tryCloneMaterial(),typeof e=="number"?this.material.normalScale=new be(e,e):this.material.normalScale=e}get normalMapType(){return this._normalMapType}set normalMapType(e){this.tryCloneMaterial(),this._normalMapType=e,this.material.normalMapType=e==="objectSpace"?BB:Z0}}const[Zre,Cm]=zi(),kb=Qs(Zre,0,"trailing"),_n=new Set,zS=new WeakSet;class rk extends EB{constructor(e=new pr){super(),F(this,"outerObject3d"),F(this,"nativeObject3d"),F(this,"parent"),F(this,"children"),this.outerObject3d=e,e.userData.manager=this,this.nativeObject3d=e,_n.add(this),kb()}get uuid(){return this.outerObject3d.uuid}_append(e){var t,n,i;_n.delete(e),kb(),(n=(t=e.parent)==null?void 0:t.children)==null||n.delete(e),e.parent=this,((i=this.children)!=null?i:this.children=new Set).add(e)}append(e){this._append(e),this.outerObject3d.add(e.outerObject3d)}attach(e){this._append(e),this.outerObject3d.attach(e.outerObject3d)}dispose(){var e,t,n;if(this.done)return this;if(super.dispose(),_n.delete(this),kb(),(t=(e=this.parent)==null?void 0:e.children)==null||t.delete(this),this.parent=void 0,(n=this.outerObject3d.parent)==null||n.remove(this.outerObject3d),this.children)for(const i of this.children)i.dispose();return this}}const un=new j,Jre=new j,awe=new j,Rh=new $i,Qre=new $i,$re=new j(0,0,0);Object.freeze($re);const dT=new j(Wo,Wo,Wo);Object.freeze(dT);const I8=new j(Vl,Vl,Vl);Object.freeze(I8);const mf=new wi,V8=new ym,Hr=new _m(0,0,0,"YXZ"),lwe=new Ys,z8=new PS,ene=new Ct,fg=Math.PI*.5,B8=new wm({wireframe:!0}),kx=new v8,Xs=r=>new Xh(r.x*Pn,r.y*Pn,r.z*Pn),nk=r=>new j(r.x*Wt,r.y*Wt,r.z*Wt),[gw,Em]=zi(),yw=new WeakMap,vr=r=>{if(r.parent===rt)return r.position.clone();if(yw.has(r))return yw.get(r).clone();const e=r.getWorldPosition(new j);return yw.set(r,e.clone()),Em(()=>yw.delete(r),!0),e},_w=new WeakMap,ry=r=>{if(_w.has(r))return _w.get(r).clone();let e;return r instanceof s8?e=vr(r):(r.updateWorldMatrix(!0,!1),mf.setFromObject(r),mf.isEmpty()?e=vr(r):e=mf.getCenter(new j)),_w.set(r,e.clone()),Em(()=>_w.delete(r),!0),e},tne=!!window.chrome,rne=(()=>{const r=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(r)?!0:!!/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(r)})(),[nne,E0]=De("#000000"),[ine,pT]=De(!1),[one,Zr]=De(void 0);xt(()=>{const r=new n8({powerPreference:"high-performance",alpha:E0()==="transparent",logarithmicDepthBuffer:tne&&!rne?pT():!1,antialias:!0});return r.shadowMap.enabled=!0,r.shadowMap.type=LB,one(r),()=>{r.dispose()}},[E0,pT]);const[sne,fT]=De(60),F8=(r,e,t)=>{let n=0;const i=setInterval(()=>{document.hidden||(t(),e!==-1&&++n>=e&&clearInterval(i))},r);return new lr(()=>clearInterval(i))},mT=new Set,ane=new W4;let Hv=0;const ga=[1],BS=[0];xt(()=>{const r=Zr();if(!r)return;const e=1/fT()*.9,t=1/60;r.setAnimationLoop(()=>{if(Hv+=ane.getDelta(),!(Hv<e)){ga[0]=Hv/t,BS[0]=Hv,Hv=0;for(const n of mT)n()}})},[fT,Zr]);const mg=r=>(mT.add(r),new lr(()=>mT.delete(r)));class Kl extends rk{constructor(){super(...arguments),F(this,"_proxy"),F(this,"handles"),F(this,"_onLoop")}get proxy(){return this._proxy}set proxy(e){this._proxy&&(this._proxy.__target=void 0),this._proxy=e,e&&(e.__target=this)}timer(e,t,n){return this.watch(F8(e,t,n))}beforeRender(e){return this.watch(Or(e))}queueMicrotask(e){queueMicrotask(()=>!this.done&&e())}cancellable(e){return this.watch(new lr(e))}createEffect(e,t){return this.watch(xt(e,t))}cancelHandle(e,t){var n,i;const o=(n=this.handles)!=null?n:this.handles=new Map;if((i=o.get(e))==null||i.cancel(),!t)return;const s=t();return o.set(e,s),s}dispose(){if(this.done)return this;if(super.dispose(),this.handles)for(const e of this.handles.values())e.cancel();return this}get onLoop(){return this._onLoop}set onLoop(e){this._onLoop=e,this.cancelHandle("onLoop",e&&(()=>Or(e)))}}class ik extends Kl{get x(){return this.outerObject3d.position.x*Pn}set x(e){this.outerObject3d.position.x=e*Wt}get y(){return this.outerObject3d.position.y*Pn}set y(e){this.outerObject3d.position.y=e*Wt}get z(){return this.outerObject3d.position.z*Pn}set z(e){this.outerObject3d.position.z=e*Wt}getWorldPosition(){return Xs(vr(this.nativeObject3d))}}const nd=r=>r instanceof Kl&&"x"in r,$t={c:null,u:[new j,new j,new j],e:[]},or={c:null,u:[new j,new j,new j],e:[]},Ur=[[],[],[]],Pt=[[],[],[]],Rr=[],Mh=new j,Ch=new j,Eh=new j,In=new j,L5=new j,O5=new j,Rs=new mi,D5=new wi,ww=new Ct,R5=new Ct,N5=new ym;class ok{constructor(e=new j,t=new j,n=new mi){this.center=e,this.halfSize=t,this.rotation=n}set(e,t,n){return this.center=e,this.halfSize=t,this.rotation=n,this}copy(e){return this.center.copy(e.center),this.halfSize.copy(e.halfSize),this.rotation.copy(e.rotation),this}clone(){return new this.constructor().copy(this)}getSize(e){return e.copy(this.halfSize).multiplyScalar(2)}clampPoint(e,t){const n=this.halfSize;In.subVectors(e,this.center),this.rotation.extractBasis(Mh,Ch,Eh),t.copy(this.center);const i=b3.clamp(In.dot(Mh),-n.x,n.x);t.add(Mh.multiplyScalar(i));const o=b3.clamp(In.dot(Ch),-n.y,n.y);t.add(Ch.multiplyScalar(o));const s=b3.clamp(In.dot(Eh),-n.z,n.z);return t.add(Eh.multiplyScalar(s)),t}containsPoint(e){return In.subVectors(e,this.center),this.rotation.extractBasis(Mh,Ch,Eh),Math.abs(In.dot(Mh))<=this.halfSize.x&&Math.abs(In.dot(Ch))<=this.halfSize.y&&Math.abs(In.dot(Eh))<=this.halfSize.z}intersectsBox3(e){return this.intersectsOBB(lne.fromBox3(e))}intersectsSphere(e){return this.clampPoint(e.center,O5),O5.distanceToSquared(e.center)<=e.radius*e.radius}intersectsOBB(e,t=Number.EPSILON){$t.c=this.center,$t.e[0]=this.halfSize.x,$t.e[1]=this.halfSize.y,$t.e[2]=this.halfSize.z,this.rotation.extractBasis($t.u[0],$t.u[1],$t.u[2]),or.c=e.center,or.e[0]=e.halfSize.x,or.e[1]=e.halfSize.y,or.e[2]=e.halfSize.z,e.rotation.extractBasis(or.u[0],or.u[1],or.u[2]);for(let o=0;o<3;o++)for(let s=0;s<3;s++)Ur[o][s]=$t.u[o].dot(or.u[s]);In.subVectors(or.c,$t.c),Rr[0]=In.dot($t.u[0]),Rr[1]=In.dot($t.u[1]),Rr[2]=In.dot($t.u[2]);for(let o=0;o<3;o++)for(let s=0;s<3;s++)Pt[o][s]=Math.abs(Ur[o][s])+t;let n,i;for(let o=0;o<3;o++)if(n=$t.e[o],i=or.e[0]*Pt[o][0]+or.e[1]*Pt[o][1]+or.e[2]*Pt[o][2],Math.abs(Rr[o])>n+i)return!1;for(let o=0;o<3;o++)if(n=$t.e[0]*Pt[0][o]+$t.e[1]*Pt[1][o]+$t.e[2]*Pt[2][o],i=or.e[o],Math.abs(Rr[0]*Ur[0][o]+Rr[1]*Ur[1][o]+Rr[2]*Ur[2][o])>n+i)return!1;return n=$t.e[1]*Pt[2][0]+$t.e[2]*Pt[1][0],i=or.e[1]*Pt[0][2]+or.e[2]*Pt[0][1],!(Math.abs(Rr[2]*Ur[1][0]-Rr[1]*Ur[2][0])>n+i||(n=$t.e[1]*Pt[2][1]+$t.e[2]*Pt[1][1],i=or.e[0]*Pt[0][2]+or.e[2]*Pt[0][0],Math.abs(Rr[2]*Ur[1][1]-Rr[1]*Ur[2][1])>n+i)||(n=$t.e[1]*Pt[2][2]+$t.e[2]*Pt[1][2],i=or.e[0]*Pt[0][1]+or.e[1]*Pt[0][0],Math.abs(Rr[2]*Ur[1][2]-Rr[1]*Ur[2][2])>n+i)||(n=$t.e[0]*Pt[2][0]+$t.e[2]*Pt[0][0],i=or.e[1]*Pt[1][2]+or.e[2]*Pt[1][1],Math.abs(Rr[0]*Ur[2][0]-Rr[2]*Ur[0][0])>n+i)||(n=$t.e[0]*Pt[2][1]+$t.e[2]*Pt[0][1],i=or.e[0]*Pt[1][2]+or.e[2]*Pt[1][0],Math.abs(Rr[0]*Ur[2][1]-Rr[2]*Ur[0][1])>n+i)||(n=$t.e[0]*Pt[2][2]+$t.e[2]*Pt[0][2],i=or.e[0]*Pt[1][1]+or.e[1]*Pt[1][0],Math.abs(Rr[0]*Ur[2][2]-Rr[2]*Ur[0][2])>n+i)||(n=$t.e[0]*Pt[1][0]+$t.e[1]*Pt[0][0],i=or.e[1]*Pt[2][2]+or.e[2]*Pt[2][1],Math.abs(Rr[1]*Ur[0][0]-Rr[0]*Ur[1][0])>n+i)||(n=$t.e[0]*Pt[1][1]+$t.e[1]*Pt[0][1],i=or.e[0]*Pt[2][2]+or.e[2]*Pt[2][0],Math.abs(Rr[1]*Ur[0][1]-Rr[0]*Ur[1][1])>n+i)||(n=$t.e[0]*Pt[1][2]+$t.e[1]*Pt[0][2],i=or.e[0]*Pt[2][1]+or.e[1]*Pt[2][0],Math.abs(Rr[1]*Ur[0][2]-Rr[0]*Ur[1][2])>n+i))}intersectsPlane(e){this.rotation.extractBasis(Mh,Ch,Eh);const t=this.halfSize.x*Math.abs(e.normal.dot(Mh))+this.halfSize.y*Math.abs(e.normal.dot(Ch))+this.halfSize.z*Math.abs(e.normal.dot(Eh)),n=e.normal.dot(this.center)-e.constant;return Math.abs(n)<=t}intersectRay(e,t){return this.getSize(L5),D5.setFromCenterAndSize(In.set(0,0,0),L5),ww.setFromMatrix3(this.rotation),ww.setPosition(this.center),R5.copy(ww).invert(),N5.copy(e).applyMatrix4(R5),N5.intersectBox(D5,t)?t.applyMatrix4(ww):null}intersectsRay(e){return this.intersectRay(e,In)!==null}fromBox3(e){return e.getCenter(this.center),e.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(e){return e.center.equals(this.center)&&e.halfSize.equals(this.halfSize)&&e.rotation.equals(this.rotation)}applyMatrix4(e){const t=e.elements;let n=In.set(t[0],t[1],t[2]).length();const i=In.set(t[4],t[5],t[6]).length(),o=In.set(t[8],t[9],t[10]).length();e.determinant()<0&&(n=-n),Rs.setFromMatrix4(e);const s=1/n,a=1/i,l=1/o;return Rs.elements[0]*=s,Rs.elements[1]*=s,Rs.elements[2]*=s,Rs.elements[3]*=a,Rs.elements[4]*=a,Rs.elements[5]*=a,Rs.elements[6]*=l,Rs.elements[7]*=l,Rs.elements[8]*=l,this.rotation.multiply(Rs),this.halfSize.x*=n,this.halfSize.y*=i,this.halfSize.z*=o,In.setFromMatrixPosition(e),this.center.add(In),this}}const lne=new ok,jo={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class Wa{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const une=new Q0(-1,1,1,-1,0,1),sk=new zr;sk.setAttribute("position",new Vt([-1,3,0,-1,-1,0,3,-1,0],3));sk.setAttribute("uv",new Vt([0,2,0,0,2,0],2));class yd{constructor(e){this._mesh=new vi(sk,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,une)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class qf extends Wa{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof ar?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=fi.clone(e.uniforms),this.material=new ar({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new yd(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class I5 extends Wa{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const i=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let s,a;this.inverse?(s=0,a=1):(s=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),o.buffers.stencil.setFunc(i.ALWAYS,s,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(i.EQUAL,1,4294967295),o.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),o.buffers.stencil.setLocked(!0)}}class cne extends Wa{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class vT{constructor(e,t){if(this.renderer=e,t===void 0){const n=e.getSize(new be);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,t=new Ir(this._width*this._pixelRatio,this._height*this._pixelRatio),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],jo===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),qf===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new qf(jo),this.clock=new W4}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let i=0,o=this.passes.length;i<o;i++){const s=this.passes[i];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),s.needsSwap){if(n){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}I5!==void 0&&(s instanceof I5?n=!0:s instanceof cne&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new be);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new Q0(-1,1,1,-1,0,1);const U8=new zr;U8.setAttribute("position",new Vt([-1,3,0,-1,-1,0,3,-1,0],3));U8.setAttribute("uv",new Vt([0,2,0,0,2,0],2));const[hne,id]=De(1),ak=375,lk=667,uk=-5e-4,j8=5,H8=175,bw=5.7,Pm=.1,Ca=1e4,ck="https://unpkg.com/lingo3d-dummy@1.0.4/assets/",tf=ck+"ybot.fbx",W8="https://unpkg.com/lingo3d-textures@1.0.2/assets/",[dne,to]=De([ak,lk]),pne=([r,e])=>dne([Math.max(r,1),Math.max(e,1)]),[fne,Kf]=De(void 0);xt(()=>{const r=Zr();if(!r)return;const e=new vT(r);e.renderToScreen=!1,fne(e)},[Zr]);xt(()=>{const r=Kf();if(!r)return;const[e,t]=to();r.setSize(e,t),r.setPixelRatio(Math.min(id(),1))},[Kf,to,id]);const G8=[!1],Y8=r=>{r.userData.bloom=!0,G8[0]=!0},X8=r=>{r.userData.bloom=!1};let gT;const mne=new wm({color:0});let yT=[];const q8=r=>{for(const e of r)e.userData.bloom||!e.visible||(q8(e.children),e.material&&(yT.push([e.material,e]),e.material=mne))},vne=()=>{q8(rt.children),rt.background&&(gT=rt.background,rt.background=null)},gne=()=>{for(const[r,e]of yT)e.material=r;yT=[],gT&&(rt.background=gT)},yne=()=>{var r;vne(),(r=Kf())==null||r.render(),gne()},[_ne,_T]=De(1),[uwe,Zf]=De(!1),[wne,wT]=De(!1),[bne,Lx]=De(void 0),Ox={createButton(r,e){e&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');const t=document.createElement("button");function n(){let l=null;async function c(f){f.addEventListener("end",d),await r.xr.setSession(f),t.textContent="EXIT VR",l=f}function d(){l.removeEventListener("end",d),t.textContent="ENTER VR",l=null}t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR",t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){if(l===null){const f={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",f).then(c)}else l.end()}}function i(){t.style.display="",t.style.cursor="auto",t.style.left="calc(50% - 75px)",t.style.width="150px",t.onmouseenter=null,t.onmouseleave=null,t.onclick=null}function o(){i(),t.textContent="VR NOT SUPPORTED"}function s(l){i(),console.warn("Exception when trying to call xr.isSessionSupported",l),t.textContent="VR NOT ALLOWED"}function a(l){l.style.position="absolute",l.style.bottom="20px",l.style.padding="12px 6px",l.style.border="1px solid #fff",l.style.borderRadius="4px",l.style.background="rgba(0,0,0,0.1)",l.style.color="#fff",l.style.font="normal 13px sans-serif",l.style.textAlign="center",l.style.opacity="0.5",l.style.outline="none",l.style.zIndex="999"}if("xr"in navigator)return t.id="VRButton",t.style.display="none",a(t),navigator.xr.isSessionSupported("immersive-vr").then(function(l){l?n():o(),l&&Ox.xrSessionIsGranted&&t.click()}).catch(s),t;{const l=document.createElement("a");return window.isSecureContext===!1?(l.href=document.location.href.replace(/^http:/,"https:"),l.innerHTML="WEBXR NEEDS HTTPS"):(l.href="https://immersiveweb.dev/",l.innerHTML="WEBXR NOT AVAILABLE"),l.style.left="calc(50% - 90px)",l.style.width="180px",l.style.textDecoration="none",a(l),l}},xrSessionIsGranted:!1,registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{Ox.xrSessionIsGranted=!0})}}};Ox.registerSessionGrantedListener();const[xne,bT]=De(!1),[hk,fs]=De(0),FS=()=>hk(fs()+1),US=()=>hk(fs()-1),wa=document.createElement("div");Object.assign(wa.style,{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"});const wr=document.createElement("div");Object.assign(wr.style,{position:"absolute",left:"0px",top:"0px",width:"100%"});wa.appendChild(wr);Lx(r=>wr.style.height=r?"50%":"100%");const dk=[wr.getBoundingClientRect()],rE=r=>{y0(()=>{const e=()=>{dk[0]=wr.getBoundingClientRect(),pne(r===document.body?[window.innerWidth,window.innerHeight]:[r.clientWidth,r.clientHeight])};e();const t=Qs(e,100,"both");window.addEventListener("resize",t);const n=fs(t);return()=>{window.removeEventListener("resize",e),n.cancel()}},[r])};xt(()=>{const r=bT();if(r){if(typeof r=="string"){const e=document.querySelector(r);return e?(e.prepend(wa),rE(e),()=>{e.removeChild(wa)}):void 0}return r===!0?(document.body.prepend(wa),rE(document.body),()=>{document.body.removeChild(wa)}):(r.prepend(wa),rE(r),()=>{r.removeChild(wa)})}},[bT]);xt(()=>{const r=Zr();if(!r)return;const e=r.domElement;return wa.prepend(e),Object.assign(e.style,{position:"absolute",left:"0px",top:"0px"}),()=>{wa.removeChild(e)}},[Zr]);xt(()=>{const r=Zr();if(!r)return;const[e,t]=to();r.setSize(e,t),r.setPixelRatio(Math.min(id(),devicePixelRatio))},[Zr,to,id]);xt(()=>{const r=Zr();!r||(r.physicallyCorrectLights=wT())},[Zr,wT]);xt(()=>{const r=Zr();if(!r)return;const e=_T();r.toneMapping=e!==1?VB:ka,r.toneMappingExposure=e},[_T,Zr]);xt(()=>{if(Zf()!=="webxr")return;const r=Zr();if(!r)return;r.xr.enabled=!0;const e=Ox.createButton(r);return wr.appendChild(e),e.ontouchstart=()=>{var t;return(t=e.onclick)==null?void 0:t.call(e,new MouseEvent("click"))},()=>{r.xr.enabled=!1,wr.removeChild(e)}},[Zf,Zr]);const Ns=new Fn(75,1,Pm,Ca),qr=new Fn(75,1,Pm,Ca),[pk,od]=De([qr]),Sne=vm(pk,od),V5=gm(pk,od),[Mne,Cne]=De(void 0),xw=new WeakMap,vc=r=>{if(r.parent===rt)return r.quaternion.clone();if(xw.has(r))return xw.get(r).clone();const e=r.getWorldQuaternion(new $i);return xw.set(r,e.clone()),Em(()=>xw.delete(r),!0),e},sd=r=>Math.min(r*ga[0],1),[Lb,Ye]=De(qr),xT=r=>{const[e,t]=to(),n=e/t;return r instanceof Fn&&!Zf()?(r.aspect=n,r.updateProjectionMatrix()):r instanceof Q0&&([r.left,r.right,r.top,r.bottom]=[n*bw*-.5,n*bw*.5,bw*.5,bw*-.5],r.updateProjectionMatrix()),[e,t,n]},z5=(r,e,t)=>r+(e-r)*t;xt(()=>{const r=Ye()===Ns?Ns:Cne(),e=Bf(od()),t=e.userData.transition;if(!r||!t||r===e){Lb(e);return}Lb(Ns);const n=vr(r),i=vc(r);Ns.zoom=r.zoom,Ns.fov=r.fov,xT(Ns);let o=0;const s=typeof t=="number"?t:1/0,a=Or(()=>{const l=vr(e),c=vc(e);Ns.position.lerpVectors(n,l,o),Ns.quaternion.slerpQuaternions(i,c,o),Ns.zoom=z5(r.zoom,e.zoom,o),Ns.fov=z5(r.fov,e.fov,o),Ns.updateProjectionMatrix(),o=Math.min((1-o)*sd(.1),s)+o,!(o<.9999)&&(Lb(e),xT(e),a.cancel())});return()=>{a.cancel()}},[od]);const Sw=new WeakMap,B5=r=>{if(Sw.has(r))return Sw.get(r);const e=ry(r),t=Ye();e.project(t);const n=(e.x*.5+.5)*wr.clientWidth,i=(e.y*-.5+.5)*wr.clientHeight,o={x:n,y:i};return Sw.set(r,o),Em(()=>Sw.delete(r),!0),o};class Qu extends Wa{constructor(e,t,n,i){super(),this.renderScene=t,this.renderCamera=n,this.selectedObjects=i!==void 0?i:[],this.visibleEdgeColor=new Je(1,1,1),this.hiddenEdgeColor=new Je(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=e!==void 0?new be(e.x,e.y):new be(256,256);const o=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Ir(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new AS,this.depthMaterial.side=Gl,this.depthMaterial.depthPacking=ES,this.depthMaterial.blending=Cn,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=Gl,this.prepareMaskMaterial.fragmentShader=d(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Ir(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Ir(o,s),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Ir(o,s),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Ir(Math.round(o/2),Math.round(s/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Ir(o,s),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Ir(Math.round(o/2),Math.round(s/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const a=4,l=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(o,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(l),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(o/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=l,this.overlayMaterial=this.getOverlayMaterial(),jo===void 0&&console.error("THREE.OutlinePass relies on CopyShader");const c=jo;this.copyUniforms=fi.clone(c.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new ar({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:Cn,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Je,this.oldClearAlpha=1,this.fsQuad=new yd(null),this.tempPulseColor1=new Je,this.tempPulseColor2=new Je,this.textureMatrix=new Ct;function d(f,m){const g=m.isPerspectiveCamera?"perspective":"orthographic";return f.replace(/DEPTH_TO_VIEW_Z/g,g+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let n=Math.round(e/this.downSampleRatio),i=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,i),this.renderTargetBlurBuffer1.setSize(n,i),this.renderTargetEdgeBuffer1.setSize(n,i),this.separableBlurMaterial1.uniforms.texSize.value.set(n,i),n=Math.round(n/2),i=Math.round(i/2),this.renderTargetBlurBuffer2.setSize(n,i),this.renderTargetEdgeBuffer2.setSize(n,i),this.separableBlurMaterial2.uniforms.texSize.value.set(n,i)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function n(i){i.isMesh&&(e===!0?i.visible=t.get(i):(t.set(i,i.visible),i.visible=e))}for(let i=0;i<this.selectedObjects.length;i++)this.selectedObjects[i].traverse(n)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,n=[];function i(s){s.isMesh&&n.push(s)}for(let s=0;s<this.selectedObjects.length;s++)this.selectedObjects[s].traverse(i);function o(s){if(s.isMesh||s.isSprite){let a=!1;for(let l=0;l<n.length;l++)if(n[l].id===s.id){a=!0;break}if(a===!1){const l=s.visible;(e===!1||t.get(s)===!0)&&(s.visible=e),t.set(s,l)}}else(s.isPoints||s.isLine)&&(e===!0?s.visible=t.get(s):(t.set(s,s.visible),s.visible=e))}this.renderScene.traverse(o)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,n,i,o){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,o&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const l=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Qu.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Qu.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Qu.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Qu.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,o&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=n.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new ar({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new be(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;
					vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new ar({uniforms:{maskTexture:{value:null},texSize:{value:new be(.5,.5)},visibleEdgeColor:{value:new j(1,1,1)},hiddenEdgeColor:{value:new j(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new ar({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new be(.5,.5)},direction:{value:new be(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new ar({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:xx,depthTest:!1,depthWrite:!1,transparent:!0})}}Qu.BlurDirectionX=new be(1,0);Qu.BlurDirectionY=new be(0,1);const[Ene,ST]=De("#ffffff"),[Pne,MT]=De(void 0),[Tne,CT]=De(void 0),[Ane,K8]=De(0),[kne,Z8]=De(3),[Lne,J8]=De(1),Q8=[!1],fk=[],$8=r=>{r.userData.outline||(r.userData.outline=!0,fk.push(r),Q8[0]=!0)},eF=r=>{!r.userData.outline||(r.userData.outline=!1,bB(fk,r))},La=new Qu(new be,rt,Ye(),fk);Ye(r=>La.renderCamera=r);K8(r=>La.pulsePeriod=r*.001);Z8(r=>La.edgeStrength=r);J8(r=>La.edgeThickness=r);xt(()=>{var r;const e=ST(),t=(r=MT())!=null?r:e;La.visibleEdgeColor=new Je(e),La.hiddenEdgeColor=new Je(t)},[ST,MT]);xt(()=>{const r=CT();if(r)return La.patternTexture=Li(r),La.usePatternTexture=!0,()=>{La.usePatternTexture=!1}},[CT]);const One=["name","blending","side","vertexColors","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","alphaToCoverage","premultipliedAlpha","visible","toneMapped"],tF=(r,e)=>{for(const i of One){const o=r[i];o!=null&&(e[i]=o)}const t=r.clippingPlanes;let n=null;if(t){const i=t.length;n=new Array(i);for(let o=0;o!==i;++o)n[o]=t[o].clone()}e.clippingPlanes=n},Dne=["map","gradientMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveMap","emissiveIntensity","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","alphaMap","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","fog"],Rne=(r,e)=>{tF(r,e);for(const t of Dne){const n=r[t];n!=null&&(e[t]=n)}r.color&&e.color.copy(r.color),r.emissive&&e.emissive.copy(r.emissive),r.normalScale&&e.normalScale.copy(r.normalScale)},Nne=(r,e)=>r.clone().multiply(e.clone().invert()),Mw=new WeakMap,rF=r=>{if(Mw.has(r))return Mw.get(r).clone();const e=r.getWorldDirection(new j);return Mw.set(r,e.clone()),Em(()=>Mw.delete(r),!0),e},nF=new Set,iF=new Set,oF=new Set,sF=new Set,aF=new Set,lF=new Set;class ET{constructor(e,t,n,i,o,s,a){F(this,"clientX"),F(this,"clientY"),F(this,"xNorm"),F(this,"yNorm"),F(this,"point"),F(this,"distance"),F(this,"target"),this.clientX=e,this.clientY=t,this.xNorm=n,this.yNorm=i,this.point=o,this.distance=s,this.target=a}}const Ine={...Cc,onClick:Function,onRightClick:Function,onMouseMove:Function,onMouseDown:Function,onMouseUp:Function,onMousePress:Function},Vne={...Ec,onClick:void 0,onRightClick:void 0,onMouseMove:void 0,onMouseDown:void 0,onMouseUp:void 0,onMousePress:void 0},[cwe,zne]=De(void 0),Bne=r=>{const e=dk[0],t=r.clientX-e.x,n=r.clientY-e.y,i=500;if(zne())return new ET(t,n,0,0,new Xh(0,0,0),i,void 0);const o=t/e.width*2-1,s=-(n/e.height)*2+1,a=Ye();un.set(o,s,.5),un.unproject(a);const l=vr(a);un.sub(l).normalize();const c=l.add(un.multiplyScalar(i*Wt));return new ET(t,n,o,s,Xs(c),i,void 0)},[Uu,hs]=De("play");xt(()=>{Uu(Ye()===qr&&fs()?"translate":"play")},[Ye,fs]);const[Fne,Vi]=De(!1);hs(r=>Fne(r!=="play"));const ri=new PB;let PT=0,TT=0,AT=0,kT=!1;wr.addEventListener("contextmenu",r=>{r.preventDefault(),kT=!0});wr.addEventListener("touchstart",r=>{r.preventDefault()});ri.on("down",r=>{PT=Date.now(),TT=r.clientX,AT=r.clientY});ri.on("up",r=>{const e=Date.now(),t=e-PT,n=Math.abs(r.clientX-TT),i=Math.abs(r.clientY-AT);PT=e,TT=r.clientX,AT=r.clientY,t<300&&n<5&&i<5&&ri.emit(kT?"rightClick":"click",r),kT=!1});const mk=xB(Bne,0,"leading");wr.addEventListener("pointermove",r=>{ri.emit("move",mk(r))});let LT=!1;wr.addEventListener("pointerdown",r=>{LT=!0;const e=mk(r);ri.emit("down",e),ri.emit("move",e)});const vk=r=>{LT&&ri.emit("up",mk(r)),LT=!1};wr.addEventListener("pointerup",vk);wr.addEventListener("pointercancel",vk);wr.addEventListener("pointerleave",vk);class Ig extends Kl{constructor(){super(),F(this,"onClick"),F(this,"onRightClick"),F(this,"onMouseMove"),F(this,"onMouseDown"),F(this,"onMouseUp"),F(this,"onMousePress");let e={clientX:0,clientY:0};const[t,n]=De(!1);this.createEffect(()=>{const i=this.onMousePress;if(!n()||!i)return;const o=Or(()=>i(e));return()=>{o.cancel()}},[n]),this.createEffect(()=>{if(Vi()||fs()&&Ye()===qr)return;const i=ri.on("move",c=>{var d;(d=this.onMouseMove)==null||d.call(this,c),e=c}),o=ri.on("click",c=>{var d;(d=this.onClick)==null||d.call(this,c),e=c}),s=ri.on("rightClick",c=>{var d;(d=this.onRightClick)==null||d.call(this,c),e=c}),a=ri.on("down",c=>{var d;(d=this.onMouseDown)==null||d.call(this,c),e=c,t(!0)}),l=ri.on("up",c=>{var d;(d=this.onMouseUp)==null||d.call(this,c),e=c,t(!1)});return()=>{i.cancel(),o.cancel(),s.cancel(),a.cancel(),l.cancel()}},[Vi,fs,Ye])}}F(Ig,"componentName","mouse"),F(Ig,"defaults",Vne),F(Ig,"schema",Ine);const Une=new Ig;_n.delete(Une);const F5=new Ere,jne=(r,e,t)=>(F5.setFromCamera({x:r,y:e},Ye()),F5.intersectObjects([...t])[0]),ju=(r,e,t)=>ri.on(r,n=>{if(!e.size)return;const i=jne(n.xNorm,n.yNorm,e);if(!i)return;const o=Xs(i.point),s=i.distance*Pn;t(i.object.userData.manager,new ET(n.clientX,n.clientY,n.xNorm,n.yNorm,o,s,i.object.userData.manager))}),Hne=()=>{y0(()=>{if(Vi())return;X4(),Yf(void 0);const r=ju("click",nF,(c,d)=>{var f;return(f=c.onClick)==null?void 0:f.call(c,d)}),e=ju("down",iF,(c,d)=>{var f;return(f=c.onMouseDown)==null?void 0:f.call(c,d)}),t=ju("up",oF,(c,d)=>{var f;return(f=c.onMouseUp)==null?void 0:f.call(c,d)});let n=new Set,i=new Set;const o=ju("move",sF,(c,d)=>{n.add(c),c.outerObject3d.userData.eMove=d}),s=ju("move",aF,(c,d)=>{n.add(c),c.outerObject3d.userData.eMove=d}),a=ju("move",lF,(c,d)=>{n.add(c),c.outerObject3d.userData.eMove=d}),l=ri.on("move",()=>{var c,d,f;for(const m of n)i.has(m)||(c=m.onMouseOver)==null||c.call(m,m.outerObject3d.userData.eMove),(d=m.onMouseMove)==null||d.call(m,m.outerObject3d.userData.eMove);for(const m of i)n.has(m)||(f=m.onMouseOut)==null||f.call(m,m.outerObject3d.userData.eMove);i=n,n=new Set});return()=>{r.cancel(),e.cancel(),t.cancel(),o.cancel(),s.cancel(),a.cancel(),l.cancel()}},[Vi])},[uF,cF]=zi(),[Wne,Pc]=zi(),cn=Qs((r,e)=>!T8()&&Wne({target:r,rightClick:e}),0,"trailing");xt(()=>{const r=hn();if(!r)return;const e=Cm(()=>{!r.outerObject3d.parent&&cn()});return()=>{e.cancel()}},[hn]);const[Gne,ms]=De(!1),[gk,jS]=De([new Set]),Yne=r=>{const[e]=jS();e.add(r),gk([e]),uF()},Xne=()=>{const[r]=jS();r.clear(),gk([r]),uF()},Vg=new Set,vf=Qs(r=>{const[e]=jS();if(Vg.clear(),r){for(const t of r){const{manager:n}=t.userData;n&&!e.has(n)&&Vg.add(n.nativeObject3d)}return}rt.traverse(t=>{const{manager:n}=t.userData;n&&!e.has(n)&&Vg.add(n.nativeObject3d)})},0,"trailing");let Pp=[];const qne=()=>{y0(()=>{if(!Vi()||ms()||hs()!=="path")return;vf(Pp);const r=Cm(()=>vf(Pp)),e=cF(()=>{vf(Pp),cn()}),t=new lr;Promise.all([Promise.resolve().then(()=>boe),yn(()=>import("./Curve.31af27e8.50309826.js"),[])]).then(([{default:s},{default:a}])=>{if(t.done)return;const l=new a;t.then(()=>l.dispose()),t.watch(ri.on("click",c=>{setTimeout(()=>{if(t.done||hn())return;const d=new s;d.scale=.1,d.placeAt(c.point),d.name="point"+Pp.length,Pp.push(d.outerObject3d),cn(d),l.addPoint(Xs(d.outerObject3d.position))})}))});const n=ri.on("click",()=>cn()),i=ju("click",Vg,s=>cn(s)),o=Pc(({target:s})=>{X4(),Yf(s)});return()=>{t.cancel(),r.cancel(),e.cancel(),t.cancel(),n.cancel(),i.cancel(),o.cancel(),hs()!=="path"&&(Pp=[])}},[Vi,ms,hs])},[nE,yk]=De(!1),Kne=()=>{const r=yk(),e=tK(!0);y0(()=>{!r&&(e.current=!0)},[r]),y0(()=>{const t=hs();if(!Vi()||ms()||t!=="rotate"&&t!=="scale"&&t!=="select"&&t!=="translate")return;vf();const n=Cm(()=>vf()),i=cF(()=>{vf(),cn()}),o=ri.on("click",()=>cn());let s=!1;const a=ri.on("rightClick",()=>{s=!0,queueMicrotask(()=>{!s||(s=!1,cn(void 0,!0))})}),l=ju(["click","rightClick"],Vg,d=>{cn(d,s),s=!1}),c=Pc(({target:d,rightClick:f})=>{if(r){if(!nd(d)||f)return;if(e.current){const m=hn();nd(m)&&T5(m)}e.current=!1,Zs().includes(d)?Rre(d):T5(d);return}X4(),Yf(f?d:d===hn()?void 0:d)});return()=>{n.cancel(),i.cancel(),o.cancel(),a.cancel(),l.cancel(),c.cancel()}},[Vi,ms,hs,r])};xt(()=>{Hne(),qne(),Kne()},[Vi,hs,ms,yk]);const iE=new ok,Wv=new ok,Zne=xB(()=>{const r=Ye();z8.setFromProjectionMatrix(ene.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse))},200,"leading"),oE=(r,e,t)=>{var n,i;const o=(i=(n=r.userData)[e])!=null?i:n[e]=r.material[e];r.material[e]=t===void 0?o:Math.max(o||0,.25)*t},Jne=(r,e,t)=>{var n,i;const o=(i=(n=r.userData)[e])!=null?i:n[e]=r.material[e];r.material[e]=t===void 0?o:t},Qne=(r,e,t)=>{var n,i;const o=(i=(n=r.userData)[e])!=null?i:n[e]=r.material[e];r.material[e]=t===void 0?o:t},ac=new Map,$ne=()=>new Set;class hF extends Kl{constructor(){super(...arguments),F(this,"_id"),F(this,"_onClick"),F(this,"_onMouseDown"),F(this,"_onMouseUp"),F(this,"_onMouseOver"),F(this,"_onMouseOut"),F(this,"_onMouseMove"),F(this,"_visible"),F(this,"_castShadow"),F(this,"_receiveShadow"),F(this,"_metalnessFactor"),F(this,"_roughnessFactor"),F(this,"_opacityFactor"),F(this,"_adjustColor"),F(this,"_toon"),F(this,"onLookToEnd")}dispose(){return this.done?this:(super.dispose(),this._id!==void 0&&ac.get(this._id).delete(this),this)}get id(){return this._id}set id(e){this._id!==void 0&&ac.get(this._id).delete(this),this._id=e,e!==void 0&&Fa(ac,e,$ne).add(this)}addToRaycastSet(e){return e.add(this.nativeObject3d),new lr(()=>e.delete(this.nativeObject3d))}get onClick(){return this._onClick}set onClick(e){this._onClick=e,this.cancelHandle("onClick",e&&(()=>this.addToRaycastSet(nF)))}get onMouseDown(){return this._onMouseDown}set onMouseDown(e){this._onMouseDown=e,this.cancelHandle("onMouseDown",e&&(()=>this.addToRaycastSet(iF)))}get onMouseUp(){return this._onMouseUp}set onMouseUp(e){this._onMouseUp=e,this.cancelHandle("onMouseUp",e&&(()=>this.addToRaycastSet(oF)))}get onMouseOver(){return this._onMouseOver}set onMouseOver(e){this._onMouseOver=e,this.cancelHandle("onMouseOver",e&&(()=>this.addToRaycastSet(sF)))}get onMouseOut(){return this._onMouseOut}set onMouseOut(e){this._onMouseOut=e,this.cancelHandle("onMouseOut",e&&(()=>this.addToRaycastSet(aF)))}get onMouseMove(){return this._onMouseMove}set onMouseMove(e){this._onMouseMove=e,this.cancelHandle("onMouseMove",e&&(()=>this.addToRaycastSet(lF)))}get name(){return this.outerObject3d.name}set name(e){this.outerObject3d.name=sr.sanitizeNodeName(e)}getRay(){return V8.set(vr(this.nativeObject3d),rF(this.nativeObject3d))}pointAt(e){return Xs(this.getRay().at(e*Wt,un))}rayIntersectsAt(e,t){if(this.done||e.done||this===e)return;Wv.set(vr(e.nativeObject3d),I8,new mi().setFromMatrix4(e.nativeObject3d.matrixWorld));const n=Wv.intersectRay(this.getRay(),un);if(n){if(t){const{x:i,y:o,z:s}=vr(this.nativeObject3d);if(q4(n.x,n.y,n.z,i,o,s)*Pn>t)return}return Xs(n)}}rayIntersects(e){return!!this.rayIntersectsAt(e)}intersects(e){return this.done||e.done||this===e?!1:(iE.set(vr(this.nativeObject3d),dT.clone(),new mi),iE.applyMatrix4(this.nativeObject3d.matrixWorld),Wv.set(vr(e.nativeObject3d),dT.clone(),new mi),Wv.applyMatrix4(e.nativeObject3d.matrixWorld),iE.intersectsOBB(Wv,0))}get clientX(){return B5(this.nativeObject3d).x}get clientY(){return B5(this.nativeObject3d).y}get bloom(){return!!this.outerObject3d.userData.bloom}set bloom(e){e&&Y8(this.outerObject3d),this.cancelHandle("bloom",e&&(()=>new lr(()=>X8(this.outerObject3d))))}get outline(){return!!this.nativeObject3d.userData.outline}set outline(e){e&&$8(this.nativeObject3d),this.cancelHandle("outline",e&&(()=>new lr(()=>eF(this.nativeObject3d))))}get visible(){return this._visible!==!1}set visible(e){this._visible=e,this.outerObject3d.visible=e}get frustumCulled(){return this.outerObject3d.frustumCulled}set frustumCulled(e){this.outerObject3d.frustumCulled=e}get castShadow(){var e;return(e=this._castShadow)!=null?e:!0}set castShadow(e){this._castShadow=e,this.outerObject3d.traverse(t=>t.castShadow=e)}get receiveShadow(){var e;return(e=this._receiveShadow)!=null?e:!0}set receiveShadow(e){this._receiveShadow=e,this.outerObject3d.traverse(t=>t.receiveShadow=e)}refreshFactors(){this.cancelHandle("refreshFactors",()=>{const e=new lr;return queueMicrotask(()=>{if(e.done)return;const{_toon:t,_metalnessFactor:n,_roughnessFactor:i,_opacityFactor:o,_adjustColor:s}=this;this.outerObject3d.traverse(a=>{let{material:l}=a;!l||(Array.isArray(l)&&(l=l[0]),t&&(a.material=new zte,Rne(l,a.material),e.then(()=>{a.material.dispose(),a.material=l})),n!==void 0&&oE(a,"metalness",n!==0?n:void 0),i!==void 0&&oE(a,"roughness",i!==1?i:void 0),o!==void 0&&(oE(a,"opacity",o),Jne(a,"transparent",o<=1?!0:void 0)),s!==void 0&&Qne(a,"color",s!=="#ffffff"?new Je(s):void 0))})}),e})}get metalnessFactor(){return this._metalnessFactor}set metalnessFactor(e){this._metalnessFactor=e,this.refreshFactors()}get roughnessFactor(){return this._roughnessFactor}set roughnessFactor(e){this._roughnessFactor=e,this.refreshFactors()}get opacityFactor(){return this._opacityFactor}set opacityFactor(e){this._opacityFactor=e,this.refreshFactors()}get adjustColor(){return this._adjustColor}set adjustColor(e){this._adjustColor=e,this.refreshFactors()}get toon(){var e;return(e=this._toon)!=null?e:!1}set toon(e){this._toon=e,this.refreshFactors()}get frustumVisible(){return Zne(),z8.containsPoint(ry(this.nativeObject3d))}lookAt(e,t,n){if(typeof e=="number"){this.lookAt(new Xh(e,t===void 0?this.outerObject3d.position.y*Pn:t,n));return}"outerObject3d"in e?this.outerObject3d.lookAt(vr(e.nativeObject3d)):this.outerObject3d.lookAt(nk(e))}lookTo(e,t,n,i){if(typeof e=="number"){this.lookTo(new Xh(e,t===void 0?this.outerObject3d.position.y*Pn:t,n),i);return}const{quaternion:o}=this.outerObject3d,s=o.clone();this.lookAt(e);const a=o.clone();o.copy(s),this.cancelHandle("lookTo",()=>Or(()=>{var l;o.slerp(a,sd(t));const{x:c,y:d,z:f}=Nne(o,a);Math.abs(c)+Math.abs(d)+Math.abs(f)<.001&&(this.cancelHandle("lookTo",void 0),(l=this.onLookToEnd)==null||l.call(this),o.copy(a))}))}getWorldPosition(){return Xs(vr(this.nativeObject3d))}}const[eie,gc]=De(!1),tie=new WeakMap,U5=new WeakMap,sE=new WeakMap;class P0 extends EB{constructor(e,t){super(),F(this,"clip"),F(this,"name"),F(this,"mixer"),F(this,"action"),this.mixer=Fa(tie,t,()=>new Cre(t)),typeof e=="string"?this.name=e:(this.name=e.name,this.loadClip(e))}retarget(e){const t=this.clip.clone(),n=e.name+".";return t.tracks=t.tracks.filter(i=>i.name.startsWith(n)),new P0(t,e)}dispose(){return this.done?this:(super.dispose(),this.stop(),this)}get duration(){var e,t;return(t=(e=this.clip)==null?void 0:e.duration)!=null?t:0}loadClip(e){this.clip=e,this.action=this.mixer.clipAction(e)}setTracks(e){const t=Object.entries(e).map(([n,i])=>new C0("."+n,Object.keys(i).map(o=>Number(o)),Object.values(i)));this.clip&&this.mixer.uncacheClip(this.clip),this.loadClip(new cT(this.name,-1,t))}play({crossFade:e=.25,repeat:t=!0,onFinish:n}={}){var i,o;const[s,a]=(i=U5.get(this.mixer))!=null?i:[];if((s==null?void 0:s.isRunning())&&this.action===s){t!==a&&s.setLoop(t?tT:eT,1/0);return}(o=sE.get(this.mixer))==null||o.cancel();const l=this.watch(Or(()=>this.mixer.update(BS[0])));sE.set(this.mixer,l);const{action:c}=this;if(!c)return;s&&e?(c.time=0,c.enabled=!0,c.crossFadeFrom(s,e,!0)):this.mixer.stopAllAction(),U5.set(this.mixer,[c,t]),c.setLoop(t?tT:eT,1/0),c.clampWhenFinished=!0;const d=()=>n==null?void 0:n();this.mixer.addEventListener("finished",d),l.then(()=>this.mixer.removeEventListener("finished",d)),c.paused&&c.stop(),c.play()}stop(){var e;this.action&&(this.action.paused=!0),(e=sE.get(this.mixer))==null||e.cancel()}getPaused(){var e;return(e=this.action)==null?void 0:e.paused}setPaused(e){this.action&&(this.action.paused=e)}update(e){this.mixer.time=0,this.action&&(this.action.time=0),this.mixer.update(e)}}const rie=Qs(r=>{const e=Object.entries(r);let t=0;for(const[,{length:o}]of e)o>t&&(t=o);const n=1e3*.001/t,i={};for(const[o,s]of e)i[o]=Object.fromEntries(s.map((a,l)=>[(l*n).toFixed(2),a]));return i},0,"trailingPromise");class nie extends hF{constructor(){super(...arguments),F(this,"animationManagers"),F(this,"animationManager"),F(this,"_animationPaused"),F(this,"animationRepeat"),F(this,"onAnimationFinish"),F(this,"serializeAnimation"),F(this,"_animation")}get animations(){var e;return(e=this.animationManagers)!=null?e:this.animationManagers={}}set animations(e){this.animationManagers=e}createAnimation(e){if(e in this.animations){const n=this.animations[e];if(typeof n!="string")return n}const t=this.watch(new P0(e,this));return this.animations[e]=t,t}buildAnimation(e){rie(e).then(t=>{const n="lingo3d-animation";this.createAnimation(n).setTracks(t),this.playAnimation(n)})}makeAnimationProxy(e){return new Proxy(e,{get:(t,n)=>t[n],set:(t,n,i)=>(t[n]=i,this.buildAnimation(t),!0)})}get animationPaused(){return this._animationPaused}set animationPaused(e){var t;this._animationPaused=e,(t=this.animationManager)==null||t.setPaused(!!e)}playAnimation(e,t){const n=this.animationManager=typeof e=="string"?this.animations[e]:Object.values(this.animations)[e!=null?e:0];!n||(n.play(t),this._animationPaused&&n.setPaused(!0))}stopAnimation(){var e;(e=this.animationManager)==null||e.stop()}setAnimation(e,t){if(this._animation=e,typeof e=="string"||typeof e=="number"){this.serializeAnimation=e,this.playAnimation(e,t);return}if(typeof e=="boolean"){e?this.playAnimation(void 0,t):this.stopAnimation();return}if(!e){this.stopAnimation();return}this._animation=this.makeAnimationProxy(e),this.buildAnimation(e)}get animation(){return this._animation}set animation(e){if(Array.isArray(e)){let t=0;const n={onFinish:()=>{var i;if(++t>=e.length){if(this.animationRepeat===!1){(i=this.onAnimationFinish)==null||i.call(this);return}t=0}this.setAnimation(e[t],n)},repeat:!1};this.setAnimation(e[0],n);return}this.queueMicrotask(()=>this.setAnimation(e,{repeat:this.animationRepeat,onFinish:this.onAnimationFinish}))}}const Cw=new WeakMap,Zl=r=>{if(Cw.has(r))return Cw.get(r).clone();const e=r.nativeObject3d.scale.clone().multiply(r.outerObject3d.scale);return Cw.set(r,e.clone()),Em(()=>Cw.delete(r),!0),e},j5=new WeakMap,H5=(r,e)=>{const t=j5.get(r);if(t)return t;const n=q4(r.x,r.y,r.z,e.x*Pn,e.y*Pn,e.z*Pn);return j5.set(r,n),n};class _d extends nie{constructor(){super(...arguments),F(this,"onIntersectState"),F(this,"onIntersectOutState"),F(this,"intersectIdsState"),F(this,"onMoveToEnd")}getRayIntersectionsAt(e,t){var n;const i=[];for(const s of(n=ac.get(e))!=null?n:[]){if(s===this)continue;const a=this.rayIntersectsAt(s,t);a&&i.push([s,a])}const o=vr(this.nativeObject3d);return i.sort((s,a)=>H5(s[1],o)-H5(a[1],o))}getRayIntersections(e,t){return this.getRayIntersectionsAt(e,t).map(n=>n[0])}listenToRayIntersection(e,t,n){return this.beforeRender(()=>{for(const[i,o]of this.getRayIntersectionsAt(e,n))t(i,o)})}getIntersections(e){var t;const n=[];for(const i of(t=ac.get(e))!=null?t:[])i!==this&&this.intersects(i)&&n.push(i);return n}listenToIntersection(e,t,n){let i=[];return this.beforeRender(()=>{const o=this.getIntersections(e);if(t)for(const s of o)i.includes(s)||t(s);if(n)for(const s of i)o.includes(s)||n(s);i=o})}initIntersect(){this.onIntersectState||(this.onIntersectState=new ht(void 0),this.onIntersectOutState=new ht(void 0),this.intersectIdsState=new ht(void 0),this.createEffect(()=>{const{onIntersect:e,onIntersectOut:t,intersectIds:n}=this;if(!n||!e&&!t)return;const i=[];for(const o of n)i.push(this.listenToIntersection(o,e,t));return()=>{for(const o of i)o.cancel()}},[this.onIntersectState.get,this.onIntersectOutState.get,this.intersectIdsState.get]))}get onIntersect(){var e;return(e=this.onIntersectState)==null?void 0:e.get()}set onIntersect(e){var t;this.initIntersect(),(t=this.onIntersectState)==null||t.set(e)}get onIntersectOut(){var e;return(e=this.onIntersectOutState)==null?void 0:e.get()}set onIntersectOut(e){var t;this.initIntersect(),(t=this.onIntersectOutState)==null||t.set(e)}get intersectIds(){var e;return(e=this.intersectIdsState)==null?void 0:e.get()}set intersectIds(e){var t;this.initIntersect(),(t=this.intersectIdsState)==null||t.set(e)}get scaleX(){return this.outerObject3d.scale.x}set scaleX(e){this.outerObject3d.scale.x=e}get scaleY(){return this.outerObject3d.scale.y}set scaleY(e){this.outerObject3d.scale.y=e}get scaleZ(){return this.outerObject3d.scale.z}set scaleZ(e){this.outerObject3d.scale.z=e}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e,this.scaleZ=e}get rotationX(){return this.outerObject3d.rotation.x*qh}set rotationX(e){this.outerObject3d.rotation.x=e*ti}get rotationY(){return this.outerObject3d.rotation.y*qh}set rotationY(e){this.outerObject3d.rotation.y=e*ti}get rotationZ(){return this.outerObject3d.rotation.z*qh}set rotationZ(e){this.outerObject3d.rotation.z=e*ti}get rotation(){return this.rotationZ}set rotation(e){this.rotationZ=e}translateX(e){this.outerObject3d.translateX(e*Wt*ga[0])}translateY(e){this.outerObject3d.translateY(e*Wt*ga[0])}translateZ(e){this.outerObject3d.translateZ(e*Wt*ga[0])}placeAt(e){var t;if(typeof e=="string"){const[n]=(t=ac.get(e))!=null?t:[void 0];if(!n)return;e=n}if("outerObject3d"in e){"isSpawnPoint"in e&&(e.object3d.position.y=Zl(this).y*.5),this.outerObject3d.position.copy(ry(e.nativeObject3d)),this.outerObject3d.quaternion.copy(vc(e.outerObject3d));return}this.outerObject3d.position.copy(nk(e))}moveForward(e){gc()?this.translateZ(-e):(un.setFromMatrixColumn(this.outerObject3d.matrix,0),un.crossVectors(this.outerObject3d.up,un),this.outerObject3d.position.addScaledVector(un,e*Wt*ga[0]))}moveRight(e){gc()?this.translateX(e):(un.setFromMatrixColumn(this.outerObject3d.matrix,0),this.outerObject3d.position.addScaledVector(un,e*Wt*ga[0]))}lerpTo(e,t,n,i,o){const s=new j(this.x,this.y,this.z),a=new j(e,t,n);this.cancelHandle("lerpTo",()=>Or(()=>{var l;const{x:c,y:d,z:f}=s.lerp(a,sd(i));Math.abs(this.x-c)<.1&&Math.abs(this.y-d)<.1&&Math.abs(this.z-f)<.1&&(this.cancelHandle("lerpTo",void 0),(l=this.onMoveToEnd)==null||l.call(this)),this.x=c,this.y=d,this.z=f,o==null||o()}))}moveTo(e,t,n,i,o){const{x:s,y:a,z:l}=new j(e-this.x,t===void 0?0:t-this.y,n-this.z).normalize(),c=i*s,d=i*a,f=i*l;let m=1/0;this.cancelHandle("lerpTo",()=>Or(()=>{var g;this.x+=c*ga[0],t!==void 0&&(this.y+=d*ga[0]),this.z+=f*ga[0];let b=q4(this.x,t===void 0?0:this.y,this.z,e,t===void 0?0:t,n);b>=m&&(this.cancelHandle("lerpTo",void 0),(g=this.onMoveToEnd)==null||g.call(this),this.x=e,t!==void 0&&(this.y=t),this.z=n),m=b,o==null||o(t)}))}}q0(_d,[ik]);class Ll extends _d{constructor(e){var t;super(e),F(this,"material"),F(this,"model"),F(this,"managerSet"),this.material=(t=e.material)!=null?t:e.material=kx,_n.delete(this)}retargetAnimations(){var e;if((e=this.model)!=null&&e.animationManagers){for(const t of Object.values(this.model.animationManagers))this.animations[t.name]=this.watch(t.retarget(this.nativeObject3d));this.model=void 0}}get animation(){return super.animation}set animation(e){this.retargetAnimations(),super.animation=e}addToRaycastSet(e){return this.managerSet||(this.managerSet=!0,this.nativeObject3d.traverse(t=>t.userData.manager=this)),super.addToRaycastSet(e)}}F(Ll,"componentName","find"),F(Ll,"defaults",jre),F(Ll,"schema",Ure);q0(Ll,[ty,tk]);const[iie,dF]=De(20),[oie,W5]=De(void 0),Tm=dd(async()=>{const{World:r,GSSolver:e,SplitSolver:t,NaiveBroadphase:n,Material:i,ContactMaterial:o,Body:s,Vec3:a,Box:l,Sphere:c,Cylinder:d}=await yn(()=>import("./cannon-es.9b610247.c06cecb3.js"),[]),f=new r;dF(_=>f.gravity.set(0,-_,0)),f.quatNormalizeSkip=0,f.quatNormalizeFast=!1;const m=new e;f.defaultContactMaterial.contactEquationStiffness=1e9,f.defaultContactMaterial.contactEquationRelaxation=4,m.iterations=7,m.tolerance=.1,f.solver=new t(m),f.broadphase=new n;const[g]=f.defaultContactMaterial.materials,b=new i("slipperyMaterial");return f.addContactMaterial(new o(b,b,{friction:0,restitution:0})),f.addContactMaterial(new o(b,g,{friction:.001,restitution:0})),oie(f),{world:f,defaultMaterial:g,slipperyMaterial:b,Body:s,Vec3:a,Box:l,Sphere:c,Cylinder:d}});async function pF(){const{Box:r}=await Tm();this.cannonBody.addShape(new r(Zl(this).multiplyScalar(.5)))}const G5=new Map,sie=new Set,Dx=new Map,Y5=new WeakSet,aie=()=>new WeakSet;xt(function(){if(Vi())return;const r=W5();if(!r)return;const e=Or(()=>{for(const t of sie){const n=t.cannonBody;if("_mAV"in t){const{x:s,y:a,z:l}=t._mAV,{angularVelocity:c}=n;c.x>s?c.x=s:c.x<-s&&(c.x=-s),c.y>a?c.y=a:c.y<-a&&(c.y=-a),c.z>l?c.z=l:c.z<-l&&(c.z=-l)}if("_mV"in t){const{x:s,y:a,z:l}=t._mV,{velocity:c}=n;c.x>s?c.x=s:c.x<-s&&(c.x=-s),c.y>a?c.y=a:c.y<-a&&(c.y=-a),c.z>l?c.z=l:c.z<-l&&(c.z=-l)}const i=t.positionUpdate;i.x&&(n.position.x=t.outerObject3d.position.x,n.velocity.x=0,n.force.x=0),i.y&&(n.position.y=t.outerObject3d.position.y,n.velocity.y=0,n.force.y=0),i.z&&(n.position.z=t.outerObject3d.position.z,n.velocity.z=0,n.force.z=0),i.reset(),t.outerObject3d.position.copy(n.position);const o=t.rotationUpdate;o?(o.x&&(n.angularVelocity.x=0,n.torque.x=0),o.y&&(n.angularVelocity.y=0,n.torque.y=0),o.z&&(n.angularVelocity.z=0,n.torque.z=0),n.quaternion.copy(t.outerObject3d.quaternion)):t.outerObject3d.quaternion.copy(n.quaternion),o.reset}r.step(BS[0]),Dx.clear();for(const t of r.contacts)Fa(Dx,t.bi,aie).add(t.bj)});return()=>{e.cancel()}},[W5,Vi]);const OT=new WeakSet;class _k extends _d{constructor(){super(...arguments),F(this,"_mAV"),F(this,"_mV"),F(this,"cannonBody"),F(this,"positionUpdate"),F(this,"rotationUpdate"),F(this,"_noTumble"),F(this,"_slippery"),F(this,"_mass"),F(this,"_physicsGroup"),F(this,"_ignorePhysicsGroups"),F(this,"_physicsShape"),F(this,"bvhVelocity"),F(this,"bvhOnGround"),F(this,"bvhRadius"),F(this,"bvhHalfHeight"),F(this,"bvhMap"),F(this,"bvhCharacter"),F(this,"_physics"),F(this,"_gravity")}getMAV(){var e;return(e=this._mAV)!=null?e:this._mAV=new Xh(1/0,1/0,1/0)}get maxAngularVelocityX(){var e,t;return(t=(e=this._mAV)==null?void 0:e.x)!=null?t:1/0}set maxAngularVelocityX(e){this.getMAV().x=e}get maxAngularVelocityY(){var e,t;return(t=(e=this._mAV)==null?void 0:e.y)!=null?t:1/0}set maxAngularVelocityY(e){this.getMAV().y=e}get maxAngularVelocityZ(){var e,t;return(t=(e=this._mAV)==null?void 0:e.z)!=null?t:1/0}set maxAngularVelocityZ(e){this.getMAV().z=e}getMV(){var e;return(e=this._mV)!=null?e:this._mV=new Xh(1/0,1/0,1/0)}get maxVelocityX(){var e,t;return(t=(e=this._mV)==null?void 0:e.x)!=null?t:1/0}set maxVelocityX(e){this.getMV().x=e}get maxVelocityY(){var e,t;return(t=(e=this._mV)==null?void 0:e.y)!=null?t:1/0}set maxVelocityY(e){this.getMV().y=e}get maxVelocityZ(){var e,t;return(t=(e=this._mV)==null?void 0:e.z)!=null?t:1/0}set maxVelocityZ(e){this.getMV().z=e}applyForce(e,t,n){setTimeout(()=>{var i;return(i=this.cannonBody)==null?void 0:i.applyForce({x:e,y:t,z:n})})}applyImpulse(e,t,n){setTimeout(()=>{var i;return(i=this.cannonBody)==null?void 0:i.applyImpulse({x:e,y:t,z:n})})}applyLocalForce(e,t,n){setTimeout(()=>{var i;return(i=this.cannonBody)==null?void 0:i.applyLocalForce({x:e,y:t,z:n})})}applyLocalImpulse(e,t,n){setTimeout(()=>{var i;return(i=this.cannonBody)==null?void 0:i.applyLocalImpulse({x:e,y:t,z:n})})}applyTorque(e,t,n){setTimeout(()=>{var i;return(i=this.cannonBody)==null?void 0:i.applyTorque({x:e,y:t,z:n})})}get velocity(){return this.bvhVelocity?this.bvhVelocity:this.cannonBody?this.cannonBody.velocity:new Xh(0,0,0)}set velocity(e){this.bvhVelocity?Object.assign(this.bvhVelocity,e):this.cannonBody&&Object.assign(this.cannonBody.velocity,e)}refreshCannon(){var e;this.positionUpdate&&(this.physics=(e=this._physics)!=null?e:!1)}get noTumble(){return this._noTumble}set noTumble(e){this._noTumble=e,this.refreshCannon()}get slippery(){return this._slippery}set slippery(e){this._slippery=e,this.refreshCannon()}get mass(){return this._mass}set mass(e){this._mass=e,this.refreshCannon()}get physicsGroup(){return this._physicsGroup}set physicsGroup(e){this._physicsGroup=e,this.refreshCannon()}get ignorePhysicsGroups(){return this._ignorePhysicsGroups}set ignorePhysicsGroups(e){this._ignorePhysicsGroups=e,this.refreshCannon()}get physicsShape(){var e;return(e=this._physicsShape)!=null?e:this._physicsShape=pF}set physicsShape(e){this._physicsShape=e,this.refreshCannon()}initPhysics(e,t){if(!(!e||t.done))switch(e){case!0:case"2d":yn(()=>import("./enableCannon.734765ae.8b8454e9.js"),["assets/enableCannon.734765ae.8b8454e9.js","assets/PhysicsUpdate.80a0de04.524d9a70.js"]).then(n=>n.default.call(this,t));break;case"map":this.bvhMap=!0,yn(()=>import("./enableBVHMap.8d3e2bf0.b7e46750.js"),["assets/enableBVHMap.8d3e2bf0.b7e46750.js","assets/useBVHMap.89d4dfff.54583fe0.js"]).then(n=>n.default.call(this,t,!1));break;case"map-debug":this.bvhMap=!0,yn(()=>import("./enableBVHMap.8d3e2bf0.b7e46750.js"),["assets/enableBVHMap.8d3e2bf0.b7e46750.js","assets/useBVHMap.89d4dfff.54583fe0.js"]).then(n=>n.default.call(this,t,!0));break;case"character":this.bvhCharacter=!0,yn(()=>import("./enableBVHCharacter.589caf82.5a4431c4.js"),["assets/enableBVHCharacter.589caf82.5a4431c4.js","assets/useBVHMap.89d4dfff.54583fe0.js","assets/PhysicsUpdate.80a0de04.524d9a70.js"]).then(n=>n.default.call(this,t));break;default:qq(e)}}get physics(){var e;return(e=this._physics)!=null?e:!1}set physics(e){this._physics=e,this.initPhysics(e,this.cancelHandle("physics",()=>new lr))}get gravity(){var e;return(e=this._gravity)!=null?e:!0}set gravity(e){this._gravity=e}intersects(e){var t,n,i,o;if(this.done||e.done||this===e)return!1;if(e instanceof _k){if(this.bvhMap&&e.bvhCharacter||this.bvhCharacter&&e.bvhMap)return((t=G5.get(this))==null?void 0:t.has(e))||((n=G5.get(e))==null?void 0:n.has(this))||!1;if(this.cannonBody&&e.cannonBody)return Y5.add(this.cannonBody),Y5.add(e.cannonBody),((i=Dx.get(this.cannonBody))==null?void 0:i.has(e.cannonBody))||((o=Dx.get(e.cannonBody))==null?void 0:o.has(this.cannonBody))||!1}return super.intersects(e)}get x(){return super.x}set x(e){var t;super.x=e,(t=this.positionUpdate)==null||t.updateX()}get y(){return super.y}set y(e){var t;super.y=e,(t=this.positionUpdate)==null||t.updateY()}get z(){return super.z}set z(e){var t;super.z=e,(t=this.positionUpdate)==null||t.updateZ()}get rotationX(){return super.rotationX}set rotationX(e){var t;super.rotationX=e,(t=this.rotationUpdate)==null||t.updateX()}get rotationY(){return super.rotationY}set rotationY(e){var t;super.rotationY=e,(t=this.rotationUpdate)==null||t.updateY()}get rotationZ(){return super.rotationZ}set rotationZ(e){var t;super.rotationZ=e,(t=this.rotationUpdate)==null||t.updateZ()}lookAt(e,t,n){var i;super.lookAt(e,t,n),(i=this.rotationUpdate)==null||i.updateXYZ()}placeAt(e){var t,n;super.placeAt(e),(t=this.positionUpdate)==null||t.updateXYZ(),(n=this.rotationUpdate)==null||n.updateXYZ(),OT.add(this)}lerpTo(e,t,n,i){super.lerpTo(e,t,n,i,()=>{var o;return(o=this.positionUpdate)==null?void 0:o.updateXYZ()})}moveTo(e,t,n,i){super.moveTo(e,t,n,i,o=>{var s,a;return o===void 0?(s=this.positionUpdate)==null?void 0:s.updateXZ():(a=this.positionUpdate)==null?void 0:a.updateXYZ()})}}class vs extends _k{constructor(e=new pr,t){super(e),F(this,"object3d"),this.object3d=e,this.nativeObject3d=e;const n=this.outerObject3d=new pr;n.userData.manager=this,!t&&rt.add(n),n.add(e)}get innerRotationX(){return this.object3d.rotation.x*qh}set innerRotationX(e){this.object3d.rotation.x=e*ti}get innerRotationY(){return this.object3d.rotation.y*qh}set innerRotationY(e){this.object3d.rotation.y=e*ti}get innerRotationZ(){return this.object3d.rotation.z*qh}set innerRotationZ(e){this.object3d.rotation.z=e*ti}get innerRotation(){return this.innerRotationZ}set innerRotation(e){this.innerRotationZ=e}get innerX(){return this.object3d.position.x*Pn}set innerX(e){this.object3d.position.x=e*Wt}get innerY(){return this.object3d.position.y*Pn}set innerY(e){this.object3d.position.y=e*Wt}get innerZ(){return this.object3d.position.z*Pn}set innerZ(e){this.object3d.position.z=e*Wt}get width(){return this.object3d.scale.x*Pn}set width(e){this.object3d.scale.x=e*Wt}get height(){return this.object3d.scale.y*Pn}set height(e){this.object3d.scale.y=e*Wt}get depth(){return this.object3d.scale.z*Pn}set depth(e){this.object3d.scale.z=e*Wt}get innerVisible(){return this.object3d.visible}set innerVisible(e){this.object3d.visible=e}find(e,t){var n,i;const o=this.outerObject3d.getObjectByName(sr.sanitizeNodeName(e));if(!o)return;const s=(i=(n=o.userData).manager)!=null?i:n.manager=new Ll(o);return!t&&this._append(s),s}findAll(e){const t=[];return e===void 0?this.outerObject3d.traverse(n=>{var i,o;t.push((o=(i=n.userData).manager)!=null?o:i.manager=new Ll(n))}):typeof e=="string"?this.outerObject3d.traverse(n=>{var i,o;n.name===e&&t.push((o=(i=n.userData).manager)!=null?o:i.manager=new Ll(n))}):typeof e=="function"?this.outerObject3d.traverse(n=>{var i,o;e(n.name)&&t.push((o=(i=n.userData).manager)!=null?o:i.manager=new Ll(n))}):this.outerObject3d.traverse(n=>{var i,o;e.test(n.name)&&t.push((o=(i=n.userData).manager)!=null?o:i.manager=new Ll(n))}),t}}const lie={...O8,maxAngularVelocityX:Number,maxAngularVelocityY:Number,maxAngularVelocityZ:Number,maxVelocityX:Number,maxVelocityY:Number,maxVelocityZ:Number,velocity:Object,gravity:Boolean,noTumble:Boolean,slippery:Boolean,mass:Number,physicsGroup:Number,ignorePhysicsGroups:Array,physics:[String,Boolean],physicsShape:Function};NS(["maxAngularVelocityX","maxAngularVelocityY","maxAngularVelocityZ","maxVelocityX","maxVelocityY","maxVelocityZ","velocity","noTumble","slippery","mass","physicsGroup","ignorePhysicsGroups","physicsShape"]);const uie={...D8,maxAngularVelocityX:1/0,maxAngularVelocityY:1/0,maxAngularVelocityZ:1/0,maxVelocityX:1/0,maxVelocityY:1/0,maxVelocityZ:1/0,velocity:{x:0,y:0,z:0},gravity:!0,noTumble:new Yr(!1),slippery:new Yr(!1),mass:new Yr(1),physicsGroup:void 0,ignorePhysicsGroups:void 0,physics:!1,physicsShape:pF},Jl={...lie,innerRotationX:Number,innerRotationY:Number,innerRotationZ:Number,innerRotation:Number,innerX:Number,innerY:Number,innerZ:Number,width:Number,height:Number,depth:Number,innerVisible:Boolean},Ql={...uie,innerRotationX:0,innerRotationY:0,innerRotationZ:0,innerRotation:0,innerX:0,innerY:0,innerZ:0,width:100,height:100,depth:100,innerVisible:!0},wk={...Jl,...IS,...J4},bk={...Ql,...VS,...Q4};class Yo extends vs{constructor(e){const t=new vi(e,kx);t.castShadow=!0,t.receiveShadow=!0,super(t),F(this,"material",kx)}}F(Yo,"defaults",bk),F(Yo,"schema",wk);q0(Yo,[ty,tk]);const fF=new md(Wo,Wo,Wo,1,1,1);class HS extends Yo{constructor(){super(fF)}}F(HS,"componentName","cube");const Ob=new WeakMap,mF=r=>{Ob.has(r)&&(Ob.get(r)(),Ob.delete(r))},X5=(r,e)=>{mF(r);const t=r(e);t&&Ob.set(r,t)};class cie{constructor(){F(this,"done"),F(this,"value"),F(this,"callbacks",[])}then(e){return this.callbacks.push(e),this.done&&X5(e,this.value),new lr(()=>{bB(this.callbacks,e),mF(e)})}resolve(e){this.done=!0,this.value=e;for(const t of this.callbacks)X5(t,e)}}const hie=r=>{const e=new CB;return r.then(t=>{e.resolve(t)}),e};class ny extends vs{constructor(e){super(new vi(fF,B8),e),F(this,"loadedGroup",new ls),F(this,"loaded",new cie),F(this,"_src"),F(this,"_onLoad"),F(this,"widthSet"),F(this,"heightSet"),F(this,"depthSet"),F(this,"_boxVisible"),F(this,"_outline"),F(this,"_bloom"),F(this,"managerSet"),this.outerObject3d.add(this.loadedGroup)}get src(){return this._src}set src(e){this._src=e,this.loaded.done&&this.loadedGroup.clear(),this.cancelHandle("src",e&&(()=>hie(this.load(e)).then(t=>{const n=this.resolveLoaded(t,e);this.loadedGroup.add(n),this.loaded.resolve(n),this.object3d.visible=!!this._boxVisible})))}get onLoad(){return this._onLoad}set onLoad(e){this._onLoad=e,this.cancelHandle("onLoad",e&&(()=>this.loaded.then(()=>void e())))}get width(){return super.width}set width(e){super.width=e,this.widthSet=!0}get height(){return super.height}set height(e){super.height=e,this.heightSet=!0}get depth(){return super.depth}set depth(e){super.depth=e,this.depthSet=!0}get innerRotationX(){return super.innerRotationX}set innerRotationX(e){super.innerRotationX=e,this.loadedGroup.rotation.x=this.object3d.rotation.x}get innerRotationY(){return super.innerRotationY}set innerRotationY(e){super.innerRotationY=e,this.loadedGroup.rotation.y=this.object3d.rotation.y}get innerRotationZ(){return super.innerRotationZ}set innerRotationZ(e){super.innerRotationZ=e,this.loadedGroup.rotation.z=this.object3d.rotation.z}get innerX(){return super.innerX}set innerX(e){super.innerX=e,this.loadedGroup.position.x=this.object3d.position.x}get innerY(){return super.innerY}set innerY(e){super.innerY=e,this.loadedGroup.position.y=this.object3d.position.y}get innerZ(){return super.innerZ}set innerZ(e){super.innerZ=e,this.loadedGroup.position.z=this.object3d.position.z}get innerVisible(){return this.loadedGroup.visible}set innerVisible(e){this.loadedGroup.visible=e}get castShadow(){return super.castShadow}set castShadow(e){this._castShadow=e,this.cancelHandle("castShadow",()=>this.loaded.then(()=>{super.castShadow=e}))}get receiveShadow(){return super.receiveShadow}set receiveShadow(e){this._receiveShadow=e,this.cancelHandle("receiveShadow",()=>this.loaded.then(()=>{super.receiveShadow=e}))}get physics(){return super.physics}set physics(e){this._physics=e;const t=this.cancelHandle("physics",()=>this.loaded.then(()=>{this.initPhysics(e,t)}))}get boxVisible(){var e;return(e=this._boxVisible)!=null?e:this.object3d.visible}set boxVisible(e){this._boxVisible=e,this.object3d.visible=e}get outline(){return!!this._outline}set outline(e){this._outline=e,this.cancelHandle("outline",()=>this.loaded.then(t=>{if(e)return $8(t),()=>{eF(t)}}))}get bloom(){return!!this._bloom}set bloom(e){this._bloom=e,this.cancelHandle("bloom",()=>this.loaded.then(t=>{if(e)return Y8(t),()=>{X8(t)}}))}addToRaycastSet(e){const t=new lr;return queueMicrotask(()=>{t.done||(this._physics==="map"||this._physics==="map-debug"?t.watch(this.loaded.then(n=>(this.managerSet||(this.managerSet=!0,n.traverse(i=>{var o,s;return(s=(o=i.userData).manager)!=null?s:o.manager=this})),e.add(n),()=>{e.delete(n)}))):t.watch(super.addToRaycastSet(e)))}),t}refreshFactors(){this.cancelHandle("refreshFactorsLoaded",()=>this.loaded.then(()=>void super.refreshFactors()))}placeAt(e){this.cancelHandle("placeAt",()=>this.loaded.then(()=>void super.placeAt(e)))}}const die=r=>"loadedGroup"in r?r.loadedGroup:"object3d"in r?r.object3d:r.outerObject3d;function pie(r){const e=new Map,t=new Map,n=r.clone();return vF(r,n,function(i,o){e.set(o,i),t.set(i,o)}),n.traverse(function(i){if(!i.isSkinnedMesh)return;const o=i,s=e.get(i),a=s.skeleton.bones;o.skeleton=s.skeleton.clone(),o.bindMatrix.copy(s.bindMatrix),o.skeleton.bones=a.map(function(l){return t.get(l)}),o.bind(o.skeleton,o.bindMatrix)}),n}function vF(r,e,t){t(r,e);for(let n=0;n<r.children.length;n++)vF(r.children[n],e.children[n],t)}const gF=new WeakSet,hwe=(r,e,t=r.animations)=>{const n=e?r.clone():pie(r);return!e&&gF.add(n),n.animations=t,n};xt(()=>{const r=hn();if(!(r instanceof ny)||Ye()!==qr)return;const e=r.loadedGroup.children[0];if(!gF.has(e))return;const t=new Tre(e);return rt.add(t),()=>{rt.remove(t)}},[hn,Ye]);const[q5,T0]=De(!1),[Ew,WS]=De({}),GS=!1,[yF,DT]=De(GS);xt(()=>{var r;yF((r=Ye().userData.bokeh)!=null?r:GS)},[Ye,WS]);const YS=.03,[_F,wF]=De(YS);xt(()=>{var r;_F((r=Ye().userData.bokehAperture)!=null?r:YS)},[Ye,WS]);const XS=1,[bF,xF]=De(XS);xt(()=>{var r;bF((r=Ye().userData.bokehFocus)!=null?r:XS)},[Ye,WS]);const qS=.01,[SF,MF]=De(qS);xt(()=>{var r;SF((r=Ye().userData.bokehMaxBlur)!=null?r:qS)},[Ye,WS]);const xk={...Jl,mouseControl:[Boolean,String],fov:Number,zoom:Number,near:Number,far:Number,active:Boolean,transition:[Boolean,Number],bokeh:Boolean,bokehFocus:Number,bokehMaxBlur:Number,bokehAperture:Number,minPolarAngle:Number,maxPolarAngle:Number,minAzimuthAngle:Number,maxAzimuthAngle:Number,polarAngle:Number,azimuthAngle:Number,enableDamping:Boolean},Sk={...Ql,mouseControl:!1,fov:75,zoom:1,near:Pm,far:Ca,active:!1,transition:new Yr(!1),bokeh:GS,bokehFocus:XS,bokehMaxBlur:qS,bokehAperture:YS,minPolarAngle:j8,maxPolarAngle:H8,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0,polarAngle:new Yr(0),azimuthAngle:new Yr(0),enableDamping:!1},fie={...xk,targetId:String,enableZoom:Boolean,enableFly:Boolean,autoRotate:[Boolean,Number]},mie={...Sk,innerZ:500,mouseControl:"drag",targetId:void 0,enableZoom:!1,enableFly:!1,autoRotate:!1},[Am,KS]=zi();window.addEventListener("blur",()=>Am());window.addEventListener("focus",()=>Am());document.addEventListener("visibilitychange",()=>Am());const Db=new Set;KS(()=>Db.clear());let RT=!1;const CF=()=>{!RT||(RT=!1,Am())};document.addEventListener("keydown",r=>{CF(),(r.key==="Shift"||r.key==="Meta")&&Db.add(r.key),Db.has("Meta")&&Db.has("Shift")&&(Am(),RT=!0)});document.addEventListener("keyup",r=>{(r.key==="Shift"||r.key==="Meta")&&Am()});document.addEventListener("mousedown",CF);async function vie(){const{Sphere:r,Cylinder:e,Vec3:t}=await Tm(),{x:n,y:i}=Zl(this),o=n*.5,s=i*.5,a=new r(o),l=new r(o),c=new e(o,o,Math.abs(i-n));this.cannonBody.addShape(a,new t(0,-s+o,0)),this.cannonBody.addShape(l,new t(0,s-o,0)),this.cannonBody.addShape(c)}const[Mk,Ck]=De([]),gie=vm(Mk,Ck),yie=gm(Mk,Ck),_ie={...Jl,...IS},wie={...Ql,...VS,scaleZ:0,depth:0},K5=new i8({transparent:!0});class zl extends vs{constructor(){super(new tte(K5)),F(this,"material",K5)}get depth(){return 0}set depth(e){}get scaleZ(){return 0}set scaleZ(e){}}F(zl,"componentName","sprite"),F(zl,"defaults",wie),F(zl,"schema",_ie);q0(zl,[ty]);const bie=()=>{const r=new zl;return r.texture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABnNJREFUaEPtWVmoVlUU/r5zNItModEGQinLMkqbyDLqoR6K0gZMEsxIkh6iEYSEZiR9iDTyoZEkqeylsoFeKmkwKOhGRaE5VIo0kVOIej37i3XY62f7e+//n//e44DcA//DvXuftde3hm+tvQ5xiDzcVzgk5QBMvno4w/8fSPa03rFatQORZDJJMlTRRlJWdW8rebUCSZWSdHUI4SoAx0XPmB5mfTtzW5ZlKwAsNY+Y90gWVYD3tqc2IOYJV0rSGwCmVFCsi+Qkkhv665k6gZQhEkJ4G8ANALoBDG4BZieAIQB+JjmO5C43RgUD7LWlFiAeGpKuk/QegF0ADgNglv4IwKB4sp23yxQHcBGAHQAOJ3kfyYWSBpHcfSCBDCbZHUJ4B8BkV1DSk3meP9KsmKTxkr4FYHlh7Laa5BkxNMsQ7RTMXh6xWAVgPxfWTqglareksZJ+iMlchhXJOSSfkmTesf9Z+BWSxkj6Ke41D5gnHiI5L9K2E0MznpIRTbdmctgDSF/ZQ9JwSR8AuCxa2RTIJb2eZdl0AEdEwxiQ/yTdImkpAKNoV844expJI4q2T6R5e6c0dAOIs4akU41xQgjnkTzWYjihzd4OOBfAMVEx82b6/BVDLfXyCTGHfJ/Tsv1tIbcpRkXz+k5JG7Mse5+kkQqcIEogSbLeFKnTQqHTx6zbDCJVsJ08D+FKBCRpSZ7n0xtAEv4/WtKvAI6KrGNKVRIaAaR7DZT9nK2aQfi6tzHpuq21yktbs5/l4N0kF5Vs55QnaaqkNyvwfzvLlsmbbFoHYCOALQCOB3AKgBHJujNXO7npur/TlWXZ+aUzJJXUKelhSU8AaFak6gFp4q4j+SyAjwGstGLXCHZpGIBxIYSpJO+K3uz0TA/ZP0iONgJpeKQoimesMPURSCM/JM3PsuxRkla5y2SMHrJQtW7XaLh8JI2W9AKAKzs814FsJjmK5OYUyAKS93YosNQn4fYbSb4blTS26+6pGbRwNnp2sEVRvEzyjqRAtouCfQKk9AbJ6SSXxOJnBau0vKRLAFwAYDiAfwF8TdIo1taGOJikR6sSZg5kC8mRdXikPFTSK3mez7R8i1V3d2xDFgGY0IN5l1t+kFzpYCQNlbQagNWYnqg8FVMrEBe2neRZJH83b8Qu1ptHO9yp1hXxFmgnyQkkuyRZ47hD0ixJz1cIsVqBuDcW53l+ewJilKSVsYXvrZX37ng9ybEkt3leRa+c3MYrtQIpuZzkZJLLPESKoniV5IwK9agE4x2ye6UoipdIzmxDOrUBcUE7Yvu9Plp0mKRfYuFr1554HqwhOcY7Wkl3RkpulfS1AXElNpA8k+T2COQcSd8n05NWLY4rY7kyhqS1R8ZkkyQZhbeq+LUDsQpuie7Fb5ykrnZFwOthBGw3xrNJrolArpH04f4C0piGxBbhz6jECEmrYuPZLrR8/W+Sp5PcGmXcJmnx/gLSqOgkLyX5lfdsIYRPK7YcJaPZtSHP82kJWcy1m+X+SnYD4vT7eJ7njyW1wGuIrXvNaI62RsEjOZ7kd96FhxCs6o/fn/Trylh3a7XA7uLloK0oiqdJPhC1L+/qCQHYe+WYiOT9JBck1X2ipM8r3EhrS3a3sA8O/ILT6J0kzZY0r5fLmSX4gySfi8MOm5wUIYTPAFze38relzY+bVMsRFaZdePsykaho0MIs0hOBHAkgK2SlmdZ9iLJ3+LExLxowzkDPr8CiLTjrrWNT2dTF5PcFJtHs3J6odpjXmU5BcBqiAGeIumtJlpuxeItQ2s+ydl9uI80Et8miyRvJflFpFLLDRtkGFjLjfKO7nUn7pkjaW4HIFKP/EPyNKPu9M5+j6SFfQRiwhuV2CYcWZZZqJb3juZHkoXZtZKMZm18mipXpZ460ayNXUG3ASmZRtKFkr6JQHqablQ9oDFwA/CjpBVZltkAYlMI4SQANhq9AsCJUaAZoJOJjb1WDsAlvZbnuRXQQT7XKuM3hLAMwPWR/tqNZVoBc+XaTePt/OZZWBWD2VXZ8stam7XlcDHGqX/bGBpCsPvzzTGeqwg9EHusY55B8kuPqL1GphHYSAA2BjX3G7tUHdTta1D2GWItgE/s80M6q24eYnf0/W9fa92Sf5s+1/Voaa+2B5EnUkxWQ/b6GnywhEy/nTsApN8mrFnAgEdqNmi/xQ14pN8mrFnAgEdqNmi/xR0yHvkfVPFBbg9BWmoAAAAASUVORK5CYII=",_n.delete(r),r.scale=.5,r},EF=class extends vs{constructor(r){super(),F(this,"camera"),F(this,"_physicsShape",vie),F(this,"midObject3d",this.outerObject3d),F(this,"orbitMode"),F(this,"gyrateHandle"),F(this,"_minPolarAngle",j8),F(this,"_maxPolarAngle",H8),F(this,"_minAzimuthAngle",-1/0),F(this,"_maxAzimuthAngle",1/0),F(this,"_polarAngle"),F(this,"_azimuthAngle"),F(this,"enableDamping",!1),F(this,"mouseControlState",new ht(!1)),F(this,"mouseControlInit"),F(this,"_gyroControl"),this.camera=r,this.object3d.add(r),r.userData.manager=this,gie(r),this.then(()=>{V5(r),yie(r)}),this.createEffect(()=>{if(Ye()!==qr||Ye()===r)return;const e=new kre(r);rt.add(e);const t=bie();e.add(t.outerObject3d);const n=Pc(({target:i})=>{i===t&&cn(this)});return()=>{e.dispose(),rt.remove(e),t.dispose(),n.cancel()}},[Ye])}lookAt(r,e,t){super.lookAt(r,e,t);const n=Hr.setFromQuaternion(this.outerObject3d.quaternion);n.x+=Math.PI,n.z+=Math.PI,this.outerObject3d.setRotationFromEuler(n)}get fov(){return this.camera.fov}set fov(r){var e,t;this.camera.fov=r,(t=(e=this.camera).updateProjectionMatrix)==null||t.call(e)}get zoom(){return this.camera.zoom}set zoom(r){var e,t;this.camera.zoom=r,(t=(e=this.camera).updateProjectionMatrix)==null||t.call(e)}get near(){return this.camera.near}set near(r){var e,t;this.camera.near=r,(t=(e=this.camera).updateProjectionMatrix)==null||t.call(e)}get far(){return this.camera.far}set far(r){var e,t;this.camera.far=r,(t=(e=this.camera).updateProjectionMatrix)==null||t.call(e)}activate(){this.active=!0}get active(){return Bf(od())===this.camera}set active(r){if(this.active===r)return;const e=Bf(od());V5(this.camera),r&&Sne(this.camera),Mne(e)}get transition(){return this.camera.userData.transition}set transition(r){this.camera.userData.transition=r}get bokeh(){var r;return(r=this.camera.userData.bokeh)!=null?r:GS}set bokeh(r){this.camera.userData.bokeh=r,Ew({})}get bokehFocus(){var r;return(r=this.camera.userData.bokehFocus)!=null?r:XS}set bokehFocus(r){this.camera.userData.bokehFocus=r,Ew({})}get bokehMaxBlur(){var r;return(r=this.camera.userData.bokehMaxBlur)!=null?r:qS}set bokehMaxBlur(r){this.camera.userData.bokehMaxBlur=r,Ew({})}get bokehAperture(){var r;return(r=this.camera.userData.bokehAperture)!=null?r:YS}set bokehAperture(r){this.camera.userData.bokehAperture=r,Ew({})}getRay(){return V8.set(vr(this.camera),rF(this.camera))}append(r){this._append(r),this.camera.add(r.outerObject3d)}attach(r){this._append(r),this.camera.attach(r.outerObject3d)}get width(){return super.width}set width(r){const e=r*Wt;this.object3d.scale.x=e,this.camera.scale.x=1/e}get height(){return super.height}set height(r){const e=r*Wt;this.object3d.scale.y=e,this.camera.scale.y=1/e}get depth(){return super.depth}set depth(r){const e=r*Wt;this.object3d.scale.z=e,this.camera.scale.z=1/e}_gyrate(r,e,t){var n;const i=t?this.object3d:this.midObject3d;Hr.setFromQuaternion(i.quaternion),Hr.y-=r*.002,Hr.y=Math.max(fg-this._maxAzimuthAngle*ti,Math.min(fg-this._minAzimuthAngle*ti,Hr.y)),Hr.x-=e*.002,Hr.x=Math.max(fg-this._maxPolarAngle*ti,Math.min(fg-this._minPolarAngle*ti,Hr.x)),i.setRotationFromEuler(Hr),!t&&((n=this.rotationUpdate)==null||n.updateXYZ())}gyrate(r,e,t){var n;if(this.enableDamping&&(r*=.5,e*=.5),this.orbitMode?this._gyrate(r,e):(this._gyrate(r,0),this._gyrate(0,e,!0)),!this.enableDamping||t||!(r||e))return;(n=this.gyrateHandle)==null||n.cancel();let i=1;const o=this.gyrateHandle=this.beforeRender(()=>{i*=.95,this._gyrate(r*i,e*i),i<=.001&&o.cancel()})}updateAngle(){EF.updateAngle(this,this)}get minPolarAngle(){return this._minPolarAngle}set minPolarAngle(r){this._minPolarAngle=r,this.updateAngle()}get maxPolarAngle(){return this._maxPolarAngle}set maxPolarAngle(r){this._maxPolarAngle=r,this.updateAngle()}get minAzimuthAngle(){return this._minAzimuthAngle}set minAzimuthAngle(r){this._minAzimuthAngle=r,this.updateAngle()}get maxAzimuthAngle(){return this._maxAzimuthAngle}set maxAzimuthAngle(r){this._maxAzimuthAngle=r,this.updateAngle()}setPolarAngle(r){const{_minPolarAngle:e,_maxPolarAngle:t}=this;this.minPolarAngle=this.maxPolarAngle=r,this.queueMicrotask(()=>{this.minPolarAngle=e,this.maxPolarAngle=t})}setAzimuthAngle(r){const{_minAzimuthAngle:e,_maxAzimuthAngle:t}=this;this.minAzimuthAngle=this.maxAzimuthAngle=r,this.queueMicrotask(()=>{this.minAzimuthAngle=e,this.maxAzimuthAngle=t})}get polarAngle(){return this._polarAngle}set polarAngle(r){this._polarAngle=r,r&&this.setPolarAngle(r)}get azimuthAngle(){return this._azimuthAngle}set azimuthAngle(r){this._azimuthAngle=r,r&&this.setAzimuthAngle(r)}get mouseControl(){return this.mouseControlState.get()}set mouseControl(r){this.mouseControlState.set(r),!(!r||this.mouseControlInit)&&(this.mouseControlInit=!0,yn(()=>import("./enableMouseControl.51c731c3.8697ebbb.js"),[]).then(e=>e.default.call(this)))}get gyroControl(){return!!this._gyroControl}set gyroControl(r){this._gyroControl=r;const e=Hr,t=Rh,n=Qre,i=new $i(-Math.sqrt(.5),0,0,Math.sqrt(.5)),o=vc(this.object3d),s=0,a=l=>{var c,d,f;this.object3d.quaternion.copy(o),e.set(((c=l.beta)!=null?c:0)*ti,((d=l.alpha)!=null?d:0)*ti,-((f=l.gamma)!=null?f:0)*ti,"YXZ"),this.object3d.quaternion.multiply(t.setFromEuler(e));const m=-s*.5;n.set(0,Math.sin(m),0,Math.cos(m)),this.object3d.quaternion.multiply(n),this.object3d.quaternion.multiply(i)};r&&window.addEventListener("deviceorientation",a),this.cancelHandle("gyroControl",r&&(()=>new lr(()=>window.removeEventListener("deviceorientation",a))))}};let Ek=EF;F(Ek,"updateAngle",MB(r=>r.gyrate(0,0),0,"trailing"));const PF=r=>!!r&&(nd(r)||r instanceof hF),Rx=new WeakSet,TF=class extends Ek{constructor(r){super(r),F(this,"manualTarget"),F(this,"targetState",new ht(void 0)),this.createEffect(()=>{const e=this.targetState.get();if(!e)return;const t=Cm(()=>e.parent!==this&&this.retarget());return()=>{t.cancel()}},[this.targetState.get])}retarget(){TF.retaget(this,this)}append(r){this._append(r),Rx.delete(r),this.retarget()}attach(r){this._append(r),Rx.add(r),this.retarget()}};let Pk=TF;F(Pk,"retaget",MB(r=>{var e;let t=r.manualTarget;for(const n of(e=r.children)!=null?e:[])if(t)n.outerObject3d.parent!==r.camera&&r.camera[Rx.has(n)?"attach":"add"](n.outerObject3d);else if(PF(n)){t=n;const{parent:i}=r.outerObject3d;i&&n.outerObject3d.parent!==i&&i[Rx.has(t)?"attach":"add"](t.outerObject3d)}r.targetState.set(t)},0,"trailing"));class gf extends Pk{constructor(e=new Fn(75,1,Pm,Ca)){super(e),F(this,"targetIdState",new ht(void 0)),F(this,"enableZoomState",new ht(!1)),F(this,"enableFlyState",new ht(!1)),F(this,"autoRotateState",new ht(!1)),this.innerZ=500,this.orbitMode=!0,this.mouseControl="drag",this.camera.rotation.y=0,this.createEffect(()=>{const t=this.targetIdState.get();if(!t)return;const n=new lr,i=setTimeout(()=>{const o=()=>{var s;const[a]=(s=ac.get(t))!=null?s:[void 0];return a&&(this.manualTarget=a,this.targetState.set(a)),a};o()||n.watch(Cm(()=>setTimeout(()=>o()&&n.cancel())))});return()=>{clearTimeout(i),n.cancel()}},[this.targetIdState.get]),this.createEffect(()=>{const t=this.targetState.get();if(!t)return;const n=Or(()=>{this.placeAt(Xs(ry(t.nativeObject3d)))});return()=>{n.cancel()}},[this.targetState.get]),this.createEffect(()=>{const t=this.autoRotateState.get();if(Ye()!==e||!t)return;const n=typeof t=="number"?t:2,i=Or(()=>{this.gyrate(n,0,!0)});return()=>{i.cancel()}},[Ye,this.autoRotateState.get]),this.createEffect(()=>{if(ms()||Ye()!==e||!this.mouseControlState.get())return;const t=new lr;if(this.enableZoomState.get()){const n=i=>{i.preventDefault(),this.innerZ+=i.deltaY,this.innerZ<0&&(this.innerZ=0)};wr.addEventListener("wheel",n),t.then(()=>wr.removeEventListener("wheel",n))}if(this.enableFlyState.get()){const n=new Set;t.watch(Or(()=>{const s=n.has("Shift")?50:10;if(n.has("w")?this.translateZ(-s):n.has("s")&&this.translateZ(s),n.has("a")||n.has("ArrowLeft")?this.moveRight(-s):(n.has("d")||n.has("ArrowRight"))&&this.moveRight(s),n.has("w")||n.has("s")||n.has("a")||n.has("d")){const a=Xs(vr(this.object3d));this.innerZ=0,this.placeAt(a)}n.has("Meta")||n.has("Control")||(n.has("ArrowDown")?this.y-=s:n.has("ArrowUp")&&(this.y+=s))}));const i=s=>{n.add(s.key.length===1?s.key.toLowerCase():s.key)},o=s=>{n.delete(s.key.length===1?s.key.toLowerCase():s.key)};document.addEventListener("keydown",i),document.addEventListener("keyup",o),t.watch(KS(()=>n.clear())),t.then(()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",o)})}return()=>{t.cancel()}},[Ye,ms,this.enableZoomState.get,this.enableFlyState.get,this.mouseControlState.get])}get targetId(){return this.targetIdState.get()}set targetId(e){this.targetIdState.set(e)}get enableZoom(){return this.enableZoomState.get()}set enableZoom(e){this.enableZoomState.set(e)}get enableFly(){return this.enableFlyState.get()}set enableFly(e){this.enableFlyState.set(e)}get autoRotate(){return this.autoRotateState.get()}set autoRotate(e){this.autoRotateState.set(e)}}F(gf,"componentName","orbitCamera"),F(gf,"defaults",mie),F(gf,"schema",fie);const[xie,Sie]=zi(),[Z5,Mie]=De(0),wo=new gf(qr);wo.enableZoom=!0;wo.enableFly=!0;wo.mouseControl=!1;_n.delete(wo);Sie(r=>{const e=r.getWorldPosition();wo.x=e.x,wo.y=e.y,wo.z=e.z;const t=Zl(r);wo.innerZ=Math.max(t.x,t.y,t.z,1)*Pn+50});T0(r=>{r||(wo.setPolarAngle(90),wo.setAzimuthAngle(90))});xt(()=>{if(!(!T0()||Ye()!==qr||ms()))return wo.mouseControl="drag",wr.style.cursor="grab",()=>{wo.mouseControl=!1,wr.style.cursor="auto"}},[T0,ms,Ye]);xt(()=>{if(Ye()!==qr||T0())return;const r=Mie(e=>wo.innerZ=e);return()=>{r.cancel()}},[Ye,T0]);const[J5,AF]=zi(),[dwe,Q5]=De(null),[vg,ad]=De(hs());xt(()=>{const r=hn(),e=hs();if(!r||e==="select"){vg(e);return}if(!nd(r)){vg("select");return}if(!(r instanceof _d)){vg("translate");return}vg(e)},[hs,hn]);const[NT,IT]=De("world"),[VT,zT]=De(IT());xt(()=>{hs()==="scale"?VT("local"):VT(IT())},[IT,hs]);const Cie=dd(async()=>{const{TransformControls:r}=await yn(()=>import("./TransformControls.b8fcb857.7930a255.js"),[]),e=new r(Ye(),wr);Ye(n=>e.camera=n),e.enabled=!1;let t=!1;return e.addEventListener("dragging-changed",({value:n})=>{t=n,Gne(t),J5(t?"start":"stop")}),e.addEventListener("change",()=>t&&J5("move")),e});xt(()=>{const r=hn();if(!r)return;let e=ad();e==="path"&&(e="translate");const t=zT(),n=Q5(),i=new lr;return Cie().then(o=>{i.done||!r.outerObject3d.parent||e!=="translate"&&e!=="rotate"&&e!=="scale"||(o.setMode(e),o.setSpace(t),o.setScaleSnap(n),o.setRotationSnap(n),o.setTranslationSnap(n),rt.add(o),o.attach(r.outerObject3d),o.enabled=!0,i.then(()=>{rt.remove(o),o.detach(),o.enabled=!1}))}),()=>{i.cancel()}},[hn,ad,zT,Q5]);const[BT,FT]=De(!1),[Eie,UT]=De(10);xt(()=>{if(!FT())return;const r=UT(),e=new Are(r,r);return rt.add(e),()=>{rt.remove(e)}},[FT,UT]);const[pwe,Nx]=De(void 0),[fwe,$5]=De(!1),Ph=new vi(new J0(Wo,Wo,4,4),B8);xt(()=>{var r;if(!$5()||Ye()!==qr)return;rt.add(Ph);const[e,t]=(r=Nx())!=null?r:to();Ph.scale.x=e*Wt,Ph.scale.y=t*Wt;const n=Or(()=>{Ph.quaternion.copy(qr.quaternion),Ph.position.copy(qr.position),Ph.translateZ(-4.9)});return()=>{n.cancel(),rt.remove(Ph)}},[$5,Nx,to,Ye]);const[mwe,Pie]=De({turbidity:10,rayleigh:3,mieCoefficient:.005,mieDirectionalG:.5,inclination:.49,azimuth:.25});class ZS extends vi{constructor(){const e=ZS.SkyShader,t=new ar({name:"SkyShader",fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:fi.clone(e.uniforms),side:Mo,depthWrite:!1});super(new md(1,1,1),t),this.isSky=!0}}ZS.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new j},up:{value:new j(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPos );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <encodings_fragment>

		}`};const[vwe,Tie]=De(!1),e6=dd(()=>{const r=new ZS;return r.scale.setScalar(45e4),Pie(e=>{const{uniforms:t}=r.material;t.turbidity.value=e.turbidity,t.rayleigh.value=e.rayleigh,t.mieCoefficient.value=e.mieCoefficient,t.mieDirectionalG.value=e.mieDirectionalG;const n=Math.PI*(e.inclination-.5),i=2*Math.PI*(e.azimuth-.5);un.x=Math.cos(i),un.y=Math.sin(i)*Math.sin(n),un.z=Math.sin(i)*Math.cos(n),t.sunPosition.value.copy(un)}),r});let t6=!1;Tie(r=>{t6!==r&&(t6=r,r?rt.add(e6()):rt.remove(e6()))});const[Aie,r6]=De(!1),[kie,n6]=De(!1),i6=(r,e)=>Math.abs(r*.5/Math.cos(e.fov*.6*ti));xt(()=>{var r;const[e,t]=(r=Nx())!=null?r:to(),[n,i,o]=xT(Ye()),s={width:n,height:t-(e-n)*t/e},a={width:e-(t-i)*e/t,height:i},l=Math.min(n-s.width,i-s.height),c=Math.min(n-a.width,i-a.height);l>c?Z5(i6(e/o,qr)):Z5(i6(t,qr))},[to,Nx,Ye,Zf]);const[Lie,jT]=De(!1),o6={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Je(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Jf extends Wa{constructor(e,t,n,i){super(),this.strength=t!==void 0?t:1,this.radius=n,this.threshold=i,this.resolution=e!==void 0?new be(e.x,e.y):new be(256,256),this.clearColor=new Je(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new Ir(o,s),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let f=0;f<this.nMips;f++){const m=new Ir(o,s);m.texture.name="UnrealBloomPass.h"+f,m.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(m);const g=new Ir(o,s);g.texture.name="UnrealBloomPass.v"+f,g.texture.generateMipmaps=!1,this.renderTargetsVertical.push(g),o=Math.round(o/2),s=Math.round(s/2)}o6===void 0&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const a=o6;this.highPassUniforms=fi.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ar({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const l=[3,5,7,9,11];o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let f=0;f<this.nMips;f++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(l[f])),this.separableBlurMaterials[f].uniforms.texSize.value=new be(o,s),o=Math.round(o/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const c=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=c,this.bloomTintColors=[new j(1,1,1),new j(1,1,1),new j(1,1,1),new j(1,1,1),new j(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,jo===void 0&&console.error("THREE.UnrealBloomPass relies on CopyShader");const d=jo;this.copyUniforms=fi.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new ar({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:xx,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Je,this.oldClearAlpha=1,this.basic=new wm,this.fsQuad=new yd(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(n,i),this.renderTargetsVertical[o].setSize(n,i),this.separableBlurMaterials[o].uniforms.texSize.value=new be(n,i),n=Math.round(n/2),i=Math.round(i/2)}render(e,t,n,i,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[l].uniforms.direction.value=Jf.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=Jf.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeperableBlurMaterial(e){return new ar({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new be(.5,.5)},direction:{value:new be(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new ar({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Jf.BlurDirectionX=new be(1,0);Jf.BlurDirectionY=new be(0,1);const[Oie,Tk]=De(0),[Die,Ak]=De(.5),[Rie,kk]=De(0),Qf=new Jf(new be,Ak(),Tk(),kk());Tk(r=>Qf.radius=r);Ak(r=>Qf.strength=r);kk(r=>Qf.threshold=r);class Nie extends Wa{constructor(e,t,n,i,o){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=o!==void 0?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Je}render(e,t,n){const i=e.autoClear;e.autoClear=!1;let o,s;this.overrideMaterial!==void 0&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,o),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=s),e.autoClear=i}}const Ix=new Nie(rt,Ye());Ye(r=>Ix.camera=r);xt(()=>{const r=Kf();if(r)return r.addPass(Ix),r.addPass(Qf),()=>{r.removePass(Ix),r.removePass(Qf)}},[Kf]);const kF=new qf(new ar({uniforms:{baseTexture:{value:null},bloomTexture:{value:null}},vertexShader:`
            varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
        `,fragmentShader:`
            uniform sampler2D baseTexture;
            uniform sampler2D bloomTexture;
            varying vec2 vUv;
            void main() {
                gl_FragColor = texture2D(baseTexture, vUv) + texture2D(bloomTexture, vUv);
            }
        `,defines:{}}),"baseTexture"),{uniforms:Iie}=kF;Kf(r=>r&&(Iie.bloomTexture.value=r.renderTarget2.texture));const[Vie,LF]=De(.8),[zie,OF]=De(.01),DF=new qf(new ar({defines:{BAND_MODE:2,CHROMA_SAMPLES:1},uniforms:{tDiffuse:{value:null},baseIor:{value:.8},bandOffset:{value:.01},jitterIntensity:{value:1},jitterOffset:{value:0}},vertexShader:`

		varying vec2 vUv;
		varying vec3 viewDir;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			viewDir = normalize( ( modelViewMatrix * vec4( position, 1.0 ) ).xyz );

		}

	`,fragmentShader:`

		varying vec2 vUv;
		varying vec3 viewDir;
		uniform float baseIor;
		uniform float bandOffset;
		uniform float jitterIntensity;
		uniform float jitterOffset;
		uniform sampler2D tDiffuse;

		#include <common>
		void main() {

			vec3 normal = vec3( ( 2.0 * vUv - vec2( 1.0 ) ), 1.0 );
			normal.z = 1.0;
			normal = normalize( normal );

			vec3 color;

			// if NO BANDS
			#if BAND_MODE == 0

			vec3 refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor );
			color = texture2D( tDiffuse, vUv + refracted.xy ).rgb;

			// if RGB or RYGCBV BANDS
			#else

			float index, randValue, offsetValue;
			float r, g, b, r_ior, g_ior, b_ior;
			vec3 r_refracted, g_refracted, b_refracted;
			vec4 r_sample, g_sample, b_sample;

			#if BAND_MODE == 2
			float y, c, v, y_ior, c_ior, v_ior;
			vec3 y_refracted, c_refracted, v_refracted;
			vec4 y_sample, c_sample, v_sample;
			#endif

			for ( int i = 0; i < CHROMA_SAMPLES; i ++ ) {

				index = float( i );
				randValue = rand( sin( index + 1. ) * gl_FragCoord.xy + vec2( jitterOffset, - jitterOffset ) ) - 0.5;
				offsetValue = index / float( CHROMA_SAMPLES ) + randValue * jitterIntensity;
				#if BAND_MODE == 1
				randValue *= 2.0;
				#endif

				// Paper describing functions for creating yellow, cyan, and violet bands and reforming
				// them into RGB:
				// https://web.archive.org/web/20061108181225/http://home.iitk.ac.in/~shankars/reports/dispersionraytrace.pdf
				r_ior = 1.0 + bandOffset * ( 0.0 + offsetValue );
				g_ior = 1.0 + bandOffset * ( 2.0 + offsetValue );
				b_ior = 1.0 + bandOffset * ( 4.0 + offsetValue );

				r_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / r_ior );
				g_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / g_ior );
				b_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / b_ior );

				r_sample = texture2D( tDiffuse, vUv + r_refracted.xy );
				g_sample = texture2D( tDiffuse, vUv + g_refracted.xy );
				b_sample = texture2D( tDiffuse, vUv + b_refracted.xy );

				#if BAND_MODE == 2
				y_ior = 1.0 + bandOffset * ( 1.0 + offsetValue );
				c_ior = 1.0 + bandOffset * ( 3.0 + offsetValue );
				v_ior = 1.0 + bandOffset * ( 5.0 + offsetValue );

				y_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / y_ior );
				c_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / c_ior );
				v_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / v_ior );

				y_sample = texture2D( tDiffuse, vUv + y_refracted.xy );
				c_sample = texture2D( tDiffuse, vUv + c_refracted.xy );
				v_sample = texture2D( tDiffuse, vUv + v_refracted.xy );

				r = r_sample.r / 2.0;
				y = ( 2.0 * y_sample.r + 2.0 * y_sample.g - y_sample.b ) / 6.0;
				g = g_sample.g / 2.0;
				c = ( 2.0 * c_sample.g + 2.0 * c_sample.b - c_sample.r ) / 6.0;
				b = b_sample.b / 2.0;
				v = ( 2.0 * v_sample.b + 2.0 * v_sample.r - v_sample.g ) / 6.0;

				color.r += r + ( 2.0 * v + 2.0 * y - c ) / 3.0;
				color.g += g + ( 2.0 * y + 2.0 * c - v ) / 3.0;
				color.b += b + ( 2.0 * c + 2.0 * v - y ) / 3.0;
				#else
				color.r += r_sample.r;
				color.g += g_sample.g;
				color.b += b_sample.b;
				#endif

			}

			color /= float( CHROMA_SAMPLES );

			#endif

			gl_FragColor = vec4( color, 1.0 );

		}

	`})),{uniforms:RF}=DF;LF(r=>RF.baseIor.value=r);OF(r=>RF.bandOffset.value=r);const[Bie,HT]=De(!1),[Fie,A0]=De("MSAA"),[s6,$f]=De(void 0);xt(()=>{const r=Zr();if(!r)return;if(A0()!=="MSAA"||!r.capabilities.isWebGL2){s6(new vT(r));return}const e=new Ir(ak,lk,{samples:4}),t=to(([n,i])=>e.setSize(n,i));return s6(new vT(r,e)),()=>{e.dispose(),t.cancel()}},[Zr,A0]);xt(()=>{const r=$f();if(!r)return;const[e,t]=to();r.setSize(e,t),r.setPixelRatio(Math.min(id(),devicePixelRatio))},[$f,to,id]);class Uie extends Wa{constructor(e){super(),jo===void 0&&console.error("THREE.SavePass relies on CopyShader");const t=jo;this.textureID="tDiffuse",this.uniforms=fi.clone(t.uniforms),this.material=new ar({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new Ir(window.innerWidth,window.innerHeight),this.renderTarget.texture.name="SavePass.rt"),this.needsSwap=!1,this.fsQuad=new yd(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),e.setRenderTarget(this.renderTarget),this.clear&&e.clear(),this.fsQuad.render(e)}}const jie={uniforms:{tDiffuse1:{value:null},tDiffuse2:{value:null},mixRatio:{value:.5},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;
		uniform float mixRatio;

		uniform sampler2D tDiffuse1;
		uniform sampler2D tDiffuse2;

		varying vec2 vUv;

		void main() {

			vec4 texel1 = texture2D( tDiffuse1, vUv );
			vec4 texel2 = texture2D( tDiffuse2, vUv );
			gl_FragColor = mix( texel1, texel2, mixRatio );
			gl_FragColor.a *= opacity;

		}`},[Hie,NF]=De(.5),IF=new Uie,Lk=new qf(jie,"tDiffuse1");Lk.uniforms.tDiffuse2.value=IF.renderTarget.texture;NF(r=>Lk.uniforms.mixRatio.value=r);const VF=new qf(jo);VF.renderToScreen=!0;const Wie=[Lk,IF,VF],[Gie,WT]=De(!1),[Yie,Vx]=De(!1),Gv={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new be(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new Ct},cameraInverseProjectionMatrix:{value:new Ct},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		#include <common>

		varying vec2 vUv;

		#if DIFFUSE_TEXTURE == 1
		uniform sampler2D tDiffuse;
		#endif

		uniform sampler2D tDepth;

		#if NORMAL_TEXTURE == 1
		uniform sampler2D tNormal;
		#endif

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float scale;
		uniform float intensity;
		uniform float bias;
		uniform float kernelRadius;
		uniform float minResolution;
		uniform vec2 size;
		uniform float randomSeed;

		// RGBA depth

		#include <packing>

		vec4 getDefaultColor( const in vec2 screenPosition ) {
			#if DIFFUSE_TEXTURE == 1
			return texture2D( tDiffuse, vUv );
			#else
			return vec4( 1.0 );
			#endif
		}

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {
			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];
			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );
			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;
		}

		vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {
			#if NORMAL_TEXTURE == 1
			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );
			#else
			return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );
			#endif
		}

		float scaleDividedByCameraFar;
		float minResolutionMultipliedByCameraFar;

		float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {
			vec3 viewDelta = sampleViewPosition - centerViewPosition;
			float viewDistance = length( viewDelta );
			float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;

			return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );
		}

		// moving costly divides into consts
		const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );
		const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );

		float getAmbientOcclusion( const in vec3 centerViewPosition ) {
			// precompute some variables require in getOcclusion.
			scaleDividedByCameraFar = scale / cameraFar;
			minResolutionMultipliedByCameraFar = minResolution * cameraFar;
			vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );

			// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/
			float angle = rand( vUv + randomSeed ) * PI2;
			vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;
			vec2 radiusStep = radius;

			float occlusionSum = 0.0;
			float weightSum = 0.0;

			for( int i = 0; i < NUM_SAMPLES; i ++ ) {
				vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;
				radius += radiusStep;
				angle += ANGLE_STEP;

				float sampleDepth = getDepth( sampleUv );
				if( sampleDepth >= ( 1.0 - EPSILON ) ) {
					continue;
				}

				float sampleViewZ = getViewZ( sampleDepth );
				vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );
				occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );
				weightSum += 1.0;
			}

			if( weightSum == 0.0 ) discard;

			return occlusionSum * ( intensity / weightSum );
		}

		void main() {
			float centerDepth = getDepth( vUv );
			if( centerDepth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = getViewZ( centerDepth );
			vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );

			float ambientOcclusion = getAmbientOcclusion( viewPosition );

			gl_FragColor = getDefaultColor( vUv );
			gl_FragColor.xyz *=  1.0 - ambientOcclusion;
		}`},bl={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new be(512,512)},sampleUvOffsets:{value:[new be(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:`

		#include <common>

		uniform vec2 size;

		varying vec2 vUv;
		varying vec2 vInvSize;

		void main() {
			vUv = uv;
			vInvSize = 1.0 / size;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		#include <common>
		#include <packing>

		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform float depthCutoff;

		uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];
		uniform float sampleWeights[ KERNEL_RADIUS + 1 ];

		varying vec2 vUv;
		varying vec2 vInvSize;

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		void main() {
			float depth = getDepth( vUv );
			if( depth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = -getViewZ( depth );
			bool rBreak = false, lBreak = false;

			float weightSum = sampleWeights[0];
			vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;

			for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {

				float sampleWeight = sampleWeights[i];
				vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;

				vec2 sampleUv = vUv + sampleUvOffset;
				float viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;

				if( ! rBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

				sampleUv = vUv - sampleUvOffset;
				viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;

				if( ! lBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

			}

			gl_FragColor = diffuseSum / weightSum;
		}`},zx={createSampleWeights:function(r,e){const t=[];for(let n=0;n<=r;n++)t.push(Xie(n,e));return t},createSampleOffsets:function(r,e){const t=[];for(let n=0;n<=r;n++)t.push(e.clone().multiplyScalar(n));return t},configure:function(r,e,t,n){r.defines.KERNEL_RADIUS=e,r.uniforms.sampleUvOffsets.value=zx.createSampleOffsets(e,n),r.uniforms.sampleWeights.value=zx.createSampleWeights(e,t),r.needsUpdate=!0}};function Xie(r,e){return Math.exp(-(r*r)/(2*(e*e)))/(Math.sqrt(2*Math.PI)*e)}const Pw={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		#include <packing>

		void main() {

			float depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );
			gl_FragColor = vec4( vec3( depth ), opacity );

		}`};class zF extends Wa{constructor(e,t,n=!1,i=!1,o=new be(256,256)){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=n,this.supportsNormalTexture=i,this.originalClearColor=new Je,this._oldClearColor=new Je,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new be(o.x,o.y),this.saoRenderTarget=new Ir(this.resolution.x,this.resolution.y),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new Ir(this.resolution.x,this.resolution.y,{minFilter:ln,magFilter:ln}),this.depthRenderTarget=this.normalRenderTarget.clone();let s;this.supportsDepthTextureExtension&&(s=new r8,s.type=E4,this.beautyRenderTarget.depthTexture=s,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new AS,this.depthMaterial.depthPacking=ES,this.depthMaterial.blending=Cn,this.normalMaterial=new Bte,this.normalMaterial.blending=Cn,Gv===void 0&&console.error("THREE.SAOPass relies on SAOShader"),this.saoMaterial=new ar({defines:Object.assign({},Gv.defines),fragmentShader:Gv.fragmentShader,vertexShader:Gv.vertexShader,uniforms:fi.clone(Gv.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?s:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=Cn,bl===void 0&&console.error("THREE.SAOPass relies on DepthLimitedBlurShader"),this.vBlurMaterial=new ar({uniforms:fi.clone(bl.uniforms),defines:Object.assign({},bl.defines),vertexShader:bl.vertexShader,fragmentShader:bl.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?s:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=Cn,this.hBlurMaterial=new ar({uniforms:fi.clone(bl.uniforms),defines:Object.assign({},bl.defines),vertexShader:bl.vertexShader,fragmentShader:bl.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?s:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=Cn,jo===void 0&&console.error("THREE.SAOPass relies on CopyShader"),this.materialCopy=new ar({uniforms:fi.clone(jo.uniforms),vertexShader:jo.vertexShader,fragmentShader:jo.fragmentShader,blending:Cn}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=KP,this.materialCopy.blendSrc=NB,this.materialCopy.blendDst=ZP,this.materialCopy.blendEquation=Yu,this.materialCopy.blendSrcAlpha=RB,this.materialCopy.blendDstAlpha=ZP,this.materialCopy.blendEquationAlpha=Yu,Pw===void 0&&console.error("THREE.SAOPass relies on UnpackDepthRGBAShader"),this.depthCopy=new ar({uniforms:fi.clone(Pw.uniforms),vertexShader:Pw.vertexShader,fragmentShader:Pw.fragmentShader,blending:Cn}),this.fsQuad=new yd(null)}render(e,t,n){if(this.renderToScreen&&(this.materialCopy.blending=Cn,this.materialCopy.uniforms.tDiffuse.value=n.texture,this.materialCopy.needsUpdate=!0,this.renderPass(e,this.materialCopy,null)),this.params.output===1)return;e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const i=e.autoClear;e.autoClear=!1,e.setRenderTarget(this.depthRenderTarget),e.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;const o=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=o,this.hBlurMaterial.uniforms.depthCutoff.value=o,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(zx.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new be(0,1)),zx.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new be(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),e.setClearColor(0),e.setRenderTarget(this.beautyRenderTarget),e.clear(),e.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(e,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(e,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(e,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(e,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let s=this.materialCopy;this.params.output===3?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,s=this.depthCopy):this.params.output===4?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),this.params.output===0?s.blending=KP:s.blending=Cn,this.renderPass(e,s,this.renderToScreen?null:n),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=i}renderPass(e,t,n,i,o){e.getClearColor(this.originalClearColor);const s=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,i!=null&&(e.setClearColor(i),e.setClearAlpha(o||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(s)}renderOverride(e,t,n,i,o){e.getClearColor(this.originalClearColor);const s=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,i=t.clearColor||i,o=t.clearAlpha||o,i!=null&&(e.setClearColor(i),e.setClearAlpha(o||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(s)}setSize(e,t){this.beautyRenderTarget.setSize(e,t),this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.depthRenderTarget.setSize(e,t),this.saoMaterial.uniforms.size.value.set(e,t),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,t),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,t),this.hBlurMaterial.needsUpdate=!0}}zF.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4};const ba=new zF(rt,Ye(),!1,!0);ba.params.saoKernelRadius=80;ba.params.saoBlurStdDev=5;Vx(r=>ba.params.saoScale=r==="light"?3e3:2e3);Ye(r=>{ba.camera=r,ba.saoMaterial.defines.PERSPECTIVE_CAMERA=r.isPerspectiveCamera?1:0,ba.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(r.projectionMatrixInverse),ba.saoMaterial.uniforms.cameraProjectionMatrix.value=r.projectionMatrix,ba.vBlurMaterial.defines.PERSPECTIVE_CAMERA=r.isPerspectiveCamera?1:0,ba.hBlurMaterial.defines.PERSPECTIVE_CAMERA=r.isPerspectiveCamera?1:0});const a6={defines:{DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},aspect:{value:1},aperture:{value:.025},maxblur:{value:.01},nearClip:{value:1},farClip:{value:1e3}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		varying vec2 vUv;

		uniform sampler2D tColor;
		uniform sampler2D tDepth;

		uniform float maxblur; // max blur amount
		uniform float aperture; // aperture - bigger values for shallower depth of field

		uniform float nearClip;
		uniform float farClip;

		uniform float focus;
		uniform float aspect;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, nearClip, farClip );
			#else
			return orthographicDepthToViewZ( depth, nearClip, farClip );
			#endif
		}


		void main() {

			vec2 aspectcorrect = vec2( 1.0, aspect );

			float viewZ = getViewZ( getDepth( vUv ) );

			float factor = ( focus + viewZ ); // viewZ is <= 0, so this is a difference equation

			vec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );

			vec2 dofblur9 = dofblur * 0.9;
			vec2 dofblur7 = dofblur * 0.7;
			vec2 dofblur4 = dofblur * 0.4;

			vec4 col = vec4( 0.0 );

			col += texture2D( tColor, vUv.xy );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );

			gl_FragColor = col / 41.0;
			gl_FragColor.a = 1.0;

		}`};class qie extends Wa{constructor(e,t,n){super(),this.scene=e,this.camera=t;const i=n.focus!==void 0?n.focus:1,o=n.aspect!==void 0?n.aspect:t.aspect,s=n.aperture!==void 0?n.aperture:.025,a=n.maxblur!==void 0?n.maxblur:1,l=n.width||window.innerWidth||1,c=n.height||window.innerHeight||1;this.renderTargetDepth=new Ir(l,c,{minFilter:ln,magFilter:ln}),this.renderTargetDepth.texture.name="BokehPass.depth",this.materialDepth=new AS,this.materialDepth.depthPacking=ES,this.materialDepth.blending=Cn,a6===void 0&&console.error("THREE.BokehPass relies on BokehShader");const d=a6,f=fi.clone(d.uniforms);f.tDepth.value=this.renderTargetDepth.texture,f.focus.value=i,f.aspect.value=o,f.aperture.value=s,f.maxblur.value=a,f.nearClip.value=t.near,f.farClip.value=t.far,this.materialBokeh=new ar({defines:Object.assign({},d.defines),uniforms:f,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}),this.uniforms=f,this.needsSwap=!1,this.fsQuad=new yd(this.materialBokeh),this._oldClearColor=new Je}render(e,t,n){this.scene.overrideMaterial=this.materialDepth,e.getClearColor(this._oldClearColor);const i=e.getClearAlpha(),o=e.autoClear;e.autoClear=!1,e.setClearColor(16777215),e.setClearAlpha(1),e.setRenderTarget(this.renderTargetDepth),e.clear(),e.render(this.scene,this.camera),this.uniforms.tColor.value=n.texture,this.uniforms.nearClip.value=this.camera.near,this.uniforms.farClip.value=this.camera.far,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),e.clear(),this.fsQuad.render(e)),this.scene.overrideMaterial=null,e.setClearColor(this._oldClearColor),e.setClearAlpha(i),e.autoClear=o}}const Ok=new qie(rt,Ye(),{}),yf=Ok.uniforms;Ye(r=>{Ok.camera=r,yf.aspect.value=r.aspect,yf.nearClip.value=r.near,yf.farClip.value=r.far});xF(r=>yf.focus.value=r);wF(r=>yf.aperture.value=r);MF(r=>yf.maxblur.value=r);const Yv={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new be(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		void SMAAEdgeDetectionVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAAEdgeDetectionVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
			vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );

			// Calculate color deltas:
			vec4 delta;
			vec3 C = texture2D( colorTex, texcoord ).rgb;

			vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
			vec3 t = abs( C - Cleft );
			delta.x = max( max( t.r, t.g ), t.b );

			vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
			t = abs( C - Ctop );
			delta.y = max( max( t.r, t.g ), t.b );

			// We do the usual threshold:
			vec2 edges = step( threshold, delta.xy );

			// Then discard if there is no edge:
			if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
				discard;

			// Calculate right and bottom deltas:
			vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
			t = abs( C - Cright );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
			t = abs( C - Cbottom );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the maximum delta in the direct neighborhood:
			float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );

			// Calculate left-left and top-top deltas:
			vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
			t = abs( C - Cleftleft );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
			t = abs( C - Ctoptop );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the final maximum delta:
			maxDelta = max( max( maxDelta, delta.z ), delta.w );

			// Local contrast adaptation in action:
			edges.xy *= step( 0.5 * maxDelta, delta.xy );

			return vec4( edges, 0.0, 0.0 );
		}

		void main() {

			gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );

		}`},Tw={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new be(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];
		varying vec2 vPixcoord;

		void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
			vPixcoord = texcoord / resolution;

			// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components

			// And these for the searches, they indicate the ends of the loops:
			vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );

		}

		void main() {

			vUv = uv;

			SMAABlendingWeightCalculationVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )

		uniform sampler2D tDiffuse;
		uniform sampler2D tArea;
		uniform sampler2D tSearch;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[3];
		varying vec2 vPixcoord;

		#if __VERSION__ == 100
		vec2 round( vec2 x ) {
			return sign( x ) * floor( abs( x ) + 0.5 );
		}
		#endif

		float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
			// Not required if searchTex accesses are set to point:
			// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);
			// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +
			//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;
			e.r = bias + e.r * scale;
			return 255.0 * texture2D( searchTex, e, 0.0 ).r;
		}

		float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			/**
				* @PSEUDO_GATHER4
				* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to
				* sample between edge, thus fetching four edges in a row.
				* Sampling with different offsets in each direction allows to disambiguate
				* which edges are active from the four fetched ones.
				*/
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			// We correct the previous (-0.25, -0.125) offset we applied:
			texcoord.x += 0.25 * resolution.x;

			// The searches are bias by 1, so adjust the coords accordingly:
			texcoord.x += resolution.x;

			// Disambiguate the length added by the last step:
			texcoord.x += 2.0 * resolution.x; // Undo last step
			texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);

			return texcoord.x;
		}

		float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			texcoord.x -= 0.25 * resolution.x;
			texcoord.x -= resolution.x;
			texcoord.x -= 2.0 * resolution.x;
			texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );

			return texcoord.x;
		}

		float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y; // WebGL port note: Changed sign
			texcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y; // WebGL port note: Changed sign
			texcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
			// Rounding prevents precision errors of bilinear filtering:
			vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;

			// We do a scale and bias for mapping to texel space:
			texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );

			// Move to proper place, according to the subpixel offset:
			texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;

			return texture2D( areaTex, texcoord, 0.0 ).rg;
		}

		vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
			vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );

			vec2 e = texture2D( edgesTex, texcoord ).rg;

			if ( e.g > 0.0 ) { // Edge at north
				vec2 d;

				// Find the distance to the left:
				vec2 coords;
				coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
				coords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)
				d.x = coords.x;

				// Now fetch the left crossing edges, two at a time using bilinear
				// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to
				// discern what value each edge has:
				float e1 = texture2D( edgesTex, coords, 0.0 ).r;

				// Find the distance to the right:
				coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
				d.y = coords.x;

				// We want the distances to be in pixel units (doing this here allow to
				// better interleave arithmetic and memory accesses):
				d = d / resolution.x - pixcoord.x;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the right crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;

				// Ok, we know how this pattern looks like, now it is time for getting
				// the actual area:
				weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
			}

			if ( e.r > 0.0 ) { // Edge at west
				vec2 d;

				// Find the distance to the top:
				vec2 coords;

				coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
				coords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;
				d.x = coords.y;

				// Fetch the top crossing edges:
				float e1 = texture2D( edgesTex, coords, 0.0 ).g;

				// Find the distance to the bottom:
				coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
				d.y = coords.y;

				// We want the distances to be in pixel units:
				d = d / resolution.y - pixcoord.y;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the bottom crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;

				// Get the area for this direction:
				weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
			}

			return weights;
		}

		void main() {

			gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );

		}`},aE={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new be(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAANeighborhoodBlendingVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform sampler2D tColor;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
			// Fetch the blending weights for current pixel:
			vec4 a;
			a.xz = texture2D( blendTex, texcoord ).xz;
			a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
			a.w = texture2D( blendTex, offset[ 1 ].xy ).a;

			// Is there any blending weight with a value greater than 0.0?
			if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
				return texture2D( colorTex, texcoord, 0.0 );
			} else {
				// Up to 4 lines can be crossing a pixel (one through each edge). We
				// favor blending by choosing the line with the maximum weight for each
				// direction:
				vec2 offset;
				offset.x = a.a > a.b ? a.a : -a.b; // left vs. right
				offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs

				// Then we go in the direction that has the maximum weight:
				if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical
					offset.y = 0.0;
				} else {
					offset.x = 0.0;
				}

				// Fetch the opposite color and lerp by hand:
				vec4 C = texture2D( colorTex, texcoord, 0.0 );
				texcoord += sign( offset ) * resolution;
				vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
				float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );

				// WebGL port note: Added gamma correction
				C.xyz = pow(C.xyz, vec3(2.2));
				Cop.xyz = pow(Cop.xyz, vec3(2.2));
				vec4 mixed = mix(C, Cop, s);
				mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));

				return mixed;
			}
		}

		void main() {

			gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );

		}`};class Kie extends Wa{constructor(e,t){super(),this.edgesRT=new Ir(e,t,{depthBuffer:!1}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new Ir(e,t,{depthBuffer:!1}),this.weightsRT.texture.name="SMAAPass.weights";const n=this,i=new Image;i.src=this.getAreaTexture(),i.onload=function(){n.areaTexture.needsUpdate=!0},this.areaTexture=new Ii,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=i,this.areaTexture.minFilter=En,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const o=new Image;o.src=this.getSearchTexture(),o.onload=function(){n.searchTexture.needsUpdate=!0},this.searchTexture=new Ii,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=o,this.searchTexture.magFilter=ln,this.searchTexture.minFilter=ln,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,Yv===void 0&&console.error("THREE.SMAAPass relies on SMAAShader"),this.uniformsEdges=fi.clone(Yv.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new ar({defines:Object.assign({},Yv.defines),uniforms:this.uniformsEdges,vertexShader:Yv.vertexShader,fragmentShader:Yv.fragmentShader}),this.uniformsWeights=fi.clone(Tw.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new ar({defines:Object.assign({},Tw.defines),uniforms:this.uniformsWeights,vertexShader:Tw.vertexShader,fragmentShader:Tw.fragmentShader}),this.uniformsBlend=fi.clone(aE.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new ar({uniforms:this.uniformsBlend,vertexShader:aE.vertexShader,fragmentShader:aE.fragmentShader}),this.needsSwap=!1,this.fsQuad=new yd(null)}render(e,t,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}getAreaTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}}const Zie=new Kie(ak,lk);xt(()=>{var r;const e=$f();if(!e)return;const t=[Ix];if(Vx()&&t.push(ba),jT()&&t.push(Qf),n6()&&t.push(kF),DT()&&t.push(Ok),r6()&&t.push(La),HT()&&t.push(DF),WT())for(const i of Wie)t.push(i);const n=A0();(n==="SMAA"||n==="MSAA"&&!((r=Zr())!=null&&r.capabilities.isWebGL2))&&t.push(Zie);for(const i of t)e.addPass(i);return()=>{for(const i of t)e.removePass(i)}},[$f,Vx,jT,n6,DT,r6,HT,WT,A0,Zr]);const[Aw,BF]=zi();xt(()=>{const r=Zr();if(!r)return;const e=Ye(),t=Lx();if(t){const[l,c]=to(),d=l*1,f=c*.5;t.aspect=e.aspect=d/f,e.updateProjectionMatrix(),t.updateProjectionMatrix();const m=mg(()=>{vw(),Aw(),r.setViewport(0,0,d,f),r.setScissor(0,0,d,f),r.setScissorTest(!0),r.render(rt,t),r.setViewport(0,f,d,f),r.setScissor(0,f,d,f),r.render(rt,e),gw()});return()=>{m.cancel(),r.setViewport(0,0,l,c),r.setScissor(0,0,l,c),r.setScissorTest(!1),e.aspect=l/c,e.updateProjectionMatrix()}}const n=Zf();if(n==="webxr"){const l=mg(()=>{vw(),Aw(),r.render(rt,e),gw()});return()=>{l.cancel()}}if(n){const l=new HS;l.scale=.5,l.visible=!1;const c=1e3,d=-c*.5,[f,m]=to(),g=f*.5,b=m*1;e.aspect=g/b,e.updateProjectionMatrix();const _=new _d(e),w=mg(()=>{vw(),Aw(),r.setViewport(0,0,g,b),r.setScissor(0,0,g,b),r.setScissorTest(!0),l.outerObject3d.position.copy(vr(e)),l.outerObject3d.quaternion.copy(e.quaternion),l.translateZ(-c);const M=l.outerObject3d.position.clone(),S=e.quaternion.clone(),C=e.position.clone();l.moveRight(d),_.moveRight(-3),e.lookAt(l.outerObject3d.position),r.render(rt,e),l.outerObject3d.position.copy(M),e.quaternion.copy(S),e.position.copy(C),r.setViewport(g,0,g,b),r.setScissor(g,0,g,b),l.moveRight(-d),_.moveRight(3),e.lookAt(l.outerObject3d.position),r.render(rt,e),l.outerObject3d.position.copy(M),e.quaternion.copy(S),e.position.copy(C),gw()});return()=>{l.dispose(),w.cancel(),r.setViewport(0,0,f,m),r.setScissor(0,0,f,m),r.setScissorTest(!1),e.aspect=f/m,e.updateProjectionMatrix()}}const i=$f();if(!i)return;let o=!1,s=!1;const a=mg(()=>{vw(),Aw(),G8[0]&&(o||(kie(!0),o=!0),yne()),Q8[0]&&!s&&(Aie(!0),s=!0),i.render(),gw()});return()=>{a.cancel()}},[Zf,Ye,Lx,to,Zr,$f]);const Jie=new Map,Qie=new Kte,$ie=r=>Fa(Jie,r.join(","),()=>($4(),Qie.load(r,Xf,ek(r.join(",")),Xf))),[eoe,GT]=De(void 0),[Dk,k0]=De([]),toe=vm(Dk,k0),roe=gm(Dk,k0);xt(()=>{var r;const e=GT(),t=E0(),n=(r=Bf(k0()))==null?void 0:r.texture;if(n)if(Array.isArray(n))rt.background=$ie(n);else{let i=!0;const o=Li(n,()=>i&&(rt.background=o));return o.mapping=_0,()=>{i=!1}}else e?rt.background=Li(e):t?t==="transparent"?rt.background=null:rt.background=new Je(t):rt.background=new Je("black")},[E0,GT,k0]);const[Rk,L0]=De([]),noe=vm(Rk,L0),ioe=gm(Rk,L0),ooe=TB(Rk,L0),soe={...Cc,texture:String},aoe={...Ec,texture:"studio"};class _f extends Kl{constructor(){super(),F(this,"_texture","studio"),noe(this)}dispose(){return this.done?this:(super.dispose(),ioe(this),this)}get texture(){return this._texture}set texture(e){this._texture=e,ooe()}}F(_f,"componentName","environment"),F(_f,"defaults",aoe),F(_f,"schema",soe);const[loe,YT]=De("default"),zg=new _f;zg.texture=void 0;_n.delete(zg);const FF=new KB(256),lE=new qB(1,1e5,FF);xt(()=>{var r;const e=(r=Bf(L0()))==null?void 0:r.texture;if(!e)return;if(e==="dynamic"){const i=Or(()=>{const o=Ye(),s=Zr();lE.position.copy(vr(o)),lE.matrixWorld.copy(o.matrixWorld),lE.update(s,rt),s.render(rt,o)});return rt.environment=FF.texture,()=>{i.cancel(),rt.environment=null}}let t=!0;const n=Li(e==="studio"?W8+"studio.jpg":e,()=>t&&(rt.environment=n));return n.mapping=_0,()=>{t=!1,rt.environment=null}},[L0]);xt(()=>{const r=YT();if(!r)return;if(typeof r=="string"&&r!=="default")return r==="dynamic"?zg.texture="dynamic":zg.texture=r,()=>{zg.texture=void 0};const e=new lr;return Promise.resolve().then(()=>m0e).then(t=>{const n=t.default,i=new n;_n.delete(i),i.helper=!1,i.groundColor="#666666",e.then(()=>i.dispose())}),Promise.resolve().then(()=>d0e).then(t=>{const n=t.default,i=new n;if(_n.delete(i),i.helper=!1,i.y=Ca,i.z=Ca,i.intensity=.5,e.then(()=>i.dispose()),!gc())return;const o=new n;_n.delete(o),o.helper=!1,o.y=-Ca,o.z=-Ca,o.intensity=.5,e.then(()=>o.dispose())}),()=>{e.cancel()}},[YT,gc]);const[UF,uoe]=De(!1),coe={...Cc,texture:[String,Array]},hoe={...Ec,texture:void 0};class wf extends Kl{constructor(){super(),F(this,"_texture"),toe(this)}dispose(){return this.done?this:(super.dispose(),roe(this),this)}get texture(){return this._texture}set texture(e){this._texture=e,Dk([...k0()])}}F(wf,"componentName","skybox"),F(wf,"defaults",hoe),F(wf,"schema",coe);const[doe,poe]=De(0),[foe,XT]=De(void 0),[moe,qT]=De(void 0),[voe,KT]=De(void 0),ZT=new wf;_n.delete(ZT);const Nk={get defaultLight(){return YT()},set defaultLight(r){loe(r)},get shadowResolution(){return KT()},set shadowResolution(r){voe(r)},get shadowBias(){return XT()},set shadowBias(r){foe(r)},get shadowDistance(){return qT()},set shadowDistance(r){moe(r)},get skybox(){return ZT.texture},set skybox(r){ZT.texture=r},get gridHelper(){return FT()},set gridHelper(r){BT(r)},get gridHelperSize(){return UT()},set gridHelperSize(r){Eie(r)},get gravity(){return dF()},set gravity(r){iie(r)},get repulsion(){return poe()},set repulsion(r){doe(r)},get centripetal(){return gc()},set centripetal(r){eie(r)},get antiAlias(){return A0()},set antiAlias(r){Fie(r)},get pixelRatio(){return id()},set pixelRatio(r){hne(r)},get fps(){return fT()},set fps(r){sne(r)},get logarithmicDepth(){return pT()},set logarithmicDepth(r){ine(r)},get exposure(){return _T()},set exposure(r){_ne(r)},get pbr(){return wT()},set pbr(r){wne(r)},get bloom(){return jT()},set bloom(r){Lie(r)},get bloomStrength(){return Ak()},set bloomStrength(r){Die(r)},get bloomRadius(){return Tk()},set bloomRadius(r){Oie(r)},get bloomThreshold(){return kk()},set bloomThreshold(r){Rie(r)},get ambientOcclusion(){return Vx()},set ambientOcclusion(r){Yie(r)},get outlineColor(){return ST()},set outlineColor(r){Ene(r)},get outlineHiddenColor(){return MT()},set outlineHiddenColor(r){Pne(r)},get outlinePattern(){return CT()},set outlinePattern(r){Tne(r)},get outlinePulse(){return K8()},set outlinePulse(r){Ane(r)},get outlineStrength(){return Z8()},set outlineStrength(r){kne(r)},get outlineThickness(){return J8()},set outlineThickness(r){Lne(r)},get bokeh(){return DT()},set bokeh(r){yF(r)},get bokehAperture(){return wF()},set bokehAperture(r){_F(r)},get bokehFocus(){return xF()},set bokehFocus(r){bF(r)},get bokehMaxBlur(){return MF()},set bokehMaxBlur(r){SF(r)},get lensDistortion(){return HT()},set lensDistortion(r){Bie(r)},get lensIor(){return LF()},set lensIor(r){Vie(r)},get lensBand(){return OF()},set lensBand(r){zie(r)},get motionBlur(){return WT()},set motionBlur(r){Gie(r)},get motionBlurStrength(){return NF()},set motionBlurStrength(r){Hie(r)},get texture(){return GT()},set texture(r){eoe(r)},get color(){return E0()},set color(r){nne(r)}},JS={skybox:[String,Array],defaultLight:[String,Boolean],shadowDistance:Number,shadowResolution:Number,shadowBias:Number,gridHelper:Boolean,gridHelperSize:Number,gravity:Number,repulsion:Number,centripetal:Boolean,antiAlias:[Boolean,String],logarithmicDepth:Boolean,pixelRatio:Number,fps:Number,exposure:Number,pbr:Boolean,bloom:Boolean,bloomStrength:Number,bloomRadius:Number,bloomThreshold:Number,ambientOcclusion:[Boolean,String],outlineColor:String,outlineHiddenColor:String,outlinePattern:String,outlinePulse:Number,outlineStrength:Number,outlineThickness:Number,bokeh:Boolean,bokehAperture:Number,bokehFocus:Number,bokehMaxBlur:Number,lensDistortion:Boolean,lensIor:Number,lensBand:Number,motionBlur:Boolean,motionBlurStrength:Number,texture:String,color:String},ya={...Nk,shadowDistance:new Yr(2e3),shadowResolution:new Yr(1024),shadowBias:new Yr(uk)},[Ik,O0]=De([]),goe=vm(Ik,O0),yoe=gm(Ik,O0),jF=Qs(TB(Ik,O0),0,"trailing"),zo={get autoMount(){return bT()},set autoMount(r){xne(r)}},HF={};for(const r of Object.keys(JS))Object.defineProperty(zo,r,{get(){return Nk[r]},set(e){HF[r]=e,jF()},enumerable:!0});const _oe=Object.fromEntries(Object.entries(ya).map(([r,e])=>[r,e instanceof Yr?void 0:e]));xt(function(){const r={};for(const e of[_oe,...O0(),HF])for(const[t,n]of Object.entries(e))n!==void 0&&(r[t]=n);Object.assign(Nk,r)},[O0]);const D0=window;"__THREE__"in D0&&(D0.__THREE__+=" - Lingo3D Beta");D0.setDebug=UF;"__LINGO3D__"in D0&&console.warn("multiple versions of Lingo3D detected");D0.__LINGO3D__=!0;async function woe(){const{Sphere:r}=await Tm(),e=new r(Zl(this).x*.5);this.cannonBody.addShape(e)}const Vk=new F4(Vl,32,32);class iy extends Yo{constructor(){super(Vk),F(this,"_physicsShape",woe)}}F(iy,"componentName","sphere");const boe=Object.freeze(Object.defineProperty({__proto__:null,sphereGeometry:Vk,default:iy},Symbol.toStringTag,{value:"Module"})),xoe=new z4(Vl,Wo,16);class zk extends Yo{constructor(){super(xoe)}}F(zk,"componentName","cone");async function Soe(){const{Cylinder:r}=await Tm(),{x:e,y:t}=Zl(this),n=e*.5,i=new r(n,n,t);this.cannonBody.addShape(i)}const Moe=new kS(Vl,Vl,Wo,16);class oy extends Yo{constructor(){super(Moe),F(this,"_physicsShape",Soe)}}F(oy,"componentName","cylinder");const Coe=new B4(Vl);class Bk extends Yo{constructor(){super(Coe)}}F(Bk,"componentName","octahedron");const QS=new U4(61*Wt);QS.rotateY(45*ti);QS.rotateX(125*ti);QS.translate(0,-.2,.2);class Fk extends Yo{constructor(){super(QS)}}F(Fk,"componentName","tetrahedron");async function Eoe(){const{Box:r,Vec3:e}=await Tm(),t=Zl(this),n=t.clone().multiply(un.set(.15,.5,.1)),i=t.clone().multiply(Jre.set(.5,.15,.1)),o=new r(n),s=new r(i);this.cannonBody.addShape(o,new e(-i.x,0,0)),this.cannonBody.addShape(o,new e(i.x,0,0)),this.cannonBody.addShape(s,new e(0,-n.y,0)),this.cannonBody.addShape(s,new e(0,n.y,0))}const Poe=new j4(40*Wt,10*Wt,8,16);class Uk extends Yo{constructor(){super(Poe),F(this,"_physicsShape",Eoe)}}F(Uk,"componentName","torus");const WF={...wk},GF={...bk,scaleZ:0,depth:0},YF=new J0(Wo,Wo,1,1);class bf extends Yo{constructor(){super(YF),this.object3d.scale.z=k8}get depth(){return 0}set depth(e){}get scaleZ(){return 0}set scaleZ(e){}}F(bf,"componentName","plane"),F(bf,"defaults",GF),F(bf,"schema",WF);async function Toe(){const{Sphere:r}=await Tm();this.cannonBody.addShape(new r(Zl(this).x*.5))}const Aoe={...wk},koe={...bk,scaleZ:0,depth:0},Loe=new V4(Vl,32);class Bg extends Yo{constructor(){super(Loe),F(this,"_physicsShape",Toe),this.object3d.scale.z=k8}get depth(){return 0}set depth(e){}get scaleZ(){return 0}set scaleZ(e){}}F(Bg,"componentName","circle"),F(Bg,"defaults",koe),F(Bg,"schema",Aoe);const uE=new Map,jk=(r,e)=>{if(uE.has(e))return uE.get(e);const t=new j;return mf.setFromObject(r).getSize(t),Object.freeze(t),uE.set(e,t),t},cE=new Map,XF=(r,e)=>{if(cE.has(e)){const[o,s,a]=cE.get(e);return r.scale.multiplyScalar(o),r.position.copy(s).multiplyScalar(-1),a}const t=jk(r,e).clone(),n=1/t.y;r.scale.multiplyScalar(n);const i=ry(r);return r.position.copy(i).multiplyScalar(-1),t.multiplyScalar(n),Object.freeze(t),cE.set(e,[n,i,t]),t},qF={...Jl,src:String,onLoad:Function,boxVisible:Boolean},KF={...Ql,src:void 0,onLoad:void 0,boxVisible:!1},Hk={...qF,resize:Boolean},Wk={...KF,resize:!0},Ooe=dd(()=>yn(()=>import("./loadFBX.19798966.d3029277.js"),[])),Doe=dd(()=>yn(()=>import("./loadGLTF.9c5bcdbb.6d081df4.js"),[]));class Oa extends ny{constructor(e){super(e),F(this,"unmounted"),F(this,"loadingState",new ht(0)),F(this,"serializeAnimations"),F(this,"_resize"),this.unmounted=e}playAnimation(e,t){setTimeout(()=>this.cancelHandle("playAnimation",()=>this.loadingState.get((n,i)=>{n||(i.cancel(),super.playAnimation(e,t))})))}stopAnimation(){setTimeout(()=>this.cancelHandle("stopAnimation",()=>this.loadingState.get((e,t)=>{e||(t.cancel(),super.stopAnimation())})))}async loadAnimation(e,t=e){var n;((n=this.serializeAnimations)!=null?n:this.serializeAnimations={})[t]=e;const i=(await this.load(e)).animations[0];!i||(this.animations[t]=this.watch(new P0(i,await this.loaded)))}get animations(){return super.animations}set animations(e){for(const[t,n]of Object.entries(e))typeof n=="string"?this.loadAnimation(n,t):this.animations[t]=n}async load(e){var t;const n=new CB;this.loadingState.set(this.loadingState.get()+1);const i=(t=Kq(e)[1])==null?void 0:t.toLowerCase();if(!i||!["fbx","glb","gltf"].includes(i))return n.resolve(),setTimeout(()=>this.loadingState.set(this.loadingState.get()-1)),new ls;let o;try{o=i==="fbx"?await(await Ooe()).default(e,!this.unmounted):await(await Doe()).default(e,!this.unmounted)}catch{return n.resolve(),setTimeout(()=>this.loadingState.set(this.loadingState.get()-1)),new ls}return n.resolve(),setTimeout(()=>this.loadingState.set(this.loadingState.get()-1)),o}get resize(){var e;return(e=this._resize)!=null?e:!0}set resize(e){this._resize=e,this.loaded.done&&(this.src=this._src)}resolveLoaded(e,t){for(const i of e.animations)this.animations[i.name]=this.watch(new P0(i,e));const n=this._resize===!1?jk(e,t):XF(e,t);return!this.widthSet&&(this.object3d.scale.x=n.x),!this.heightSet&&(this.object3d.scale.y=n.y),!this.depthSet&&(this.object3d.scale.z=n.z),e}find(e,t){const n=super.find(e,t);return n&&(n.model=this),n}findAll(e){const t=super.findAll(e);for(const n of t)n.model=this;return t}}F(Oa,"componentName","model"),F(Oa,"defaults",Wk),F(Oa,"schema",Hk);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var He=function(){return He=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},He.apply(this,arguments)};function Gk(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Jt(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zt(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Pr(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}var br;(function(r){r.Start="xstate.start",r.Stop="xstate.stop",r.Raise="xstate.raise",r.Send="xstate.send",r.Cancel="xstate.cancel",r.NullEvent="",r.Assign="xstate.assign",r.After="xstate.after",r.DoneState="done.state",r.DoneInvoke="done.invoke",r.Log="xstate.log",r.Init="xstate.init",r.Invoke="xstate.invoke",r.ErrorExecution="error.execution",r.ErrorCommunication="error.communication",r.ErrorPlatform="error.platform",r.ErrorCustom="xstate.error",r.Update="xstate.update",r.Pure="xstate.pure",r.Choose="xstate.choose"})(br||(br={}));var yc;(function(r){r.Parent="#_parent",r.Internal="#_internal"})(yc||(yc={}));var JT=br.Start,Yk=br.Stop,em=br.Raise,tm=br.Send,ZF=br.Cancel,Roe=br.NullEvent,JF=br.Assign;br.After;br.DoneState;var QF=br.Log,Noe=br.Init,QT=br.Invoke;br.ErrorExecution;var l6=br.ErrorPlatform,Ioe=br.ErrorCustom,$F=br.Update,Voe=br.Choose,zoe=br.Pure,eU=".",u6={},$T="xstate.guard",Boe="",hE;function Xk(r,e,t){t===void 0&&(t=eU);var n=Fg(r,t),i=Fg(e,t);return hr(i)?hr(n)?i===n:!1:hr(n)?n in i:Object.keys(n).every(function(o){return o in i?Xk(n[o],i[o]):!1})}function tU(r){try{return hr(r)||typeof r=="number"?"".concat(r):r.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function eA(r,e){try{return km(r)?r:r.toString().split(e)}catch{throw new Error("'".concat(r,"' is not a valid state path."))}}function Foe(r){return typeof r=="object"&&"value"in r&&"context"in r&&"event"in r&&"_event"in r}function Fg(r,e){if(Foe(r))return r.value;if(km(r))return Bx(r);if(typeof r!="string")return r;var t=eA(r,e);return Bx(t)}function Bx(r){if(r.length===1)return r[0];for(var e={},t=e,n=0;n<r.length-1;n++)n===r.length-2?t[r[n]]=r[n+1]:(t[r[n]]={},t=t[r[n]]);return e}function gg(r,e){for(var t={},n=Object.keys(r),i=0;i<n.length;i++){var o=n[i];t[o]=e(r[o],o,r,i)}return t}function c6(r,e,t){var n,i,o={};try{for(var s=Jt(Object.keys(r)),a=s.next();!a.done;a=s.next()){var l=a.value,c=r[l];!t(c)||(o[l]=e(c,l,r))}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}var Uoe=function(r){return function(e){var t,n,i=e;try{for(var o=Jt(r),s=o.next();!s.done;s=o.next()){var a=s.value;i=i[a]}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}};function joe(r,e){return function(t){var n,i,o=t;try{for(var s=Jt(r),a=s.next();!a.done;a=s.next()){var l=a.value;o=o[e][l]}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}}function Rb(r){if(!r)return[[]];if(hr(r))return[[r]];var e=jr(Object.keys(r).map(function(t){var n=r[t];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[t]]:Rb(r[t]).map(function(i){return[t].concat(i)})}));return e}function jr(r){var e;return(e=[]).concat.apply(e,Pr([],Zt(r),!1))}function rU(r){return km(r)?r:[r]}function zs(r){return r===void 0?[]:rU(r)}function Fx(r,e,t){var n,i;if(_r(r))return r(e,t.data);var o={};try{for(var s=Jt(Object.keys(r)),a=s.next();!a.done;a=s.next()){var l=a.value,c=r[l];_r(c)?o[l]=c(e,t.data):o[l]=c}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}function Hoe(r){return/^(done|error)\./.test(r)}function h6(r){return!!(r instanceof Promise||r!==null&&(_r(r)||typeof r=="object")&&_r(r.then))}function Woe(r){return r!==null&&typeof r=="object"&&"transition"in r&&typeof r.transition=="function"}function Goe(r,e){var t,n,i=Zt([[],[]],2),o=i[0],s=i[1];try{for(var a=Jt(r),l=a.next();!l.done;l=a.next()){var c=l.value;e(c)?o.push(c):s.push(c)}}catch(d){t={error:d}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return[o,s]}function nU(r,e){return gg(r.states,function(t,n){if(t){var i=(hr(e)?void 0:e[n])||(t?t.current:void 0);if(i)return{current:i,states:nU(t,i)}}})}function Yoe(r,e){return{current:e,states:nU(r,e)}}function d6(r,e,t,n){var i=r&&t.reduce(function(o,s){var a,l,c=s.assignment,d={state:n,action:s,_event:e},f={};if(_r(c))f=c(o,e.data,d);else try{for(var m=Jt(Object.keys(c)),g=m.next();!g.done;g=m.next()){var b=g.value,_=c[b];f[b]=_r(_)?_(o,e.data,d):_}}catch(w){a={error:w}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(a)throw a.error}}return Object.assign({},o,f)},r);return i}var Xoe=function(){};function km(r){return Array.isArray(r)}function _r(r){return typeof r=="function"}function hr(r){return typeof r=="string"}function iU(r,e){if(r)return hr(r)?{type:$T,name:r,predicate:e?e[r]:void 0}:_r(r)?{type:$T,name:r.name,predicate:r}:r}function qoe(r){try{return"subscribe"in r&&_r(r.subscribe)}catch{return!1}}var Xu=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();hE={},hE[Xu]=function(){return this},hE[Symbol.observable]=function(){return this};function rm(r){return!!r&&"__xstatenode"in r}function Koe(r){return!!r&&typeof r.send=="function"}function qk(r,e){return hr(r)||typeof r=="number"?He({type:r},e):r}function pi(r,e){if(!hr(r)&&"$$type"in r&&r.$$type==="scxml")return r;var t=qk(r);return He({name:t.type,data:t,$$type:"scxml",type:"external"},e)}function Tp(r,e){var t=rU(e).map(function(n){return typeof n>"u"||typeof n=="string"||rm(n)?{target:n,event:r}:He(He({},n),{event:r})});return t}function Zoe(r){if(!(r===void 0||r===Boe))return zs(r)}function oU(r,e,t,n,i){var o=r.options.guards,s={state:i,cond:e,_event:n};if(e.type===$T)return((o==null?void 0:o[e.name])||e.predicate)(t,n.data,s);var a=o==null?void 0:o[e.type];if(!a)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(r.id,"'."));return a(t,n.data,s)}function sU(r){return typeof r=="string"?{type:r}:r}function Nb(r,e,t){var n=function(){},i=typeof r=="object",o=i?r:null;return{next:((i?r.next:r)||n).bind(o),error:((i?r.error:e)||n).bind(o),complete:((i?r.complete:t)||n).bind(o)}}function kw(r,e){return"".concat(r,":invocation[").concat(e,"]")}var xf=pi({type:Noe});function tA(r,e){return e&&e[r]||void 0}function R0(r,e){var t;if(hr(r)||typeof r=="number"){var n=tA(r,e);_r(n)?t={type:r,exec:n}:n?t=n:t={type:r,exec:void 0}}else if(_r(r))t={type:r.name||r.toString(),exec:r};else{var n=tA(r.type,e);if(_r(n))t=He(He({},r),{exec:n});else if(n){var i=n.type||r.type;t=He(He(He({},n),r),{type:i})}else t=r}return t}var qu=function(r,e){if(!r)return[];var t=km(r)?r:[r];return t.map(function(n){return R0(n,e)})};function Kk(r){var e=R0(r);return He(He({id:hr(r)?r:e.id},e),{type:e.type})}function Joe(r){return hr(r)?{type:em,event:r}:aU(r,{to:yc.Internal})}function Qoe(r){return{type:em,_event:pi(r.event)}}function aU(r,e){return{to:e?e.to:void 0,type:tm,event:_r(r)?r:qk(r),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:_r(r)?r.name:tU(r)}}function $oe(r,e,t,n){var i={_event:t},o=pi(_r(r.event)?r.event(e,t.data,i):r.event),s;if(hr(r.delay)){var a=n&&n[r.delay];s=_r(a)?a(e,t.data,i):a}else s=_r(r.delay)?r.delay(e,t.data,i):r.delay;var l=_r(r.to)?r.to(e,t.data,i):r.to;return He(He({},r),{to:l,_event:o,event:o.data,delay:s})}var ese=function(r,e,t){return He(He({},r),{value:hr(r.expr)?r.expr:r.expr(e,t.data,{_event:t})})},tse=function(r){return{type:ZF,sendId:r}};function rse(r){var e=Kk(r);return{type:br.Start,activity:e,exec:void 0}}function nse(r){var e=_r(r)?r:Kk(r);return{type:br.Stop,activity:e,exec:void 0}}function ise(r,e,t){var n=_r(r.activity)?r.activity(e,t.data):r.activity,i=typeof n=="string"?{id:n}:n,o={type:br.Stop,activity:i};return o}function ose(r,e){var t=e?"#".concat(e):"";return"".concat(br.After,"(").concat(r,")").concat(t)}function Lw(r,e){var t="".concat(br.DoneState,".").concat(r),n={type:t,data:e};return n.toString=function(){return t},n}function Ib(r,e){var t="".concat(br.DoneInvoke,".").concat(r),n={type:t,data:e};return n.toString=function(){return t},n}function yg(r,e){var t="".concat(br.ErrorPlatform,".").concat(r),n={type:t,data:e};return n.toString=function(){return t},n}var sse=function(r){var e,t,n=[];try{for(var i=Jt(r),o=i.next();!o.done;o=i.next())for(var s=o.value,a=0;a<s.length;){if(s[a].type===JF){n.push(s[a]),s.splice(a,1);continue}a++}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n};function Ux(r,e,t,n,i,o,s){s===void 0&&(s=!1);var a=s?[]:sse(i),l=a.length?d6(t,n,a,e):t,c=s?[t]:void 0,d=[];function f(b){var _;switch(b.type){case em:return Qoe(b);case tm:var w=$oe(b,l,n,r.options.delays);return o&&w.to!==yc.Internal&&d.push(w),w;case QF:{var M=ese(b,l,n);return o==null||o(M,l,n),M}case Voe:{var S=b,C=(_=S.conds.find(function(se){var q=iU(se.cond,r.options.guards);return!q||oU(r,q,l,n,o?void 0:e)}))===null||_===void 0?void 0:_.actions;if(!C)return[];var P=Zt(Ux(r,e,l,n,[qu(zs(C),r.options.actions)],o,s),2),T=P[0],L=P[1];return l=L,c==null||c.push(l),T}case zoe:{var C=b.get(l,n.data);if(!C)return[];var O=Zt(Ux(r,e,l,n,[qu(zs(C),r.options.actions)],o,s),2),k=O[0],N=O[1];return l=N,c==null||c.push(l),k}case Yk:{var M=ise(b,l,n);return o==null||o(M,t,n),M}case JF:{l=d6(l,n,[b],o?void 0:e),c==null||c.push(l);break}default:var V=R0(b,r.options.actions),W=V.exec;if(o)o(V,l,n);else if(W&&c){var ee=c.length-1;V=He(He({},V),{exec:function(se){for(var q=[],re=1;re<arguments.length;re++)q[re-1]=arguments[re];W.apply(void 0,Pr([c[ee]],Zt(q),!1))}})}return V}}function m(b){var _,w,M=[];try{for(var S=Jt(b),C=S.next();!C.done;C=S.next()){var P=C.value,T=f(P);T&&(M=M.concat(T))}}catch(L){_={error:L}}finally{try{C&&!C.done&&(w=S.return)&&w.call(S)}finally{if(_)throw _.error}}return d.forEach(function(L){o(L,l,n)}),d.length=0,M}var g=jr(i.map(m));return[g,l]}var Vp=function(r,e){var t=e(r);return t};function lU(r){var e;return e={id:r,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:r}}},e[Xu]=function(){return this},e}function ase(r,e,t,n){var i,o=sU(r.src),s=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[o.type],a=r.data?Fx(r.data,t,n):void 0,l=s?uU(s,r.id,a):lU(r.id);return l.meta=r,l}function uU(r,e,t){var n=lU(e);if(n.deferred=!0,rm(r)){var i=n.state=Vp(void 0,function(){return(t?r.withContext(t):r).initialState});n.getSnapshot=function(){return i}}return n}function lse(r){try{return typeof r.send=="function"}catch{return!1}}function use(r){return lse(r)&&"id"in r}function cse(r){var e;return He((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Xu]=function(){return this},e),r)}var jx=function(r){return r.type==="atomic"||r.type==="final"};function cU(r){return Object.keys(r.states).map(function(e){return r.states[e]})}function N0(r){return cU(r).filter(function(e){return e.type!=="history"})}function hU(r){var e=[r];return jx(r)?e:e.concat(jr(N0(r).map(hU)))}function _g(r,e){var t,n,i,o,s,a,l,c,d=new Set(r),f=rA(d),m=new Set(e);try{for(var g=Jt(m),b=g.next();!b.done;b=g.next())for(var _=b.value,w=_.parent;w&&!m.has(w);)m.add(w),w=w.parent}catch(N){t={error:N}}finally{try{b&&!b.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}var M=rA(m);try{for(var S=Jt(m),C=S.next();!C.done;C=S.next()){var _=C.value;if(_.type==="compound"&&(!M.get(_)||!M.get(_).length))f.get(_)?f.get(_).forEach(function(V){return m.add(V)}):_.initialStateNodes.forEach(function(V){return m.add(V)});else if(_.type==="parallel")try{for(var P=(s=void 0,Jt(N0(_))),T=P.next();!T.done;T=P.next()){var L=T.value;m.has(L)||(m.add(L),f.get(L)?f.get(L).forEach(function(V){return m.add(V)}):L.initialStateNodes.forEach(function(V){return m.add(V)}))}}catch(V){s={error:V}}finally{try{T&&!T.done&&(a=P.return)&&a.call(P)}finally{if(s)throw s.error}}}}catch(N){i={error:N}}finally{try{C&&!C.done&&(o=S.return)&&o.call(S)}finally{if(i)throw i.error}}try{for(var O=Jt(m),k=O.next();!k.done;k=O.next())for(var _=k.value,w=_.parent;w&&!m.has(w);)m.add(w),w=w.parent}catch(N){l={error:N}}finally{try{k&&!k.done&&(c=O.return)&&c.call(O)}finally{if(l)throw l.error}}return m}function dU(r,e){var t=e.get(r);if(!t)return{};if(r.type==="compound"){var n=t[0];if(n){if(jx(n))return n.key}else return{}}var i={};return t.forEach(function(o){i[o.key]=dU(o,e)}),i}function rA(r){var e,t,n=new Map;try{for(var i=Jt(r),o=i.next();!o.done;o=i.next()){var s=o.value;n.has(s)||n.set(s,[]),s.parent&&(n.has(s.parent)||n.set(s.parent,[]),n.get(s.parent).push(s))}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}function hse(r,e){var t=_g([r],e);return dU(r,rA(t))}function wg(r,e){return Array.isArray(r)?r.some(function(t){return t===e}):r instanceof Set?r.has(e):!1}function dse(r){return Pr([],Zt(new Set(jr(Pr([],Zt(r.map(function(e){return e.ownEvents})),!1)))),!1)}function Vb(r,e){return e.type==="compound"?N0(e).some(function(t){return t.type==="final"&&wg(r,t)}):e.type==="parallel"?N0(e).every(function(t){return Vb(r,t)}):!1}function pse(r){return r===void 0&&(r=[]),r.reduce(function(e,t){return t.meta!==void 0&&(e[t.id]=t.meta),e},{})}function p6(r){return new Set(jr(r.map(function(e){return e.tags})))}function pU(r,e){if(r===e)return!0;if(r===void 0||e===void 0)return!1;if(hr(r)||hr(e))return r===e;var t=Object.keys(r),n=Object.keys(e);return t.length===n.length&&t.every(function(i){return pU(r[i],e[i])})}function fse(r){return typeof r!="object"||r===null?!1:"value"in r&&"_event"in r}function mse(r,e){var t=r.exec,n=He(He({},r),{exec:t!==void 0?function(){return t(e.context,e.event,{action:r,state:e,_event:e._event})}:void 0});return n}var _a=function(){function r(e){var t=this,n;this.actions=[],this.activities=u6,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||u6,this.meta=pse(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(n=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&n!==void 0?n:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return dse(t.configuration)}})}return r.from=function(e,t){if(e instanceof r)return e.context!==t?new r({value:e.value,context:t,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var n=xf;return new r({value:e,context:t,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},r.create=function(e){return new r(e)},r.inert=function(e,t){if(e instanceof r){if(!e.actions.length)return e;var n=xf;return new r({value:e.value,context:t,_event:n,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return r.from(e,t)},r.prototype.toStrings=function(e,t){var n=this;if(e===void 0&&(e=this.value),t===void 0&&(t="."),hr(e))return[e];var i=Object.keys(e);return i.concat.apply(i,Pr([],Zt(i.map(function(o){return n.toStrings(e[o],t).map(function(s){return o+t+s})})),!1))},r.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var t=e.tags;e.machine;var n=Gk(e,["configuration","transitions","tags","machine"]);return He(He({},n),{tags:Array.from(t)})},r.prototype.matches=function(e){return Xk(e,this.value)},r.prototype.hasTag=function(e){return this.tags.has(e)},r.prototype.can=function(e){var t;Xoe(!!this.machine);var n=(t=this.machine)===null||t===void 0?void 0:t.getTransitionData(this,e);return!!(n!=null&&n.transitions.length)&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},r}(),vse={deferEvents:!1},f6=function(){function r(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=He(He({},vse),e)}return r.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},r.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},r.prototype.clear=function(){this.queue=[]},r.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},r.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(t){throw this.clear(),t}finally{this.processingEvent=!1}},r}(),dE=new Map,gse=0,Ow={bookId:function(){return"x:".concat(gse++)},register:function(r,e){return dE.set(r,e),r},get:function(r){return dE.get(r)},free:function(r){dE.delete(r)}};function Zk(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function yse(){var r=Zk();if(r&&"__xstate__"in r)return r.__xstate__}function _se(r){if(Zk()){var e=yse();e&&e.register(r)}}function wse(r,e){e===void 0&&(e={});var t=r.initialState,n=new Set,i=[],o=!1,s=function(){if(!o){for(o=!0;i.length>0;){var c=i.shift();t=r.transition(t,c,l),n.forEach(function(d){return d.next(t)})}o=!1}},a=cse({id:e.id,send:function(c){i.push(c),s()},getSnapshot:function(){return t},subscribe:function(c,d,f){var m=Nb(c,d,f);return n.add(m),m.next(t),{unsubscribe:function(){n.delete(m)}}}}),l={parent:e.parent,self:a,id:e.id||"anonymous",observers:n};return t=r.start?r.start(l):t,a}var bse={sync:!1,autoForward:!1},hi;(function(r){r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped"})(hi||(hi={}));var xse=function(){function r(e,t){var n=this;t===void 0&&(t=r.defaultOptions),this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=hi.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(d,f){if(km(d))return n.batch(d),n.state;var m=pi(qk(d,f));if(n.status===hi.Stopped)return n.state;if(n.status!==hi.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(m.name,'" was sent to uninitialized service "').concat(n.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(m.data)));return n.scheduler.schedule(function(){n.forward(m);var g=n._nextState(m);n.update(g,m)}),n._state},this.sendTo=function(d,f,m){var g=n.parent&&(f===yc.Parent||n.parent.id===f),b=g?n.parent:hr(f)?n.children.get(f)||Ow.get(f):Koe(f)?f:void 0;if(!b){if(!g)throw new Error("Unable to send event to child '".concat(f,"' from service '").concat(n.id,"'."));return}if("machine"in b){if(n.status!==hi.Stopped||n.parent!==b||n.state.done){var _=He(He({},d),{name:d.name===Ioe?"".concat(yg(n.id)):d.name,origin:n.sessionId});!m&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([b,_]):b.send(_)}}else!m&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([b,d.data]):b.send(d.data)},this._exec=function(d,f,m,g){g===void 0&&(g=n.machine.options.actions);var b=d.exec||tA(d.type,g),_=_r(b)?b:b?b.exec:d.exec;if(_)try{return _(f,m.data,n.machine.config.predictableActionArguments?{action:d,_event:m}:{action:d,state:n.state,_event:m})}catch(ee){throw n.parent&&n.parent.send({type:"xstate.error",data:ee}),ee}switch(d.type){case tm:var w=d;if(typeof w.delay=="number"){n.defer(w);return}else w.to?n.sendTo(w._event,w.to,m===xf):n.send(w._event);break;case ZF:n.cancel(d.sendId);break;case JT:{if(n.status!==hi.Running)return;var M=d.activity;if(!n.machine.config.predictableActionArguments&&!n.state.activities[M.id||M.type])break;if(M.type===br.Invoke){var S=sU(M.src),C=n.machine.options.services?n.machine.options.services[S.type]:void 0,P=M.id,T=M.data,L="autoForward"in M?M.autoForward:!!M.forward;if(!C)return;var O=T?Fx(T,f,m):void 0;if(typeof C=="string")return;var k=_r(C)?C(f,m.data,{data:O,src:S,meta:M.meta}):C;if(!k)return;var N=void 0;rm(k)&&(k=O?k.withContext(O):k,N={autoForward:L}),n.spawn(k,P,N)}else n.spawnActivity(M);break}case Yk:{n.stopChild(d.activity.id);break}case QF:var V=d.label,W=d.value;V?n.logger(V,W):n.logger(W);break}};var i=He(He({},r.defaultOptions),t),o=i.clock,s=i.logger,a=i.parent,l=i.id,c=l!==void 0?l:e.id;this.id=c,this.logger=s,this.clock=o,this.parent=a,this.options=i,this.scheduler=new f6({deferEvents:this.options.deferEvents}),this.sessionId=Ow.bookId()}return Object.defineProperty(r.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Vp(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),r.prototype.execute=function(e,t){var n,i;try{for(var o=Jt(e.actions),s=o.next();!s.done;s=o.next()){var a=s.value;this.exec(a,e,t)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},r.prototype.update=function(e,t){var n,i,o,s,a,l,c,d,f=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||t===xf)&&this.options.execute)this.execute(this.state);else for(var m=void 0;m=this._outgoingQueue.shift();)m[0].send(m[1]);if(this.children.forEach(function(N){f.state.children[N.id]=N}),this.devTools&&this.devTools.send(t.data,e),e.event)try{for(var g=Jt(this.eventListeners),b=g.next();!b.done;b=g.next()){var _=b.value;_(e.event)}}catch(N){n={error:N}}finally{try{b&&!b.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}try{for(var w=Jt(this.listeners),M=w.next();!M.done;M=w.next()){var _=M.value;_(e,e.event)}}catch(N){o={error:N}}finally{try{M&&!M.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}try{for(var S=Jt(this.contextListeners),C=S.next();!C.done;C=S.next()){var P=C.value;P(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(N){a={error:N}}finally{try{C&&!C.done&&(l=S.return)&&l.call(S)}finally{if(a)throw a.error}}if(this.state.done){var T=e.configuration.find(function(N){return N.type==="final"&&N.parent===f.machine}),L=T&&T.doneData?Fx(T.doneData,e.context,t):void 0;try{for(var O=Jt(this.doneListeners),k=O.next();!k.done;k=O.next()){var _=k.value;_(Ib(this.id,L))}}catch(N){c={error:N}}finally{try{k&&!k.done&&(d=O.return)&&d.call(O)}finally{if(c)throw c.error}}this._stop(),this._stopChildren()}},r.prototype.onTransition=function(e){return this.listeners.add(e),this.status===hi.Running&&e(this.state,this.state.event),this},r.prototype.subscribe=function(e,t,n){var i=this,o=Nb(e,t,n);this.listeners.add(o.next),this.status!==hi.NotStarted&&o.next(this.state);var s=function(){i.doneListeners.delete(s),i.stopListeners.delete(s),o.complete()};return this.status===hi.Stopped?o.complete():(this.onDone(s),this.onStop(s)),{unsubscribe:function(){i.listeners.delete(o.next),i.doneListeners.delete(s),i.stopListeners.delete(s)}}},r.prototype.onEvent=function(e){return this.eventListeners.add(e),this},r.prototype.onSend=function(e){return this.sendListeners.add(e),this},r.prototype.onChange=function(e){return this.contextListeners.add(e),this},r.prototype.onStop=function(e){return this.stopListeners.add(e),this},r.prototype.onDone=function(e){return this.doneListeners.add(e),this},r.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},r.prototype.start=function(e){var t=this;if(this.status===hi.Running)return this;this.machine._init(),Ow.register(this.sessionId,this),this.initialized=!0,this.status=hi.Running;var n=e===void 0?this.initialState:Vp(this,function(){return fse(e)?t.machine.resolveState(e):t.machine.resolveState(_a.from(e,t.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){t.update(n,xf)}),this},r.prototype._stopChildren=function(){this.children.forEach(function(e){_r(e.stop)&&e.stop()}),this.children.clear()},r.prototype._stop=function(){var e,t,n,i,o,s,a,l,c,d;try{for(var f=Jt(this.listeners),m=f.next();!m.done;m=f.next()){var g=m.value;this.listeners.delete(g)}}catch(O){e={error:O}}finally{try{m&&!m.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}try{for(var b=Jt(this.stopListeners),_=b.next();!_.done;_=b.next()){var g=_.value;g(),this.stopListeners.delete(g)}}catch(O){n={error:O}}finally{try{_&&!_.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}try{for(var w=Jt(this.contextListeners),M=w.next();!M.done;M=w.next()){var g=M.value;this.contextListeners.delete(g)}}catch(O){o={error:O}}finally{try{M&&!M.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}try{for(var S=Jt(this.doneListeners),C=S.next();!C.done;C=S.next()){var g=C.value;this.doneListeners.delete(g)}}catch(O){a={error:O}}finally{try{C&&!C.done&&(l=S.return)&&l.call(S)}finally{if(a)throw a.error}}if(!this.initialized)return this;this.initialized=!1,this.status=hi.Stopped,this._initialState=void 0;try{for(var P=Jt(Object.keys(this.delayedEventsMap)),T=P.next();!T.done;T=P.next()){var L=T.value;this.clock.clearTimeout(this.delayedEventsMap[L])}}catch(O){c={error:O}}finally{try{T&&!T.done&&(d=P.return)&&d.call(P)}finally{if(c)throw c.error}}this.scheduler.clear(),this.scheduler=new f6({deferEvents:this.options.deferEvents})},r.prototype.stop=function(){var e=this,t=this.scheduler;return this._stop(),t.schedule(function(){var n=pi({type:"xstate.stop"}),i=Vp(e,function(){var o=jr(Pr([],Zt(e.state.configuration),!1).sort(function(d,f){return f.order-d.order}).map(function(d){return qu(d.onExit,e.machine.options.actions)})),s=Zt(Ux(e.machine,e.state,e.state.context,n,[o],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),a=s[0],l=s[1],c=new _a({value:e.state.value,context:l,_event:n,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:a.filter(function(d){return d.type!==em&&(d.type!==tm||!!d.to&&d.to!==yc.Internal)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return c.changed=!0,c});e.update(i,n),e._stopChildren(),Ow.free(e.sessionId)}),this},r.prototype.batch=function(e){var t=this;if(!(this.status===hi.NotStarted&&this.options.deferEvents)){if(this.status!==hi.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}this.scheduler.schedule(function(){var n,i,o=t.state,s=!1,a=[],l=function(m){var g=pi(m);t.forward(g),o=Vp(t,function(){return t.machine.transition(o,g)}),a.push.apply(a,Pr([],Zt(o.actions.map(function(b){return mse(b,o)})),!1)),s=s||!!o.changed};try{for(var c=Jt(e),d=c.next();!d.done;d=c.next()){var f=d.value;l(f)}}catch(m){n={error:m}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}o.changed=s,o.actions=a,t.update(o,pi(e[e.length-1]))})},r.prototype.sender=function(e){return this.send.bind(this,e)},r.prototype._nextState=function(e,t){var n=this;t===void 0&&(t=!!this.machine.config.predictableActionArguments&&this._exec);var i=pi(e);if(i.name.indexOf(l6)===0&&!this.state.nextEvents.some(function(s){return s.indexOf(l6)===0}))throw i.data.data;var o=Vp(this,function(){return n.machine.transition(n.state,i,void 0,t||void 0)});return o},r.prototype.nextState=function(e){return this._nextState(e,!1)},r.prototype.forward=function(e){var t,n;try{for(var i=Jt(this.forwardTo),o=i.next();!o.done;o=i.next()){var s=o.value,a=this.children.get(s);if(!a)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(s,"'."));a.send(e)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.defer=function(e){var t=this;this.delayedEventsMap[e.id]=this.clock.setTimeout(function(){e.to?t.sendTo(e._event,e.to,!0):t.send(e._event)},e.delay)},r.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},r.prototype.exec=function(e,t,n){n===void 0&&(n=this.machine.options.actions),this._exec(e,t.context,t._event,n)},r.prototype.removeChild=function(e){var t;this.children.delete(e),this.forwardTo.delete(e),(t=this.state)===null||t===void 0||delete t.children[e]},r.prototype.stopChild=function(e){var t=this.children.get(e);!t||(this.removeChild(e),_r(t.stop)&&t.stop())},r.prototype.spawn=function(e,t,n){if(this.status!==hi.Running)return uU(e,t);if(h6(e))return this.spawnPromise(Promise.resolve(e),t);if(_r(e))return this.spawnCallback(e,t);if(use(e))return this.spawnActor(e,t);if(qoe(e))return this.spawnObservable(e,t);if(rm(e))return this.spawnMachine(e,He(He({},n),{id:t}));if(Woe(e))return this.spawnBehavior(e,t);throw new Error('Unable to spawn entity "'.concat(t,'" of type "').concat(typeof e,'".'))},r.prototype.spawnMachine=function(e,t){var n=this;t===void 0&&(t={});var i=new r(e,He(He({},this.options),{parent:this,id:t.id||e.id})),o=He(He({},bse),t);o.sync&&i.onTransition(function(a){n.send($F,{state:a,id:i.id})});var s=i;return this.children.set(i.id,s),o.autoForward&&this.forwardTo.add(i.id),i.onDone(function(a){n.removeChild(i.id),n.send(pi(a,{origin:i.id}))}).start(),s},r.prototype.spawnBehavior=function(e,t){var n=wse(e,{id:t,parent:this});return this.children.set(t,n),n},r.prototype.spawnPromise=function(e,t){var n,i=this,o=!1,s;e.then(function(l){o||(s=l,i.removeChild(t),i.send(pi(Ib(t,l),{origin:t})))},function(l){if(!o){i.removeChild(t);var c=yg(t,l);try{i.send(pi(c,{origin:t}))}catch{i.devTools&&i.devTools.send(c,i.state),i.machine.strict&&i.stop()}}});var a=(n={id:t,send:function(){},subscribe:function(l,c,d){var f=Nb(l,c,d),m=!1;return e.then(function(g){m||(f.next(g),!m&&f.complete())},function(g){m||f.error(g)}),{unsubscribe:function(){return m=!0}}},stop:function(){o=!0},toJSON:function(){return{id:t}},getSnapshot:function(){return s}},n[Xu]=function(){return this},n);return this.children.set(t,a),a},r.prototype.spawnCallback=function(e,t){var n,i=this,o=!1,s=new Set,a=new Set,l,c=function(m){l=m,a.forEach(function(g){return g(m)}),!o&&i.send(pi(m,{origin:t}))},d;try{d=e(c,function(m){s.add(m)})}catch(m){this.send(yg(t,m))}if(h6(d))return this.spawnPromise(d,t);var f=(n={id:t,send:function(m){return s.forEach(function(g){return g(m)})},subscribe:function(m){var g=Nb(m);return a.add(g.next),{unsubscribe:function(){a.delete(g.next)}}},stop:function(){o=!0,_r(d)&&d()},toJSON:function(){return{id:t}},getSnapshot:function(){return l}},n[Xu]=function(){return this},n);return this.children.set(t,f),f},r.prototype.spawnObservable=function(e,t){var n,i=this,o,s=e.subscribe(function(l){o=l,i.send(pi(l,{origin:t}))},function(l){i.removeChild(t),i.send(pi(yg(t,l),{origin:t}))},function(){i.removeChild(t),i.send(pi(Ib(t),{origin:t}))}),a=(n={id:t,send:function(){},subscribe:function(l,c,d){return e.subscribe(l,c,d)},stop:function(){return s.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:t}}},n[Xu]=function(){return this},n);return this.children.set(t,a),a},r.prototype.spawnActor=function(e,t){return this.children.set(t,e),e},r.prototype.spawnActivity=function(e){var t=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(!!t){var n=t(this.state.context,e);this.spawnEffect(e.id,n)}},r.prototype.spawnEffect=function(e,t){var n;this.children.set(e,(n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:t||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},n[Xu]=function(){return this},n))},r.prototype.attachDev=function(){var e=Zk();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var t=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(He(He({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},t),{features:He({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}_se(this)}},r.prototype.toJSON=function(){return{id:this.id}},r.prototype[Xu]=function(){return this},r.prototype.getSnapshot=function(){return this.status===hi.NotStarted?this.initialState:this._state},r.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},r.interpret=fU,r}();function fU(r,e){var t=new xse(r,e);return t}function Sse(r){if(typeof r=="string"){var e={type:r};return e.toString=function(){return r},e}return r}function Dw(r){return He(He({type:QT},r),{toJSON:function(){r.onDone,r.onError;var e=Gk(r,["onDone","onError"]);return He(He({},e),{type:QT,src:Sse(r.src)})}})}var Rw="",nA="#",pE="*",Ap={},kp=function(r){return r[0]===nA},Mse=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},Cse=function(){function r(e,t,n,i){var o=this;n===void 0&&(n="context"in e?e.context:void 0);var s;this.config=e,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(Mse(),t),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:eU),this.id=this.config.id||Pr([this.machine.key],Zt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(s=this.config.schema)!==null&&s!==void 0?s:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?gg(this.config.states,function(c,d){var f,m=new r(c,{},void 0,{parent:o,key:d});return Object.assign(o.idMap,He((f={},f[m.id]=m,f),m.idMap)),m}):Ap;var a=0;function l(c){var d,f;c.order=a++;try{for(var m=Jt(cU(c)),g=m.next();!g.done;g=m.next()){var b=g.value;l(b)}}catch(_){d={error:_}}finally{try{g&&!g.done&&(f=m.return)&&f.call(m)}finally{if(d)throw d.error}}}l(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(c){var d=c.event;return d===Rw}):Rw in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=zs(this.config.entry||this.config.onEntry).map(function(c){return R0(c)}),this.onExit=zs(this.config.exit||this.config.onExit).map(function(c){return R0(c)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=zs(this.config.invoke).map(function(c,d){var f,m;if(rm(c)){var g=kw(o.id,d);return o.machine.options.services=He((f={},f[g]=c,f),o.machine.options.services),Dw({src:g,id:g})}else if(hr(c.src)){var g=c.id||kw(o.id,d);return Dw(He(He({},c),{id:g,src:c.src}))}else if(rm(c.src)||_r(c.src)){var g=c.id||kw(o.id,d);return o.machine.options.services=He((m={},m[g]=c.src,m),o.machine.options.services),Dw(He(He({id:g},c),{src:g}))}else{var b=c.src;return Dw(He(He({id:kw(o.id,d)},c),{src:b}))}}),this.activities=zs(this.config.activities).concat(this.invoke).map(function(c){return Kk(c)}),this.transition=this.transition.bind(this),this.tags=zs(this.config.tags)}return r.prototype._init=function(){this.__cache.transitions||hU(this).forEach(function(e){return e.on})},r.prototype.withConfig=function(e,t){var n=this.options,i=n.actions,o=n.activities,s=n.guards,a=n.services,l=n.delays;return new r(this.config,{actions:He(He({},i),e.actions),activities:He(He({},o),e.activities),guards:He(He({},s),e.guards),services:He(He({},a),e.services),delays:He(He({},l),e.delays)},t!=null?t:this.context)},r.prototype.withContext=function(e){return new r(this.config,this.options,e)},Object.defineProperty(r.prototype,"context",{get:function(){return _r(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:gg(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return this.definition},Object.defineProperty(r.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(t,n){return t[n.eventType]=t[n.eventType]||[],t[n.eventType].push(n),t},{})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),r.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var t=e===Rw,n=this.transitions.filter(function(i){var o=i.eventType===e;return t?o:o||i.eventType===pE});return this.__cache.candidates[e]=n,n},r.prototype.getDelayedTransitions=function(){var e=this,t=this.config.after;if(!t)return[];var n=function(o,s){var a=_r(o)?"".concat(e.id,":delay[").concat(s,"]"):o,l=ose(a,e.id);return e.onEntry.push(aU(l,{delay:o})),e.onExit.push(tse(l)),l},i=km(t)?t.map(function(o,s){var a=n(o.delay,s);return He(He({},o),{event:a})}):jr(Object.keys(t).map(function(o,s){var a=t[o],l=hr(a)?{target:a}:a,c=isNaN(+o)?o:+o,d=n(c,s);return zs(l).map(function(f){return He(He({},f),{event:d,delay:c})})}));return i.map(function(o){var s=o.delay;return He(He({},e.formatTransition(o)),{delay:s})})},r.prototype.getStateNodes=function(e){var t,n=this;if(!e)return[];var i=e instanceof _a?e.value:Fg(e,this.delimiter);if(hr(i)){var o=this.getStateNode(i).initial;return o!==void 0?this.getStateNodes((t={},t[i]=o,t)):[this,this.states[i]]}var s=Object.keys(i),a=[this];return a.push.apply(a,Pr([],Zt(jr(s.map(function(l){return n.getStateNode(l).getStateNodes(i[l])}))),!1)),a},r.prototype.handles=function(e){var t=tU(e);return this.events.includes(t)},r.prototype.resolveState=function(e){var t=e instanceof _a?e:_a.create(e),n=Array.from(_g([],this.getStateNodes(t.value)));return new _a(He(He({},t),{value:this.resolve(t.value),configuration:n,done:Vb(n,this),tags:p6(n),machine:this.machine}))},r.prototype.transitionLeafNode=function(e,t,n){var i=this.getStateNode(e),o=i.next(t,n);return!o||!o.transitions.length?this.next(t,n):o},r.prototype.transitionCompoundNode=function(e,t,n){var i=Object.keys(e),o=this.getStateNode(i[0]),s=o._transition(e[i[0]],t,n);return!s||!s.transitions.length?this.next(t,n):s},r.prototype.transitionParallelNode=function(e,t,n){var i,o,s={};try{for(var a=Jt(Object.keys(e)),l=a.next();!l.done;l=a.next()){var c=l.value,d=e[c];if(d){var f=this.getStateNode(c),m=f._transition(d,t,n);m&&(s[c]=m)}}}catch(S){i={error:S}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}var g=Object.keys(s).map(function(S){return s[S]}),b=jr(g.map(function(S){return S.transitions})),_=g.some(function(S){return S.transitions.length>0});if(!_)return this.next(t,n);var w=jr(g.map(function(S){return S.entrySet})),M=jr(Object.keys(s).map(function(S){return s[S].configuration}));return{transitions:b,entrySet:w,exitSet:jr(g.map(function(S){return S.exitSet})),configuration:M,source:t,actions:jr(Object.keys(s).map(function(S){return s[S].actions}))}},r.prototype._transition=function(e,t,n){return hr(e)?this.transitionLeafNode(e,t,n):Object.keys(e).length===1?this.transitionCompoundNode(e,t,n):this.transitionParallelNode(e,t,n)},r.prototype.getTransitionData=function(e,t){return this._transition(e.value,e,pi(t))},r.prototype.next=function(e,t){var n,i,o=this,s=t.name,a=[],l=[],c;try{for(var d=Jt(this.getCandidates(s)),f=d.next();!f.done;f=d.next()){var m=f.value,g=m.cond,b=m.in,_=e.context,w=b?hr(b)&&kp(b)?e.matches(Fg(this.getStateNodeById(b).path,this.delimiter)):Xk(Fg(b,this.delimiter),Uoe(this.path.slice(0,-2))(e.value)):!0,M=!1;try{M=!g||oU(this.machine,g,_,t,e)}catch(T){throw new Error("Unable to evaluate guard '".concat(g.name||g.type,"' in transition for event '").concat(s,"' in state node '").concat(this.id,`':
`).concat(T.message))}if(M&&w){m.target!==void 0&&(l=m.target),a.push.apply(a,Pr([],Zt(m.actions),!1)),c=m;break}}}catch(T){n={error:T}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}if(c){if(!l.length)return{transitions:[c],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:a};var S=jr(l.map(function(T){return o.getRelativeStateNodes(T,e.historyValue)})),C=!!c.internal,P=[];return C||l.forEach(function(T){P.push.apply(P,Pr([],Zt(o.getExternalReentryNodes(T)),!1))}),{transitions:[c],entrySet:P,exitSet:C?[]:[this],configuration:S,source:e,actions:a}}},r.prototype.getExternalReentryNodes=function(e){for(var t=[],n=Zt(e.order>this.order?[e,this]:[this,e],2),i=n[0],o=n[1];i&&i!==o;)t.push(i),i=i.parent;return i!==o?[]:(t.push(o),t)},r.prototype.getActions=function(e,t,n,i,o,s,a){var l,c,d,f,m=this,g=_g([],s?this.getStateNodes(s.value):[this]);try{for(var b=Jt(e),_=b.next();!_.done;_=b.next()){var w=_.value;(!wg(g,w)||wg(n.entrySet,w.parent))&&n.entrySet.push(w)}}catch(V){l={error:V}}finally{try{_&&!_.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}try{for(var M=Jt(g),S=M.next();!S.done;S=M.next()){var w=S.value;(!wg(e,w)||wg(n.exitSet,w.parent))&&n.exitSet.push(w)}}catch(V){d={error:V}}finally{try{S&&!S.done&&(f=M.return)&&f.call(M)}finally{if(d)throw d.error}}var C=jr(n.entrySet.map(function(V){var W=[];if(V.type!=="final")return W;var ee=V.parent;if(!ee.parent)return W;W.push(Lw(V.id,V.doneData),Lw(ee.id,V.doneData?Fx(V.doneData,i,o):void 0));var se=ee.parent;return se.type==="parallel"&&N0(se).every(function(q){return Vb(n.configuration,q)})&&W.push(Lw(se.id)),W}));n.exitSet.sort(function(V,W){return W.order-V.order}),n.entrySet.sort(function(V,W){return V.order-W.order});var P=new Set(n.entrySet),T=new Set(n.exitSet),L=Array.from(P).map(function(V){var W=V.onEntry,ee=V.activities.map(function(se){return rse(se)});return qu(a?Pr(Pr([],Zt(W),!1),Zt(ee),!1):Pr(Pr([],Zt(ee),!1),Zt(W),!1),m.machine.options.actions)}).concat([C.map(Joe)]),O=Array.from(T).map(function(V){return qu(Pr(Pr([],Zt(V.onExit),!1),Zt(V.activities.map(function(W){return nse(W)})),!1),m.machine.options.actions)}),k=O.concat([qu(n.actions,this.machine.options.actions)]).concat(L);if(t){var N=qu(jr(Pr([],Zt(e),!1).sort(function(V,W){return W.order-V.order}).map(function(V){return V.onExit})),this.machine.options.actions).filter(function(V){return V.type!==em&&(V.type!==tm||!!V.to&&V.to!==yc.Internal)});return k.concat([N])}return k},r.prototype.transition=function(e,t,n,i){e===void 0&&(e=this.initialState);var o=pi(t),s;if(e instanceof _a)s=n===void 0?e:this.resolveState(_a.from(e,n));else{var a=hr(e)?this.resolve(Bx(this.getResolvedPath(e))):this.resolve(e),l=n!=null?n:this.machine.context;s=this.resolveState(_a.from(a,l))}if(this.strict&&!this.events.includes(o.name)&&!Hoe(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var c=this._transition(s.value,s,o)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:s,actions:[]},d=_g([],this.getStateNodes(s.value)),f=c.configuration.length?_g(d,c.configuration):d;return c.configuration=Pr([],Zt(f),!1),this.resolveTransition(c,s,s.context,i,o)},r.prototype.resolveRaisedTransition=function(e,t,n,i){var o,s=e.actions;return e=this.transition(e,t,void 0,i),e._event=n,e.event=n.data,(o=e.actions).unshift.apply(o,Pr([],Zt(s),!1)),e},r.prototype.resolveTransition=function(e,t,n,i,o){var s,a,l,c,d=this;o===void 0&&(o=xf);var f=e.configuration,m=!t||e.transitions.length>0,g=m?e.configuration:t?t.configuration:[],b=Vb(g,this),_=m?hse(this.machine,f):void 0,w=t?t.historyValue?t.historyValue:e.source?this.machine.historyValue(t.value):void 0:void 0,M=this.getActions(new Set(g),b,e,n,o,t,i),S=t?He({},t.activities):{};try{for(var C=Jt(M),P=C.next();!P.done;P=C.next()){var T=P.value;try{for(var L=(l=void 0,Jt(T)),O=L.next();!O.done;O=L.next()){var k=O.value;k.type===JT?S[k.activity.id||k.activity.type]=k:k.type===Yk&&(S[k.activity.id||k.activity.type]=!1)}}catch(Re){l={error:Re}}finally{try{O&&!O.done&&(c=L.return)&&c.call(L)}finally{if(l)throw l.error}}}}catch(Re){s={error:Re}}finally{try{P&&!P.done&&(a=C.return)&&a.call(C)}finally{if(s)throw s.error}}var N=Zt(Ux(this,t,n,o,M,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),V=N[0],W=N[1],ee=Zt(Goe(V,function(Re){return Re.type===em||Re.type===tm&&Re.to===yc.Internal}),2),se=ee[0],q=ee[1],re=V.filter(function(Re){var st;return Re.type===JT&&((st=Re.activity)===null||st===void 0?void 0:st.type)===QT}),Z=re.reduce(function(Re,st){return Re[st.activity.id]=ase(st.activity,d.machine,W,o),Re},t?He({},t.children):{}),me=new _a({value:_||t.value,context:W,_event:o,_sessionid:t?t._sessionid:null,historyValue:_?w?Yoe(w,_):void 0:t?t.historyValue:void 0,history:!_||e.source?t:void 0,actions:_?q:[],activities:_?S:t?t.activities:{},events:[],configuration:g,transitions:e.transitions,children:Z,done:b,tags:p6(g),machine:this}),J=n!==W;me.changed=o.name===$F||J;var Q=me.history;Q&&delete Q.history;var $=!b&&(this._transient||f.some(function(Re){return Re._transient}));if(!m&&(!$||o.name===Rw))return me;var fe=me;if(!b)for($&&(fe=this.resolveRaisedTransition(fe,{type:Roe},o,i));se.length;){var he=se.shift();fe=this.resolveRaisedTransition(fe,he._event,o,i)}var Se=fe.changed||(Q?!!fe.actions.length||J||typeof Q.value!=typeof fe.value||!pU(fe.value,Q.value):void 0);return fe.changed=Se,fe.history=Q,fe},r.prototype.getStateNode=function(e){if(kp(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var t=this.states[e];if(!t)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return t},r.prototype.getStateNodeById=function(e){var t=kp(e)?e.slice(nA.length):e;if(t===this.id)return this;var n=this.machine.idMap[t];if(!n)throw new Error("Child state node '#".concat(t,"' does not exist on machine '").concat(this.id,"'"));return n},r.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&kp(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var t=eA(e,this.delimiter).slice(),n=this;t.length;){var i=t.shift();if(!i.length)break;n=n.getStateNode(i)}return n},r.prototype.resolve=function(e){var t,n=this;if(!e)return this.initialStateValue||Ap;switch(this.type){case"parallel":return gg(this.initialStateValue,function(o,s){return o?n.getStateNode(s).resolve(e[s]||o):Ap});case"compound":if(hr(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(t={},t[e]=i.initialStateValue,t):e}return Object.keys(e).length?gg(e,function(o,s){return o?n.getStateNode(s).resolve(o):Ap}):this.initialStateValue||{};default:return e||Ap}},r.prototype.getResolvedPath=function(e){if(kp(e)){var t=this.machine.idMap[e.slice(nA.length)];if(!t)throw new Error("Unable to find state node '".concat(e,"'"));return t.path}return eA(e,this.delimiter)},Object.defineProperty(r.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var t;if(this.type==="parallel")t=c6(this.states,function(n){return n.initialStateValue||Ap},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));t=jx(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else t={};return this.__cache.initialStateValue=t,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),r.prototype.getInitialState=function(e,t){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,entrySet:Pr([],Zt(n),!1),exitSet:[],transitions:[],source:void 0,actions:[]},void 0,t!=null?t:this.machine.context,void 0)},Object.defineProperty(r.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"target",{get:function(){var e;if(this.type==="history"){var t=this.config;hr(t.target)?e=kp(t.target)?Bx(this.machine.getStateNodeById(t.target).path.slice(this.path.length-1)):t.target:e=t.target}return e},enumerable:!1,configurable:!0}),r.prototype.getRelativeStateNodes=function(e,t,n){return n===void 0&&(n=!0),n?e.type==="history"?e.resolveHistory(t):e.initialStateNodes:[e]},Object.defineProperty(r.prototype,"initialStateNodes",{get:function(){var e=this;if(jx(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var t=Rb(this.initialStateValue);return jr(t.map(function(n){return e.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),r.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var t=Zt(e),n=t[0],i=t.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var o=this.getStateNode(n);if(o.type==="history")return o.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},r.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:c6(this.states,function(t,n){if(!e)return t.historyValue();var i=hr(e)?void 0:e[n];return t.historyValue(i||t.initialStateValue)},function(t){return!t.history})}},r.prototype.resolveHistory=function(e){var t=this;if(this.type!=="history")return[this];var n=this.parent;if(!e){var i=this.target;return i?jr(Rb(i).map(function(s){return n.getFromRelativePath(s)})):n.initialStateNodes}var o=joe(n.path,"states")(e).current;return hr(o)?[n.getStateNode(o)]:jr(Rb(o).map(function(s){return t.history==="deep"?n.getFromRelativePath(s):[n.states[s[0]]]}))},Object.defineProperty(r.prototype,"stateIds",{get:function(){var e=this,t=jr(Object.keys(this.states).map(function(n){return e.states[n].stateIds}));return[this.id].concat(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"events",{get:function(){var e,t,n,i;if(this.__cache.events)return this.__cache.events;var o=this.states,s=new Set(this.ownEvents);if(o)try{for(var a=Jt(Object.keys(o)),l=a.next();!l.done;l=a.next()){var c=l.value,d=o[c];if(d.states)try{for(var f=(n=void 0,Jt(d.events)),m=f.next();!m.done;m=f.next()){var g=m.value;s.add("".concat(g))}}catch(b){n={error:b}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}}}catch(b){e={error:b}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(s)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(t){return!(!t.target&&!t.actions.length&&t.internal)}).map(function(t){return t.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),r.prototype.resolveTarget=function(e){var t=this;if(e!==void 0)return e.map(function(n){if(!hr(n))return n;var i=n[0]===t.delimiter;if(i&&!t.parent)return t.getStateNodeByPath(n.slice(1));var o=i?t.key+n:n;if(t.parent)try{var s=t.parent.getStateNodeByPath(o);return s}catch(a){throw new Error("Invalid transition definition for state node '".concat(t.id,`':
`).concat(a.message))}else return t.getStateNodeByPath(o)})},r.prototype.formatTransition=function(e){var t=this,n=Zoe(e.target),i="internal"in e?e.internal:n?n.some(function(l){return hr(l)&&l[0]===t.delimiter}):!0,o=this.machine.options.guards,s=this.resolveTarget(n),a=He(He({},e),{actions:qu(zs(e.actions)),cond:iU(e.cond,o),target:s,source:this,internal:i,eventType:e.event,toJSON:function(){return He(He({},a),{target:a.target?a.target.map(function(l){return"#".concat(l.id)}):void 0,source:"#".concat(t.id)})}});return a},r.prototype.formatTransitions=function(){var e,t,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var o=this.config.on,s=pE,a=o[s],l=a===void 0?[]:a,c=Gk(o,[typeof s=="symbol"?s:s+""]);i=jr(Object.keys(c).map(function(S){var C=Tp(S,c[S]);return C}).concat(Tp(pE,l)))}var d=this.config.always?Tp("",this.config.always):[],f=this.config.onDone?Tp(String(Lw(this.id)),this.config.onDone):[],m=jr(this.invoke.map(function(S){var C=[];return S.onDone&&C.push.apply(C,Pr([],Zt(Tp(String(Ib(S.id)),S.onDone)),!1)),S.onError&&C.push.apply(C,Pr([],Zt(Tp(String(yg(S.id)),S.onError)),!1)),C})),g=this.after,b=jr(Pr(Pr(Pr(Pr([],Zt(f),!1),Zt(m),!1),Zt(i),!1),Zt(d),!1).map(function(S){return zs(S).map(function(C){return n.formatTransition(C)})}));try{for(var _=Jt(g),w=_.next();!w.done;w=_.next()){var M=w.value;b.push(M)}}catch(S){e={error:S}}finally{try{w&&!w.done&&(t=_.return)&&t.call(_)}finally{if(e)throw e.error}}return b},r}();function Ese(r,e){return new Cse(r,e)}const Pse={...Hk,spineName:String,preset:String,strideForward:Number,strideRight:Number,strideMove:Boolean,strideMode:String},mU={...Wk,spineName:void 0,preset:"default",strideForward:0,strideRight:0,strideMove:!1,strideMode:"aim",scale:1.7,scaleX:1.7,scaleY:1.7,scaleZ:1.7,width:20,depth:20,animation:"idle",src:tf},Tse=Ese({predictableActionArguments:!0,states:{idle:{on:{RUN_START:"running",RUN_BACKWARDS_START:"runningBackwards",JUMP_START:"jumping"}},running:{on:{RUN_STOP:"idle",RUN_BACKWARDS_START:"runningBackwards",JUMP_START:"jumping"}},runningBackwards:{on:{RUN_STOP:"idle",RUN_START:"running",JUMP_START:"jumping"}},jumping:{on:{JUMP_STOP:"idle"}}},initial:"idle"}),Ih=new WeakMap;class Sf extends Oa{constructor(){super(),F(this,"poseService",fU(Tse)),F(this,"spineNameState",new ht(void 0)),F(this,"srcState",new ht(tf)),F(this,"animationsState",new ht({})),F(this,"presetState",new ht("default")),F(this,"strideForwardState",new ht(0)),F(this,"strideRightState",new ht(0)),F(this,"strideMoveState",new ht(!1)),F(this,"strideModeState",new ht("aim")),F(this,"jumpHeight",10),this.width=20,this.depth=20,this.scale=1.7,this.frustumCulled=!1;const[e,t]=De(void 0),[n,i]=De(void 0);this.createEffect(()=>{const l=this.spineNameState.get(),c=super.src=this.srcState.get();n(void 0),e(void 0),Ih.delete(this);const d=this.loaded.then(f=>{if(e("other"),l){n(this.find(l,!0)),l==="mixamorigSpine"?(e("mixamo"),c===tf&&Ih.set(this,"dummy")):l==="Spine"&&(f.getObjectByName("Wolf3D_Body")||f.getObjectByName("Wolf3D_Avatar"))&&(e("readyplayerme"),Ih.set(this,"readyplayerme"));return}if(f.getObjectByName("Wolf3D_Body")||f.getObjectByName("Wolf3D_Avatar")){n(this.find("Spine",!0)),e("readyplayerme"),Ih.set(this,"readyplayerme");return}const m=this.find("mixamorigSpine",!0);n(m),m&&(e("mixamo"),c===tf&&Ih.set(this,"dummy"))});return()=>{d.cancel()}},[this.srcState.get,this.spineNameState.get]);const[o,s]=De("idle");this.createEffect(()=>{const l=t();if(!l)return;const c=this.presetState.get()==="rifle"?"rifle-":"",d=this.srcState.get(),f=d.split("/");f.pop();let m=f.join("/")+"/";if(l==="readyplayerme")m=ck+"readyplayerme/";else if(d!==tf)return super.animations=this.animationsState.get(),this.animation=s(),()=>{this.animation=void 0};return super.animations={idle:m+c+"idle.fbx",running:m+c+"running.fbx",runningBackwards:m+c+"running-backwards.fbx",jumping:m+c+"falling.fbx",death:m+"death.fbx",...this.animationsState.get()},this.animation=s(),()=>{this.animation=void 0,super.animations={}}},[this.presetState.get,this.srcState.get,t,this.animationsState.get]);const{poseService:a}=this;this.createEffect(()=>{if((this.animation=s())!=="jumping")return;this.velocity.y=this.jumpHeight;const l=Or(()=>{this.velocity.y===0&&a.send("JUMP_STOP")});return()=>{l.cancel()}},[s]),a.onTransition(l=>l.changed&&o(l.value)).start(),this.then(()=>a.stop()),this.createEffect(()=>{const l=this.loadedGroup.children[0];if(!l)return;const{strideForward:c,strideRight:d,strideMove:f}=this;if(!c&&!d){a.send("RUN_STOP");return}let m=this.strideModeState.get();m==="aim"&&!("runningBackwards"in this.animations)&&(m="free");const g=m==="aim"?c>0:!1,b=g?-c:c,_=g?d:-d,w=90-Math.atan2(-b,-_)*qh,M=i(),S=M==null?void 0:M.outerObject3d.quaternion.clone(),C=l.quaternion.clone(),P=BF(()=>{a.send(g?"RUN_BACKWARDS_START":"RUN_START");const T=l.quaternion.clone();let L;m==="aim"&&M&&S&&(l.quaternion.copy(C),M.outerObject3d.quaternion.copy(S),L=M.pointAt(1e3)),l.quaternion.setFromEuler(Hr.set(0,w*ti,0));const O=l.quaternion.clone();if(l.quaternion.copy(T).slerp(O,sd(.2)),L&&(M==null||M.lookAt(L)),!f)return;const{x:k,y:N}=Ire(0,0,w+90,Math.max(Math.abs(c),Math.abs(d)));this.moveForward(g?N:-N),this.moveRight(g?k:-k)});return()=>{m==="aim"&&!this.strideForward&&!this.strideRight&&l.quaternion.set(0,0,0,0),P.cancel()}},[this.animationsState.get,this.strideModeState.get,this.strideMoveState.get,this.strideForwardState.get,this.strideRightState.get,i])}get spineName(){return this.spineNameState.get()}set spineName(e){this.spineNameState.set(e)}get resize(){return super.resize}set resize(e){}get src(){return this.srcState.get()}set src(e){this.srcState.set(e)}get animations(){return super.animations}set animations(e){this.animationsState.set(e)}get preset(){return this.presetState.get()}set preset(e){this.presetState.set(e)}get strideForward(){return this.strideForwardState.get()}set strideForward(e){this.strideForwardState.set(e)}get strideRight(){return this.strideRightState.get()}set strideRight(e){this.strideRightState.set(e)}get strideMove(){return this.strideMoveState.get()}set strideMove(e){this.strideMoveState.set(e)}get strideMode(){return this.strideModeState.get()}set strideMode(e){this.strideModeState.set(e)}jump(e=10){this.jumpHeight=e,this.poseService.send("JUMP_START")}}F(Sf,"componentName","dummy"),F(Sf,"defaults",mU),F(Sf,"schema",Pse);const Ase={...Jl,preset:String,repeatX:Number,repeatZ:Number},kse={...Ql,preset:"industrial0",repeatX:1,repeatZ:1},Lse={...Ase,repeatY:Number},Ose={...kse,repeatY:1},Dse="https://unpkg.com/lingo3d-facade@1.0.0/assets/",Nw=(r,e,t)=>{const n=new Oa;return n.src=r,n.rotationY=t,e.append(n),n},Iw=(r,e,t,n,i,o)=>{const s=t*r.length*.5-e;let a=0;if(o){for(const l of r)l.z+=e*n,l.x+=a++*t-s;return}for(const l of r)l.x+=e*i,l.z+=a++*t-s};class Rse extends vs{constructor(e){super(),F(this,"presetState",new ht("industrial0")),F(this,"repeatXState",new ht(1)),F(this,"repeatZState",new ht(1)),e.append(this),zS.add(this),this.createEffect(()=>{const t=Math.max(Math.floor(this.repeatXState.get()),1),n=Math.max(Math.floor(this.repeatZState.get()),1),i=Dse+this.presetState.get()+".glb",o=Ri.exports.range(t).map(()=>Nw(i,this,0)),s=Ri.exports.range(t).map(()=>Nw(i,this,180)),a=Ri.exports.range(n).map(()=>Nw(i,this,90)),l=Ri.exports.range(n).map(()=>Nw(i,this,270)),c=o[0].loaded.then(()=>{const d=o[0].depth,f=d*.5;Iw(o,f,d,t,n,!1),Iw(s,-f,-d,t,n,!1),Iw(a,-f,-d,t,n,!0),Iw(l,f,d,t,n,!0)});return()=>{c.cancel();for(const d of o)d.dispose();for(const d of s)d.dispose();for(const d of a)d.dispose();for(const d of l)d.dispose()}},[this.presetState.get,this.repeatXState.get,this.repeatZState.get])}get preset(){return this.presetState.get()}set preset(e){this.presetState.set(e)}get repeatX(){return this.repeatXState.get()}set repeatX(e){this.repeatXState.set(e)}get repeatZ(){return this.repeatZState.get()}set repeatZ(e){this.repeatZState.set(e)}}class zb extends vs{constructor(){super(),F(this,"presetState",new ht("industrial0")),F(this,"repeatXState",new ht(1)),F(this,"repeatZState",new ht(1)),F(this,"repeatYState",new ht(1)),this.scale=10,this.createEffect(()=>{const e=this.presetState.get(),t=this.repeatXState.get(),n=this.repeatZState.get(),i=Math.max(Math.floor(this.repeatYState.get()),1),o=Ri.exports.range(i).map(s=>{const a=new Rse(this);return a.preset=e,a.repeatX=t,a.repeatZ=n,a.y=s*100,a});return()=>{for(const s of o)s.dispose()}},[this.presetState.get,this.repeatXState.get,this.repeatZState.get,this.repeatYState.get])}get preset(){return this.presetState.get()}set preset(e){this.presetState.set(e)}get repeatX(){return this.repeatXState.get()}set repeatX(e){this.repeatXState.set(e)}get repeatZ(){return this.repeatZState.get()}set repeatZ(e){this.repeatZState.set(e)}get repeatY(){return this.repeatYState.get()}set repeatY(e){this.repeatYState.set(e)}}F(zb,"componentName","building"),F(zb,"defaults",Ose),F(zb,"schema",Lse);const Nse={...Hk,preset:String},Ise={...Wk,preset:"tree1",scale:4},Vse="https://unpkg.com/lingo3d-forest@1.0.0/assets/";class Bb extends Oa{constructor(){super(),F(this,"_preset",""),this.scale=4,this.preset="tree1"}get preset(){return this._preset}set preset(e){this.src=Vse+e+".glb"}}F(Bb,"componentName","tree"),F(Bb,"defaults",Ise),F(Bb,"schema",Nse);const zse={...qF,...IS,...J4},Bse={...KF,...VS,...Q4},Fse=dd(()=>yn(()=>import("./loadSVG.b50dd3b3.78786e78.js"),[])),Use=new WeakMap;class Mf extends ny{constructor(){super(...arguments),F(this,"material",kx)}load(e){return Fse().then(t=>t.default(e))}resolveLoaded(e,t){const n=new ls;n.scale.y*=-1;const i=Fa(Use,e,()=>{const s=[];for(const d of e.paths)for(const f of d.toShapes(!0))s.push(f);if(!s.length)return[];const a=new ls;for(const d of s){const f=new Tx(d,{depth:0,bevelEnabled:!1});f.dispose(),a.add(new vi(f))}const l=jk(a,t),c=[];for(const d of s)c.push(new Tx(d,{depth:l.y,bevelEnabled:!1}));return c});for(const s of i){const a=new vi(s,this.material);a.castShadow=!0,a.receiveShadow=!0,n.add(a)}const o=XF(n,t);return!this.widthSet&&(this.object3d.scale.x=o.x),!this.heightSet&&(this.object3d.scale.y=o.y),!this.depthSet&&(this.object3d.scale.z=o.z),n}}F(Mf,"componentName","svgMesh"),F(Mf,"defaults",Bse),F(Mf,"schema",zse);q0(Mf,[ty,tk]);const jse={...WF,resolution:Number,blur:Number,contrast:Number,mirror:Number},Hse={...GF,resolution:256,blur:512,contrast:1.5,mirror:1,rotationX:-90},Wse=["roughness","metalness","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveMap","emissiveIntensity","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","alphaMap","envMap","envMapIntensity","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","flatShading","fog"],Gse=(r,e)=>{tF(r,e);for(const t of Wse){const n=r[t];n!=null&&(e[t]=n)}e.defines={STANDARD:""},r.color&&e.color.copy(r.color),r.emissive&&e.emissive.copy(r.emissive),r.normalScale&&e.normalScale.copy(r.normalScale)};class Ug extends bf{constructor(){super(),F(this,"resolutionState",new ht(256)),F(this,"blurState",new ht(512)),F(this,"contrastState",new ht(1.5)),F(this,"mirrorState",new ht(1)),this.rotationX=-90,this.materialCloned=!0,yn(()=>import("./MeshReflectorMaterial.44153b7b.9a15d4af.js"),[]).then(e=>{this.createEffect(()=>{const t=Zr();if(!t||this.done)return;const n=Ye(),i=e.default,o=new i(t,n,rt,this.object3d,{resolution:this.resolutionState.get(),blur:[this.blurState.get(),this.blurState.get()],mixBlur:2.5,mixContrast:this.contrastState.get(),mirror:this.mirrorState.get(),distortionMap:void 0});Gse(this.material,o),this.material=this.object3d.material=o;const s=BF(()=>{n.updateWorldMatrix(!0,!1),o.update()});return()=>{o.dispose(),s.cancel()}},[Zr,Ye,this.resolutionState.get,this.blurState.get,this.contrastState.get,this.mirrorState.get])})}get resolution(){return this.resolutionState.get()}set resolution(e){this.resolutionState.set(e)}get blur(){return this.blurState.get()}set blur(e){this.blurState.set(e)}get contrast(){return this.contrastState.get()}set contrast(e){this.contrastState.set(e)}get mirror(){return this.mirrorState.get()}set mirror(e){this.mirrorState.set(e)}}F(Ug,"componentName","reflector"),F(Ug,"defaults",Hse),F(Ug,"schema",jse);const Yse={...Jl,shape:String,normalMap:String,resolution:Number,speed:Number},Xse={...Ql,shape:"plane",normalMap:void 0,resolution:512,speed:1};class jg extends vs{constructor(){super(),F(this,"shapeState",new ht("plane")),F(this,"normalMapState",new ht(void 0)),F(this,"resolutionState",new ht(512)),F(this,"speedState",new ht(1)),this.createEffect(()=>{const e=this.normalMapState.get();if(!e)return;const t=new lr;return yn(()=>import("./Water.2fd96f35.7b345a1d.js"),[]).then(({Water:n})=>{const i=this.shapeState.get()==="plane"?YF:Vk,o=this.resolutionState.get(),s=new n(i,{textureWidth:o,textureHeight:o,waterNormals:Li(e),sunColor:16777215,waterColor:7695,distortionScale:3.7});s.rotation.x=-Math.PI/2;const a=this.speedState.get();this.outerObject3d.add(s);const l=Or(()=>{s.material.uniforms.time.value+=BS[0]*a});t.then(()=>{this.outerObject3d.remove(s),l.cancel()})}),()=>{t.cancel()}},[this.shapeState.get,this.normalMapState.get,this.resolutionState.get,this.speedState.get])}get shape(){return this.shapeState.get()}set shape(e){this.shapeState.set(e)}get normalMap(){return this.normalMapState.get()}set normalMap(e){this.normalMapState.set(e)}get resolution(){return this.resolutionState.get()}set resolution(e){this.resolutionState.set(e)}get speed(){return this.speedState.get()}set speed(e){this.speedState.set(e)}}F(jg,"componentName","water"),F(jg,"defaults",Xse),F(jg,"schema",Yse);new wi;new j;je.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new be(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Us.line={uniforms:fi.merge([je.common,je.fog,je.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};new j;new j;new ir;new ir;new ir;new j;new Ct;new Ys;new j;new wi;new fd;new ir;const qse={...K4,onEnter:Function,onExit:Function,targetIds:[String,Array],pad:Boolean,radius:Number,interval:Number,helper:Boolean},Kse={...Z4,onEnter:void 0,onExit:void 0,targetIds:void 0,pad:!1,radius:50,interval:300,helper:!0},m6=r=>{var e;return(e=ac.get(r))!=null?e:[]};class Hg extends ik{constructor(){const e=new pr;super(e),F(this,"refresh",new ht({})),F(this,"onEnter"),F(this,"onExit"),F(this,"_pad",!1),F(this,"_radius",50),F(this,"_interval",300),F(this,"_helper",!0),F(this,"_targetIds"),rt.add(e);let t;this.createEffect(()=>{const{_radius:n,_interval:i,_targetIds:o,_pad:s}=this;if(!o)return;const a=n*Wt,l=a*.2;let c=!1;const d=F8(i,-1,()=>{var f,m;const{x:g,y:b,z:_}=vr(e),w=typeof o=="string"?m6(o):o.map(C=>[...m6(C)]).flat();let M=!1,S;for(const C of w){const{x:P,y:T,z:L}=vr(C.nativeObject3d);if(s){const{y:O}=Zl(C);M=Math.abs(g-P)<a&&Math.abs(b-(T-O*.5))<l&&Math.abs(_-L)<a}else M=Math.abs(g-P)<a&&Math.abs(b-T)<a&&Math.abs(_-L)<a;if(M){S=C;break}}c!==M&&(M&&S?((f=this.onEnter)==null||f.call(this,S),t&&(t.color="blue")):((m=this.onExit)==null||m.call(this),t&&(t.color="white"))),c=M});return()=>{d.cancel()}},[this.refresh.get]),this.createEffect(()=>{const{_radius:n,_helper:i,_pad:o}=this;if(!i||Ye()!==qr)return;const s=t=o?new oy:new iy;_n.delete(s),e.add(s.outerObject3d),s.scale=n*Wt*2,s.opacity=.5,s.height=o?10:100;const a=Pc(({target:l})=>l===s&&cn(this));return()=>{s.dispose(),t=void 0,a.cancel()}},[this.refresh.get,Ye])}get pad(){return this._pad}set pad(e){this._pad=e,this.refresh.set({})}get radius(){return this._radius}set radius(e){this._radius=e,this.refresh.set({})}get interval(){return this._interval}set interval(e){this._interval=e,this.refresh.set({})}get helper(){return this._helper}set helper(e){this._helper=e,this.refresh.set({})}get targetIds(){return this._targetIds}set targetIds(e){this._targetIds=e,this.refresh.set({})}}F(Hg,"componentName","trigger"),F(Hg,"defaults",Kse),F(Hg,"schema",qse);const Zse={...Jl,helper:Boolean},Jse={...Ql,helper:!0};class Wg extends vs{constructor(){super(),F(this,"helperState",new ht(!0)),F(this,"isSpawnPoint",!0),this.createEffect(()=>{if(!this.helperState.get()||Ye()!==qr)return;const e=new oy;_n.delete(e),this.outerObject3d.add(e.outerObject3d),e.opacity=.5,e.height=10;const t=Pc(({target:n})=>n===e&&cn(this));return()=>{e.dispose(),t.cancel()}},[this.helperState.get,Ye])}get helper(){return this.helperState.get()}set helper(e){this.helperState.set(e)}append(e){this._append(e),e.placeAt(this)}}F(Wg,"componentName","spawnPoint"),F(Wg,"defaults",Jse),F(Wg,"schema",Zse);const Qse={...K4,src:String,autoplay:Boolean,paused:Boolean,stopped:Boolean,loop:Boolean,volume:Number,playbackRate:Number,distance:Number,distanceModel:String,maxDistance:Number,rolloffFactor:Number},$se={...Z4,src:void 0,autoplay:!1,paused:!1,stopped:!1,loop:!1,volume:1,playbackRate:1,distance:1,maxDistance:1e4,distanceModel:"inverse",rolloffFactor:1},eae=()=>{const r=new zl;return r.texture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABINJREFUaEPtWkuIXEUUPad7Jkr8Jiq6iBJFkmACUdGFohFMXCioqBhJVBCJTBR1oSDGhYofJH5QF2KMuBMjKvhbGhcK7gVDEI0LUXEluIqS2HXkvtxqipea7pqelrwKPmhmmKmuV6fuuZ86t4hj+EiaIfmPLUHSpZJ2kLyP5J+SSFKly2PpwGmOk9QDYAsdSFoSQniC5FMA/iC5guTfnQZiiwNgVjjsVrhJ0qsALvCN+pnkRSQPdhZIi0bnS3oFwC0O4BCAJQB+Ibma5F+dA+I06pkvuEUel/QkgBMBDIxiyad7QHzR/cSZN0l6DcBat4I5+Yz/HgCY33QLiCQDYLtt0eicEMJLJO9KAPTdCjGGdAtISiMH8ZCk5wCcCsAWa+HUQLSfLBC3UigJw1MLvy1nvlLS6wAuy9AoF8mPApIOSi08XxpYNBB7ie00ySBpWQjhBZJzI2g0DsgaD78nA7ie5Idu3WHyzE0wMZCMM98raSeAM51Ctss5GpUCWSrpdwA/kdxM8kBq9fYkEwFp0ehip9GGQhqVAjlJ0j4AKwEcJnkHyY/nA3MUEN/p+ahoITLSaGkI4VmSjyQA7P/2WeiT+kik1gmSfgRwrlvYSpoHSL6ZAzME4hHHCiCbdOQjabNn5hU+0EJtKY2KLOJ+sUrS2wDM2k3eIbmN5DttMA0QAxEBSDrFE5WFygjUflp9dJ6kFwHc4Kuxv1lSm4iiCaJc+B2uaTAYvEvyzgTMVSS/SaMZIwhJF0raDWBdknHju2yhtuvLfdGxtJiERuMsMqy1zMqxMgghfAFgk395f6/XayqEWJNFi8xI+g7AmnG0ckCLoVExEEuEcdetQpD0PYDTbIK2v0QgN0v6BIBVobNjwCyWRgsC4rs+a6W/pDlJu3wCK/ktMBw5u/jAhz2EpoVcgXGmNmRkrRXpI2lW0g8eks0qt5P8qHH8GoD4GpvMPhgMdpJ8zP/2fr/f31IbkKailrRB0lfOhd9IrrKSpiaLNGKEpOVOrzPc6deS3F8NkNQbQwjfAljvQK4jubcqIDHnhRC+BHCtA9lKck9tQBo/CSF8BuBGB3I/yV3/A5laBjkyUdGZ/bihVty8qp09ye7LPPzaSdSye13hNyker5b0tVvnV1cmq0qIuRJlT7/f31pNibKQotFU8U+PhzK+/oNVRUfdvQA2jjvqdl18eI/klpHiQ0wyE8hBL7vmZFP8V3LQaklvuCWiHDRHcndWDkrLjQUKdM+QfNS/by+atkB3AIBpZ400RXI7ybdyovZEQkJLMl3v5/1rEkCxgVNakuWUxrZkehvJz4sl09I3Z0Tse1y8O6saEbtFxbStcLq3FbYn1ml3p8bJQVH7NcXT2gofpOLDfBs9EbVyk7XodoXT7fJCuh37Rk8mUKQN0AclPV9V6y1Dt6b3J+lsb4bePYJuRQerUf47NWoV0G2jt6dNJLen++3plnWa3JL02+3CgN07qePCQNtCrWCw0htFt/q47l/hyASDui/VZOg2vOYEYIekp6u55jSGbpdIsntbE108+xeZO79vduBVJgAAAABJRU5ErkJggg==",_n.delete(r),r.scale=.5,r},tae=new Map,rae=new are,nae=r=>Fa(tae,r,()=>new Promise((e,t)=>{$4(),rae.load(r,n=>{Xf(),e(Object.freeze(n))},ek(r),()=>{Xf(),t()})})),[iae,Hx]=De(void 0);xt(()=>{const r=Hx();if(!r)return;const e=Ye();return e.add(r),()=>{e.remove(r)}},[Ye,Hx]);class Gg extends ik{constructor(){!Hx()&&iae(new ure);const e=new dre(Hx());super(e),F(this,"srcState",new ht(void 0)),F(this,"autoplayState",new ht(!1)),F(this,"pausedState",new ht(!1)),F(this,"stoppedState",new ht(!1)),rt.add(e),this.createEffect(()=>{if(Ye()!==qr)return;const i=eae();this.outerObject3d.add(i.outerObject3d);const o=Pc(({target:s})=>{s===i&&cn(this)});return()=>{i.dispose(),o.cancel()}},[Ye]);const[t,n]=De(!1);this.createEffect(()=>{const i=this.srcState.get();if(!i)return;let o=!0;return nae(i).then(s=>{!o||(e.setBuffer(s),t(!0))}),()=>{o=!1,t(!1)}},[this.srcState.get]),this.createEffect(()=>{if(!(!n()||!this.autoplayState.get()||this.pausedState.get()||this.stoppedState.get()))return e.play(),()=>{this.stoppedState.get()?e.stop():e.pause()}},[n,this.autoplayState.get,this.pausedState.get,this.stoppedState.get])}dispose(){return this.done?this:(super.dispose(),this.outerObject3d.buffer&&this.outerObject3d.disconnect(),this)}play(){this.autoplay=!0,this.paused=!1,this.stopped=!1}pause(){this.paused=!0}stop(){this.stopped=!0}get src(){return this.srcState.get()}set src(e){this.srcState.set(e)}get autoplay(){return this.autoplayState.get()}set autoplay(e){this.autoplayState.set(e)}get paused(){return this.pausedState.get()}set paused(e){this.pausedState.set(e)}get stopped(){return this.stoppedState.get()}set stopped(e){this.stoppedState.set(e)}get loop(){return this.outerObject3d.loop}set loop(e){this.outerObject3d.loop=e}get volume(){return this.outerObject3d.getVolume()}set volume(e){this.outerObject3d.setVolume(e)}get playbackRate(){return this.outerObject3d.playbackRate}set playbackRate(e){this.outerObject3d.playbackRate=e}get distance(){return this.outerObject3d.getRefDistance()}set distance(e){this.outerObject3d.setRefDistance(e)}get distanceModel(){return this.outerObject3d.getDistanceModel()}set distanceModel(e){this.outerObject3d.setDistanceModel(e)}get maxDistance(){return this.outerObject3d.getMaxDistance()}set maxDistance(e){this.outerObject3d.setMaxDistance(e)}get rolloffFactor(){return this.outerObject3d.getRolloffFactor()}set rolloffFactor(e){this.outerObject3d.setRolloffFactor(e)}}F(Gg,"componentName","audio"),F(Gg,"defaults",$se),F(Gg,"schema",Qse);const[oae,sae]=zi(),aae={...Jl},lae={...Ql};class Cf extends vs{constructor(){super(new ls)}}F(Cf,"componentName","group"),F(Cf,"defaults",lae),F(Cf,"schema",aae);xt(()=>{const r=Zs();if(!r.length)return;const e=new ls;rt.add(e);const t=new _d(e);P8.add(t),Yf(t);const n=[];for(const{outerObject3d:s}of r)!s.parent||(n.push([s,s.parent]),e.attach(s));mf.setFromObject(e);for(const[s,a]of n)a.attach(s);e.position.copy(mf.getCenter(un));for(const[s]of n)e.attach(s);let i=!1;const o=sae(()=>{if(!r.length||i)return;i=!0;const s=new Cf;s.outerObject3d.position.copy(e.position);for(const a of r)s.attach(a);cn(s)});return()=>{if(cn(),!t.done&&!i)for(const[s,a]of n)a.attach(s);Yf(void 0),t.dispose(),rt.remove(e),o.cancel()}},[Zs]);class lc extends rk{constructor(e){super(),F(this,"noEffect"),F(this,"data",{}),this.noEffect=e,!e&&(goe(this.data),this.then(()=>yoe(this.data)))}}F(lc,"componentName","setup"),F(lc,"defaults",ya),F(lc,"schema",JS);for(const r of Object.keys(JS))Object.defineProperty(lc.prototype,r,{get(){return this.data[r]},set(e){this.data[r]=e,!this.noEffect&&jF()}});const uae={...xk},cae={...Sk};class Yg extends Ek{constructor(){super(new Fn(75,1,Pm,Ca))}}F(Yg,"componentName","camera"),F(Yg,"defaults",cae),F(Yg,"schema",uae);const[gwe,hae]=zi(),vU={...xk,lockTargetRotation:[Boolean,String]},gU={...Sk,lockTargetRotation:!0},dae={...vU},pae={...gU,innerZ:300};class fae{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const n=this._listeners[e];if(n!==void 0){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const n=t.slice(0);for(let i=0,o=n.length;i<o;i++)n[i].call(this,e);e.target=null}}}const Ai=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function mae(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ai[r&255]+Ai[r>>8&255]+Ai[r>>16&255]+Ai[r>>24&255]+"-"+Ai[e&255]+Ai[e>>8&255]+"-"+Ai[e>>16&15|64]+Ai[e>>24&255]+"-"+Ai[t&63|128]+Ai[t>>8&255]+"-"+Ai[t>>16&255]+Ai[t>>24&255]+Ai[n&255]+Ai[n>>8&255]+Ai[n>>16&255]+Ai[n>>24&255]).toLowerCase()}function Hu(r,e,t){return Math.max(e,Math.min(t,r))}class Jk{constructor(){Jk.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,o,s,a,l,c){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=t,d[4]=o,d[5]=l,d[6]=n,d[7]=s,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,o=this.elements,s=n[0],a=n[3],l=n[6],c=n[1],d=n[4],f=n[7],m=n[2],g=n[5],b=n[8],_=i[0],w=i[3],M=i[6],S=i[1],C=i[4],P=i[7],T=i[2],L=i[5],O=i[8];return o[0]=s*_+a*S+l*T,o[3]=s*w+a*C+l*L,o[6]=s*M+a*P+l*O,o[1]=c*_+d*S+f*T,o[4]=c*w+d*C+f*L,o[7]=c*M+d*P+f*O,o[2]=m*_+g*S+b*T,o[5]=m*w+g*C+b*L,o[8]=m*M+g*P+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*s*d-t*a*c-n*o*d+n*a*l+i*o*c-i*s*l}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=d*s-a*c,m=a*l-d*o,g=c*o-s*l,b=t*f+n*m+i*g;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/b;return e[0]=f*_,e[1]=(i*c-d*n)*_,e[2]=(a*n-i*s)*_,e[3]=m*_,e[4]=(d*t-i*l)*_,e[5]=(i*o-a*t)*_,e[6]=g*_,e[7]=(n*l-c*t)*_,e[8]=(s*t-n*o)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(n*l,n*c,-n*(l*s+c*a)+s+e,-i*c,i*l,-i*(-c*s+l*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,o=i[0],s=i[3],a=i[6],l=i[1],c=i[4],d=i[7];return i[0]=t*o+n*l,i[3]=t*s+n*c,i[6]=t*a+n*d,i[1]=-n*o+t*l,i[4]=-n*s+t*c,i[7]=-n*a+t*d,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}class sy{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,o,s,a){let l=n[i+0],c=n[i+1],d=n[i+2],f=n[i+3];const m=o[s+0],g=o[s+1],b=o[s+2],_=o[s+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f;return}if(a===1){e[t+0]=m,e[t+1]=g,e[t+2]=b,e[t+3]=_;return}if(f!==_||l!==m||c!==g||d!==b){let w=1-a;const M=l*m+c*g+d*b+f*_,S=M>=0?1:-1,C=1-M*M;if(C>Number.EPSILON){const T=Math.sqrt(C),L=Math.atan2(T,M*S);w=Math.sin(w*L)/T,a=Math.sin(a*L)/T}const P=a*S;if(l=l*w+m*P,c=c*w+g*P,d=d*w+b*P,f=f*w+_*P,w===1-a){const T=1/Math.sqrt(l*l+c*c+d*d+f*f);l*=T,c*=T,d*=T,f*=T}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f}static multiplyQuaternionsFlat(e,t,n,i,o,s){const a=n[i],l=n[i+1],c=n[i+2],d=n[i+3],f=o[s],m=o[s+1],g=o[s+2],b=o[s+3];return e[t]=a*b+d*f+l*g-c*m,e[t+1]=l*b+d*m+c*f-a*g,e[t+2]=c*b+d*g+a*m-l*f,e[t+3]=d*b-a*f-l*m-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(n/2),d=a(i/2),f=a(o/2),m=l(n/2),g=l(i/2),b=l(o/2);switch(s){case"XYZ":this._x=m*d*f+c*g*b,this._y=c*g*f-m*d*b,this._z=c*d*b+m*g*f,this._w=c*d*f-m*g*b;break;case"YXZ":this._x=m*d*f+c*g*b,this._y=c*g*f-m*d*b,this._z=c*d*b-m*g*f,this._w=c*d*f+m*g*b;break;case"ZXY":this._x=m*d*f-c*g*b,this._y=c*g*f+m*d*b,this._z=c*d*b+m*g*f,this._w=c*d*f-m*g*b;break;case"ZYX":this._x=m*d*f-c*g*b,this._y=c*g*f+m*d*b,this._z=c*d*b-m*g*f,this._w=c*d*f+m*g*b;break;case"YZX":this._x=m*d*f+c*g*b,this._y=c*g*f+m*d*b,this._z=c*d*b-m*g*f,this._w=c*d*f-m*g*b;break;case"XZY":this._x=m*d*f-c*g*b,this._y=c*g*f-m*d*b,this._z=c*d*b+m*g*f,this._w=c*d*f+m*g*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],o=t[8],s=t[1],a=t[5],l=t[9],c=t[2],d=t[6],f=t[10],m=n+a+f;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(d-l)*g,this._y=(o-c)*g,this._z=(s-i)*g}else if(n>a&&n>f){const g=2*Math.sqrt(1+n-a-f);this._w=(d-l)/g,this._x=.25*g,this._y=(i+s)/g,this._z=(o+c)/g}else if(a>f){const g=2*Math.sqrt(1+a-n-f);this._w=(o-c)/g,this._x=(i+s)/g,this._y=.25*g,this._z=(l+d)/g}else{const g=2*Math.sqrt(1+f-n-a);this._w=(s-i)/g,this._x=(o+c)/g,this._y=(l+d)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Hu(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,o=e._z,s=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=n*d+s*a+i*c-o*l,this._y=i*d+s*l+o*a-n*c,this._z=o*d+s*c+n*l-i*a,this._w=s*d-n*a-i*l-o*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+n*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*s+t*this._w,this._x=g*n+t*this._x,this._y=g*i+t*this._y,this._z=g*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),f=Math.sin((1-t)*d)/c,m=Math.sin(t*d)/c;return this._w=s*f+this._w*m,this._x=n*f+this._x*m,this._y=i*f+this._y*m,this._z=o*f+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(o),n*Math.cos(o),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Hn{constructor(e=0,t=0,n=0){Hn.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(v6.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(v6.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*i,this.y=o[1]*t+o[4]*n+o[7]*i,this.z=o[2]*t+o[5]*n+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,o=e.elements,s=1/(o[3]*t+o[7]*n+o[11]*i+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*i+o[12])*s,this.y=(o[1]*t+o[5]*n+o[9]*i+o[13])*s,this.z=(o[2]*t+o[6]*n+o[10]*i+o[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=l*t+s*i-a*n,d=l*n+a*t-o*i,f=l*i+o*n-s*t,m=-o*t-s*n-a*i;return this.x=c*l+m*-o+d*-a-f*-s,this.y=d*l+m*-s+f*-o-c*-a,this.z=f*l+m*-a+c*-s-d*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i,this.y=o[1]*t+o[5]*n+o[9]*i,this.z=o[2]*t+o[6]*n+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=i*l-o*a,this.y=o*s-n*l,this.z=n*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return fE.copy(this).projectOnVector(e),this.sub(fE)}reflect(e){return this.sub(fE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Hu(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const fE=new Hn,v6=new sy;class Bl{constructor(){Bl.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,o,s,a,l,c,d,f,m,g,b,_,w){const M=this.elements;return M[0]=e,M[4]=t,M[8]=n,M[12]=i,M[1]=o,M[5]=s,M[9]=a,M[13]=l,M[2]=c,M[6]=d,M[10]=f,M[14]=m,M[3]=g,M[7]=b,M[11]=_,M[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Bl().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Lp.setFromMatrixColumn(e,0).length(),o=1/Lp.setFromMatrixColumn(e,1).length(),s=1/Lp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,o=e.z,s=Math.cos(n),a=Math.sin(n),l=Math.cos(i),c=Math.sin(i),d=Math.cos(o),f=Math.sin(o);if(e.order==="XYZ"){const m=s*d,g=s*f,b=a*d,_=a*f;t[0]=l*d,t[4]=-l*f,t[8]=c,t[1]=g+b*c,t[5]=m-_*c,t[9]=-a*l,t[2]=_-m*c,t[6]=b+g*c,t[10]=s*l}else if(e.order==="YXZ"){const m=l*d,g=l*f,b=c*d,_=c*f;t[0]=m+_*a,t[4]=b*a-g,t[8]=s*c,t[1]=s*f,t[5]=s*d,t[9]=-a,t[2]=g*a-b,t[6]=_+m*a,t[10]=s*l}else if(e.order==="ZXY"){const m=l*d,g=l*f,b=c*d,_=c*f;t[0]=m-_*a,t[4]=-s*f,t[8]=b+g*a,t[1]=g+b*a,t[5]=s*d,t[9]=_-m*a,t[2]=-s*c,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){const m=s*d,g=s*f,b=a*d,_=a*f;t[0]=l*d,t[4]=b*c-g,t[8]=m*c+_,t[1]=l*f,t[5]=_*c+m,t[9]=g*c-b,t[2]=-c,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){const m=s*l,g=s*c,b=a*l,_=a*c;t[0]=l*d,t[4]=_-m*f,t[8]=b*f+g,t[1]=f,t[5]=s*d,t[9]=-a*d,t[2]=-c*d,t[6]=g*f+b,t[10]=m-_*f}else if(e.order==="XZY"){const m=s*l,g=s*c,b=a*l,_=a*c;t[0]=l*d,t[4]=-f,t[8]=c*d,t[1]=m*f+_,t[5]=s*d,t[9]=g*f-b,t[2]=b*f-g,t[6]=a*d,t[10]=_*f+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(vae,e,gae)}lookAt(e,t,n){const i=this.elements;return Io.subVectors(e,t),Io.lengthSq()===0&&(Io.z=1),Io.normalize(),Ou.crossVectors(n,Io),Ou.lengthSq()===0&&(Math.abs(n.z)===1?Io.x+=1e-4:Io.z+=1e-4,Io.normalize(),Ou.crossVectors(n,Io)),Ou.normalize(),Vw.crossVectors(Io,Ou),i[0]=Ou.x,i[4]=Vw.x,i[8]=Io.x,i[1]=Ou.y,i[5]=Vw.y,i[9]=Io.y,i[2]=Ou.z,i[6]=Vw.z,i[10]=Io.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,o=this.elements,s=n[0],a=n[4],l=n[8],c=n[12],d=n[1],f=n[5],m=n[9],g=n[13],b=n[2],_=n[6],w=n[10],M=n[14],S=n[3],C=n[7],P=n[11],T=n[15],L=i[0],O=i[4],k=i[8],N=i[12],V=i[1],W=i[5],ee=i[9],se=i[13],q=i[2],re=i[6],Z=i[10],me=i[14],J=i[3],Q=i[7],$=i[11],fe=i[15];return o[0]=s*L+a*V+l*q+c*J,o[4]=s*O+a*W+l*re+c*Q,o[8]=s*k+a*ee+l*Z+c*$,o[12]=s*N+a*se+l*me+c*fe,o[1]=d*L+f*V+m*q+g*J,o[5]=d*O+f*W+m*re+g*Q,o[9]=d*k+f*ee+m*Z+g*$,o[13]=d*N+f*se+m*me+g*fe,o[2]=b*L+_*V+w*q+M*J,o[6]=b*O+_*W+w*re+M*Q,o[10]=b*k+_*ee+w*Z+M*$,o[14]=b*N+_*se+w*me+M*fe,o[3]=S*L+C*V+P*q+T*J,o[7]=S*O+C*W+P*re+T*Q,o[11]=S*k+C*ee+P*Z+T*$,o[15]=S*N+C*se+P*me+T*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],d=e[2],f=e[6],m=e[10],g=e[14],b=e[3],_=e[7],w=e[11],M=e[15];return b*(+o*l*f-i*c*f-o*a*m+n*c*m+i*a*g-n*l*g)+_*(+t*l*g-t*c*m+o*s*m-i*s*g+i*c*d-o*l*d)+w*(+t*c*f-t*a*g-o*s*f+n*s*g+o*a*d-n*c*d)+M*(-i*a*d-t*l*f+t*a*m+i*s*f-n*s*m+n*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],m=e[10],g=e[11],b=e[12],_=e[13],w=e[14],M=e[15],S=f*w*c-_*m*c+_*l*g-a*w*g-f*l*M+a*m*M,C=b*m*c-d*w*c-b*l*g+s*w*g+d*l*M-s*m*M,P=d*_*c-b*f*c+b*a*g-s*_*g-d*a*M+s*f*M,T=b*f*l-d*_*l-b*a*m+s*_*m+d*a*w-s*f*w,L=t*S+n*C+i*P+o*T;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/L;return e[0]=S*O,e[1]=(_*m*o-f*w*o-_*i*g+n*w*g+f*i*M-n*m*M)*O,e[2]=(a*w*o-_*l*o+_*i*c-n*w*c-a*i*M+n*l*M)*O,e[3]=(f*l*o-a*m*o-f*i*c+n*m*c+a*i*g-n*l*g)*O,e[4]=C*O,e[5]=(d*w*o-b*m*o+b*i*g-t*w*g-d*i*M+t*m*M)*O,e[6]=(b*l*o-s*w*o-b*i*c+t*w*c+s*i*M-t*l*M)*O,e[7]=(s*m*o-d*l*o+d*i*c-t*m*c-s*i*g+t*l*g)*O,e[8]=P*O,e[9]=(b*f*o-d*_*o-b*n*g+t*_*g+d*n*M-t*f*M)*O,e[10]=(s*_*o-b*a*o+b*n*c-t*_*c-s*n*M+t*a*M)*O,e[11]=(d*a*o-s*f*o-d*n*c+t*f*c+s*n*g-t*a*g)*O,e[12]=T*O,e[13]=(d*_*i-b*f*i+b*n*m-t*_*m-d*n*w+t*f*w)*O,e[14]=(b*a*i-s*_*i-b*n*l+t*_*l+s*n*w-t*a*w)*O,e[15]=(s*f*i-d*a*i+d*n*l-t*f*l-s*n*m+t*a*m)*O,this}scale(e){const t=this.elements,n=e.x,i=e.y,o=e.z;return t[0]*=n,t[4]*=i,t[8]*=o,t[1]*=n,t[5]*=i,t[9]*=o,t[2]*=n,t[6]*=i,t[10]*=o,t[3]*=n,t[7]*=i,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),o=1-n,s=e.x,a=e.y,l=e.z,c=o*s,d=o*a;return this.set(c*s+n,c*a-i*l,c*l+i*a,0,c*a+i*l,d*a+n,d*l-i*s,0,c*l-i*a,d*l+i*s,o*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,o,s){return this.set(1,n,o,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,c=o+o,d=s+s,f=a+a,m=o*c,g=o*d,b=o*f,_=s*d,w=s*f,M=a*f,S=l*c,C=l*d,P=l*f,T=n.x,L=n.y,O=n.z;return i[0]=(1-(_+M))*T,i[1]=(g+P)*T,i[2]=(b-C)*T,i[3]=0,i[4]=(g-P)*L,i[5]=(1-(m+M))*L,i[6]=(w+S)*L,i[7]=0,i[8]=(b+C)*O,i[9]=(w-S)*O,i[10]=(1-(m+_))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let o=Lp.set(i[0],i[1],i[2]).length();const s=Lp.set(i[4],i[5],i[6]).length(),a=Lp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Is.copy(this);const l=1/o,c=1/s,d=1/a;return Is.elements[0]*=l,Is.elements[1]*=l,Is.elements[2]*=l,Is.elements[4]*=c,Is.elements[5]*=c,Is.elements[6]*=c,Is.elements[8]*=d,Is.elements[9]*=d,Is.elements[10]*=d,t.setFromRotationMatrix(Is),n.x=o,n.y=s,n.z=a,this}makePerspective(e,t,n,i,o,s){const a=this.elements,l=2*o/(t-e),c=2*o/(n-i),d=(t+e)/(t-e),f=(n+i)/(n-i),m=-(s+o)/(s-o),g=-2*s*o/(s-o);return a[0]=l,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=m,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,o,s){const a=this.elements,l=1/(t-e),c=1/(n-i),d=1/(s-o),f=(t+e)*l,m=(n+i)*c,g=(s+o)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-m,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Lp=new Hn,Is=new Bl,vae=new Hn(0,0,0),gae=new Hn(1,1,1),Ou=new Hn,Vw=new Hn,Io=new Hn,g6=new Bl,y6=new sy;class ay{constructor(e=0,t=0,n=0,i=ay.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],c=i[5],d=i[9],f=i[2],m=i[6],g=i[10];switch(t){case"XYZ":this._y=Math.asin(Hu(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Hu(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(Hu(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Hu(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(Hu(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-Hu(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return g6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(g6,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return y6.setFromEuler(this),this.setFromQuaternion(y6,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}ay.DefaultOrder="XYZ";ay.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class yae{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let _ae=0;const _6=new Hn,Op=new sy,xl=new Bl,zw=new Hn,Xv=new Hn,wae=new Hn,bae=new sy,w6=new Hn(1,0,0),b6=new Hn(0,1,0),x6=new Hn(0,0,1),xae={type:"added"},S6={type:"removed"};class nm extends fae{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_ae++}),this.uuid=mae(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=nm.DefaultUp.clone();const e=new Hn,t=new ay,n=new sy,i=new Hn(1,1,1);function o(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(o),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Bl},normalMatrix:{value:new Jk}}),this.matrix=new Bl,this.matrixWorld=new Bl,this.matrixAutoUpdate=nm.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new yae,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Op.setFromAxisAngle(e,t),this.quaternion.multiply(Op),this}rotateOnWorldAxis(e,t){return Op.setFromAxisAngle(e,t),this.quaternion.premultiply(Op),this}rotateX(e){return this.rotateOnAxis(w6,e)}rotateY(e){return this.rotateOnAxis(b6,e)}rotateZ(e){return this.rotateOnAxis(x6,e)}translateOnAxis(e,t){return _6.copy(e).applyQuaternion(this.quaternion),this.position.add(_6.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(w6,e)}translateY(e){return this.translateOnAxis(b6,e)}translateZ(e){return this.translateOnAxis(x6,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(xl.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?zw.copy(e):zw.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Xv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xl.lookAt(Xv,zw,this.up):xl.lookAt(zw,Xv,this.up),this.quaternion.setFromRotationMatrix(xl),i&&(xl.extractRotation(i.matrixWorld),Op.setFromRotationMatrix(xl),this.quaternion.premultiply(Op.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(xae)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(S6)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(S6)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),xl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),xl.multiply(e.parent.matrixWorld)),e.applyMatrix4(xl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xv,e,wae),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xv,bae,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const f=l[c];o(e.shapes,f)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(t){const a=s(e.geometries),l=s(e.materials),c=s(e.textures),d=s(e.images),f=s(e.shapes),m=s(e.skeletons),g=s(e.animations),b=s(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),d.length>0&&(n.images=d),f.length>0&&(n.shapes=f),m.length>0&&(n.skeletons=m),g.length>0&&(n.animations=g),b.length>0&&(n.nodes=b)}return n.object=i,n;function s(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}nm.DefaultUp=new Hn(0,1,0);nm.DefaultMatrixAutoUpdate=!0;const mE=new nm,yU=r=>{const e=vr(r.outerObject3d).normalize();return mE.lookAt(e),mE.rotateX(fg),r.outerObject3d.quaternion.copy(mE.quaternion)};class Wx extends Pk{constructor(){super(new Fn(75,1,Pm,Ca)),F(this,"lockTargetRotation",!0);const e=this.midObject3d=new pr;this.outerObject3d.add(e),e.add(this.object3d);const t=this.camera;rt.attach(t),this.then(()=>rt.remove(t)),this.createEffect(()=>{const s=this.targetState.get();!s||"frustumCulled"in s&&(s.frustumCulled=!1)},[this.targetState.get]);const n=(s,a)=>{Hr.setFromQuaternion(s.outerObject3d.quaternion),Hr.y+=Math.PI,a?(Rh.setFromEuler(Hr),e.quaternion.slerp(Rh,sd(.1))):e.setRotationFromEuler(Hr),this.updateAngle()},i=(s,a,l)=>{if(Hr.setFromQuaternion(this.midObject3d.quaternion),Hr.x=0,Hr.z=0,Hr.y+=Math.PI,l){const d=die(s);Rh.copy(s.outerObject3d.quaternion);const f=d.rotation.y;s.outerObject3d.quaternion.copy(l),d.rotation.y=Hr.y,Hr.setFromQuaternion(vc(d)),d.rotation.y=f,s.outerObject3d.quaternion.copy(Rh)}const c=OT.has(s);if(a&&!c){Rh.setFromEuler(Hr),s.outerObject3d.quaternion.slerp(Rh,sd(.1));return}s.outerObject3d.setRotationFromEuler(Hr),l&&c&&OT.delete(s)};let o=!1;this.createEffect(()=>{const s=this.targetState.get();if(!s)return;n(s,!1);let[a,l,c]=[0,0,0];const d=()=>{const{x:g,y:b,z:_}=s.outerObject3d.position,w=g!==a||b!==l||_!==c;return[a,l,c]=[g,b,_],w},f=gc(),m=Or(()=>{this.outerObject3d.position.copy(s.outerObject3d.position);const g=f?yU(this):void 0;if(this.lockTargetRotation){if(this.lockTargetRotation==="follow"||o){n(s,!1);return}if(this.lockTargetRotation==="dynamic-lock"){d()&&i(s,!0,g);return}if(this.lockTargetRotation==="dynamic-follow"){d()&&n(s,!0);return}i(s,!1,g)}});return()=>{m.cancel()}},[this.targetState.get,gc]),this.createEffect(()=>{const s=this.targetState.get(),a=hn(),l=ms(),c=ad();if(s&&s===a&&l&&c==="rotate")return o=!0,()=>{o=!1}},[this.targetState.get,hn,ms,ad])}}F(Wx,"defaults",gU),F(Wx,"schema",vU);const M6=new Set,C6=(r,e)=>{"visible"in r&&(r.visible=e)};let _U=!1;xt(()=>{_U=Vi()||!!fs()&&Ye()===qr},[Vi,fs,Ye]);class Xg extends Wx{constructor(){super(),this.innerZ=300,this.orbitMode=!0;const e=this.camera;yn(()=>import("./bvhCameraLoop.03e86250.77b9c993.js"),["assets/bvhCameraLoop.03e86250.77b9c993.js","assets/useBVHMap.89d4dfff.54583fe0.js"]).then(()=>{this.createEffect(()=>{const t=this.targetState.get();if(!t){const s=Or(()=>{e.position.copy(vr(this.object3d)),e.quaternion.copy(vc(this.object3d))});return()=>{s.cancel()}}M6.add(e);let n=!0;C6(t,!n);let i=!0;const o=hae(()=>{const s=vr(this.outerObject3d),a=vr(this.object3d),l=a.distanceTo(s);e.position.lerp(a,i?1:sd(.1));const c=i?1:e.position.distanceTo(s)/l;e.position.lerpVectors(s,a,c),e.quaternion.copy(vc(this.object3d));const d=_U?!1:c<.35;d!==n&&C6(t,!d),n=d,i=!1});return()=>{o.cancel(),M6.delete(e)}},[this.targetState.get])})}}F(Xg,"componentName","thirdPersonCamera"),F(Xg,"defaults",pae),F(Xg,"schema",dae);class Qk extends Wx{constructor(){super(),F(this,"innerYSetState",new ht(!1));const e=this.camera;this.watch(Or(()=>{e.position.copy(vr(this.object3d)),e.quaternion.copy(vc(this.object3d))})),this.createEffect(()=>{const t=this.targetState.get(),n=this.innerYSetState.get();if(!(!t||!("height"in t)||n))return super.innerY=t.height*.4,()=>{super.innerY=0}},[this.targetState.get,this.innerYSetState.get])}get innerY(){return super.innerY}set innerY(e){super.innerY=e,this.innerYSetState.set(!0)}}F(Qk,"componentName","firstPersonCamera");const Sae=()=>{const r=new zl;return r.texture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABjVJREFUaEPtWmvLVUUYXWu2VlaGUGGgZUWl3cvILhqlplYWkWVlfsofkHQhyEjRSCK64Q+wT2kkWpGWl7QIpRvZzUKxgi6SRUEX0yz3XvFsZl7G43vOmTnnmEEdEF/Onj3zrFnPZc0zh+jhRxJzpiOpnPGtxmYt3GoiSQXJMsewTt5pNn9PgBgTYXclDQBQAWg2t7HgSO4zo+J3czahcWzXQCSZUZWkWZLuB2CstJvXwBiDj5FcHOY4ZEDCbkoaImkHgCMzjdlNchjJn7tlpt3OtbQrYmOEpM88kGRGABiQs0h+1S0rvQIyXNI2D8Tcpt28YYwBGUny238LkBM9kEEWvxlA9ngg3/wPxDt/OxdoFyN12pVkjGzt0LXOJPn1oWakLoIeyBcABma61l6Sp5D87pAB8XLEakhZluUCkg/5GlIkpmDLbrYRD5B81Kq8FdJOZUtHrhXn/AhEov19w/qSgqQFRVHM66bSdwqkruZlWT5J8u5IkuTOZ2BqySLpqaIo7unUxXIXNm00wHSSpHslPQ7gLwCmr7Ln8twYENNdA0neR/KJsEYOxVmLB7UqabSk9yNDsubpx8A+NyN5EcnNuco4y4AQG1VVbQQw1u+ksdGLj7Fic21yzo3L1V7JQCI2Jklam5mhUoGGTDaZ5LocVrKBlGW5lOTtPWYjAK1ZkfRcURQzeg4kkuuDJW0HMDSx8KUyEcaFWPme5Okkf0t1sSRGIrl+vqQPc63rZDzJC0h+lJqOU4EEKXKNpFcPUnwEvCFOriW5OtW9UoGE2nGHpGf/ISAzSS5JrSn/OSDBtSZIWu8lievE9xPesQ6MSaCJJDf02rVCp2SYPwkedZCz1u/+5Lijp8Eeq9Kqqt4FcPFBipM60AG855wbk5p6zb6kGPFAQsDPlTTfi0U7SPXyYwLUxOM8kgtSAz0XSHCvk/yxNrXRkAo0FENrSIzKPf4mMxKzUpblIyTn9JiVmg1JC4uieDCHjSxG4jiRdJikjwGM7BGYGgSAbSTPI/lnTnx0AsRSrnWsrXNyoSQLfJPewZBUN4rHhXf3kRxD8gPfD7AOjaXipE+ya0V6y2LjWN8dHCtpHQD7Lvek2HcyBGBxMYnkJknDAfxEck9q6k1mJJ6wqqqVAM4hOYHkl5JGSVpm3/mtMyluGxT+xTsazuj2fziQbSE5neRWSadK2gBgi3Pueu/OdZJpR0tbRhpArABwk1/gmaIoZvm/LffPkXQXgOPaLeqf/0hyEYCF4YKoLMvFJO/0z19wzk1LBdMSSDMQANaTnEpyryTL++ZW1pg4BsB0SVMBnAvgBABHeMP+ALATwCckVwFYRvJX/149h6TDJdmziblgmgJpAeIN71YW8EGDjQAwjqQp4/pjAC2WABztv9rlfb8G7cfMBLDRXyuEuSyTmHtdlQOmXyBx6quqajmAmmIA+4GwOLDWUFmW80nOBbCZpJ0jfmjlXpKGSnoFgHVj6uacv7KzjGgt2EYwK5xzN3vwfdd88RoHAGkA8TKAOugaQQS/9jXlUwCn2e46566ImLrUzt/2sp3zSb4dnlVVtQnA5QA+J3m21Q5vaDNmVjrnbmgGpiUjkoKu2uCcq/02MjJoL4uJ572xt5Bcbr7u4+dqn54NiKXX16Jnt0UgbyW5LGr+9d0QV1VlxwbLkEF/pTHSiFiS+fEqf8/Xt0CIoaqq1gCYDGA7SUvLVpUDyPHe3w2IGfN69GyQv647GcBa59yUOC6jDRsCwBJLHX/NKn5y1mpYJAhIa0Zs9gehuSQfbvD1/oBYqg6xFTSbdeFHNzYb+luzWeyl1JED2v1hV8uyfJrkbAC7vJ/XFzbeUAvaZkAsqO1K+wyv2SztLiqKYnajWIyvL1olkLZAGl+OpIqdFrcAsKvpJUVRzIzcIQRsv0B8ZqrHVFX1IoAbAfziNyP5VNgya7VC3RDsl0l6CcDxJK8k+WYnQCRd54vgTpLTSL6Vo7GCvdmMxAEnaTCA8QBWh/TZALa/rLXfb1Yk2Y8MpgBYQ3J3rnzvCkir7NEA5BJJS31qnkHynVZdkU5B1PO3c6U2Fdrer+8R+xsXAtU/a3o/2O39YddAutmEXr/bFSMpxoQfo3V6W5uyho35G4LD428xBkRwAAAAAElFTkSuQmCC",_n.delete(r),r.scale=.5,r};class ly extends vs{constructor(e,t){const n=new ls;super(n),F(this,"lightState",new ht(void 0)),F(this,"defaultShadowResolution",256),F(this,"defaultShadowBias",uk),F(this,"shadowResolutionComputedState",new ht(void 0)),F(this,"shadowBiasComputedState",new ht(void 0)),F(this,"helperState",new ht(!0)),F(this,"castShadowState",new ht(!0)),F(this,"shadowResolutionState",new ht(void 0)),F(this,"shadowBiasState",new ht(void 0)),this.createEffect(()=>{var i,o,s,a;const l=new e;if(this.lightState.set(l),n.add(l),l.shadow&&this.castShadowState.get()){const c=(o=(i=this.shadowResolutionState.get())!=null?i:KT())!=null?o:this.defaultShadowResolution,d=(a=(s=this.shadowBiasState.get())!=null?s:XT())!=null?a:this.defaultShadowBias;this.shadowBiasComputedState.set(d),this.shadowResolutionComputedState.set(c),l.castShadow=!0,l.shadow.bias=d,l.shadow.mapSize.width=c,l.shadow.mapSize.height=c}return()=>{n.remove(l),l.dispose()}},[this.castShadowState.get,this.shadowResolutionState.get,this.shadowBiasState.get,KT,XT]),this.createEffect(()=>{const i=this.lightState.get();if(Ye()!==qr||!this.helperState.get()||!i)return;const o=new lr,s=Sae();if(o.watch(Pc(({target:a})=>{a===s&&cn(this)})),t){const a=new t(i);rt.add(a),a.add(s.outerObject3d),"update"in a&&o.watch(Or(()=>a.update())),o.then(()=>{a.dispose(),rt.remove(a)})}else this.outerObject3d.add(s.outerObject3d);return()=>{s.dispose(),o.cancel()}},[Ye,this.helperState.get,this.lightState.get])}get helper(){return this.helperState.get()}set helper(e){this.helperState.set(e)}get castShadow(){return this.castShadowState.get()}set castShadow(e){this.castShadowState.set(e)}get shadowResolution(){return this.shadowResolutionState.get()}set shadowResolution(e){this.shadowResolutionState.set(e)}get shadowBias(){return this.shadowBiasState.get()}set shadowBias(e){this.shadowBiasState.set(e)}get color(){const e=this.lightState.get();return e?"#"+e.color.getHexString():"#ffffff"}set color(e){this.cancelHandle("color",()=>this.lightState.get(t=>t&&(t.color=new Je(e))))}get intensity(){const e=this.lightState.get();return e?e.intensity:1}set intensity(e){this.cancelHandle("intensity",()=>this.lightState.get(t=>t&&(t.intensity=e)))}}const uy={...Jl,color:String,intensity:Number,shadowResolution:Number,shadowBias:Number,helper:Boolean},cy={...Ql,color:"#ffffff",intensity:1,shadowResolution:new Yr(256),shadowBias:new Yr(uk),helper:!0},wU={...uy},bU={...cy},Mae={...wU},Cae={...bU,castShadow:!1};class qg extends ly{constructor(){super(ore)}get castShadow(){return!1}set castShadow(e){}}F(qg,"componentName","ambientLight"),F(qg,"defaults",Cae),F(qg,"schema",Mae);class Eae extends D4{constructor(e,t){const n=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],i=new zr;i.setAttribute("position",new Vt(n,3)),i.computeBoundingSphere();const o=new vd({fog:!1});super(i,o),this.light=e,this.color=t,this.type="RectAreaLightHelper";const s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new zr;a.setAttribute("position",new Vt(s,3)),a.computeBoundingSphere(),this.add(new vi(a,new wm({side:Mo,fog:!1})))}updateMatrixWorld(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),this.color!==void 0)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);const e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}this.matrixWorld.extractRotation(this.light.matrixWorld).scale(this.scale).copyPosition(this.light.matrixWorld),this.children[0].matrixWorld.copy(this.matrixWorld)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Pae={...uy},Tae={...cy,depth:0,scaleZ:0,castShadow:!1},Aae=dd(async()=>{const{RectAreaLightUniformsLib:r}=await yn(()=>import("./RectAreaLightUniformsLib.40bfa820.d40803f8.js"),[]);r.init()});class Kg extends vs{constructor(){super(),F(this,"light"),F(this,"shadowResolution"),F(this,"shadowBias"),F(this,"helperState",new ht(!0)),F(this,"_color"),F(this,"_intensity"),F(this,"_width"),F(this,"_height"),F(this,"_scaleX"),F(this,"_scaleY"),Aae().then(()=>{if(this.done)return;const e=this.light=new sre(this._color,this._intensity,this.width*this.scaleX*Wt,this.height*this.scaleY*Wt);this.object3d.add(e),this.then(()=>e.dispose()),this.createEffect(()=>{if(ad()!=="scale"||hn()!==this)return;const t=AF(()=>{const{x:n,y:i}=this.outerObject3d.scale;this.scaleX=n,this.scaleY=i});return()=>{t.cancel()}},[ad,hn]),this.createEffect(()=>{if(Ye()!==qr||!this.helperState.get())return;const t=new Eae(e);return rt.add(t),()=>{t.dispose(),rt.remove(t)}},[Ye,this.helperState.get])})}get castShadow(){return!1}set castShadow(e){}get helper(){return this.helperState.get()}set helper(e){this.helperState.set(e)}get color(){var e;return(e=this._color)!=null?e:"#ffffff"}set color(e){this._color=e,this.light&&(this.light.color=new Je(e))}get intensity(){var e;return(e=this._intensity)!=null?e:1}set intensity(e){this._intensity=e,this.light&&(this.light.intensity=e)}get width(){var e;return(e=this._width)!=null?e:100}set width(e){this._width=e,this.light&&(this.light.width=e*this.scaleX*Wt)}get height(){var e;return(e=this._height)!=null?e:100}set height(e){this._height=e,this.light&&(this.light.height=e*this.scaleY*Wt)}get scaleX(){var e;return(e=this._scaleX)!=null?e:1}set scaleX(e){this._scaleX=e,this.light&&(this.light.width=e*this.width*Wt)}get scaleY(){var e;return(e=this._scaleY)!=null?e:1}set scaleY(e){this._scaleY=e,this.light&&(this.light.height=e*this.height*Wt)}get depth(){return 0}set depth(e){}get scaleZ(){return 0}set scaleZ(e){}}F(Kg,"componentName","areaLight"),F(Kg,"defaults",Tae),F(Kg,"schema",Pae);var xU={},Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.BladeApi=void 0;var kae=function(){function r(e){this.controller_=e}return Object.defineProperty(r.prototype,"element",{get:function(){return this.controller_.view.element},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disabled",{get:function(){return this.controller_.viewProps.get("disabled")},set:function(e){this.controller_.viewProps.set("disabled",e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hidden",{get:function(){return this.controller_.viewProps.get("hidden")},set:function(e){this.controller_.viewProps.set("hidden",e)},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){this.controller_.viewProps.set("disposed",!0)},r}();Ga.BladeApi=kae;var SU={};Object.defineProperty(SU,"__esModule",{value:!0});var MU={};Object.defineProperty(MU,"__esModule",{value:!0});var ni={},$S=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ni,"__esModule",{value:!0});ni.TpTabSelectEvent=ni.TpFoldEvent=ni.TpUpdateEvent=ni.TpChangeEvent=ni.TpEvent=void 0;var hy=function(){function r(e){this.target=e}return r}();ni.TpEvent=hy;var Lae=function(r){$S(e,r);function e(t,n,i,o){var s=r.call(this,t)||this;return s.value=n,s.presetKey=i,s.last=o!=null?o:!0,s}return e}(hy);ni.TpChangeEvent=Lae;var Oae=function(r){$S(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.value=n,o.presetKey=i,o}return e}(hy);ni.TpUpdateEvent=Oae;var Dae=function(r){$S(e,r);function e(t,n){var i=r.call(this,t)||this;return i.expanded=n,i}return e}(hy);ni.TpFoldEvent=Dae;var Rae=function(r){$S(e,r);function e(t,n){var i=r.call(this,t)||this;return i.index=n,i}return e}(hy);ni.TpTabSelectEvent=Rae;var dy={},Po={},zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.deepEqualsArray=zt.isEmpty=zt.forceCast=void 0;function Nae(r){return r}zt.forceCast=Nae;function Iae(r){return r==null}zt.isEmpty=Iae;function Vae(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}zt.deepEqualsArray=Vae;Object.defineProperty(Po,"__esModule",{value:!0});Po.TpError=void 0;var zae=zt,Bae={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(r){return"Invalid parameters for '"+r.name+"'"},nomatchingcontroller:function(r){return"No matching controller for '"+r.key+"'"},nomatchingview:function(r){return"No matching view for '"+JSON.stringify(r.params)+"'"},notbindable:function(){return"Value is not bindable"},propertynotfound:function(r){return"Property '"+r.name+"' not found"},shouldneverhappen:function(){return"This error should never happen"}},Fae=function(){function r(e){var t;this.message=(t=Bae[e.type]((0,zae.forceCast)(e.context)))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}return r.alreadyDisposed=function(){return new r({type:"alreadydisposed"})},r.notBindable=function(){return new r({type:"notbindable"})},r.propertyNotFound=function(e){return new r({type:"propertynotfound",context:{name:e}})},r.shouldNeverHappen=function(){return new r({type:"shouldneverhappen"})},r}();Po.TpError=Fae;Object.defineProperty(dy,"__esModule",{value:!0});dy.BindingTarget=void 0;var E6=Po,Uae=function(){function r(e,t,n){this.obj_=e,this.key_=t,this.presetKey_=n!=null?n:t}return r.isBindable=function(e){return!(e===null||typeof e!="object")},Object.defineProperty(r.prototype,"key",{get:function(){return this.key_},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"presetKey",{get:function(){return this.presetKey_},enumerable:!1,configurable:!0}),r.prototype.read=function(){return this.obj_[this.key_]},r.prototype.write=function(e){this.obj_[this.key_]=e},r.prototype.writeProperty=function(e,t){var n=this.read();if(!r.isBindable(n))throw E6.TpError.notBindable();if(!(e in n))throw E6.TpError.propertyNotFound(e);n[e]=t},r}();dy.BindingTarget=Uae;var py={},jae=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(py,"__esModule",{value:!0});py.ButtonApi=void 0;var Hae=Ga,Wae=ni,Gae=function(r){jae(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){var t;return(t=this.controller_.valueController.props.get("title"))!==null&&t!==void 0?t:""},set:function(t){this.controller_.valueController.props.set("title",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var i=this,o=n.bind(this),s=this.controller_.valueController.emitter;return s.on(t,function(){o(new Wae.TpEvent(i))}),this},e}(Hae.BladeApi);py.ButtonApi=Gae;var fy={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.Emitter=void 0;var Yae=function(){function r(){this.observers_={}}return r.prototype.on=function(e,t){var n=this.observers_[e];return n||(n=this.observers_[e]=[]),n.push({handler:t}),this},r.prototype.off=function(e,t){var n=this.observers_[e];return n&&(this.observers_[e]=n.filter(function(i){return i.handler!==t})),this},r.prototype.emit=function(e,t){var n=this.observers_[e];!n||n.forEach(function(i){i.handler(t)})},r}();bn.Emitter=Yae;var my={},er={};Object.defineProperty(er,"__esModule",{value:!0});er.ClassName=void 0;var Xae="tp";function qae(r){var e=function(t,n){return[Xae,"-",r,"v",t?"_"+t:"",n?"-"+n:""].join("")};return e}er.ClassName=qae;var Eo={},Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.bindValueMap=Wn.bindValue=void 0;function Kae(r,e){return function(t){return e(r(t))}}function Zae(r){return r.rawValue}function CU(r,e){r.emitter.on("change",Kae(Zae,e)),e(r.rawValue)}Wn.bindValue=CU;function Jae(r,e,t){CU(r.value(e),t)}Wn.bindValueMap=Jae;Object.defineProperty(Eo,"__esModule",{value:!0});Eo.bindValueToTextContent=Eo.valueToClassName=void 0;var Qae=Wn;function $ae(r,e,t){t?r.classList.add(e):r.classList.remove(e)}function ele(r,e){return function(t){$ae(r,e,t)}}Eo.valueToClassName=ele;function tle(r,e){(0,Qae.bindValue)(r,function(t){e.textContent=t!=null?t:""})}Eo.bindValueToTextContent=tle;Object.defineProperty(my,"__esModule",{value:!0});my.ButtonView=void 0;var rle=er,nle=Eo,vE=(0,rle.ClassName)("btn"),ile=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(vE()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("button");n.classList.add(vE("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;var i=e.createElement("div");i.classList.add(vE("t")),(0,nle.bindValueToTextContent)(t.props.value("title"),i),this.buttonElement.appendChild(i)}return r}();my.ButtonView=ile;Object.defineProperty(fy,"__esModule",{value:!0});fy.ButtonController=void 0;var ole=bn,sle=my,ale=function(){function r(e,t){this.emitter=new ole.Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new sle.ButtonView(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return r.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},r}();fy.ButtonController=ale;var vy={},Jr={},so={},e2={};Object.defineProperty(e2,"__esModule",{value:!0});e2.BoundValue=void 0;var lle=bn,ule=function(){function r(e,t){var n;this.constraint_=t==null?void 0:t.constraint,this.equals_=(n=t==null?void 0:t.equals)!==null&&n!==void 0?n:function(i,o){return i===o},this.emitter=new lle.Emitter,this.rawValue_=e}return Object.defineProperty(r.prototype,"constraint",{get:function(){return this.constraint_},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rawValue",{get:function(){return this.rawValue_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})},enumerable:!1,configurable:!0}),r.prototype.setRawValue=function(e,t){var n=t!=null?t:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,o=!this.equals_(this.rawValue_,i);!o&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,rawValue:i,sender:this}))},r}();e2.BoundValue=ule;var t2={};Object.defineProperty(t2,"__esModule",{value:!0});t2.PrimitiveValue=void 0;var cle=bn,hle=function(){function r(e){this.emitter=new cle.Emitter,this.value_=e}return Object.defineProperty(r.prototype,"rawValue",{get:function(){return this.value_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})},enumerable:!1,configurable:!0}),r.prototype.setRawValue=function(e,t){var n=t!=null?t:{forceEmit:!1,last:!0};this.value_===e&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))},r}();t2.PrimitiveValue=hle;Object.defineProperty(so,"__esModule",{value:!0});so.createValue=void 0;var dle=e2,ple=t2;function fle(r,e){var t=e==null?void 0:e.constraint,n=e==null?void 0:e.equals;return!t&&!n?new ple.PrimitiveValue(r):new dle.BoundValue(r,e)}so.createValue=fle;Object.defineProperty(Jr,"__esModule",{value:!0});Jr.ValueMap=void 0;var mle=bn,vle=so,gle=function(){function r(e){var t=this;this.emitter=new mle.Emitter,this.valMap_=e;var n=function(s){var a=i.valMap_[s];a.emitter.on("change",function(){t.emitter.emit("change",{key:s,sender:t})})},i=this;for(var o in this.valMap_)n(o)}return r.createCore=function(e){var t=Object.keys(e);return t.reduce(function(n,i){var o;return Object.assign(n,(o={},o[i]=(0,vle.createValue)(e[i]),o))},{})},r.fromObject=function(e){var t=this.createCore(e);return new r(t)},r.prototype.get=function(e){return this.valMap_[e].rawValue},r.prototype.set=function(e,t){this.valMap_[e].rawValue=t},r.prototype.value=function(e){return this.valMap_[e]},r}();Jr.ValueMap=gle;var kn={};(function(r){var e=Ve&&Ve.__assign||function(){return e=Object.assign||function(d){for(var f,m=1,g=arguments.length;m<g;m++){f=arguments[m];for(var b in f)Object.prototype.hasOwnProperty.call(f,b)&&(d[b]=f[b])}return d},e.apply(this,arguments)},t=Ve&&Ve.__spreadArray||function(d,f,m){if(m||arguments.length===2)for(var g=0,b=f.length,_;g<b;g++)(_||!(g in f))&&(_||(_=Array.prototype.slice.call(f,0,g)),_[g]=f[g]);return d.concat(_||Array.prototype.slice.call(f))};Object.defineProperty(r,"__esModule",{value:!0}),r.parseParams=r.ParamsParsers=void 0;var n=zt;function i(d,f){var m=Object.keys(f),g=m.reduce(function(b,_){var w;if(b!==void 0){var M=f[_],S=M(d[_]);return S.succeeded?e(e({},b),(w={},w[_]=S.value,w)):void 0}},{});return(0,n.forceCast)(g)}function o(d,f){return d.reduce(function(m,g){if(m!==void 0){var b=f(g);if(!(!b.succeeded||b.value===void 0))return t(t([],m,!0),[b.value],!1)}},[])}function s(d){return d===null?!1:typeof d=="object"}function a(d){return function(f){return function(m){if(!f&&m===void 0)return{succeeded:!1,value:void 0};if(f&&m===void 0)return{succeeded:!0,value:void 0};var g=d(m);return g!==void 0?{succeeded:!0,value:g}:{succeeded:!1,value:void 0}}}}function l(d){return{custom:function(f){return a(f)(d)},boolean:a(function(f){return typeof f=="boolean"?f:void 0})(d),number:a(function(f){return typeof f=="number"?f:void 0})(d),string:a(function(f){return typeof f=="string"?f:void 0})(d),function:a(function(f){return typeof f=="function"?f:void 0})(d),constant:function(f){return a(function(m){return m===f?f:void 0})(d)},raw:a(function(f){return f})(d),object:function(f){return a(function(m){if(s(m))return i(m,f)})(d)},array:function(f){return a(function(m){if(Array.isArray(m))return o(m,f)})(d)}}}r.ParamsParsers={optional:l(!0),required:l(!1)};function c(d,f){var m=r.ParamsParsers.required.object(f)(d);return m.succeeded?m.value:void 0}r.parseParams=c})(kn);var wd={},$l={},r2={};Object.defineProperty(r2,"__esModule",{value:!0});r2.disposeElement=void 0;function yle(r){return r&&r.parentElement&&r.parentElement.removeChild(r),null}r2.disposeElement=yle;var gy={};Object.defineProperty(gy,"__esModule",{value:!0});gy.getAllBladePositions=void 0;function _le(){return["veryfirst","first","last","verylast"]}gy.getAllBladePositions=_le;Object.defineProperty($l,"__esModule",{value:!0});$l.BladeController=void 0;var wle=r2,ble=er,xle=gy,P6=(0,ble.ClassName)(""),T6={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},Sle=function(){function r(e){var t=this;this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;var n=this.view.element;this.blade.value("positions").emitter.on("change",function(){(0,xle.getAllBladePositions)().forEach(function(i){n.classList.remove(P6(void 0,T6[i]))}),t.blade.get("positions").forEach(function(i){n.classList.add(P6(void 0,T6[i]))})}),this.viewProps.handleDispose(function(){(0,wle.disposeElement)(n)})}return Object.defineProperty(r.prototype,"parent",{get:function(){return this.parent_},enumerable:!1,configurable:!0}),r}();$l.BladeController=Sle;var Lm={},bi={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.findNextTarget=r.indexOfChildElement=r.removeChildNodes=r.removeChildElements=r.removeElement=r.insertElementAt=r.createSvgIconElement=r.getCanvasContext=r.getWindowDocument=r.supportsTouch=r.disableTransitionTemporarily=r.forceReflow=r.SVG_NS=void 0;var e=zt;r.SVG_NS="http://www.w3.org/2000/svg";function t(w){w.offsetHeight}r.forceReflow=t;function n(w,M){var S=w.style.transition;w.style.transition="none",M(),w.style.transition=S}r.disableTransitionTemporarily=n;function i(w){return w.ontouchstart!==void 0}r.supportsTouch=i;function o(){return new Function("return this")()}function s(){var w=(0,e.forceCast)(o());return w.document}r.getWindowDocument=s;function a(w){var M=w.ownerDocument.defaultView;if(!M)return null;var S="document"in M;return S?w.getContext("2d"):null}r.getCanvasContext=a;var l={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function c(w,M){var S=w.createElementNS(r.SVG_NS,"svg");return S.innerHTML=l[M],S}r.createSvgIconElement=c;function d(w,M,S){w.insertBefore(M,w.children[S])}r.insertElementAt=d;function f(w){w.parentElement&&w.parentElement.removeChild(w)}r.removeElement=f;function m(w){for(;w.children.length>0;)w.removeChild(w.children[0])}r.removeChildElements=m;function g(w){for(;w.childNodes.length>0;)w.removeChild(w.childNodes[0])}r.removeChildNodes=g;function b(w){var M=w.parentElement;if(!M)return-1;var S=Array.prototype.slice.call(M.children);return S.indexOf(w)}r.indexOfChildElement=b;function _(w){return w.relatedTarget?(0,e.forceCast)(w.relatedTarget):"explicitOriginalTarget"in w?w.explicitOriginalTarget:null}r.findNextTarget=_})(bi);Object.defineProperty(Lm,"__esModule",{value:!0});Lm.LabelView=void 0;var Mle=bi,Cle=Wn,Ele=er,Ple=zt,qv=(0,Ele.ClassName)("lbl");function Tle(r,e){var t=r.createDocumentFragment(),n=e.split(`
`).map(function(i){return r.createTextNode(i)});return n.forEach(function(i,o){o>0&&t.appendChild(r.createElement("br")),t.appendChild(i)}),t}var Ale=function(){function r(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(qv()),t.viewProps.bindClassModifiers(this.element);var i=e.createElement("div");i.classList.add(qv("l")),(0,Cle.bindValueMap)(t.props,"label",function(s){(0,Ple.isEmpty)(s)?n.element.classList.add(qv(void 0,"nol")):(n.element.classList.remove(qv(void 0,"nol")),(0,Mle.removeChildNodes)(i),i.appendChild(Tle(e,s)))}),this.element.appendChild(i),this.labelElement=i;var o=e.createElement("div");o.classList.add(qv("v")),this.element.appendChild(o),this.valueElement=o}return r}();Lm.LabelView=Ale;var kle=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gx=Ve&&Ve.__assign||function(){return Gx=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Gx.apply(this,arguments)};Object.defineProperty(wd,"__esModule",{value:!0});wd.LabelController=void 0;var Lle=$l,Ole=Lm,Dle=function(r){kle(e,r);function e(t,n){var i=this,o=n.valueController.viewProps;return i=r.call(this,Gx(Gx({},n),{view:new Ole.LabelView(t,{props:n.props,viewProps:o}),viewProps:o}))||this,i.props=n.props,i.valueController=n.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return e}(Lle.BladeController);wd.LabelController=Dle;Object.defineProperty(vy,"__esModule",{value:!0});vy.ButtonBladePlugin=void 0;var A6=Jr,k6=kn,L6=wd,Rle=py,O6=fy;vy.ButtonBladePlugin={id:"button",type:"blade",accept:function(r){var e=k6.ParamsParsers,t=(0,k6.parseParams)(r,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return t?{params:t}:null},controller:function(r){return new L6.LabelController(r.document,{blade:r.blade,props:A6.ValueMap.fromObject({label:r.params.label}),valueController:new O6.ButtonController(r.document,{props:A6.ValueMap.fromObject({title:r.params.title}),viewProps:r.viewProps})})},api:function(r){return!(r.controller instanceof L6.LabelController)||!(r.controller.valueController instanceof O6.ButtonController)?null:new Rle.ButtonApi(r.controller)}};var bd={},Nle=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(bd,"__esModule",{value:!0});bd.ValueBladeController=void 0;var Ile=$l,Vle=function(r){Nle(e,r);function e(t){var n=r.call(this,t)||this;return n.value=t.value,n}return e}(Ile.BladeController);bd.ValueBladeController=Vle;var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.createBlade=void 0;var zle=Jr,Ble=so,Fle=zt;function Ule(){return new zle.ValueMap({positions:(0,Ble.createValue)([],{equals:Fle.deepEqualsArray})})}Tc.createBlade=Ule;var Ji={},jle=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ji,"__esModule",{value:!0});Ji.bindFoldable=Ji.getFoldableStyleHeight=Ji.getFoldableStyleExpanded=Ji.createFoldable=Ji.Foldable=void 0;var Fb=bi,D6=Wn,R6=Jr,EU=zt,PU=function(r){jle(e,r);function e(t){return r.call(this,t)||this}return e.create=function(t){var n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=R6.ValueMap.createCore(n);return new e(i)},Object.defineProperty(e.prototype,"styleExpanded",{get:function(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleHeight",{get:function(){if(!this.styleExpanded)return"0";var t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!(0,EU.isEmpty)(t)?t+"px":"auto"},enumerable:!1,configurable:!0}),e.prototype.bindExpandedClass=function(t,n){var i=this,o=function(){var s=i.styleExpanded;s?t.classList.add(n):t.classList.remove(n)};(0,D6.bindValueMap)(this,"expanded",o),(0,D6.bindValueMap)(this,"temporaryExpanded",o)},e.prototype.cleanUpTransition=function(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)},e}(R6.ValueMap);Ji.Foldable=PU;function Hle(r){return PU.create(r)}Ji.createFoldable=Hle;function Wle(r,e){var t=0;return(0,Fb.disableTransitionTemporarily)(e,function(){r.set("expandedHeight",null),r.set("temporaryExpanded",!0),(0,Fb.forceReflow)(e),t=e.clientHeight,r.set("temporaryExpanded",null),(0,Fb.forceReflow)(e)}),t}function Gle(r){return r.styleExpanded}Ji.getFoldableStyleExpanded=Gle;function Yle(r){return r.styleHeight}Ji.getFoldableStyleHeight=Yle;function N6(r,e){e.style.height=r.styleHeight}function Xle(r,e){r.value("expanded").emitter.on("beforechange",function(){r.set("completed",!1),(0,EU.isEmpty)(r.get("expandedHeight"))&&r.set("expandedHeight",Wle(r,e)),r.set("shouldFixHeight",!0),(0,Fb.forceReflow)(e)}),r.emitter.on("change",function(){N6(r,e)}),N6(r,e),e.addEventListener("transitionend",function(t){t.propertyName==="height"&&r.cleanUpTransition()})}Ji.bindFoldable=Xle;var yy={},Om={},qle=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Om,"__esModule",{value:!0});Om.RackLikeApi=void 0;var Kle=Ga,Zle=function(r){qle(e,r);function e(t,n){var i=r.call(this,t)||this;return i.rackApi_=n,i}return e}(Kle.BladeApi);Om.RackLikeApi=Zle;var _c={},Ea={},Ia=Ve&&Ve.__assign||function(){return Ia=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ia.apply(this,arguments)};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.addTabAsBlade=Ea.addSeparatorAsBlade=Ea.addFolderAsBlade=Ea.addButtonAsBlade=void 0;function Jle(r,e){return r.addBlade(Ia(Ia({},e),{view:"button"}))}Ea.addButtonAsBlade=Jle;function Qle(r,e){return r.addBlade(Ia(Ia({},e),{view:"folder"}))}Ea.addFolderAsBlade=Qle;function $le(r,e){var t=e!=null?e:{};return r.addBlade(Ia(Ia({},t),{view:"separator"}))}Ea.addSeparatorAsBlade=$le;function eue(r,e){return r.addBlade(Ia(Ia({},e),{view:"tab"}))}Ea.addTabAsBlade=eue;var Dm={};Object.defineProperty(Dm,"__esModule",{value:!0});Dm.NestedOrderedSet=void 0;var tue=bn,rue=Po,nue=function(){function r(e){this.emitter=new tue.Emitter,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}return Object.defineProperty(r.prototype,"items",{get:function(){return this.items_},enumerable:!1,configurable:!0}),r.prototype.allItems=function(){return Array.from(this.cache_)},r.prototype.find=function(e){for(var t=0,n=this.allItems();t<n.length;t++){var i=n[t];if(e(i))return i}return null},r.prototype.includes=function(e){return this.cache_.has(e)},r.prototype.add=function(e,t){var n=this;if(this.includes(e))throw rue.TpError.shouldNeverHappen();var i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);var o=this.extract_(e);o&&(o.emitter.on("add",this.onSubListAdd_),o.emitter.on("remove",this.onSubListRemove_),o.allItems().forEach(function(s){n.cache_.add(s)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})},r.prototype.remove=function(e){var t=this.items_.indexOf(e);if(!(t<0)){this.items_.splice(t,1),this.cache_.delete(e);var n=this.extract_(e);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}},r.prototype.onSubListAdd_=function(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})},r.prototype.onSubListRemove_=function(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})},r}();Dm.NestedOrderedSet=nue;var Rm={},iue=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Rm,"__esModule",{value:!0});Rm.InputBindingApi=void 0;var oue=bn,sue=zt,aue=Ga,lue=ni,uue=function(r){iue(e,r);function e(t){var n=r.call(this,t)||this;return n.onBindingChange_=n.onBindingChange_.bind(n),n.emitter_=new oue.Emitter,n.controller_.binding.emitter.on("change",n.onBindingChange_),n}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var i=n.bind(this);return this.emitter_.on(t,function(o){i(o.event)}),this},e.prototype.refresh=function(){this.controller_.binding.read()},e.prototype.onBindingChange_=function(t){var n=t.sender.target.read();this.emitter_.emit("change",{event:new lue.TpChangeEvent(this,(0,sue.forceCast)(n),this.controller_.binding.target.presetKey,t.options.last)})},e}(aue.BladeApi);Rm.InputBindingApi=uue;var Ac={},cue=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ac,"__esModule",{value:!0});Ac.InputBindingController=void 0;var hue=wd,due=function(r){cue(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.binding=n.binding,i}return e}(hue.LabelController);Ac.InputBindingController=due;var Nm={},pue=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Nm,"__esModule",{value:!0});Nm.MonitorBindingApi=void 0;var fue=bn,mue=zt,vue=Ga,gue=ni,yue=function(r){pue(e,r);function e(t){var n=r.call(this,t)||this;return n.onBindingUpdate_=n.onBindingUpdate_.bind(n),n.emitter_=new fue.Emitter,n.controller_.binding.emitter.on("update",n.onBindingUpdate_),n}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var i=n.bind(this);return this.emitter_.on(t,function(o){i(o.event)}),this},e.prototype.refresh=function(){this.controller_.binding.read()},e.prototype.onBindingUpdate_=function(t){var n=t.sender.target.read();this.emitter_.emit("update",{event:new gue.TpUpdateEvent(this,(0,mue.forceCast)(n),this.controller_.binding.target.presetKey)})},e}(vue.BladeApi);Nm.MonitorBindingApi=yue;var kc={},_ue=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(kc,"__esModule",{value:!0});kc.MonitorBindingController=void 0;var wue=wd,bue=function(r){_ue(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.binding=n.binding,i.viewProps.bindDisabled(i.binding.ticker),i.viewProps.handleDispose(function(){i.binding.dispose()}),i}return e}(wue.LabelController);kc.MonitorBindingController=bue;var xue=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(_c,"__esModule",{value:!0});_c.RackApi=_c.findSubBladeApiSet=void 0;var I6=dy,Sue=bn,$k=Po,gE=zt,Mue=Ga,Bw=Ea,Cue=Om,yE=ni,Eue=bd,Pue=Dm,Tue=Rm,Aue=Ac,kue=Nm,Lue=kc;function TU(r){return r instanceof AU?r.apiSet_:r instanceof Cue.RackLikeApi?r.rackApi_.apiSet_:null}_c.findSubBladeApiSet=TU;function Kv(r,e){var t=r.find(function(n){return n.controller_===e});if(!t)throw $k.TpError.shouldNeverHappen();return t}function V6(r,e,t){if(!I6.BindingTarget.isBindable(r))throw $k.TpError.notBindable();return new I6.BindingTarget(r,e,t)}var AU=function(r){xue(e,r);function e(t,n){var i=r.call(this,t)||this;i.onRackAdd_=i.onRackAdd_.bind(i),i.onRackRemove_=i.onRackRemove_.bind(i),i.onRackInputChange_=i.onRackInputChange_.bind(i),i.onRackMonitorUpdate_=i.onRackMonitorUpdate_.bind(i),i.emitter_=new Sue.Emitter,i.apiSet_=new Pue.NestedOrderedSet(TU),i.pool_=n;var o=i.controller_.rack;return o.emitter.on("add",i.onRackAdd_),o.emitter.on("remove",i.onRackRemove_),o.emitter.on("inputchange",i.onRackInputChange_),o.emitter.on("monitorupdate",i.onRackMonitorUpdate_),o.children.forEach(function(s){i.setUpApi_(s)}),i}return Object.defineProperty(e.prototype,"children",{get:function(){var t=this;return this.controller_.rack.children.map(function(n){return Kv(t.apiSet_,n)})},enumerable:!1,configurable:!0}),e.prototype.addInput=function(t,n,i){var o=i!=null?i:{},s=this.controller_.view.element.ownerDocument,a=this.pool_.createInput(s,V6(t,n,o.presetKey),o),l=new Tue.InputBindingApi(a);return this.add(l,o.index)},e.prototype.addMonitor=function(t,n,i){var o=i!=null?i:{},s=this.controller_.view.element.ownerDocument,a=this.pool_.createMonitor(s,V6(t,n),o),l=new kue.MonitorBindingApi(a);return(0,gE.forceCast)(this.add(l,o.index))},e.prototype.addFolder=function(t){return(0,Bw.addFolderAsBlade)(this,t)},e.prototype.addButton=function(t){return(0,Bw.addButtonAsBlade)(this,t)},e.prototype.addSeparator=function(t){return(0,Bw.addSeparatorAsBlade)(this,t)},e.prototype.addTab=function(t){return(0,Bw.addTabAsBlade)(this,t)},e.prototype.add=function(t,n){this.controller_.rack.add(t.controller_,n);var i=this.apiSet_.find(function(o){return o.controller_===t.controller_});return i&&this.apiSet_.remove(i),this.apiSet_.add(t),t},e.prototype.remove=function(t){this.controller_.rack.remove(t.controller_)},e.prototype.addBlade=function(t){var n=this.controller_.view.element.ownerDocument,i=this.pool_.createBlade(n,t),o=this.pool_.createBladeApi(i);return this.add(o,t.index)},e.prototype.on=function(t,n){var i=n.bind(this);return this.emitter_.on(t,function(o){i(o.event)}),this},e.prototype.setUpApi_=function(t){var n=this.apiSet_.find(function(i){return i.controller_===t});n||this.apiSet_.add(this.pool_.createBladeApi(t))},e.prototype.onRackAdd_=function(t){this.setUpApi_(t.bladeController)},e.prototype.onRackRemove_=function(t){if(t.isRoot){var n=Kv(this.apiSet_,t.bladeController);this.apiSet_.remove(n)}},e.prototype.onRackInputChange_=function(t){var n=t.bladeController;if(n instanceof Aue.InputBindingController){var i=Kv(this.apiSet_,n),o=n.binding;this.emitter_.emit("change",{event:new yE.TpChangeEvent(i,(0,gE.forceCast)(o.target.read()),o.target.presetKey,t.options.last)})}else if(n instanceof Eue.ValueBladeController){var i=Kv(this.apiSet_,n);this.emitter_.emit("change",{event:new yE.TpChangeEvent(i,n.value.rawValue,void 0,t.options.last)})}},e.prototype.onRackMonitorUpdate_=function(t){if(!(t.bladeController instanceof Lue.MonitorBindingController))throw $k.TpError.shouldNeverHappen();var n=Kv(this.apiSet_,t.bladeController),i=t.bladeController.binding;this.emitter_.emit("update",{event:new yE.TpUpdateEvent(n,(0,gE.forceCast)(i.target.read()),i.target.presetKey)})},e}(Mue.BladeApi);_c.RackApi=AU;var Oue=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(yy,"__esModule",{value:!0});yy.FolderApi=void 0;var Due=bn,Rue=Om,Nue=ni,Iue=_c,Vue=function(r){Oue(e,r);function e(t,n){var i=r.call(this,t,new Iue.RackApi(t.rackController,n))||this;return i.emitter_=new Due.Emitter,i.controller_.foldable.value("expanded").emitter.on("change",function(o){i.emitter_.emit("fold",{event:new Nue.TpFoldEvent(i,o.sender.rawValue)})}),i.rackApi_.on("change",function(o){i.emitter_.emit("change",{event:o})}),i.rackApi_.on("update",function(o){i.emitter_.emit("update",{event:o})}),i}return Object.defineProperty(e.prototype,"expanded",{get:function(){return this.controller_.foldable.get("expanded")},set:function(t){this.controller_.foldable.set("expanded",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.controller_.props.get("title")},set:function(t){this.controller_.props.set("title",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),e.prototype.addInput=function(t,n,i){return this.rackApi_.addInput(t,n,i)},e.prototype.addMonitor=function(t,n,i){return this.rackApi_.addMonitor(t,n,i)},e.prototype.addFolder=function(t){return this.rackApi_.addFolder(t)},e.prototype.addButton=function(t){return this.rackApi_.addButton(t)},e.prototype.addSeparator=function(t){return this.rackApi_.addSeparator(t)},e.prototype.addTab=function(t){return this.rackApi_.addTab(t)},e.prototype.add=function(t,n){return this.rackApi_.add(t,n)},e.prototype.remove=function(t){this.rackApi_.remove(t)},e.prototype.addBlade=function(t){return this.rackApi_.addBlade(t)},e.prototype.on=function(t,n){var i=n.bind(this);return this.emitter_.on(t,function(o){i(o.event)}),this},e}(Rue.RackLikeApi);yy.FolderApi=Vue;var _y={},Im={},zue=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Im,"__esModule",{value:!0});Im.RackLikeController=void 0;var Bue=$l,Fue=function(r){zue(e,r);function e(t){var n=r.call(this,{blade:t.blade,view:t.view,viewProps:t.rackController.viewProps})||this;return n.rackController=t.rackController,n}return e}(Bue.BladeController);Im.RackLikeController=Fue;var Zv={},wy={};Object.defineProperty(wy,"__esModule",{value:!0});wy.PlainView=void 0;var Uue=er,jue=function(){function r(e,t){var n=(0,Uue.ClassName)(t.viewName);this.element=e.createElement("div"),this.element.classList.add(n()),t.viewProps.bindClassModifiers(this.element)}return r}();wy.PlainView=jue;var Jv={},z6;function Hue(){if(z6)return Jv;z6=1,Object.defineProperty(Jv,"__esModule",{value:!0}),Jv.BladeRack=void 0;var r=bn,e=Po,t=zt,n=Ac,i=kc,o=by(),s=Im,a=bd,l=Dm;function c(_,w){for(var M=0;M<_.length;M++){var S=_[M];if(S instanceof n.InputBindingController&&S.binding===w)return S}return null}function d(_,w){for(var M=0;M<_.length;M++){var S=_[M];if(S instanceof i.MonitorBindingController&&S.binding===w)return S}return null}function f(_,w){for(var M=0;M<_.length;M++){var S=_[M];if(S instanceof a.ValueBladeController&&S.value===w)return S}return null}function m(_){return _ instanceof o.RackController?_.rack:_ instanceof s.RackLikeController?_.rackController.rack:null}function g(_){var w=m(_);return w?w.bcSet_:null}var b=function(){function _(w){var M;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new r.Emitter,this.blade_=w!=null?w:null,(M=this.blade_)===null||M===void 0||M.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new l.NestedOrderedSet(g),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}return Object.defineProperty(_.prototype,"children",{get:function(){return this.bcSet_.items},enumerable:!1,configurable:!0}),_.prototype.add=function(w,M){w.parent&&w.parent.remove(w),w.parent_=this,this.bcSet_.add(w,M)},_.prototype.remove=function(w){w.parent_=null,this.bcSet_.remove(w)},_.prototype.find=function(w){return(0,t.forceCast)(this.bcSet_.allItems().filter(function(M){return M instanceof w}))},_.prototype.onSetAdd_=function(w){this.updatePositions_();var M=w.target===w.root;if(this.emitter.emit("add",{bladeController:w.item,index:w.index,isRoot:M,sender:this}),!!M){var S=w.item;if(S.viewProps.emitter.on("change",this.onChildViewPropsChange_),S.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),S.viewProps.handleDispose(this.onChildDispose_),S instanceof n.InputBindingController)S.binding.emitter.on("change",this.onChildInputChange_);else if(S instanceof i.MonitorBindingController)S.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(S instanceof a.ValueBladeController)S.value.emitter.on("change",this.onChildValueChange_);else{var C=m(S);if(C){var P=C.emitter;P.on("layout",this.onDescendantLayout_),P.on("inputchange",this.onDescendantInputChange_),P.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}},_.prototype.onSetRemove_=function(w){this.updatePositions_();var M=w.target===w.root;if(this.emitter.emit("remove",{bladeController:w.item,isRoot:M,sender:this}),!!M){var S=w.item;if(S instanceof n.InputBindingController)S.binding.emitter.off("change",this.onChildInputChange_);else if(S instanceof i.MonitorBindingController)S.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(S instanceof a.ValueBladeController)S.value.emitter.off("change",this.onChildValueChange_);else{var C=m(S);if(C){var P=C.emitter;P.off("layout",this.onDescendantLayout_),P.off("inputchange",this.onDescendantInputChange_),P.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}},_.prototype.updatePositions_=function(){var w=this,M=this.bcSet_.items.filter(function(P){return!P.viewProps.get("hidden")}),S=M[0],C=M[M.length-1];this.bcSet_.items.forEach(function(P){var T=[];P===S&&(T.push("first"),(!w.blade_||w.blade_.get("positions").includes("veryfirst"))&&T.push("veryfirst")),P===C&&(T.push("last"),(!w.blade_||w.blade_.get("positions").includes("verylast"))&&T.push("verylast")),P.blade.set("positions",T)})},_.prototype.onChildPositionsChange_=function(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},_.prototype.onChildViewPropsChange_=function(w){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},_.prototype.onChildDispose_=function(){var w=this,M=this.bcSet_.items.filter(function(S){return S.viewProps.get("disposed")});M.forEach(function(S){w.bcSet_.remove(S)})},_.prototype.onChildInputChange_=function(w){var M=c(this.find(n.InputBindingController),w.sender);if(!M)throw e.TpError.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:M,options:w.options,sender:this})},_.prototype.onChildMonitorUpdate_=function(w){var M=d(this.find(i.MonitorBindingController),w.sender);if(!M)throw e.TpError.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:M,sender:this})},_.prototype.onChildValueChange_=function(w){var M=f(this.find(a.ValueBladeController),w.sender);if(!M)throw e.TpError.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:M,options:w.options,sender:this})},_.prototype.onDescendantLayout_=function(w){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},_.prototype.onDescendantInputChange_=function(w){this.emitter.emit("inputchange",{bladeController:w.bladeController,options:w.options,sender:this})},_.prototype.onDescendantMonitorUpdate_=function(w){this.emitter.emit("monitorupdate",{bladeController:w.bladeController,sender:this})},_.prototype.onBladePositionsChange_=function(){this.updatePositions_()},_}();return Jv.BladeRack=b,Jv}var B6;function by(){if(B6)return Zv;B6=1;var r=Ve&&Ve.__extends||function(){var a=function(l,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(d[m]=f[m])},a(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(l,c);function d(){this.constructor=l}l.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=Ve&&Ve.__assign||function(){return e=Object.assign||function(a){for(var l,c=1,d=arguments.length;c<d;c++){l=arguments[c];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(a[f]=l[f])}return a},e.apply(this,arguments)};Object.defineProperty(Zv,"__esModule",{value:!0}),Zv.RackController=void 0;var t=bi,n=wy,i=$l,o=Hue(),s=function(a){r(l,a);function l(c,d){var f=a.call(this,e(e({},d),{view:new n.PlainView(c,{viewName:"brk",viewProps:d.viewProps})}))||this;f.onRackAdd_=f.onRackAdd_.bind(f),f.onRackRemove_=f.onRackRemove_.bind(f);var m=new o.BladeRack(d.root?void 0:d.blade);return m.emitter.on("add",f.onRackAdd_),m.emitter.on("remove",f.onRackRemove_),f.rack=m,f.viewProps.handleDispose(function(){for(var g=f.rack.children.length-1;g>=0;g--){var b=f.rack.children[g];b.viewProps.set("disposed",!0)}}),f}return l.prototype.onRackAdd_=function(c){!c.isRoot||(0,t.insertElementAt)(this.view.element,c.bladeController.view.element,c.index)},l.prototype.onRackRemove_=function(c){!c.isRoot||(0,t.removeElement)(c.bladeController.view.element)},l}(i.BladeController);return Zv.RackController=s,Zv}var xy={},Sy={};Object.defineProperty(Sy,"__esModule",{value:!0});Sy.bladeContainerClassName=void 0;var Wue=er;Sy.bladeContainerClassName=(0,Wue.ClassName)("cnt");Object.defineProperty(xy,"__esModule",{value:!0});xy.FolderView=void 0;var F6=Wn,Gue=er,U6=Eo,Yue=zt,Xue=Sy,que=function(){function r(e,t){var n=this,i;this.className_=(0,Gue.ClassName)((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),(0,Xue.bladeContainerClassName)()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),(0,F6.bindValueMap)(this.foldable_,"completed",(0,U6.valueToClassName)(this.element,this.className_(void 0,"cpl")));var o=e.createElement("button");o.classList.add(this.className_("b")),(0,F6.bindValueMap)(t.props,"title",function(c){(0,Yue.isEmpty)(c)?n.element.classList.add(n.className_(void 0,"not")):n.element.classList.remove(n.className_(void 0,"not"))}),t.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o;var s=e.createElement("div");s.classList.add(this.className_("t")),(0,U6.bindValueToTextContent)(t.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s;var a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);var l=t.containerElement;l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}return r}();xy.FolderView=que;var Kue=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yx=Ve&&Ve.__assign||function(){return Yx=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Yx.apply(this,arguments)};Object.defineProperty(_y,"__esModule",{value:!0});_y.FolderController=void 0;var Zue=Im,j6=Ji,Jue=by(),Que=xy,$ue=function(r){Kue(e,r);function e(t,n){var i,o=this,s=j6.Foldable.create((i=n.expanded)!==null&&i!==void 0?i:!0),a=new Jue.RackController(t,{blade:n.blade,root:n.root,viewProps:n.viewProps});return o=r.call(this,Yx(Yx({},n),{rackController:a,view:new Que.FolderView(t,{containerElement:a.view.element,foldable:s,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps})}))||this,o.onTitleClick_=o.onTitleClick_.bind(o),o.props=n.props,o.foldable=s,(0,j6.bindFoldable)(o.foldable,o.view.containerElement),o.rackController.rack.emitter.on("add",function(){o.foldable.cleanUpTransition()}),o.rackController.rack.emitter.on("remove",function(){o.foldable.cleanUpTransition()}),o.view.buttonElement.addEventListener("click",o.onTitleClick_),o}return Object.defineProperty(e.prototype,"document",{get:function(){return this.view.element.ownerDocument},enumerable:!1,configurable:!0}),e.prototype.onTitleClick_=function(){this.foldable.set("expanded",!this.foldable.get("expanded"))},e}(Zue.RackLikeController);_y.FolderController=$ue;var My={};Object.defineProperty(My,"__esModule",{value:!0});My.FolderBladePlugin=void 0;var ece=Jr,H6=kn,tce=yy,W6=_y;My.FolderBladePlugin={id:"folder",type:"blade",accept:function(r){var e=H6.ParamsParsers,t=(0,H6.parseParams)(r,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return t?{params:t}:null},controller:function(r){return new W6.FolderController(r.document,{blade:r.blade,expanded:r.params.expanded,props:ece.ValueMap.fromObject({title:r.params.title}),viewProps:r.viewProps})},api:function(r){return r.controller instanceof W6.FolderController?new tce.FolderApi(r.controller,r.pool):null}};var n2={},rce=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xx=Ve&&Ve.__assign||function(){return Xx=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Xx.apply(this,arguments)};Object.defineProperty(n2,"__esModule",{value:!0});n2.LabeledValueController=void 0;var nce=bd,ice=Lm,oce=function(r){rce(e,r);function e(t,n){var i=this,o=n.valueController.viewProps;return i=r.call(this,Xx(Xx({},n),{value:n.valueController.value,view:new ice.LabelView(t,{props:n.props,viewProps:o}),viewProps:o}))||this,i.props=n.props,i.valueController=n.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return e}(nce.ValueBladeController);n2.LabeledValueController=oce;var Cy={},sce=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Cy,"__esModule",{value:!0});Cy.SeparatorApi=void 0;var ace=Ga,lce=function(r){sce(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(ace.BladeApi);Cy.SeparatorApi=lce;var Ey={},i2={};Object.defineProperty(i2,"__esModule",{value:!0});i2.SeparatorView=void 0;var uce=er,G6=(0,uce.ClassName)("spr"),cce=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(G6()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("hr");n.classList.add(G6("r")),this.element.appendChild(n)}return r}();i2.SeparatorView=cce;var hce=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qx=Ve&&Ve.__assign||function(){return qx=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},qx.apply(this,arguments)};Object.defineProperty(Ey,"__esModule",{value:!0});Ey.SeparatorController=void 0;var dce=$l,pce=i2,fce=function(r){hce(e,r);function e(t,n){return r.call(this,qx(qx({},n),{view:new pce.SeparatorView(t,{viewProps:n.viewProps})}))||this}return e}(dce.BladeController);Ey.SeparatorController=fce;var Py={};Object.defineProperty(Py,"__esModule",{value:!0});Py.SeparatorBladePlugin=void 0;var Y6=kn,mce=Cy,X6=Ey;Py.SeparatorBladePlugin={id:"separator",type:"blade",accept:function(r){var e=Y6.ParamsParsers,t=(0,Y6.parseParams)(r,{view:e.required.constant("separator")});return t?{params:t}:null},controller:function(r){return new X6.SeparatorController(r.document,{blade:r.blade,viewProps:r.viewProps})},api:function(r){return r.controller instanceof X6.SeparatorController?new mce.SeparatorApi(r.controller):null}};var Ty={},Vm={},Lc={},vce=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lc,"__esModule",{value:!0});Lc.ViewProps=void 0;var gce=er,yce=Eo,Fw=Wn,q6=Jr,_ce=(0,gce.ClassName)("");function K6(r,e){return(0,yce.valueToClassName)(r,_ce(void 0,e))}var wce=function(r){vce(e,r);function e(t){return r.call(this,t)||this}return e.create=function(t){var n,i,o=t!=null?t:{},s={disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(i=o.hidden)!==null&&i!==void 0?i:!1},a=q6.ValueMap.createCore(s);return new e(a)},e.prototype.bindClassModifiers=function(t){(0,Fw.bindValueMap)(this,"disabled",K6(t,"disabled")),(0,Fw.bindValueMap)(this,"hidden",K6(t,"hidden"))},e.prototype.bindDisabled=function(t){(0,Fw.bindValueMap)(this,"disabled",function(n){t.disabled=n})},e.prototype.bindTabIndex=function(t){(0,Fw.bindValueMap)(this,"disabled",function(n){t.tabIndex=n?-1:0})},e.prototype.handleDispose=function(t){this.value("disposed").emitter.on("change",function(n){n&&t()})},e}(q6.ValueMap);Lc.ViewProps=wce;var o2={},s2={};Object.defineProperty(s2,"__esModule",{value:!0});s2.TabItemView=void 0;var bce=Wn,xce=er,Sce=Eo,Qv=(0,xce.ClassName)("tbi"),Mce=function(){function r(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(Qv()),t.viewProps.bindClassModifiers(this.element),(0,bce.bindValueMap)(t.props,"selected",function(s){s?n.element.classList.add(Qv(void 0,"sel")):n.element.classList.remove(Qv(void 0,"sel"))});var i=e.createElement("button");i.classList.add(Qv("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;var o=e.createElement("div");o.classList.add(Qv("t")),(0,Sce.bindValueToTextContent)(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o}return r}();s2.TabItemView=Mce;Object.defineProperty(o2,"__esModule",{value:!0});o2.TabItemController=void 0;var Cce=bn,Ece=s2,Pce=function(){function r(e,t){this.emitter=new Cce.Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Ece.TabItemView(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return r.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},r}();o2.TabItemController=Pce;Object.defineProperty(Vm,"__esModule",{value:!0});Vm.TabPageController=void 0;var Tce=Wn,Z6=Lc,Ace=Tc,kce=by(),Lce=o2,Oce=function(){function r(e,t){var n=this;this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Lce.TabItemController(e,{props:t.itemProps,viewProps:Z6.ViewProps.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new kce.RackController(e,{blade:(0,Ace.createBlade)(),viewProps:Z6.ViewProps.create()}),this.props=t.props,(0,Tce.bindValueMap)(this.props,"selected",function(i){n.itemController.props.set("selected",i),n.contentController.viewProps.set("hidden",!i)})}return Object.defineProperty(r.prototype,"itemController",{get:function(){return this.ic_},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"contentController",{get:function(){return this.cc_},enumerable:!1,configurable:!0}),r.prototype.onItemClick_=function(){this.props.set("selected",!0)},r}();Vm.TabPageController=Oce;var Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});Ay.TabPageApi=void 0;var Dce=function(){function r(e,t){this.controller_=e,this.rackApi_=t}return Object.defineProperty(r.prototype,"title",{get:function(){var e;return(e=this.controller_.itemController.props.get("title"))!==null&&e!==void 0?e:""},set:function(e){this.controller_.itemController.props.set("title",e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.controller_.props.get("selected")},set:function(e){this.controller_.props.set("selected",e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),r.prototype.addButton=function(e){return this.rackApi_.addButton(e)},r.prototype.addFolder=function(e){return this.rackApi_.addFolder(e)},r.prototype.addSeparator=function(e){return this.rackApi_.addSeparator(e)},r.prototype.addTab=function(e){return this.rackApi_.addTab(e)},r.prototype.add=function(e,t){this.rackApi_.add(e,t)},r.prototype.remove=function(e){this.rackApi_.remove(e)},r.prototype.addInput=function(e,t,n){return this.rackApi_.addInput(e,t,n)},r.prototype.addMonitor=function(e,t,n){return this.rackApi_.addMonitor(e,t,n)},r.prototype.addBlade=function(e){return this.rackApi_.addBlade(e)},r}();Ay.TabPageApi=Dce;var Rce=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ty,"__esModule",{value:!0});Ty.TabApi=void 0;var Nce=bn,J6=Jr,Uw=Po,Ice=Om,Vce=ni,zce=_c,Bce=Vm,Fce=Ay,Uce=function(r){Rce(e,r);function e(t,n){var i=r.call(this,t,new zce.RackApi(t.rackController,n))||this;return i.onPageAdd_=i.onPageAdd_.bind(i),i.onPageRemove_=i.onPageRemove_.bind(i),i.onSelect_=i.onSelect_.bind(i),i.emitter_=new Nce.Emitter,i.pageApiMap_=new Map,i.rackApi_.on("change",function(o){i.emitter_.emit("change",{event:o})}),i.rackApi_.on("update",function(o){i.emitter_.emit("update",{event:o})}),i.controller_.tab.selectedIndex.emitter.on("change",i.onSelect_),i.controller_.pageSet.emitter.on("add",i.onPageAdd_),i.controller_.pageSet.emitter.on("remove",i.onPageRemove_),i.controller_.pageSet.items.forEach(function(o){i.setUpPageApi_(o)}),i}return Object.defineProperty(e.prototype,"pages",{get:function(){var t=this;return this.controller_.pageSet.items.map(function(n){var i=t.pageApiMap_.get(n);if(!i)throw Uw.TpError.shouldNeverHappen();return i})},enumerable:!1,configurable:!0}),e.prototype.addPage=function(t){var n=this.controller_.view.element.ownerDocument,i=new Bce.TabPageController(n,{itemProps:J6.ValueMap.fromObject({selected:!1,title:t.title}),props:J6.ValueMap.fromObject({selected:!1})});this.controller_.add(i,t.index);var o=this.pageApiMap_.get(i);if(!o)throw Uw.TpError.shouldNeverHappen();return o},e.prototype.removePage=function(t){this.controller_.remove(t)},e.prototype.on=function(t,n){var i=n.bind(this);return this.emitter_.on(t,function(o){i(o.event)}),this},e.prototype.setUpPageApi_=function(t){var n=this.rackApi_.apiSet_.find(function(o){return o.controller_===t.contentController});if(!n)throw Uw.TpError.shouldNeverHappen();var i=new Fce.TabPageApi(t,n);this.pageApiMap_.set(t,i)},e.prototype.onPageAdd_=function(t){this.setUpPageApi_(t.item)},e.prototype.onPageRemove_=function(t){var n=this.pageApiMap_.get(t.item);if(!n)throw Uw.TpError.shouldNeverHappen();this.pageApiMap_.delete(t.item)},e.prototype.onSelect_=function(t){this.emitter_.emit("select",{event:new Vce.TpTabSelectEvent(this,t.rawValue)})},e}(Ice.RackLikeApi);Ty.TabApi=Uce;var ky={},a2={};Object.defineProperty(a2,"__esModule",{value:!0});a2.Tab=void 0;var Q6=so,$6=-1,jce=function(){function r(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=(0,Q6.createValue)(!0),this.selectedIndex=(0,Q6.createValue)($6),this.items_=[]}return r.prototype.add=function(e,t){var n=t!=null?t:this.items_.length;this.items_.splice(n,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()},r.prototype.remove=function(e){var t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())},r.prototype.keepSelection_=function(){if(this.items_.length===0){this.selectedIndex.rawValue=$6,this.empty.rawValue=!0;return}var e=this.items_.findIndex(function(t){return t.rawValue});e<0?(this.items_.forEach(function(t,n){t.rawValue=n===0}),this.selectedIndex.rawValue=0):(this.items_.forEach(function(t,n){t.rawValue=n===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1},r.prototype.onItemSelectedChange_=function(e){if(e.rawValue){var t=this.items_.findIndex(function(n){return n===e.sender});this.items_.forEach(function(n,i){n.rawValue=i===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()},r}();a2.Tab=jce;var l2={};Object.defineProperty(l2,"__esModule",{value:!0});l2.TabView=void 0;var Hce=Wn,Wce=er,Gce=Eo,Yce=Sy,jw=(0,Wce.ClassName)("tab"),Xce=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(jw(),(0,Yce.bladeContainerClassName)()),t.viewProps.bindClassModifiers(this.element),(0,Hce.bindValue)(t.empty,(0,Gce.valueToClassName)(this.element,jw(void 0,"nop")));var n=e.createElement("div");n.classList.add(jw("i")),this.element.appendChild(n),this.itemsElement=n;var i=t.contentsElement;i.classList.add(jw("c")),this.element.appendChild(i),this.contentsElement=i}return r}();l2.TabView=Xce;var qce=Ve&&Ve.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ky,"__esModule",{value:!0});ky.TabController=void 0;var eN=bi,Kce=Im,Zce=Dm,Jce=by(),Qce=a2,$ce=l2,ehe=function(r){qce(e,r);function e(t,n){var i=this,o=new Jce.RackController(t,{blade:n.blade,viewProps:n.viewProps}),s=new Qce.Tab;return i=r.call(this,{blade:n.blade,rackController:o,view:new $ce.TabView(t,{contentsElement:o.view.element,empty:s.empty,viewProps:n.viewProps})})||this,i.onPageAdd_=i.onPageAdd_.bind(i),i.onPageRemove_=i.onPageRemove_.bind(i),i.pageSet_=new Zce.NestedOrderedSet(function(){return null}),i.pageSet_.emitter.on("add",i.onPageAdd_),i.pageSet_.emitter.on("remove",i.onPageRemove_),i.tab=s,i}return Object.defineProperty(e.prototype,"pageSet",{get:function(){return this.pageSet_},enumerable:!1,configurable:!0}),e.prototype.add=function(t,n){this.pageSet_.add(t,n)},e.prototype.remove=function(t){this.pageSet_.remove(this.pageSet_.items[t])},e.prototype.onPageAdd_=function(t){var n=t.item;(0,eN.insertElementAt)(this.view.itemsElement,n.itemController.view.element,t.index),this.rackController.rack.add(n.contentController,t.index),this.tab.add(n.props.value("selected"))},e.prototype.onPageRemove_=function(t){var n=t.item;(0,eN.removeElement)(n.itemController.view.element),this.rackController.rack.remove(n.contentController),this.tab.remove(n.props.value("selected"))},e}(Kce.RackLikeController);ky.TabController=ehe;var Ly={};Object.defineProperty(Ly,"__esModule",{value:!0});Ly.TabBladePlugin=void 0;var tN=Jr,rN=kn,the=Ty,nN=ky,rhe=Vm;Ly.TabBladePlugin={id:"tab",type:"blade",accept:function(r){var e=rN.ParamsParsers,t=(0,rN.parseParams)(r,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return!t||t.pages.length===0?null:{params:t}},controller:function(r){var e=new nN.TabController(r.document,{blade:r.blade,viewProps:r.viewProps});return r.params.pages.forEach(function(t){var n=new rhe.TabPageController(r.document,{itemProps:tN.ValueMap.fromObject({selected:!1,title:t.title}),props:tN.ValueMap.fromObject({selected:!1})});e.add(n)}),e},api:function(r){return r.controller instanceof nN.TabController?new the.TabApi(r.controller,r.pool):null}};var Oy={},Kx=Ve&&Ve.__assign||function(){return Kx=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Kx.apply(this,arguments)};Object.defineProperty(Oy,"__esModule",{value:!0});Oy.createBladeController=void 0;var nhe=Lc,iN=kn,ihe=zt,ohe=Tc;function she(r,e){var t=r.accept(e.params);if(!t)return null;var n=iN.ParamsParsers.optional.boolean(e.params.disabled).value,i=iN.ParamsParsers.optional.boolean(e.params.hidden).value;return r.controller({blade:(0,ohe.createBlade)(),document:e.document,params:(0,ihe.forceCast)(Kx(Kx({},t.params),{disabled:n,hidden:i})),viewProps:nhe.ViewProps.create({disabled:n,hidden:i})})}Oy.createBladeController=she;var Dy={};Object.defineProperty(Dy,"__esModule",{value:!0});Dy.ManualTicker=void 0;var ahe=bn,lhe=function(){function r(){this.disabled=!1,this.emitter=new ahe.Emitter}return r.prototype.dispose=function(){},r.prototype.tick=function(){this.disabled||this.emitter.emit("tick",{sender:this})},r}();Dy.ManualTicker=lhe;var Ry={};Object.defineProperty(Ry,"__esModule",{value:!0});Ry.IntervalTicker=void 0;var uhe=bn,che=function(){function r(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new uhe.Emitter,this.interval_=t,this.setTimer_()}return Object.defineProperty(r.prototype,"disabled",{get:function(){return this.disabled_},set:function(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){this.clearTimer_()},r.prototype.clearTimer_=function(){if(this.timerId_!==null){var e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}},r.prototype.setTimer_=function(){if(this.clearTimer_(),!(this.interval_<=0)){var e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}},r.prototype.onTick_=function(){this.disabled_||this.emitter.emit("tick",{sender:this})},r}();Ry.IntervalTicker=che;var kU={};Object.defineProperty(kU,"__esModule",{value:!0});var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.findConstraint=Js.CompositeConstraint=void 0;var LU=function(){function r(e){this.constraints=e}return r.prototype.constrain=function(e){return this.constraints.reduce(function(t,n){return n.constrain(t)},e)},r}();Js.CompositeConstraint=LU;function hhe(r,e){if(r instanceof e)return r;if(r instanceof LU){var t=r.constraints.reduce(function(n,i){return n||(i instanceof e?i:null)},null);if(t)return t}return null}Js.findConstraint=hhe;var OU={};Object.defineProperty(OU,"__esModule",{value:!0});var Oc={};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.ListConstraint=void 0;var dhe=function(){function r(e){this.options=e}return r.prototype.constrain=function(e){var t=this.options;if(t.length===0)return e;var n=t.filter(function(i){return i.value===e}).length>0;return n?e:t[0].value},r}();Oc.ListConstraint=dhe;var Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.RangeConstraint=void 0;var oN=zt,phe=function(){function r(e){this.maxValue=e.max,this.minValue=e.min}return r.prototype.constrain=function(e){var t=e;return(0,oN.isEmpty)(this.minValue)||(t=Math.max(t,this.minValue)),(0,oN.isEmpty)(this.maxValue)||(t=Math.min(t,this.maxValue)),t},r}();Dc.RangeConstraint=phe;var zm={};Object.defineProperty(zm,"__esModule",{value:!0});zm.StepConstraint=void 0;var fhe=function(){function r(e,t){t===void 0&&(t=0),this.step=e,this.origin=t}return r.prototype.constrain=function(e){var t=this.origin%this.step,n=Math.round((e-t)/this.step);return t+n*this.step},r}();zm.StepConstraint=fhe;var DU={};Object.defineProperty(DU,"__esModule",{value:!0});var xd={},Ny={};Object.defineProperty(Ny,"__esModule",{value:!0});Ny.ListView=void 0;var sN=bi,mhe=Wn,vhe=er,_E=(0,vhe.ClassName)("lst"),ghe=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(_E()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("select");n.classList.add(_E("s")),(0,mhe.bindValueMap)(this.props_,"options",function(o){(0,sN.removeChildElements)(n),o.forEach(function(s,a){var l=e.createElement("option");l.dataset.index=String(a),l.textContent=s.text,l.value=String(s.value),n.appendChild(l)})}),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;var i=e.createElement("div");i.classList.add(_E("m")),i.appendChild((0,sN.createSvgIconElement)(e,"dropdown")),this.element.appendChild(i),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,this.update_()}return r.prototype.update_=function(){this.selectElement.value=String(this.value_.rawValue)},r.prototype.onValueChange_=function(){this.update_()},r}();Ny.ListView=ghe;Object.defineProperty(xd,"__esModule",{value:!0});xd.ListController=void 0;var yhe=zt,_he=Ny,whe=function(){function r(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new _he.ListView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}return r.prototype.onSelectChange_=function(e){var t=(0,yhe.forceCast)(e.currentTarget),n=t.selectedOptions.item(0);if(n){var i=Number(n.dataset.index);this.value.rawValue=this.props.get("options")[i].value}},r}();xd.ListController=whe;var Bm={},Iy={};Object.defineProperty(Iy,"__esModule",{value:!0});Iy.PopupView=void 0;var bhe=Wn,xhe=er,She=Eo,aN=(0,xhe.ClassName)("pop"),Mhe=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(aN()),t.viewProps.bindClassModifiers(this.element),(0,bhe.bindValue)(t.shows,(0,She.valueToClassName)(this.element,aN(void 0,"v")))}return r}();Iy.PopupView=Mhe;Object.defineProperty(Bm,"__esModule",{value:!0});Bm.PopupController=void 0;var Che=so,Ehe=Iy,Phe=function(){function r(e,t){this.shows=(0,Che.createValue)(!1),this.viewProps=t.viewProps,this.view=new Ehe.PopupView(e,{shows:this.shows,viewProps:this.viewProps})}return r}();Bm.PopupController=Phe;var Fm={},Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});Vy.TextView=void 0;var The=er,lN=(0,The.ClassName)("txt"),Ahe=function(){function r(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(lN()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);var n=e.createElement("input");n.classList.add(lN("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}return r.prototype.refresh=function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)},r.prototype.onChange_=function(){this.refresh()},r}();Vy.TextView=Ahe;Object.defineProperty(Fm,"__esModule",{value:!0});Fm.TextController=void 0;var uN=zt,khe=Vy,Lhe=function(){function r(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new khe.TextView(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return r.prototype.onInputChange_=function(e){var t=(0,uN.forceCast)(e.currentTarget),n=t.value,i=this.parser_(n);(0,uN.isEmpty)(i)||(this.value.rawValue=i),this.view.refresh()},r}();Fm.TextController=Lhe;var RU={};Object.defineProperty(RU,"__esModule",{value:!0});var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.BooleanFormatter=Da.boolFromUnknown=Da.boolToString=void 0;function NU(r){return String(r)}Da.boolToString=NU;function Ohe(r){return r==="false"?!1:!!r}Da.boolFromUnknown=Ohe;function Dhe(r){return NU(r)}Da.BooleanFormatter=Dhe;var IU={};Object.defineProperty(IU,"__esModule",{value:!0});var jn={},u2={},uc={};Object.defineProperty(uc,"__esModule",{value:!0});uc.UnaryOperationNode=uc.BinaryOperationNode=uc.NumberLiteralNode=void 0;var Rhe=function(){function r(e){this.text=e}return r.prototype.evaluate=function(){return Number(this.text)},r.prototype.toString=function(){return this.text},r}();uc.NumberLiteralNode=Rhe;var Nhe={"**":function(r,e){return Math.pow(r,e)},"*":function(r,e){return r*e},"/":function(r,e){return r/e},"%":function(r,e){return r%e},"+":function(r,e){return r+e},"-":function(r,e){return r-e},"<<":function(r,e){return r<<e},">>":function(r,e){return r>>e},">>>":function(r,e){return r>>>e},"&":function(r,e){return r&e},"^":function(r,e){return r^e},"|":function(r,e){return r|e}},Ihe=function(){function r(e,t,n){this.left=t,this.operator=e,this.right=n}return r.prototype.evaluate=function(){var e=Nhe[this.operator];if(!e)throw new Error("unexpected binary operator: '"+this.operator);return e(this.left.evaluate(),this.right.evaluate())},r.prototype.toString=function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")},r}();uc.BinaryOperationNode=Ihe;var Vhe={"+":function(r){return r},"-":function(r){return-r},"~":function(r){return~r}},zhe=function(){function r(e,t){this.operator=e,this.expression=t}return r.prototype.evaluate=function(){var e=Vhe[this.operator];if(!e)throw new Error("unexpected unary operator: '"+this.operator);return e(this.expression.evaluate())},r.prototype.toString=function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")},r}();uc.UnaryOperationNode=zhe;var im={};Object.defineProperty(im,"__esModule",{value:!0});im.readNumericLiteral=im.readWhitespace=void 0;function eL(r){return function(e,t){for(var n=0;n<r.length;n++){var i=r[n](e,t);if(i!=="")return i}return""}}function Bhe(r,e){var t,n=r.substr(e).match(/^\s+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}im.readWhitespace=Bhe;function Fhe(r,e){var t=r.substr(e,1);return t.match(/^[1-9]$/)?t:""}function I0(r,e){var t,n=r.substr(e).match(/^[0-9]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Uhe(r,e){var t=I0(r,e);if(t!=="")return t;var n=r.substr(e,1);if(e+=1,n!=="-"&&n!=="+")return"";var i=I0(r,e);return i===""?"":n+i}function tL(r,e){var t=r.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";var n=Uhe(r,e);return n===""?"":t+n}function VU(r,e){var t=r.substr(e,1);if(t==="0")return t;var n=Fhe(r,e);return e+=n.length,n===""?"":n+I0(r,e)}function jhe(r,e){var t=VU(r,e);if(e+=t.length,t==="")return"";var n=r.substr(e,1);if(e+=n.length,n!==".")return"";var i=I0(r,e);return e+=i.length,t+n+i+tL(r,e)}function Hhe(r,e){var t=r.substr(e,1);if(e+=t.length,t!==".")return"";var n=I0(r,e);return e+=n.length,n===""?"":t+n+tL(r,e)}function Whe(r,e){var t=VU(r,e);return e+=t.length,t===""?"":t+tL(r,e)}var Ghe=eL([jhe,Hhe,Whe]);function Yhe(r,e){var t,n=r.substr(e).match(/^[01]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Xhe(r,e){var t=r.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";var n=Yhe(r,e);return n===""?"":t+n}function qhe(r,e){var t,n=r.substr(e).match(/^[0-7]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Khe(r,e){var t=r.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";var n=qhe(r,e);return n===""?"":t+n}function Zhe(r,e){var t,n=r.substr(e).match(/^[0-9a-f]+/i);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Jhe(r,e){var t=r.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";var n=Zhe(r,e);return n===""?"":t+n}var Qhe=eL([Xhe,Khe,Jhe]);im.readNumericLiteral=eL([Qhe,Ghe]);Object.defineProperty(u2,"__esModule",{value:!0});u2.parseEcmaNumberExpression=void 0;var rL=uc,om=im;function $he(r,e){var t=(0,om.readNumericLiteral)(r,e);return e+=t.length,t===""?null:{evaluable:new rL.NumberLiteralNode(t),cursor:e}}function ede(r,e){var t=r.substr(e,1);if(e+=t.length,t!=="(")return null;var n=BU(r,e);if(!n)return null;e=n.cursor,e+=(0,om.readWhitespace)(r,e).length;var i=r.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:n.evaluable,cursor:e}}function tde(r,e){var t;return(t=$he(r,e))!==null&&t!==void 0?t:ede(r,e)}function zU(r,e){var t=tde(r,e);if(t)return t;var n=r.substr(e,1);if(e+=n.length,n!=="+"&&n!=="-"&&n!=="~")return null;var i=zU(r,e);return i?(e=i.cursor,{cursor:e,evaluable:new rL.UnaryOperationNode(n,i.evaluable)}):null}function rde(r,e,t){t+=(0,om.readWhitespace)(e,t).length;var n=r.filter(function(i){return e.startsWith(i,t)})[0];return n?(t+=n.length,t+=(0,om.readWhitespace)(e,t).length,{cursor:t,operator:n}):null}function nde(r,e){return function(t,n){var i=r(t,n);if(!i)return null;n=i.cursor;for(var o=i.evaluable;;){var s=rde(e,t,n);if(!s)break;n=s.cursor;var a=r(t,n);if(!a)return null;n=a.cursor,o=new rL.BinaryOperationNode(s.operator,o,a.evaluable)}return o?{cursor:n,evaluable:o}:null}}var ide=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(function(r,e){return nde(r,e)},zU);function BU(r,e){return e+=(0,om.readWhitespace)(r,e).length,ide(r,e)}function ode(r){var e=BU(r,0);if(!e)return null;var t=e.cursor+(0,om.readWhitespace)(r,e.cursor).length;return t!==r.length?null:e.evaluable}u2.parseEcmaNumberExpression=ode;Object.defineProperty(jn,"__esModule",{value:!0});jn.createNumberFormatter=jn.numberToString=jn.numberFromUnknown=jn.parseNumber=void 0;var sde=zt,ade=u2;function FU(r){var e,t=(0,ade.parseEcmaNumberExpression)(r);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}jn.parseNumber=FU;function lde(r){if(typeof r=="number")return r;if(typeof r=="string"){var e=FU(r);if(!(0,sde.isEmpty)(e))return e}return 0}jn.numberFromUnknown=lde;function ude(r){return String(r)}jn.numberToString=ude;function cde(r){return function(e){return e.toFixed(Math.max(Math.min(r,20),0))}}jn.createNumberFormatter=cde;var UU={};Object.defineProperty(UU,"__esModule",{value:!0});var zy={};Object.defineProperty(zy,"__esModule",{value:!0});zy.formatPercentage=void 0;var hde=jn,dde=(0,hde.createNumberFormatter)(0);function pde(r){return dde(r)+"%"}zy.formatPercentage=pde;var wc={};Object.defineProperty(wc,"__esModule",{value:!0});wc.formatString=wc.stringFromUnknown=void 0;function fde(r){return String(r)}wc.stringFromUnknown=fde;function mde(r){return r}wc.formatString=mde;var bc={},cN=Ve&&Ve.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(bc,"__esModule",{value:!0});bc.createPushedBuffer=bc.initializeBuffer=void 0;var vde=zt,gde=so;function jU(r,e){for(;r.length<e;)r.push(void 0)}function yde(r){var e=[];return jU(e,r),(0,gde.createValue)(e)}bc.initializeBuffer=yde;function _de(r){var e=r.indexOf(void 0);return(0,vde.forceCast)(e<0?r:r.slice(0,e))}function wde(r,e){var t=cN(cN([],_de(r),!0),[e],!1);return t.length>r.length?t.splice(0,t.length-r.length):jU(t,r.length),t}bc.createPushedBuffer=wde;var HU={};Object.defineProperty(HU,"__esModule",{value:!0});var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.connectValues=void 0;function bde(r){var e=r.primary,t=r.secondary,n=r.forward,i=r.backward,o=!1;function s(a){o||(o=!0,a(),o=!1)}e.emitter.on("change",function(a){s(function(){t.setRawValue(n(e,t),a.options)})}),t.emitter.on("change",function(a){s(function(){e.setRawValue(i(e,t),a.options)}),s(function(){t.setRawValue(n(e,t),a.options)})}),s(function(){t.setRawValue(n(e,t),{forceEmit:!1,last:!0})})}eu.connectValues=bde;var tu={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.isArrowKey=ii.isVerticalArrowKey=ii.getHorizontalStepKeys=ii.getVerticalStepKeys=ii.getStepForKey=void 0;function xde(r,e){var t=r*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}ii.getStepForKey=xde;function Sde(r){return{altKey:r.altKey,downKey:r.key==="ArrowDown",shiftKey:r.shiftKey,upKey:r.key==="ArrowUp"}}ii.getVerticalStepKeys=Sde;function Mde(r){return{altKey:r.altKey,downKey:r.key==="ArrowLeft",shiftKey:r.shiftKey,upKey:r.key==="ArrowRight"}}ii.getHorizontalStepKeys=Mde;function WU(r){return r==="ArrowUp"||r==="ArrowDown"}ii.isVerticalArrowKey=WU;function Cde(r){return WU(r)||r==="ArrowLeft"||r==="ArrowRight"}ii.isArrowKey=Cde;var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.PointerHandler=void 0;var Ede=bn;function wE(r,e){var t,n,i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:r.pageX-(((t=i&&i.scrollX)!==null&&t!==void 0?t:0)+o.left),y:r.pageY-(((n=i&&i.scrollY)!==null&&n!==void 0?n:0)+o.top)}}var Pde=function(){function r(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Ede.Emitter,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}return r.prototype.computePosition_=function(e){var t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}},r.prototype.onMouseDown_=function(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(wE(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},r.prototype.onDocumentMouseMove_=function(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(wE(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},r.prototype.onDocumentMouseUp_=function(e){var t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(wE(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},r.prototype.onTouchStart_=function(e){e.preventDefault();var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t},r.prototype.onTouchMove_=function(e){var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t},r.prototype.onTouchEnd_=function(e){var t,n=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})},r}();$s.PointerHandler=Pde;var By={},Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.loopRange=Lr.constrainRange=Lr.getDecimalDigits=Lr.mapRange=void 0;function Tde(r,e,t,n,i){var o=(r-e)/(t-e);return n+o*(i-n)}Lr.mapRange=Tde;function Ade(r){var e=String(r.toFixed(10)),t=e.split(".")[1];return t.replace(/0+$/,"").length}Lr.getDecimalDigits=Ade;function kde(r,e,t){return Math.min(Math.max(r,e),t)}Lr.constrainRange=kde;function Lde(r,e){return(r%e+e)%e}Lr.loopRange=Lde;Object.defineProperty(By,"__esModule",{value:!0});By.NumberTextView=void 0;var bE=bi,Ode=Lr,GU=er,ns=(0,GU.ClassName)("txt"),Dde=function(){function r(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ns(),ns(void 0,"num")),t.arrayPosition&&this.element.classList.add(ns(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("input");n.classList.add(ns("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ns()),this.inputElement.classList.add(ns("i"));var i=e.createElement("div");i.classList.add(ns("k")),this.element.appendChild(i),this.knobElement=i;var o=e.createElementNS(bE.SVG_NS,"svg");o.classList.add(ns("g")),this.knobElement.appendChild(o);var s=e.createElementNS(bE.SVG_NS,"path");s.classList.add(ns("gb")),o.appendChild(s),this.guideBodyElem_=s;var a=e.createElementNS(bE.SVG_NS,"path");a.classList.add(ns("gh")),o.appendChild(a),this.guideHeadElem_=a;var l=e.createElement("div");l.classList.add((0,GU.ClassName)("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}return r.prototype.onDraggingChange_=function(e){if(e.rawValue===null){this.element.classList.remove(ns(void 0,"drg"));return}this.element.classList.add(ns(void 0,"drg"));var t=e.rawValue/this.props_.get("draggingScale"),n=t+(t>0?-1:t<0?1:0),i=(0,Ode.constrainRange)(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M "+(n+i)+",0 L"+n+",4 L"+(n+i)+",8","M "+t+",-1 L"+t+",9"].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L"+t+",4");var o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=t+"px"},r.prototype.refresh=function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)},r.prototype.onChange_=function(){this.refresh()},r}();By.NumberTextView=Dde;Object.defineProperty(tu,"__esModule",{value:!0});tu.NumberTextController=void 0;var hN=zt,Rde=so,Hw=ii,Nde=$s,Ide=By,Vde=function(){function r(e,t){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.parser_=t.parser,this.props=t.props,this.sliderProps_=(n=t.sliderProps)!==null&&n!==void 0?n:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=(0,Rde.createValue)(null),this.view=new Ide.NumberTextView(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);var i=new Nde.PointerHandler(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}return r.prototype.constrainValue_=function(e){var t,n,i=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("minValue"),o=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("maxValue"),s=e;return i!==void 0&&(s=Math.max(s,i)),o!==void 0&&(s=Math.min(s,o)),s},r.prototype.onInputChange_=function(e){var t=(0,hN.forceCast)(e.currentTarget),n=t.value,i=this.parser_(n);(0,hN.isEmpty)(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()},r.prototype.onInputKeyDown_=function(e){var t=(0,Hw.getStepForKey)(this.baseStep_,(0,Hw.getVerticalStepKeys)(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})},r.prototype.onInputKeyUp_=function(e){var t=(0,Hw.getStepForKey)(this.baseStep_,(0,Hw.getVerticalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r.prototype.onPointerDown_=function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0},r.prototype.computeDraggingValue_=function(e){if(!e.point)return null;var t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("draggingScale"))},r.prototype.onPointerMove_=function(e){var t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)},r.prototype.onPointerUp_=function(e){var t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)},r}();tu.NumberTextController=Vde;var Fy={},Uy={};Object.defineProperty(Uy,"__esModule",{value:!0});Uy.SliderView=void 0;var dN=Lr,zde=er,xE=(0,zde.ClassName)("sld"),Bde=function(){function r(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(xE()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(xE("t")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;var i=e.createElement("div");i.classList.add(xE("k")),this.trackElement.appendChild(i),this.knobElement=i,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}return r.prototype.update_=function(){var e=(0,dN.constrainRange)((0,dN.mapRange)(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=e+"%"},r.prototype.onChange_=function(){this.update_()},r}();Uy.SliderView=Bde;Object.defineProperty(Fy,"__esModule",{value:!0});Fy.SliderController=void 0;var pN=Lr,Ww=ii,Fde=$s,Ude=Uy,jde=function(){function r(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new Ude.SliderView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fde.PointerHandler(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}return r.prototype.handlePointerEvent_=function(e,t){!e.point||this.value.setRawValue((0,pN.mapRange)((0,pN.constrainRange)(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),t)},r.prototype.onPointerDownOrMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},r.prototype.onKeyDown_=function(e){var t=(0,Ww.getStepForKey)(this.baseStep_,(0,Ww.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})},r.prototype.onKeyUp_=function(e){var t=(0,Ww.getStepForKey)(this.baseStep_,(0,Ww.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r}();Fy.SliderController=jde;var jy={},Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});Hy.SliderTextView=void 0;var Hde=er,SE=(0,Hde.ClassName)("sldtxt"),Wde=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(SE());var n=e.createElement("div");n.classList.add(SE("s")),this.sliderView_=t.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);var i=e.createElement("div");i.classList.add(SE("t")),this.textView_=t.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}return r}();Hy.SliderTextView=Wde;Object.defineProperty(jy,"__esModule",{value:!0});jy.SliderTextController=void 0;var Gde=Hy,Yde=tu,Xde=Fy,qde=function(){function r(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new Xde.SliderController(e,{baseStep:t.baseStep,props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new Yde.NumberTextController(e,{baseStep:t.baseStep,parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new Gde.SliderTextView(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}return Object.defineProperty(r.prototype,"sliderController",{get:function(){return this.sliderC_},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),r}();jy.SliderTextController=qde;var YU={};Object.defineProperty(YU,"__esModule",{value:!0});var c2={};Object.defineProperty(c2,"__esModule",{value:!0});c2.warnDeprecation=void 0;function Kde(r){var e;console.warn([r.name+" is deprecated.",r.alternative?"use "+r.alternative+" instead.":"",(e=r.postscript)!==null&&e!==void 0?e:""].join(" "))}c2.warnDeprecation=Kde;var XU={};Object.defineProperty(XU,"__esModule",{value:!0});var Rc={};Object.defineProperty(Rc,"__esModule",{value:!0});Rc.writePrimitive=void 0;function Zde(r,e){r.write(e)}Rc.writePrimitive=Zde;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.getSuitableDraggingScale=Tr.getBaseStep=Tr.getSuitableDecimalDigits=Tr.findListItems=Tr.createListConstraint=Tr.normalizeListOptions=Tr.parsePointDimensionParams=Tr.parsePickerLayout=Tr.parseListOptions=void 0;var fN=zt,h2=Js,qU=Oc,nL=zm,mN=Lr,KU=kn;function Jde(r){var e=KU.ParamsParsers;if(Array.isArray(r))return e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(r).value;if(typeof r=="object")return e.required.raw(r).value}Tr.parseListOptions=Jde;function Qde(r){if(r==="inline"||r==="popup")return r}Tr.parsePickerLayout=Qde;function $de(r){var e=KU.ParamsParsers;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(r).value}Tr.parsePointDimensionParams=$de;function ZU(r){if(Array.isArray(r))return r;var e=[];return Object.keys(r).forEach(function(t){e.push({text:t,value:r[t]})}),e}Tr.normalizeListOptions=ZU;function epe(r){return(0,fN.isEmpty)(r)?null:new qU.ListConstraint(ZU((0,fN.forceCast)(r)))}Tr.createListConstraint=epe;function tpe(r){var e=r?(0,h2.findConstraint)(r,qU.ListConstraint):null;return e?e.options:null}Tr.findListItems=tpe;function rpe(r){var e=r?(0,h2.findConstraint)(r,nL.StepConstraint):null;return e?e.step:null}function npe(r,e){var t=r&&(0,h2.findConstraint)(r,nL.StepConstraint);return t?(0,mN.getDecimalDigits)(t.step):Math.max((0,mN.getDecimalDigits)(e),2)}Tr.getSuitableDecimalDigits=npe;function ipe(r){var e=rpe(r);return e!=null?e:1}Tr.getBaseStep=ipe;function ope(r,e){var t,n=r&&(0,h2.findConstraint)(r,nL.StepConstraint),i=Math.abs((t=n==null?void 0:n.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}Tr.getSuitableDraggingScale=ope;var Wy={},d2={};Object.defineProperty(d2,"__esModule",{value:!0});d2.CheckboxView=void 0;var spe=bi,ape=er,Gw=(0,ape.ClassName)("ckb"),lpe=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Gw()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("label");n.classList.add(Gw("l")),this.element.appendChild(n);var i=e.createElement("input");i.classList.add(Gw("i")),i.type="checkbox",n.appendChild(i),this.inputElement=i,t.viewProps.bindDisabled(this.inputElement);var o=e.createElement("div");o.classList.add(Gw("w")),n.appendChild(o);var s=(0,spe.createSvgIconElement)(e,"check");o.appendChild(s),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}return r.prototype.update_=function(){this.inputElement.checked=this.value.rawValue},r.prototype.onValueChange_=function(){this.update_()},r}();d2.CheckboxView=lpe;Object.defineProperty(Wy,"__esModule",{value:!0});Wy.CheckboxController=void 0;var upe=zt,cpe=d2,hpe=function(){function r(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new cpe.CheckboxView(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return r.prototype.onInputChange_=function(e){var t=(0,upe.forceCast)(e.currentTarget);this.value.rawValue=t.checked},r}();Wy.CheckboxController=hpe;var Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});Gy.BooleanInputPlugin=void 0;var JU=Js,dpe=Oc,ppe=xd,fpe=Da,mpe=Jr,vN=kn,vpe=Rc,iA=Tr,gpe=Wy;function ype(r){var e=[],t=(0,iA.createListConstraint)(r.options);return t&&e.push(t),new JU.CompositeConstraint(e)}Gy.BooleanInputPlugin={id:"input-bool",type:"input",accept:function(r,e){if(typeof r!="boolean")return null;var t=vN.ParamsParsers,n=(0,vN.parseParams)(e,{options:t.optional.custom(iA.parseListOptions)});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return fpe.boolFromUnknown},constraint:function(r){return ype(r.params)},writer:function(r){return vpe.writePrimitive}},controller:function(r){var e,t=r.document,n=r.value,i=r.constraint;return i&&(0,JU.findConstraint)(i,dpe.ListConstraint)?new ppe.ListController(t,{props:mpe.ValueMap.fromObject({options:(e=(0,iA.findListItems)(i))!==null&&e!==void 0?e:[]}),value:n,viewProps:r.viewProps}):new gpe.CheckboxController(t,{value:n,viewProps:r.viewProps})}};var Sd={},p2={};Object.defineProperty(p2,"__esModule",{value:!0});p2.ColorView=void 0;var _pe=Wn,wpe=er,bpe=Eo,Th=(0,wpe.ClassName)("col"),xpe=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(Th()),t.foldable.bindExpandedClass(this.element,Th(void 0,"expanded")),(0,_pe.bindValueMap)(t.foldable,"completed",(0,bpe.valueToClassName)(this.element,Th(void 0,"cpl")));var n=e.createElement("div");n.classList.add(Th("h")),this.element.appendChild(n);var i=e.createElement("div");i.classList.add(Th("s")),n.appendChild(i),this.swatchElement=i;var o=e.createElement("div");if(o.classList.add(Th("t")),n.appendChild(o),this.textElement=o,t.pickerLayout==="inline"){var s=e.createElement("div");s.classList.add(Th("p")),this.element.appendChild(s),this.pickerElement=s}else this.pickerElement=null}return r}();p2.ColorView=xpe;var f2={},Bi={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.convertColor=an.constrainColorComponents=an.getColorMaxComponents=an.appendAlphaComponent=an.removeAlphaComponent=an.hsvToHslInt=an.hslToHsvInt=an.hsvToRgbInt=void 0;var Di=Lr;function Spe(r,e,t){var n=(0,Di.constrainRange)(r/255,0,1),i=(0,Di.constrainRange)(e/255,0,1),o=(0,Di.constrainRange)(t/255,0,1),s=Math.max(n,i,o),a=Math.min(n,i,o),l=s-a,c=0,d=0,f=(a+s)/2;return l!==0&&(d=l/(1-Math.abs(s+a-1)),n===s?c=(i-o)/l:i===s?c=2+(o-n)/l:c=4+(n-i)/l,c=c/6+(c<0?1:0)),[c*360,d*100,f*100]}function Mpe(r,e,t){var n,i,o,s,a,l,c=(r%360+360)%360,d=(0,Di.constrainRange)(e/100,0,1),f=(0,Di.constrainRange)(t/100,0,1),m=(1-Math.abs(2*f-1))*d,g=m*(1-Math.abs(c/60%2-1)),b=f-m/2,_,w,M;return c>=0&&c<60?(n=[m,g,0],_=n[0],w=n[1],M=n[2]):c>=60&&c<120?(i=[g,m,0],_=i[0],w=i[1],M=i[2]):c>=120&&c<180?(o=[0,m,g],_=o[0],w=o[1],M=o[2]):c>=180&&c<240?(s=[0,g,m],_=s[0],w=s[1],M=s[2]):c>=240&&c<300?(a=[g,0,m],_=a[0],w=a[1],M=a[2]):(l=[m,0,g],_=l[0],w=l[1],M=l[2]),[(_+b)*255,(w+b)*255,(M+b)*255]}function Cpe(r,e,t){var n=(0,Di.constrainRange)(r/255,0,1),i=(0,Di.constrainRange)(e/255,0,1),o=(0,Di.constrainRange)(t/255,0,1),s=Math.max(n,i,o),a=Math.min(n,i,o),l=s-a,c;l===0?c=0:s===n?c=60*(((i-o)/l%6+6)%6):s===i?c=60*((o-n)/l+2):c=60*((n-i)/l+4);var d=s===0?0:l/s,f=s;return[c,d*100,f*100]}function QU(r,e,t){var n,i,o,s,a,l,c=(0,Di.loopRange)(r,360),d=(0,Di.constrainRange)(e/100,0,1),f=(0,Di.constrainRange)(t/100,0,1),m=f*d,g=m*(1-Math.abs(c/60%2-1)),b=f-m,_,w,M;return c>=0&&c<60?(n=[m,g,0],_=n[0],w=n[1],M=n[2]):c>=60&&c<120?(i=[g,m,0],_=i[0],w=i[1],M=i[2]):c>=120&&c<180?(o=[0,m,g],_=o[0],w=o[1],M=o[2]):c>=180&&c<240?(s=[0,g,m],_=s[0],w=s[1],M=s[2]):c>=240&&c<300?(a=[g,0,m],_=a[0],w=a[1],M=a[2]):(l=[m,0,g],_=l[0],w=l[1],M=l[2]),[(_+b)*255,(w+b)*255,(M+b)*255]}an.hsvToRgbInt=QU;function $U(r,e,t){var n=t+e*(100-Math.abs(2*t-100))/200;return[r,n!==0?e*(100-Math.abs(2*t-100))/n:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}an.hslToHsvInt=$U;function ej(r,e,t){var n=100-Math.abs(t*(200-e)/100-100);return[r,n!==0?e*t/n:0,t*(200-e)/(2*100)]}an.hsvToHslInt=ej;function Epe(r){return[r[0],r[1],r[2]]}an.removeAlphaComponent=Epe;function Ppe(r,e){return[r[0],r[1],r[2],e]}an.appendAlphaComponent=Ppe;var Tpe={hsl:{hsl:function(r,e,t){return[r,e,t]},hsv:$U,rgb:Mpe},hsv:{hsl:ej,hsv:function(r,e,t){return[r,e,t]},rgb:QU},rgb:{hsl:Spe,hsv:Cpe,rgb:function(r,e,t){return[r,e,t]}}};function Zx(r,e){return[e==="float"?1:r==="rgb"?255:360,e==="float"?1:r==="rgb"?255:100,e==="float"?1:r==="rgb"?255:100]}an.getColorMaxComponents=Zx;function Ape(r,e,t){var n,i=Zx(e,t);return[e==="rgb"?(0,Di.constrainRange)(r[0],0,i[0]):(0,Di.loopRange)(r[0],i[0]),(0,Di.constrainRange)(r[1],0,i[1]),(0,Di.constrainRange)(r[2],0,i[2]),(0,Di.constrainRange)((n=r[3])!==null&&n!==void 0?n:1,0,1)]}an.constrainColorComponents=Ape;function gN(r,e,t,n){var i=Zx(e,t),o=Zx(e,n);return r.map(function(s,a){return s/i[a]*o[a]})}function kpe(r,e,t){var n,i=gN(r,e.mode,e.type,"int"),o=(n=Tpe[e.mode])[t.mode].apply(n,i);return gN(o,t.mode,"int",t.type)}an.convertColor=kpe;Object.defineProperty(Bi,"__esModule",{value:!0});Bi.Color=void 0;var Lpe=zt,Yw=an;function Xw(r,e){return typeof r!="object"||(0,Lpe.isEmpty)(r)?!1:e in r&&typeof r[e]=="number"}var Ope=function(){function r(e,t,n){n===void 0&&(n="int"),this.mode=t,this.type=n,this.comps_=(0,Yw.constrainColorComponents)(e,t,n)}return r.black=function(e){return e===void 0&&(e="int"),new r([0,0,0],"rgb",e)},r.fromObject=function(e,t){t===void 0&&(t="int");var n="a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b];return new r(n,"rgb",t)},r.toRgbaObject=function(e,t){return t===void 0&&(t="int"),e.toRgbaObject(t)},r.isRgbColorObject=function(e){return Xw(e,"r")&&Xw(e,"g")&&Xw(e,"b")},r.isRgbaColorObject=function(e){return this.isRgbColorObject(e)&&Xw(e,"a")},r.isColorObject=function(e){return this.isRgbColorObject(e)},r.equals=function(e,t){if(e.mode!==t.mode)return!1;for(var n=e.comps_,i=t.comps_,o=0;o<n.length;o++)if(n[o]!==i[o])return!1;return!0},r.prototype.getComponents=function(e,t){return t===void 0&&(t="int"),(0,Yw.appendAlphaComponent)((0,Yw.convertColor)((0,Yw.removeAlphaComponent)(this.comps_),{mode:this.mode,type:this.type},{mode:e!=null?e:this.mode,type:t}),this.comps_[3])},r.prototype.toRgbaObject=function(e){e===void 0&&(e="int");var t=this.getComponents("rgb",e);return{r:t[0],g:t[1],b:t[2],a:t[3]}},r}();Bi.Color=Ope;var m2={},Dpe=Ve&&Ve.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(m2,"__esModule",{value:!0});m2.ColorPickerView=void 0;var Rpe=er,Du=(0,Rpe.ClassName)("colp"),Npe=function(){function r(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Du());var n=e.createElement("div");n.classList.add(Du("hsv"));var i=e.createElement("div");i.classList.add(Du("sv")),this.svPaletteView_=t.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);var o=e.createElement("div");o.classList.add(Du("h")),this.hPaletteView_=t.hPaletteView,o.appendChild(this.hPaletteView_.element),n.appendChild(o),this.element.appendChild(n);var s=e.createElement("div");if(s.classList.add(Du("rgb")),this.textView_=t.textView,s.appendChild(this.textView_.element),this.element.appendChild(s),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};var a=e.createElement("div");a.classList.add(Du("a"));var l=e.createElement("div");l.classList.add(Du("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);var c=e.createElement("div");c.classList.add(Du("at")),c.appendChild(this.alphaViews_.text.element),a.appendChild(c),this.element.appendChild(a)}}return Object.defineProperty(r.prototype,"allFocusableElements",{get:function(){var e=Dpe([this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement],this.textView_.textViews.map(function(t){return t.inputElement}),!0);return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e},enumerable:!1,configurable:!0}),r}();m2.ColorPickerView=Npe;var v2={},Co={};Object.defineProperty(Co,"__esModule",{value:!0});Co.extractColorType=Co.getBaseStepForColor=Co.parseColorInputParams=void 0;var yN=kn,Ipe=Tr;function Vpe(r){return r==="int"?"int":r==="float"?"float":void 0}function zpe(r){var e=yN.ParamsParsers;return(0,yN.parseParams)(r,{alpha:e.optional.boolean,color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Vpe)}),expanded:e.optional.boolean,picker:e.optional.custom(Ipe.parsePickerLayout)})}Co.parseColorInputParams=zpe;function Bpe(r){return r?.1:1}Co.getBaseStepForColor=Bpe;function Fpe(r){var e;return(e=r.color)===null||e===void 0?void 0:e.type}Co.extractColorType=Fpe;var g2={},ru={};(function(r){var e=Ve&&Ve.__assign||function(){return e=Object.assign||function(ce){for(var te,I=1,B=arguments.length;I<B;I++){te=arguments[I];for(var le in te)Object.prototype.hasOwnProperty.call(te,le)&&(ce[le]=te[le])}return ce},e.apply(this,arguments)},t=Ve&&Ve.__spreadArray||function(ce,te,I){if(I||arguments.length===2)for(var B=0,le=te.length,Te;B<le;B++)(Te||!(B in te))&&(Te||(Te=Array.prototype.slice.call(te,0,B)),Te[B]=te[B]);return ce.concat(Te||Array.prototype.slice.call(te))};Object.defineProperty(r,"__esModule",{value:!0}),r.findColorStringifier=r.getColorStringifier=r.colorToObjectRgbaString=r.colorToObjectRgbString=r.colorToFunctionalHslaString=r.colorToFunctionalHslString=r.colorToFunctionalRgbaString=r.colorToFunctionalRgbString=r.colorToHexRgbaString=r.colorToHexRgbString=r.colorFromString=r.hasAlphaComponent=r.createColorStringParser=r.createColorStringBindingReader=r.CompositeColorParser=r.detectStringColorFormat=r.getColorNotation=void 0;var n=jn,i=zy,o=Lr,s=Bi,a=an;function l(ce,te){return ce.alpha===te.alpha&&ce.mode===te.mode&&ce.notation===te.notation&&ce.type===te.type}function c(ce,te){var I=ce.match(/^(.+)%$/);return Math.min(I?parseFloat(I[1])*.01*te:parseFloat(ce),te)}var d={deg:function(ce){return ce},grad:function(ce){return ce*360/400},rad:function(ce){return ce*360/(2*Math.PI)},turn:function(ce){return ce*360}};function f(ce){var te=ce.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!te)return parseFloat(ce);var I=parseFloat(te[1]),B=te[2];return d[B](I)}function m(ce){var te=ce.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!te)return null;var I=[c(te[1],255),c(te[2],255),c(te[3],255)];return isNaN(I[0])||isNaN(I[1])||isNaN(I[2])?null:I}function g(ce){return function(te){var I=m(te);return I?new s.Color(I,"rgb",ce):null}}function b(ce){var te=ce.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!te)return null;var I=[c(te[1],255),c(te[2],255),c(te[3],255),c(te[4],1)];return isNaN(I[0])||isNaN(I[1])||isNaN(I[2])||isNaN(I[3])?null:I}function _(ce){return function(te){var I=b(te);return I?new s.Color(I,"rgb",ce):null}}function w(ce){var te=ce.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!te)return null;var I=[f(te[1]),c(te[2],100),c(te[3],100)];return isNaN(I[0])||isNaN(I[1])||isNaN(I[2])?null:I}function M(ce){return function(te){var I=w(te);return I?new s.Color(I,"hsl",ce):null}}function S(ce){var te=ce.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!te)return null;var I=[f(te[1]),c(te[2],100),c(te[3],100),c(te[4],1)];return isNaN(I[0])||isNaN(I[1])||isNaN(I[2])||isNaN(I[3])?null:I}function C(ce){return function(te){var I=S(te);return I?new s.Color(I,"hsl",ce):null}}function P(ce){var te=ce.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(te)return[parseInt(te[1]+te[1],16),parseInt(te[2]+te[2],16),parseInt(te[3]+te[3],16)];var I=ce.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return I?[parseInt(I[1],16),parseInt(I[2],16),parseInt(I[3],16)]:null}function T(ce){var te=P(ce);return te?new s.Color(te,"rgb","int"):null}function L(ce){var te=ce.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(te)return[parseInt(te[1]+te[1],16),parseInt(te[2]+te[2],16),parseInt(te[3]+te[3],16),(0,o.mapRange)(parseInt(te[4]+te[4],16),0,255,0,1)];var I=ce.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return I?[parseInt(I[1],16),parseInt(I[2],16),parseInt(I[3],16),(0,o.mapRange)(parseInt(I[4],16),0,255,0,1)]:null}function O(ce){var te=L(ce);return te?new s.Color(te,"rgb","int"):null}function k(ce){var te=ce.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!te)return null;var I=[parseFloat(te[1]),parseFloat(te[2]),parseFloat(te[3])];return isNaN(I[0])||isNaN(I[1])||isNaN(I[2])?null:I}function N(ce){return function(te){var I=k(te);return I?new s.Color(I,"rgb",ce):null}}function V(ce){var te=ce.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!te)return null;var I=[parseFloat(te[1]),parseFloat(te[2]),parseFloat(te[3]),parseFloat(te[4])];return isNaN(I[0])||isNaN(I[1])||isNaN(I[2])||isNaN(I[3])?null:I}function W(ce){return function(te){var I=V(te);return I?new s.Color(I,"rgb",ce):null}}var ee={"func.rgb":g("int"),"func.rgba":_("int"),"func.hsl":M("int"),"func.hsla":C("int"),"hex.rgb":T,"hex.rgba":O};function se(ce){var te=Object.keys(ee);return te.reduce(function(I,B){if(I)return I;var le=ee[B];return le(ce)?B:null},null)}r.getColorNotation=se;var q=[{parser:P,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:L,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:m,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:b,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:w,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:S,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:k,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:V,result:{alpha:!0,mode:"rgb",notation:"object"}}];function re(ce){return q.reduce(function(te,I){var B=I.parser,le=I.result;return te||(B(ce)?le:null)},null)}function Z(ce,te){te===void 0&&(te="int");var I=re(ce);return I?I.notation==="hex"&&te!=="float"?e(e({},I),{type:"int"}):I.notation==="func"?e(e({},I),{type:te}):null:null}r.detectStringColorFormat=Z;var me=function(ce){var te=se(ce);return te?ee[te](ce):null};r.CompositeColorParser=me;var J={int:[T,O,g("int"),_("int"),M("int"),C("int"),N("int"),W("int")],float:[g("float"),_("float"),M("float"),C("float"),N("float"),W("float")]};function Q(ce){var te=J[ce];return function(I){if(typeof I!="string")return s.Color.black(ce);var B=te.reduce(function(le,Te){return le||Te(I)},null);return B!=null?B:s.Color.black(ce)}}r.createColorStringBindingReader=Q;function $(ce){var te=J[ce];return function(I){return te.reduce(function(B,le){return B||le(I)},null)}}r.createColorStringParser=$;function fe(ce){return ce==="func.hsla"||ce==="func.rgba"||ce==="hex.rgba"}r.hasAlphaComponent=fe;function he(ce){if(typeof ce=="string"){var te=(0,r.CompositeColorParser)(ce);if(te)return te}return s.Color.black()}r.colorFromString=he;function Se(ce){var te=(0,o.constrainRange)(Math.floor(ce),0,255).toString(16);return te.length===1?"0"+te:te}function Re(ce,te){te===void 0&&(te="#");var I=(0,a.removeAlphaComponent)(ce.getComponents("rgb")).map(Se).join("");return""+te+I}r.colorToHexRgbString=Re;function st(ce,te){te===void 0&&(te="#");var I=ce.getComponents("rgb"),B=[I[0],I[1],I[2],I[3]*255].map(Se).join("");return""+te+B}r.colorToHexRgbaString=st;function ve(ce,te){var I=(0,n.createNumberFormatter)(te==="float"?2:0),B=(0,a.removeAlphaComponent)(ce.getComponents("rgb",te)).map(function(le){return I(le)});return"rgb("+B.join(", ")+")"}r.colorToFunctionalRgbString=ve;function St(ce){return function(te){return ve(te,ce)}}function tt(ce,te){var I=(0,n.createNumberFormatter)(2),B=(0,n.createNumberFormatter)(te==="float"?2:0),le=ce.getComponents("rgb",te).map(function(Te,Ne){var Be=Ne===3?I:B;return Be(Te)});return"rgba("+le.join(", ")+")"}r.colorToFunctionalRgbaString=tt;function Ge(ce){return function(te){return tt(te,ce)}}function ze(ce){var te=[(0,n.createNumberFormatter)(0),i.formatPercentage,i.formatPercentage],I=(0,a.removeAlphaComponent)(ce.getComponents("hsl")).map(function(B,le){return te[le](B)});return"hsl("+I.join(", ")+")"}r.colorToFunctionalHslString=ze;function Ae(ce){var te=[(0,n.createNumberFormatter)(0),i.formatPercentage,i.formatPercentage,(0,n.createNumberFormatter)(2)],I=ce.getComponents("hsl").map(function(B,le){return te[le](B)});return"hsla("+I.join(", ")+")"}r.colorToFunctionalHslaString=Ae;function Ce(ce,te){var I=(0,n.createNumberFormatter)(te==="float"?2:0),B=["r","g","b"],le=(0,a.removeAlphaComponent)(ce.getComponents("rgb",te)).map(function(Te,Ne){return B[Ne]+": "+I(Te)});return"{"+le.join(", ")+"}"}r.colorToObjectRgbString=Ce;function xe(ce){return function(te){return Ce(te,ce)}}function Ue(ce,te){var I=(0,n.createNumberFormatter)(2),B=(0,n.createNumberFormatter)(te==="float"?2:0),le=["r","g","b","a"],Te=ce.getComponents("rgb",te).map(function(Ne,Be){var nt=Be===3?I:B;return le[Be]+": "+nt(Ne)});return"{"+Te.join(", ")+"}"}r.colorToObjectRgbaString=Ue;function Fe(ce){return function(te){return Ue(te,ce)}}var dt={"func.hsl":ze,"func.hsla":Ae,"func.rgb":ve,"func.rgba":tt,"hex.rgb":Re,"hex.rgba":st};function lt(ce){return dt[ce]}r.getColorStringifier=lt;var _t=t([{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Re},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:st},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:ze},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Ae}],["int","float"].reduce(function(ce,te){return t(t([],ce,!0),[{format:{alpha:!1,mode:"rgb",notation:"func",type:te},stringifier:St(te)},{format:{alpha:!0,mode:"rgb",notation:"func",type:te},stringifier:Ge(te)},{format:{alpha:!1,mode:"rgb",notation:"object",type:te},stringifier:xe(te)},{format:{alpha:!0,mode:"rgb",notation:"object",type:te},stringifier:Fe(te)}],!1)},[]),!0);function vt(ce){return _t.reduce(function(te,I){return te||(l(I.format,ce)?I.stringifier:null)},null)}r.findColorStringifier=vt})(ru);Object.defineProperty(g2,"__esModule",{value:!0});g2.APaletteView=void 0;var Upe=Lr,jpe=er,ME=ru,_N=Bi,$v=(0,jpe.ClassName)("apl"),Hpe=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add($v()),t.viewProps.bindTabIndex(this.element);var n=e.createElement("div");n.classList.add($v("b")),this.element.appendChild(n);var i=e.createElement("div");i.classList.add($v("c")),n.appendChild(i),this.colorElem_=i;var o=e.createElement("div");o.classList.add($v("m")),this.element.appendChild(o),this.markerElem_=o;var s=e.createElement("div");s.classList.add($v("p")),this.markerElem_.appendChild(s),this.previewElem_=s,this.update_()}return r.prototype.update_=function(){var e=this.value.rawValue,t=e.getComponents("rgb"),n=new _N.Color([t[0],t[1],t[2],0],"rgb"),i=new _N.Color([t[0],t[1],t[2],255],"rgb"),o=["to right",(0,ME.colorToFunctionalRgbaString)(n),(0,ME.colorToFunctionalRgbaString)(i)];this.colorElem_.style.background="linear-gradient("+o.join(",")+")",this.previewElem_.style.backgroundColor=(0,ME.colorToFunctionalRgbaString)(e);var s=(0,Upe.mapRange)(t[3],0,1,0,100);this.markerElem_.style.left=s+"%"},r.prototype.onValueChange_=function(){this.update_()},r}();g2.APaletteView=Hpe;Object.defineProperty(v2,"__esModule",{value:!0});v2.APaletteController=void 0;var qw=ii,Wpe=$s,wN=Bi,bN=Co,Gpe=g2,Ype=function(){function r(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Gpe.APaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Wpe.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return r.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=e.point.x/e.bounds.width,i=this.value.rawValue,o=i.getComponents("hsv"),s=o[0],a=o[1],l=o[2];this.value.setRawValue(new wN.Color([s,a,l,n],"hsv"),t)}},r.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},r.prototype.onKeyDown_=function(e){var t=(0,qw.getStepForKey)((0,bN.getBaseStepForColor)(!0),(0,qw.getHorizontalStepKeys)(e));if(t!==0){var n=this.value.rawValue,i=n.getComponents("hsv"),o=i[0],s=i[1],a=i[2],l=i[3];this.value.setRawValue(new wN.Color([o,s,a,l+t],"hsv"),{forceEmit:!1,last:!1})}},r.prototype.onKeyUp_=function(e){var t=(0,qw.getStepForKey)((0,bN.getBaseStepForColor)(!0),(0,qw.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r}();v2.APaletteController=Ype;var y2={},_2={};Object.defineProperty(_2,"__esModule",{value:!0});_2.ColorTextView=void 0;var xN=bi,Xpe=Wn,qpe=er,Dp=(0,qpe.ClassName)("coltxt");function Kpe(r){var e=r.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(t.reduce(function(n,i){var o=r.createElement("option");return o.textContent=i.text,o.value=i.value,n.appendChild(o),n},r.createDocumentFragment())),e}var Zpe=function(){function r(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(Dp());var i=e.createElement("div");i.classList.add(Dp("m")),this.modeElem_=Kpe(e),this.modeElem_.classList.add(Dp("ms")),i.appendChild(this.modeSelectElement);var o=e.createElement("div");o.classList.add(Dp("mm")),o.appendChild((0,xN.createSvgIconElement)(e,"dropdown")),i.appendChild(o),this.element.appendChild(i);var s=e.createElement("div");s.classList.add(Dp("w")),this.element.appendChild(s),this.textsElem_=s,this.textViews_=t.textViews,this.applyTextViews_(),(0,Xpe.bindValue)(t.colorMode,function(a){n.modeElem_.value=a})}return Object.defineProperty(r.prototype,"modeSelectElement",{get:function(){return this.modeElem_},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textViews",{get:function(){return this.textViews_},set:function(e){this.textViews_=e,this.applyTextViews_()},enumerable:!1,configurable:!0}),r.prototype.applyTextViews_=function(){var e=this;(0,xN.removeChildElements)(this.textsElem_);var t=this.element.ownerDocument;this.textViews_.forEach(function(n){var i=t.createElement("div");i.classList.add(Dp("c")),i.appendChild(n.element),e.textsElem_.appendChild(i)})},r}();_2.ColorTextView=Zpe;Object.defineProperty(y2,"__esModule",{value:!0});y2.ColorTextController=void 0;var Jpe=Dc,Qpe=jn,$pe=Jr,efe=eu,tj=so,tfe=tu,rfe=Bi,oA=an,nfe=Co,ife=_2;function ofe(r){return(0,Qpe.createNumberFormatter)(r==="float"?2:0)}function sfe(r,e,t){var n=(0,oA.getColorMaxComponents)(r,e)[t];return new Jpe.RangeConstraint({min:0,max:n})}function CE(r,e,t){return new tfe.NumberTextController(r,{arrayPosition:t===0?"fst":t===3-1?"lst":"mid",baseStep:(0,nfe.getBaseStepForColor)(!1),parser:e.parser,props:$pe.ValueMap.fromObject({draggingScale:e.colorType==="float"?.01:1,formatter:ofe(e.colorType)}),value:(0,tj.createValue)(0,{constraint:sfe(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}var afe=function(){function r(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.parser_=t.parser,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=(0,tj.createValue)(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new ife.ColorTextView(e,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}return r.prototype.createComponentControllers_=function(e){var t=this,n={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},i=[CE(e,n,0),CE(e,n,1),CE(e,n,2)];return i.forEach(function(o,s){(0,efe.connectValues)({primary:t.value,secondary:o.value,forward:function(a){return a.rawValue.getComponents(t.colorMode.rawValue,t.colorType_)[s]},backward:function(a,l){var c=t.colorMode.rawValue,d=a.rawValue.getComponents(c,t.colorType_);return d[s]=l.rawValue,new rfe.Color((0,oA.appendAlphaComponent)((0,oA.removeAlphaComponent)(d),d[3]),c,t.colorType_)}})}),i},r.prototype.onModeSelectChange_=function(e){var t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]},r}();y2.ColorTextController=afe;var w2={},b2={};Object.defineProperty(b2,"__esModule",{value:!0});b2.HPaletteView=void 0;var lfe=Lr,ufe=er,cfe=ru,hfe=Bi,EE=(0,ufe.ClassName)("hpl"),dfe=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(EE()),t.viewProps.bindTabIndex(this.element);var n=e.createElement("div");n.classList.add(EE("c")),this.element.appendChild(n);var i=e.createElement("div");i.classList.add(EE("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}return r.prototype.update_=function(){var e=this.value.rawValue,t=e.getComponents("hsv")[0];this.markerElem_.style.backgroundColor=(0,cfe.colorToFunctionalRgbString)(new hfe.Color([t,100,100],"hsv"));var n=(0,lfe.mapRange)(t,0,360,0,100);this.markerElem_.style.left=n+"%"},r.prototype.onValueChange_=function(){this.update_()},r}();b2.HPaletteView=dfe;Object.defineProperty(w2,"__esModule",{value:!0});w2.HPaletteController=void 0;var SN=Lr,Kw=ii,pfe=$s,MN=Bi,CN=Co,ffe=b2,mfe=function(){function r(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new ffe.HPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new pfe.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return r.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=(0,SN.mapRange)((0,SN.constrainRange)(e.point.x,0,e.bounds.width),0,e.bounds.width,0,359),i=this.value.rawValue,o=i.getComponents("hsv"),s=o[1],a=o[2],l=o[3];this.value.setRawValue(new MN.Color([n,s,a,l],"hsv"),t)}},r.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},r.prototype.onKeyDown_=function(e){var t=(0,Kw.getStepForKey)((0,CN.getBaseStepForColor)(!1),(0,Kw.getHorizontalStepKeys)(e));if(t!==0){var n=this.value.rawValue,i=n.getComponents("hsv"),o=i[0],s=i[1],a=i[2],l=i[3];this.value.setRawValue(new MN.Color([o+t,s,a,l],"hsv"),{forceEmit:!1,last:!1})}},r.prototype.onKeyUp_=function(e){var t=(0,Kw.getStepForKey)((0,CN.getBaseStepForColor)(!1),(0,Kw.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r}();w2.HPaletteController=mfe;var x2={},S2={};Object.defineProperty(S2,"__esModule",{value:!0});S2.SvPaletteView=void 0;var vfe=bi,Zw=Lr,gfe=er,yfe=an,PE=(0,gfe.ClassName)("svp"),EN=64,_fe=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(PE()),t.viewProps.bindTabIndex(this.element);var n=e.createElement("canvas");n.height=EN,n.width=EN,n.classList.add(PE("c")),this.element.appendChild(n),this.canvasElement=n;var i=e.createElement("div");i.classList.add(PE("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}return r.prototype.update_=function(){var e=(0,vfe.getCanvasContext)(this.canvasElement);if(e){for(var t=this.value.rawValue,n=t.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,s=e.getImageData(0,0,i,o),a=s.data,l=0;l<o;l++)for(var c=0;c<i;c++){var d=(0,Zw.mapRange)(c,0,i,0,100),f=(0,Zw.mapRange)(l,0,o,100,0),m=(0,yfe.hsvToRgbInt)(n[0],d,f),g=(l*i+c)*4;a[g]=m[0],a[g+1]=m[1],a[g+2]=m[2],a[g+3]=255}e.putImageData(s,0,0);var b=(0,Zw.mapRange)(n[1],0,100,0,100);this.markerElem_.style.left=b+"%";var _=(0,Zw.mapRange)(n[2],0,100,100,0);this.markerElem_.style.top=_+"%"}},r.prototype.onValueChange_=function(){this.update_()},r}();S2.SvPaletteView=_fe;Object.defineProperty(x2,"__esModule",{value:!0});x2.SvPaletteController=void 0;var PN=Lr,Sl=ii,wfe=$s,TN=Bi,AN=Co,bfe=S2,xfe=function(){function r(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new bfe.SvPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new wfe.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return r.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=(0,PN.mapRange)(e.point.x,0,e.bounds.width,0,100),i=(0,PN.mapRange)(e.point.y,0,e.bounds.height,100,0),o=this.value.rawValue.getComponents("hsv"),s=o[0],a=o[3];this.value.setRawValue(new TN.Color([s,n,i,a],"hsv"),t)}},r.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},r.prototype.onKeyDown_=function(e){(0,Sl.isArrowKey)(e.key)&&e.preventDefault();var t=this.value.rawValue.getComponents("hsv"),n=t[0],i=t[1],o=t[2],s=t[3],a=(0,AN.getBaseStepForColor)(!1),l=(0,Sl.getStepForKey)(a,(0,Sl.getHorizontalStepKeys)(e)),c=(0,Sl.getStepForKey)(a,(0,Sl.getVerticalStepKeys)(e));l===0&&c===0||this.value.setRawValue(new TN.Color([n,i+l,o+c,s],"hsv"),{forceEmit:!1,last:!1})},r.prototype.onKeyUp_=function(e){var t=(0,AN.getBaseStepForColor)(!1),n=(0,Sl.getStepForKey)(t,(0,Sl.getHorizontalStepKeys)(e)),i=(0,Sl.getStepForKey)(t,(0,Sl.getVerticalStepKeys)(e));n===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r}();x2.SvPaletteController=xfe;Object.defineProperty(f2,"__esModule",{value:!0});f2.ColorPickerController=void 0;var Sfe=Dc,TE=jn,Mfe=Jr,Cfe=eu,Efe=so,Pfe=tu,Tfe=Bi,Afe=m2,kfe=v2,Lfe=y2,Ofe=w2,Dfe=x2,Rfe=function(){function r(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new Ofe.HPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Dfe.SvPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new kfe.APaletteController(e,{value:this.value,viewProps:this.viewProps}),text:new Pfe.NumberTextController(e,{parser:TE.parseNumber,baseStep:.1,props:Mfe.ValueMap.fromObject({draggingScale:.01,formatter:(0,TE.createNumberFormatter)(2)}),value:(0,Efe.createValue)(0,{constraint:new Sfe.RangeConstraint({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&(0,Cfe.connectValues)({primary:this.value,secondary:this.alphaIcs_.text.value,forward:function(n){return n.rawValue.getComponents()[3]},backward:function(n,i){var o=n.rawValue.getComponents();return o[3]=i.rawValue,new Tfe.Color(o,n.rawValue.mode)}}),this.textC_=new Lfe.ColorTextController(e,{colorType:t.colorType,parser:TE.parseNumber,value:this.value,viewProps:this.viewProps}),this.view=new Afe.ColorPickerView(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}return Object.defineProperty(r.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),r}();f2.ColorPickerController=Rfe;var M2={},C2={};Object.defineProperty(C2,"__esModule",{value:!0});C2.ColorSwatchView=void 0;var Nfe=er,Ife=ru,AE=(0,Nfe.ClassName)("colsw"),Vfe=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(AE()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(AE("sw")),this.element.appendChild(n),this.swatchElem_=n;var i=e.createElement("button");i.classList.add(AE("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}return r.prototype.update_=function(){var e=this.value.rawValue;this.swatchElem_.style.backgroundColor=(0,Ife.colorToHexRgbaString)(e)},r.prototype.onValueChange_=function(){this.update_()},r}();C2.ColorSwatchView=Vfe;Object.defineProperty(M2,"__esModule",{value:!0});M2.ColorSwatchController=void 0;var zfe=C2,Bfe=function(){function r(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new zfe.ColorSwatchView(e,{value:this.value,viewProps:this.viewProps})}return r}();M2.ColorSwatchController=Bfe;Object.defineProperty(Sd,"__esModule",{value:!0});Sd.ColorController=void 0;var kN=Ji,Ffe=Bm,Ufe=Fm,LN=bi,jfe=Jr,Hfe=eu,Wfe=zt,Gfe=p2,Yfe=f2,Xfe=M2,qfe=function(){function r(e,t){var n=this;this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=kN.Foldable.create(t.expanded),this.swatchC_=new Xfe.ColorSwatchController(e,{value:this.value,viewProps:this.viewProps});var i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Ufe.TextController(e,{parser:t.parser,props:jfe.ValueMap.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Gfe.ColorView(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new Ffe.PopupController(e,{viewProps:this.viewProps}):null;var o=new Yfe.ColorPickerController(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(function(s){s.addEventListener("blur",n.onPopupChildBlur_),s.addEventListener("keydown",n.onPopupChildKeydown_)}),this.pickerC_=o,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(o.view.element),(0,Hfe.connectValues)({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(s){return s.rawValue},backward:function(s,a){return a.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),(0,kN.bindFoldable)(this.foldable_,this.view.pickerElement))}return Object.defineProperty(r.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),r.prototype.onButtonBlur_=function(e){if(this.popC_){var t=this.view.element,n=(0,Wfe.forceCast)(e.relatedTarget);(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}},r.prototype.onButtonClick_=function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()},r.prototype.onPopupChildBlur_=function(e){if(this.popC_){var t=this.popC_.view.element,n=(0,LN.findNextTarget)(e);n&&t.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!(0,LN.supportsTouch)(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}},r.prototype.onPopupChildKeydown_=function(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()},r}();Sd.ColorController=qfe;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.colorFromRgbaNumber=zn.colorFromRgbNumber=zn.numberToRgbaColor=zn.numberToRgbColor=zn.colorToRgbaNumber=zn.colorToRgbNumber=zn.colorFromObject=void 0;var Kfe=Lr,Kh=Bi,Zfe=an;function Jfe(r,e){return Kh.Color.isColorObject(r)?Kh.Color.fromObject(r,e):Kh.Color.black(e)}zn.colorFromObject=Jfe;function Qfe(r){return(0,Zfe.removeAlphaComponent)(r.getComponents("rgb")).reduce(function(e,t){return e<<8|Math.floor(t)&255},0)}zn.colorToRgbNumber=Qfe;function $fe(r){return r.getComponents("rgb").reduce(function(e,t,n){var i=Math.floor(n===3?t*255:t)&255;return e<<8|i},0)>>>0}zn.colorToRgbaNumber=$fe;function rj(r){return new Kh.Color([r>>16&255,r>>8&255,r&255],"rgb")}zn.numberToRgbColor=rj;function nj(r){return new Kh.Color([r>>24&255,r>>16&255,r>>8&255,(0,Kfe.mapRange)(r&255,0,255,0,1)],"rgb")}zn.numberToRgbaColor=nj;function eme(r){return typeof r!="number"?Kh.Color.black():rj(r)}zn.colorFromRgbNumber=eme;function tme(r){return typeof r!="number"?Kh.Color.black():nj(r)}zn.colorFromRgbaNumber=tme;var Yy={},yo={};Object.defineProperty(yo,"__esModule",{value:!0});yo.createColorObjectWriter=yo.writeRgbColorObject=yo.writeRgbaColorObject=yo.createColorNumberWriter=yo.createColorStringWriter=void 0;var ij=Rc,ON=zn,rme=ru;function nme(r){var e=(0,rme.findColorStringifier)(r);return e?function(t,n){(0,ij.writePrimitive)(t,e(n))}:null}yo.createColorStringWriter=nme;function ime(r){var e=r?ON.colorToRgbaNumber:ON.colorToRgbNumber;return function(t,n){(0,ij.writePrimitive)(t,e(n))}}yo.createColorNumberWriter=ime;function oj(r,e,t){var n=e.toRgbaObject(t);r.writeProperty("r",n.r),r.writeProperty("g",n.g),r.writeProperty("b",n.b),r.writeProperty("a",n.a)}yo.writeRgbaColorObject=oj;function sj(r,e,t){var n=e.toRgbaObject(t);r.writeProperty("r",n.r),r.writeProperty("g",n.g),r.writeProperty("b",n.b)}yo.writeRgbColorObject=sj;function ome(r,e){return function(t,n){r?oj(t,n,e):sj(t,n,e)}}yo.createColorObjectWriter=ome;Object.defineProperty(Yy,"__esModule",{value:!0});Yy.NumberColorInputPlugin=void 0;var sme=Sd,DN=zn,sA=ru,ame=yo,lme=Bi,ume=Co;function kE(r){var e;return!!((r==null?void 0:r.alpha)||((e=r==null?void 0:r.color)===null||e===void 0?void 0:e.alpha))}function cme(r){return r?function(e){return(0,sA.colorToHexRgbaString)(e,"0x")}:function(e){return(0,sA.colorToHexRgbString)(e,"0x")}}function hme(r){return"color"in r||"view"in r&&r.view==="color"}Yy.NumberColorInputPlugin={id:"input-color-number",type:"input",accept:function(r,e){if(typeof r!="number"||!hme(e))return null;var t=(0,ume.parseColorInputParams)(e);return t?{initialValue:r,params:t}:null},binding:{reader:function(r){return kE(r.params)?DN.colorFromRgbaNumber:DN.colorFromRgbNumber},equals:lme.Color.equals,writer:function(r){return(0,ame.createColorNumberWriter)(kE(r.params))}},controller:function(r){var e=kE(r.params),t="expanded"in r.params?r.params.expanded:void 0,n="picker"in r.params?r.params.picker:void 0;return new sme.ColorController(r.document,{colorType:"int",expanded:t!=null?t:!1,formatter:cme(e),parser:(0,sA.createColorStringParser)("int"),pickerLayout:n!=null?n:"popup",supportsAlpha:e,value:r.value,viewProps:r.viewProps})}};var Xy={};Object.defineProperty(Xy,"__esModule",{value:!0});Xy.ObjectColorInputPlugin=void 0;var dme=Sd,pme=zn,aA=ru,fme=yo,Ub=Bi,Jw=Co;function mme(r){return Ub.Color.isRgbaColorObject(r)}function vme(r){return function(e){return(0,pme.colorFromObject)(e,r)}}function gme(r,e){return function(t){return r?(0,aA.colorToObjectRgbaString)(t,e):(0,aA.colorToObjectRgbString)(t,e)}}Xy.ObjectColorInputPlugin={id:"input-color-object",type:"input",accept:function(r,e){if(!Ub.Color.isColorObject(r))return null;var t=(0,Jw.parseColorInputParams)(e);return t?{initialValue:r,params:t}:null},binding:{reader:function(r){return vme((0,Jw.extractColorType)(r.params))},equals:Ub.Color.equals,writer:function(r){return(0,fme.createColorObjectWriter)(mme(r.initialValue),(0,Jw.extractColorType)(r.params))}},controller:function(r){var e,t=Ub.Color.isRgbaColorObject(r.initialValue),n="expanded"in r.params?r.params.expanded:void 0,i="picker"in r.params?r.params.picker:void 0,o=(e=(0,Jw.extractColorType)(r.params))!==null&&e!==void 0?e:"int";return new dme.ColorController(r.document,{colorType:o,expanded:n!=null?n:!1,formatter:gme(t,o),parser:(0,aA.createColorStringParser)(o),pickerLayout:i!=null?i:"popup",supportsAlpha:t,value:r.value,viewProps:r.viewProps})}};var qy={};Object.defineProperty(qy,"__esModule",{value:!0});qy.StringColorInputPlugin=void 0;var Qw=Po,yme=Sd,Ah=ru,_me=yo,wme=Bi,eg=Co;qy.StringColorInputPlugin={id:"input-color-string",type:"input",accept:function(r,e){if(typeof r!="string"||"view"in e&&e.view==="text")return null;var t=(0,Ah.detectStringColorFormat)(r,(0,eg.extractColorType)(e));if(!t)return null;var n=(0,Ah.findColorStringifier)(t);if(!n)return null;var i=(0,eg.parseColorInputParams)(e);return i?{initialValue:r,params:i}:null},binding:{reader:function(r){var e;return(0,Ah.createColorStringBindingReader)((e=(0,eg.extractColorType)(r.params))!==null&&e!==void 0?e:"int")},equals:wme.Color.equals,writer:function(r){var e=(0,Ah.detectStringColorFormat)(r.initialValue,(0,eg.extractColorType)(r.params));if(!e)throw Qw.TpError.shouldNeverHappen();var t=(0,_me.createColorStringWriter)(e);if(!t)throw Qw.TpError.notBindable();return t}},controller:function(r){var e=(0,Ah.detectStringColorFormat)(r.initialValue,(0,eg.extractColorType)(r.params));if(!e)throw Qw.TpError.shouldNeverHappen();var t=(0,Ah.findColorStringifier)(e);if(!t)throw Qw.TpError.shouldNeverHappen();var n="expanded"in r.params?r.params.expanded:void 0,i="picker"in r.params?r.params.picker:void 0;return new yme.ColorController(r.document,{colorType:e.type,expanded:n!=null?n:!1,formatter:t,parser:(0,Ah.createColorStringParser)(e.type),pickerLayout:i!=null?i:"popup",supportsAlpha:e.alpha,value:r.value,viewProps:r.viewProps})}};var Md={};Object.defineProperty(Md,"__esModule",{value:!0});Md.PointNdConstraint=void 0;var bme=function(){function r(e){this.components=e.components,this.asm_=e.assembly}return r.prototype.constrain=function(e){var t=this,n=this.asm_.toComponents(e).map(function(i,o){var s,a;return(a=(s=t.components[o])===null||s===void 0?void 0:s.constrain(i))!==null&&a!==void 0?a:i});return this.asm_.fromComponents(n)},r}();Md.PointNdConstraint=bme;var Cd={},E2={};Object.defineProperty(E2,"__esModule",{value:!0});E2.PointNdTextView=void 0;var xme=er,RN=(0,xme.ClassName)("pndtxt"),Sme=function(){function r(e,t){var n=this;this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(RN()),this.textViews.forEach(function(i){var o=e.createElement("div");o.classList.add(RN("a")),o.appendChild(i.element),n.element.appendChild(o)})}return r}();E2.PointNdTextView=Sme;Object.defineProperty(Cd,"__esModule",{value:!0});Cd.PointNdTextController=void 0;var Mme=eu,Cme=so,Eme=tu,Pme=E2;function Tme(r,e,t){return new Eme.NumberTextController(r,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",baseStep:e.axes[t].baseStep,parser:e.parser,props:e.axes[t].textProps,value:(0,Cme.createValue)(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}var Ame=function(){function r(e,t){var n=this;this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map(function(i,o){return Tme(e,t,o)}),this.acs_.forEach(function(i,o){(0,Mme.connectValues)({primary:n.value,secondary:i.value,forward:function(s){return t.assembly.toComponents(s.rawValue)[o]},backward:function(s,a){var l=t.assembly.toComponents(s.rawValue);return l[o]=a.rawValue,t.assembly.fromComponents(l)}})}),this.view=new Pme.PointNdTextView(e,{textViews:this.acs_.map(function(i){return i.view})})}return r}();Cd.PointNdTextController=Ame;var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.NumberInputPlugin=Ra.createRangeConstraint=Ra.createStepConstraint=void 0;var Jx=Js,kme=Oc,iL=Dc,Lme=zm,Ome=xd,$w=jn,eb=Jr,Dme=tu,Rme=jy,NN=kn,Nme=Rc,zu=Tr,lA=zt;function aj(r,e){return"step"in r&&!(0,lA.isEmpty)(r.step)?new Lme.StepConstraint(r.step,e):null}Ra.createStepConstraint=aj;function lj(r){return"max"in r&&!(0,lA.isEmpty)(r.max)||"min"in r&&!(0,lA.isEmpty)(r.min)?new iL.RangeConstraint({max:r.max,min:r.min}):null}Ra.createRangeConstraint=lj;function Ime(r,e){var t=[],n=aj(r,e);n&&t.push(n);var i=lj(r);i&&t.push(i);var o=(0,zu.createListConstraint)(r.options);return o&&t.push(o),new Jx.CompositeConstraint(t)}function Vme(r){var e=r?(0,Jx.findConstraint)(r,iL.RangeConstraint):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}function zme(r){var e=Vme(r),t=e[0],n=e[1];return[t!=null?t:0,n!=null?n:100]}Ra.NumberInputPlugin={id:"input-number",type:"input",accept:function(r,e){if(typeof r!="number")return null;var t=NN.ParamsParsers,n=(0,NN.parseParams)(e,{format:t.optional.function,max:t.optional.number,min:t.optional.number,options:t.optional.custom(zu.parseListOptions),step:t.optional.number});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return $w.numberFromUnknown},constraint:function(r){return Ime(r.params,r.initialValue)},writer:function(r){return Nme.writePrimitive}},controller:function(r){var e,t,n=r.value,i=r.constraint;if(i&&(0,Jx.findConstraint)(i,kme.ListConstraint))return new Ome.ListController(r.document,{props:eb.ValueMap.fromObject({options:(e=(0,zu.findListItems)(i))!==null&&e!==void 0?e:[]}),value:n,viewProps:r.viewProps});var o=(t="format"in r.params?r.params.format:void 0)!==null&&t!==void 0?t:(0,$w.createNumberFormatter)((0,zu.getSuitableDecimalDigits)(i,n.rawValue));if(i&&(0,Jx.findConstraint)(i,iL.RangeConstraint)){var s=zme(i),a=s[0],l=s[1];return new Rme.SliderTextController(r.document,{baseStep:(0,zu.getBaseStep)(i),parser:$w.parseNumber,sliderProps:eb.ValueMap.fromObject({maxValue:l,minValue:a}),textProps:eb.ValueMap.fromObject({draggingScale:(0,zu.getSuitableDraggingScale)(i,n.rawValue),formatter:o}),value:n,viewProps:r.viewProps})}return new Dme.NumberTextController(r.document,{baseStep:(0,zu.getBaseStep)(i),parser:$w.parseNumber,props:eb.ValueMap.fromObject({draggingScale:(0,zu.getSuitableDraggingScale)(i,n.rawValue),formatter:o}),value:n,viewProps:r.viewProps})}};var Ky={},Yl={},Bme=Ve&&Ve.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.Point2dAssembly=Yl.Point2d=void 0;var Fme=zt,uA=function(){function r(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=e,this.y=t}return r.prototype.getComponents=function(){return[this.x,this.y]},r.isObject=function(e){if((0,Fme.isEmpty)(e))return!1;var t=e.x,n=e.y;return!(typeof t!="number"||typeof n!="number")},r.equals=function(e,t){return e.x===t.x&&e.y===t.y},r.prototype.toObject=function(){return{x:this.x,y:this.y}},r}();Yl.Point2d=uA;Yl.Point2dAssembly={toComponents:function(r){return r.getComponents()},fromComponents:function(r){return new(uA.bind.apply(uA,Bme([void 0],r,!1)))}};var P2={};Object.defineProperty(P2,"__esModule",{value:!0});P2.Point2dView=void 0;var Ume=bi,jme=Wn,Hme=er,Wme=Eo,Rp=(0,Hme.ClassName)("p2d"),Gme=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(Rp()),t.viewProps.bindClassModifiers(this.element),(0,jme.bindValue)(t.expanded,(0,Wme.valueToClassName)(this.element,Rp(void 0,"expanded")));var n=e.createElement("div");n.classList.add(Rp("h")),this.element.appendChild(n);var i=e.createElement("button");i.classList.add(Rp("b")),i.appendChild((0,Ume.createSvgIconElement)(e,"p2dpad")),t.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;var o=e.createElement("div");if(o.classList.add(Rp("t")),n.appendChild(o),this.textElement=o,t.pickerLayout==="inline"){var s=e.createElement("div");s.classList.add(Rp("p")),this.element.appendChild(s),this.pickerElement=s}else this.pickerElement=null}return r}();P2.Point2dView=Gme;var T2={},A2={};Object.defineProperty(A2,"__esModule",{value:!0});A2.Point2dPickerView=void 0;var tb=bi,IN=Lr,Yme=er,Ru=(0,Yme.ClassName)("p2dp"),Xme=function(){function r(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=t.invertsY,this.maxValue_=t.maxValue,this.element=e.createElement("div"),this.element.classList.add(Ru()),t.layout==="popup"&&this.element.classList.add(Ru(void 0,"p"));var n=e.createElement("div");n.classList.add(Ru("p")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;var i=e.createElementNS(tb.SVG_NS,"svg");i.classList.add(Ru("g")),this.padElement.appendChild(i),this.svgElem_=i;var o=e.createElementNS(tb.SVG_NS,"line");o.classList.add(Ru("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);var s=e.createElementNS(tb.SVG_NS,"line");s.classList.add(Ru("ax")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","0"),s.setAttributeNS(null,"x2","50%"),s.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(s);var a=e.createElementNS(tb.SVG_NS,"line");a.classList.add(Ru("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;var l=e.createElement("div");l.classList.add(Ru("m")),this.padElement.appendChild(l),this.markerElem_=l,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}return Object.defineProperty(r.prototype,"allFocusableElements",{get:function(){return[this.padElement]},enumerable:!1,configurable:!0}),r.prototype.update_=function(){var e=this.value.rawValue.getComponents(),t=e[0],n=e[1],i=this.maxValue_,o=(0,IN.mapRange)(t,-i,+i,0,100),s=(0,IN.mapRange)(n,-i,+i,0,100),a=this.invertsY_?100-s:s;this.lineElem_.setAttributeNS(null,"x2",o+"%"),this.lineElem_.setAttributeNS(null,"y2",a+"%"),this.markerElem_.style.left=o+"%",this.markerElem_.style.top=a+"%"},r.prototype.onValueChange_=function(){this.update_()},r.prototype.onFoldableChange_=function(){this.update_()},r}();A2.Point2dPickerView=Xme;Object.defineProperty(T2,"__esModule",{value:!0});T2.Point2dPickerController=void 0;var VN=Lr,bg=ii,qme=$s,zN=Yl,Kme=A2;function BN(r,e,t){return[(0,bg.getStepForKey)(e[0],(0,bg.getHorizontalStepKeys)(r)),(0,bg.getStepForKey)(e[1],(0,bg.getVerticalStepKeys)(r))*(t?1:-1)]}var Zme=function(){function r(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.baseSteps_=t.baseSteps,this.maxValue_=t.maxValue,this.invertsY_=t.invertsY,this.view=new Kme.Point2dPickerView(e,{invertsY:this.invertsY_,layout:t.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qme.PointerHandler(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}return r.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=this.maxValue_,i=(0,VN.mapRange)(e.point.x,0,e.bounds.width,-n,+n),o=(0,VN.mapRange)(this.invertsY_?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-n,+n);this.value.setRawValue(new zN.Point2d(i,o),t)}},r.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},r.prototype.onPadKeyDown_=function(e){(0,bg.isArrowKey)(e.key)&&e.preventDefault();var t=BN(e,this.baseSteps_,this.invertsY_),n=t[0],i=t[1];n===0&&i===0||this.value.setRawValue(new zN.Point2d(this.value.rawValue.x+n,this.value.rawValue.y+i),{forceEmit:!1,last:!1})},r.prototype.onPadKeyUp_=function(e){var t=BN(e,this.baseSteps_,this.invertsY_),n=t[0],i=t[1];n===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r}();T2.Point2dPickerController=Zme;Object.defineProperty(Ky,"__esModule",{value:!0});Ky.Point2dController=void 0;var FN=Ji,Jme=Bm,UN=bi,Qme=eu,$me=zt,eve=Cd,tve=Yl,rve=P2,nve=T2,ive=function(){function r(e,t){var n=this,i,o;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=FN.Foldable.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new Jme.PopupController(e,{viewProps:this.viewProps}):null;var s=new nve.Point2dPickerController(e,{baseSteps:[t.axes[0].baseStep,t.axes[1].baseStep],invertsY:t.invertsY,layout:t.pickerLayout,maxValue:t.maxValue,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(function(a){a.addEventListener("blur",n.onPopupChildBlur_),a.addEventListener("keydown",n.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new eve.PointNdTextController(e,{assembly:tve.Point2dAssembly,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new rve.Point2dView(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(o=this.view.buttonElement)===null||o===void 0||o.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),(0,Qme.connectValues)({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(a){return a.rawValue},backward:function(a,l){return l.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),(0,FN.bindFoldable)(this.foldable_,this.view.pickerElement))}return r.prototype.onPadButtonBlur_=function(e){if(this.popC_){var t=this.view.element,n=(0,$me.forceCast)(e.relatedTarget);(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}},r.prototype.onPadButtonClick_=function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()},r.prototype.onPopupChildBlur_=function(e){if(this.popC_){var t=this.popC_.view.element,n=(0,UN.findNextTarget)(e);n&&t.contains(n)||n&&n===this.view.buttonElement&&!(0,UN.supportsTouch)(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}},r.prototype.onPopupChildKeydown_=function(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()},r}();Ky.Point2dController=ive;var qs={},sm={};Object.defineProperty(sm,"__esModule",{value:!0});sm.writePoint2d=sm.point2dFromUnknown=void 0;var LE=Yl;function ove(r){return LE.Point2d.isObject(r)?new LE.Point2d(r.x,r.y):new LE.Point2d}sm.point2dFromUnknown=ove;function sve(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y)}sm.writePoint2d=sve;Object.defineProperty(qs,"__esModule",{value:!0});qs.Point2dInputPlugin=qs.getSuitableMaxValue=qs.createDimensionConstraint=void 0;var uj=Js,ave=Dc,cj=jn,lve=Jr,jN=kn,uve=Po,Ef=Tr,Qx=Md,HN=Ra,cve=Ky,WN=sm,cA=Yl;function hA(r,e){if(r){var t=[],n=(0,HN.createStepConstraint)(r,e);n&&t.push(n);var i=(0,HN.createRangeConstraint)(r);return i&&t.push(i),new uj.CompositeConstraint(t)}}qs.createDimensionConstraint=hA;function hve(r,e){return new Qx.PointNdConstraint({assembly:cA.Point2dAssembly,components:[hA("x"in r?r.x:void 0,e.x),hA("y"in r?r.y:void 0,e.y)]})}function GN(r,e){var t,n,i=r&&(0,uj.findConstraint)(r,ave.RangeConstraint);if(i)return Math.max(Math.abs((t=i.minValue)!==null&&t!==void 0?t:0),Math.abs((n=i.maxValue)!==null&&n!==void 0?n:0));var o=(0,Ef.getBaseStep)(r);return Math.max(Math.abs(o)*10,Math.abs(e)*10)}function hj(r,e){var t=e instanceof Qx.PointNdConstraint?e.components[0]:void 0,n=e instanceof Qx.PointNdConstraint?e.components[1]:void 0,i=GN(t,r.x),o=GN(n,r.y);return Math.max(i,o)}qs.getSuitableMaxValue=hj;function YN(r,e){return{baseStep:(0,Ef.getBaseStep)(e),constraint:e,textProps:lve.ValueMap.fromObject({draggingScale:(0,Ef.getSuitableDraggingScale)(e,r),formatter:(0,cj.createNumberFormatter)((0,Ef.getSuitableDecimalDigits)(e,r))})}}function dve(r){if(!("y"in r))return!1;var e=r.y;return e&&"inverted"in e?!!e.inverted:!1}qs.Point2dInputPlugin={id:"input-point2d",type:"input",accept:function(r,e){if(!cA.Point2d.isObject(r))return null;var t=jN.ParamsParsers,n=(0,jN.parseParams)(e,{expanded:t.optional.boolean,picker:t.optional.custom(Ef.parsePickerLayout),x:t.optional.custom(Ef.parsePointDimensionParams),y:t.optional.object({inverted:t.optional.boolean,max:t.optional.number,min:t.optional.number,step:t.optional.number})});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return WN.point2dFromUnknown},constraint:function(r){return hve(r.params,r.initialValue)},equals:cA.Point2d.equals,writer:function(r){return WN.writePoint2d}},controller:function(r){var e=r.document,t=r.value,n=r.constraint;if(!(n instanceof Qx.PointNdConstraint))throw uve.TpError.shouldNeverHappen();var i="expanded"in r.params?r.params.expanded:void 0,o="picker"in r.params?r.params.picker:void 0;return new cve.Point2dController(e,{axes:[YN(t.rawValue.x,n.components[0]),YN(t.rawValue.y,n.components[1])],expanded:i!=null?i:!1,invertsY:dve(r.params),maxValue:hj(t.rawValue,n),parser:cj.parseNumber,pickerLayout:o!=null?o:"popup",value:t,viewProps:r.viewProps})}};var Zy={},am={},ld={},pve=Ve&&Ve.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(ld,"__esModule",{value:!0});ld.Point3dAssembly=ld.Point3d=void 0;var fve=zt,dA=function(){function r(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.z=n}return r.prototype.getComponents=function(){return[this.x,this.y,this.z]},r.isObject=function(e){if((0,fve.isEmpty)(e))return!1;var t=e.x,n=e.y,i=e.z;return!(typeof t!="number"||typeof n!="number"||typeof i!="number")},r.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z},r.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z}},r}();ld.Point3d=dA;ld.Point3dAssembly={toComponents:function(r){return r.getComponents()},fromComponents:function(r){return new(dA.bind.apply(dA,pve([void 0],r,!1)))}};Object.defineProperty(am,"__esModule",{value:!0});am.writePoint3d=am.point3dFromUnknown=void 0;var OE=ld;function mve(r){return OE.Point3d.isObject(r)?new OE.Point3d(r.x,r.y,r.z):new OE.Point3d}am.point3dFromUnknown=mve;function vve(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y),r.writeProperty("z",e.z)}am.writePoint3d=vve;Object.defineProperty(Zy,"__esModule",{value:!0});Zy.Point3dInputPlugin=void 0;var dj=jn,gve=Jr,XN=kn,yve=Po,Pf=Tr,pj=Md,_ve=Cd,DE=qs,qN=am,jb=ld;function wve(r,e){return new pj.PointNdConstraint({assembly:jb.Point3dAssembly,components:[(0,DE.createDimensionConstraint)("x"in r?r.x:void 0,e.x),(0,DE.createDimensionConstraint)("y"in r?r.y:void 0,e.y),(0,DE.createDimensionConstraint)("z"in r?r.z:void 0,e.z)]})}function RE(r,e){return{baseStep:(0,Pf.getBaseStep)(e),constraint:e,textProps:gve.ValueMap.fromObject({draggingScale:(0,Pf.getSuitableDraggingScale)(e,r),formatter:(0,dj.createNumberFormatter)((0,Pf.getSuitableDecimalDigits)(e,r))})}}Zy.Point3dInputPlugin={id:"input-point3d",type:"input",accept:function(r,e){if(!jb.Point3d.isObject(r))return null;var t=XN.ParamsParsers,n=(0,XN.parseParams)(e,{x:t.optional.custom(Pf.parsePointDimensionParams),y:t.optional.custom(Pf.parsePointDimensionParams),z:t.optional.custom(Pf.parsePointDimensionParams)});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return qN.point3dFromUnknown},constraint:function(r){return wve(r.params,r.initialValue)},equals:jb.Point3d.equals,writer:function(r){return qN.writePoint3d}},controller:function(r){var e=r.value,t=r.constraint;if(!(t instanceof pj.PointNdConstraint))throw yve.TpError.shouldNeverHappen();return new _ve.PointNdTextController(r.document,{assembly:jb.Point3dAssembly,axes:[RE(e.rawValue.x,t.components[0]),RE(e.rawValue.y,t.components[1]),RE(e.rawValue.z,t.components[2])],parser:dj.parseNumber,value:e,viewProps:r.viewProps})}};var Jy={},lm={},ud={},bve=Ve&&Ve.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(ud,"__esModule",{value:!0});ud.Point4dAssembly=ud.Point4d=void 0;var xve=zt,pA=function(){function r(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=e,this.y=t,this.z=n,this.w=i}return r.prototype.getComponents=function(){return[this.x,this.y,this.z,this.w]},r.isObject=function(e){if((0,xve.isEmpty)(e))return!1;var t=e.x,n=e.y,i=e.z,o=e.w;return!(typeof t!="number"||typeof n!="number"||typeof i!="number"||typeof o!="number")},r.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},r.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z,w:this.w}},r}();ud.Point4d=pA;ud.Point4dAssembly={toComponents:function(r){return r.getComponents()},fromComponents:function(r){return new(pA.bind.apply(pA,bve([void 0],r,!1)))}};Object.defineProperty(lm,"__esModule",{value:!0});lm.writePoint4d=lm.point4dFromUnknown=void 0;var NE=ud;function Sve(r){return NE.Point4d.isObject(r)?new NE.Point4d(r.x,r.y,r.z,r.w):new NE.Point4d}lm.point4dFromUnknown=Sve;function Mve(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y),r.writeProperty("z",e.z),r.writeProperty("w",e.w)}lm.writePoint4d=Mve;Object.defineProperty(Jy,"__esModule",{value:!0});Jy.Point4dInputPlugin=void 0;var fj=jn,Cve=Jr,KN=kn,Eve=Po,jh=Tr,mj=Md,Pve=Cd,rb=qs,ZN=lm,Hb=ud;function Tve(r,e){return new mj.PointNdConstraint({assembly:Hb.Point4dAssembly,components:[(0,rb.createDimensionConstraint)("x"in r?r.x:void 0,e.x),(0,rb.createDimensionConstraint)("y"in r?r.y:void 0,e.y),(0,rb.createDimensionConstraint)("z"in r?r.z:void 0,e.z),(0,rb.createDimensionConstraint)("w"in r?r.w:void 0,e.w)]})}function Ave(r,e){return{baseStep:(0,jh.getBaseStep)(e),constraint:e,textProps:Cve.ValueMap.fromObject({draggingScale:(0,jh.getSuitableDraggingScale)(e,r),formatter:(0,fj.createNumberFormatter)((0,jh.getSuitableDecimalDigits)(e,r))})}}Jy.Point4dInputPlugin={id:"input-point4d",type:"input",accept:function(r,e){if(!Hb.Point4d.isObject(r))return null;var t=KN.ParamsParsers,n=(0,KN.parseParams)(e,{x:t.optional.custom(jh.parsePointDimensionParams),y:t.optional.custom(jh.parsePointDimensionParams),z:t.optional.custom(jh.parsePointDimensionParams),w:t.optional.custom(jh.parsePointDimensionParams)});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return ZN.point4dFromUnknown},constraint:function(r){return Tve(r.params,r.initialValue)},equals:Hb.Point4d.equals,writer:function(r){return ZN.writePoint4d}},controller:function(r){var e=r.value,t=r.constraint;if(!(t instanceof mj.PointNdConstraint))throw Eve.TpError.shouldNeverHappen();return new Pve.PointNdTextController(r.document,{assembly:Hb.Point4dAssembly,axes:e.rawValue.getComponents().map(function(n,i){return Ave(n,t.components[i])}),parser:fj.parseNumber,value:e,viewProps:r.viewProps})}};var Qy={};Object.defineProperty(Qy,"__esModule",{value:!0});Qy.StringInputPlugin=void 0;var vj=Js,kve=Oc,Lve=xd,Ove=Fm,JN=wc,QN=Jr,$N=kn,Dve=Rc,fA=Tr;function Rve(r){var e=[],t=(0,fA.createListConstraint)(r.options);return t&&e.push(t),new vj.CompositeConstraint(e)}Qy.StringInputPlugin={id:"input-string",type:"input",accept:function(r,e){if(typeof r!="string")return null;var t=$N.ParamsParsers,n=(0,$N.parseParams)(e,{options:t.optional.custom(fA.parseListOptions)});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return JN.stringFromUnknown},constraint:function(r){return Rve(r.params)},writer:function(r){return Dve.writePrimitive}},controller:function(r){var e,t=r.document,n=r.value,i=r.constraint;return i&&(0,vj.findConstraint)(i,kve.ListConstraint)?new Lve.ListController(t,{props:QN.ValueMap.fromObject({options:(e=(0,fA.findListItems)(i))!==null&&e!==void 0?e:[]}),value:n,viewProps:r.viewProps}):new Ove.TextController(t,{parser:function(o){return o},props:QN.ValueMap.fromObject({formatter:JN.formatString}),value:n,viewProps:r.viewProps})}};var Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.Constants=void 0;Nc.Constants={monitor:{defaultInterval:200,defaultLineCount:3}};var $y={},Ed={},k2={};Object.defineProperty(k2,"__esModule",{value:!0});k2.MultiLogView=void 0;var Nve=er,eI=(0,Nve.ClassName)("mll"),Ive=function(){function r(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(eI()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("textarea");n.classList.add(eI("i")),n.style.height="calc(var(--bld-us) * "+t.lineCount+")",n.readOnly=!0,t.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return r.prototype.update_=function(){var e=this,t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,i=[];this.value.rawValue.forEach(function(o){o!==void 0&&i.push(e.formatter_(o))}),t.textContent=i.join(`
`),n&&(t.scrollTop=t.scrollHeight)},r.prototype.onValueUpdate_=function(){this.update_()},r}();k2.MultiLogView=Ive;Object.defineProperty(Ed,"__esModule",{value:!0});Ed.MultiLogController=void 0;var Vve=k2,zve=function(){function r(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Vve.MultiLogView(e,{formatter:t.formatter,lineCount:t.lineCount,value:this.value,viewProps:this.viewProps})}return r}();Ed.MultiLogController=zve;var Pd={},L2={};Object.defineProperty(L2,"__esModule",{value:!0});L2.SingleLogView=void 0;var Bve=er,tI=(0,Bve.ClassName)("sgl"),Fve=function(){function r(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(tI()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("input");n.classList.add(tI("i")),n.readOnly=!0,n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return r.prototype.update_=function(){var e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""},r.prototype.onValueUpdate_=function(){this.update_()},r}();L2.SingleLogView=Fve;Object.defineProperty(Pd,"__esModule",{value:!0});Pd.SingleLogController=void 0;var Uve=L2,jve=function(){function r(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Uve.SingleLogView(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}return r}();Pd.SingleLogController=jve;Object.defineProperty($y,"__esModule",{value:!0});$y.BooleanMonitorPlugin=void 0;var IE=Da,rI=kn,Hve=Nc,Wve=Ed,Gve=Pd;$y.BooleanMonitorPlugin={id:"monitor-bool",type:"monitor",accept:function(r,e){if(typeof r!="boolean")return null;var t=rI.ParamsParsers,n=(0,rI.parseParams)(e,{lineCount:t.optional.number});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return IE.boolFromUnknown}},controller:function(r){var e;return r.value.rawValue.length===1?new Gve.SingleLogController(r.document,{formatter:IE.BooleanFormatter,value:r.value,viewProps:r.viewProps}):new Wve.MultiLogController(r.document,{formatter:IE.BooleanFormatter,lineCount:(e=r.params.lineCount)!==null&&e!==void 0?e:Hve.Constants.monitor.defaultLineCount,value:r.value,viewProps:r.viewProps})}};var e_={},O2={};Object.defineProperty(O2,"__esModule",{value:!0});O2.GraphLogView=void 0;var VE=bi,nb=Lr,gj=er,Nu=(0,gj.ClassName)("grl"),Yve=function(){function r(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Nu()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var n=e.createElementNS(VE.SVG_NS,"svg");n.classList.add(Nu("g")),n.style.height="calc(var(--bld-us) * "+t.lineCount+")",this.element.appendChild(n),this.svgElem_=n;var i=e.createElementNS(VE.SVG_NS,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;var o=e.createElement("div");o.classList.add(Nu("t"),(0,gj.ClassName)("tt")()),this.element.appendChild(o),this.tooltipElem_=o,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return Object.defineProperty(r.prototype,"graphElement",{get:function(){return this.svgElem_},enumerable:!1,configurable:!0}),r.prototype.update_=function(){var e=this.svgElem_.getBoundingClientRect(),t=this.value.rawValue.length-1,n=this.props_.get("minValue"),i=this.props_.get("maxValue"),o=[];this.value.rawValue.forEach(function(d,f){if(d!==void 0){var m=(0,nb.mapRange)(f,0,t,0,e.width),g=(0,nb.mapRange)(d,n,i,e.height,0);o.push([m,g].join(","))}}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));var s=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){s.classList.remove(Nu("t","a"));return}var l=(0,nb.mapRange)(this.cursor_.rawValue,0,t,0,e.width),c=(0,nb.mapRange)(a,n,i,e.height,0);s.style.left=l+"px",s.style.top=c+"px",s.textContent=""+this.formatter_(a),s.classList.contains(Nu("t","a"))||(s.classList.add(Nu("t","a"),Nu("t","in")),(0,VE.forceReflow)(s),s.classList.remove(Nu("t","in")))},r.prototype.onValueUpdate_=function(){this.update_()},r.prototype.onCursorChange_=function(){this.update_()},r}();O2.GraphLogView=Yve;Object.defineProperty(e_,"__esModule",{value:!0});e_.GraphLogController=void 0;var Xve=bi,qve=so,nI=Lr,Kve=$s,Zve=O2,Jve=function(){function r(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=(0,qve.createValue)(-1),this.view=new Zve.GraphLogView(e,{cursor:this.cursor_,formatter:t.formatter,lineCount:t.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!(0,Xve.supportsTouch)(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{var n=new Kve.PointerHandler(this.view.element);n.emitter.on("down",this.onGraphPointerDown_),n.emitter.on("move",this.onGraphPointerMove_),n.emitter.on("up",this.onGraphPointerUp_)}}return r.prototype.onGraphMouseLeave_=function(){this.cursor_.rawValue=-1},r.prototype.onGraphMouseMove_=function(e){var t=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor((0,nI.mapRange)(e.offsetX,0,t.width,0,this.value.rawValue.length))},r.prototype.onGraphPointerDown_=function(e){this.onGraphPointerMove_(e)},r.prototype.onGraphPointerMove_=function(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor((0,nI.mapRange)(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))},r.prototype.onGraphPointerUp_=function(){this.cursor_.rawValue=-1},r}();e_.GraphLogController=Jve;var t_={};Object.defineProperty(t_,"__esModule",{value:!0});t_.NumberMonitorPlugin=void 0;var yj=jn,Qve=Jr,iI=kn,_j=Nc,$ve=zt,ege=Ed,tge=Pd,rge=e_;function mA(r){return"format"in r&&!(0,$ve.isEmpty)(r.format)?r.format:(0,yj.createNumberFormatter)(2)}function nge(r){var e;return r.value.rawValue.length===1?new tge.SingleLogController(r.document,{formatter:mA(r.params),value:r.value,viewProps:r.viewProps}):new ege.MultiLogController(r.document,{formatter:mA(r.params),lineCount:(e=r.params.lineCount)!==null&&e!==void 0?e:_j.Constants.monitor.defaultLineCount,value:r.value,viewProps:r.viewProps})}function ige(r){var e,t,n;return new rge.GraphLogController(r.document,{formatter:mA(r.params),lineCount:(e=r.params.lineCount)!==null&&e!==void 0?e:_j.Constants.monitor.defaultLineCount,props:Qve.ValueMap.fromObject({maxValue:(t="max"in r.params?r.params.max:null)!==null&&t!==void 0?t:100,minValue:(n="min"in r.params?r.params.min:null)!==null&&n!==void 0?n:0}),value:r.value,viewProps:r.viewProps})}function oI(r){return"view"in r&&r.view==="graph"}t_.NumberMonitorPlugin={id:"monitor-number",type:"monitor",accept:function(r,e){if(typeof r!="number")return null;var t=iI.ParamsParsers,n=(0,iI.parseParams)(e,{format:t.optional.function,lineCount:t.optional.number,max:t.optional.number,min:t.optional.number,view:t.optional.string});return n?{initialValue:r,params:n}:null},binding:{defaultBufferSize:function(r){return oI(r)?64:1},reader:function(r){return yj.numberFromUnknown}},controller:function(r){return oI(r.params)?ige(r):nge(r)}};var r_={};Object.defineProperty(r_,"__esModule",{value:!0});r_.StringMonitorPlugin=void 0;var zE=wc,sI=kn,oge=Nc,sge=Ed,age=Pd;r_.StringMonitorPlugin={id:"monitor-string",type:"monitor",accept:function(r,e){if(typeof r!="string")return null;var t=sI.ParamsParsers,n=(0,sI.parseParams)(e,{lineCount:t.optional.number,multiline:t.optional.boolean});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return zE.stringFromUnknown}},controller:function(r){var e,t=r.value,n=t.rawValue.length>1||"multiline"in r.params&&r.params.multiline;return n?new sge.MultiLogController(r.document,{formatter:zE.formatString,lineCount:(e=r.params.lineCount)!==null&&e!==void 0?e:oge.Constants.monitor.defaultLineCount,value:t,viewProps:r.viewProps}):new age.SingleLogController(r.document,{formatter:zE.formatString,value:t,viewProps:r.viewProps})}};var wj={};Object.defineProperty(wj,"__esModule",{value:!0});var D2={},n_={},R2={},N2={};Object.defineProperty(N2,"__esModule",{value:!0});N2.InputBinding=void 0;var lge=bn,uge=function(){function r(e){this.onValueChange_=this.onValueChange_.bind(this),this.reader=e.reader,this.writer=e.writer,this.emitter=new lge.Emitter,this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.target=e.target,this.read()}return r.prototype.read=function(){var e=this.target.read();e!==void 0&&(this.value.rawValue=this.reader(e))},r.prototype.write_=function(e){this.writer(this.target,e)},r.prototype.onValueChange_=function(e){this.write_(e.rawValue),this.emitter.emit("change",{options:e.options,rawValue:e.rawValue,sender:this})},r}();N2.InputBinding=uge;Object.defineProperty(R2,"__esModule",{value:!0});R2.createInputBindingController=void 0;var cge=Tc,hge=Ac,dge=N2,pge=Jr,fge=so,mge=Lc,vge=kn,gge=zt;function yge(r,e){var t=r.accept(e.target.read(),e.params);if((0,gge.isEmpty)(t))return null;var n=vge.ParamsParsers,i={target:e.target,initialValue:t.initialValue,params:t.params},o=r.binding.reader(i),s=r.binding.constraint?r.binding.constraint(i):void 0,a=(0,fge.createValue)(o(t.initialValue),{constraint:s,equals:r.binding.equals}),l=new dge.InputBinding({reader:o,target:e.target,value:a,writer:r.binding.writer(i)}),c=n.optional.boolean(e.params.disabled).value,d=n.optional.boolean(e.params.hidden).value,f=r.controller({constraint:s,document:e.document,initialValue:t.initialValue,params:t.params,value:l.value,viewProps:mge.ViewProps.create({disabled:c,hidden:d})}),m=n.optional.string(e.params.label).value;return new hge.InputBindingController(e.document,{binding:l,blade:(0,cge.createBlade)(),props:pge.ValueMap.fromObject({label:m!=null?m:e.target.key}),valueController:f})}R2.createInputBindingController=yge;var I2={},V2={};Object.defineProperty(V2,"__esModule",{value:!0});V2.MonitorBinding=void 0;var _ge=bc,wge=bn,bge=function(){function r(e){this.onTick_=this.onTick_.bind(this),this.reader_=e.reader,this.target=e.target,this.emitter=new wge.Emitter,this.value=e.value,this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}return r.prototype.dispose=function(){this.ticker.dispose()},r.prototype.read=function(){var e=this.target.read();if(e!==void 0){var t=this.value.rawValue,n=this.reader_(e);this.value.rawValue=(0,_ge.createPushedBuffer)(t,n),this.emitter.emit("update",{rawValue:n,sender:this})}},r.prototype.onTick_=function(e){this.read()},r}();V2.MonitorBinding=bge;Object.defineProperty(I2,"__esModule",{value:!0});I2.createMonitorBindingController=void 0;var xge=Tc,Sge=kc,Mge=V2,Cge=Ry,Ege=Dy,Pge=bc,Tge=Jr,Age=Lc,kge=kn,Lge=Nc,Oge=zt;function Dge(r,e){return e===0?new Ege.ManualTicker:new Cge.IntervalTicker(r,e!=null?e:Lge.Constants.monitor.defaultInterval)}function Rge(r,e){var t,n,i,o=kge.ParamsParsers,s=r.accept(e.target.read(),e.params);if((0,Oge.isEmpty)(s))return null;var a={target:e.target,initialValue:s.initialValue,params:s.params},l=r.binding.reader(a),c=(n=(t=o.optional.number(e.params.bufferSize).value)!==null&&t!==void 0?t:r.binding.defaultBufferSize&&r.binding.defaultBufferSize(s.params))!==null&&n!==void 0?n:1,d=o.optional.number(e.params.interval).value,f=new Mge.MonitorBinding({reader:l,target:e.target,ticker:Dge(e.document,d),value:(0,Pge.initializeBuffer)(c)}),m=o.optional.boolean(e.params.disabled).value,g=o.optional.boolean(e.params.hidden).value,b=r.controller({document:e.document,params:s.params,value:f.value,viewProps:Age.ViewProps.create({disabled:m,hidden:g})}),_=(i=o.optional.string(e.params.label).value)!==null&&i!==void 0?i:e.target.key;return new Sge.MonitorBindingController(e.document,{binding:f,blade:(0,xge.createBlade)(),props:Tge.ValueMap.fromObject({label:_}),valueController:b})}I2.createMonitorBindingController=Rge;var BE=Ve&&Ve.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(n_,"__esModule",{value:!0});n_.PluginPool=void 0;var Nge=Rm,Ige=Ac,Vge=Nm,zge=kc,Bge=Oy,Fge=_c,Uge=by(),tg=Po,jge=R2,Hge=zt,Wge=I2,Gge=function(){function r(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}return r.prototype.getAll=function(){return BE(BE(BE([],this.pluginsMap_.blades,!0),this.pluginsMap_.inputs,!0),this.pluginsMap_.monitors,!0)},r.prototype.register=function(e){e.type==="blade"?this.pluginsMap_.blades.unshift(e):e.type==="input"?this.pluginsMap_.inputs.unshift(e):e.type==="monitor"&&this.pluginsMap_.monitors.unshift(e)},r.prototype.createInput=function(e,t,n){var i=t.read();if((0,Hge.isEmpty)(i))throw new tg.TpError({context:{key:t.key},type:"nomatchingcontroller"});var o=this.pluginsMap_.inputs.reduce(function(s,a){return s!=null?s:(0,jge.createInputBindingController)(a,{document:e,target:t,params:n})},null);if(o)return o;throw new tg.TpError({context:{key:t.key},type:"nomatchingcontroller"})},r.prototype.createMonitor=function(e,t,n){var i=this.pluginsMap_.monitors.reduce(function(o,s){return o!=null?o:(0,Wge.createMonitorBindingController)(s,{document:e,params:n,target:t})},null);if(i)return i;throw new tg.TpError({context:{key:t.key},type:"nomatchingcontroller"})},r.prototype.createBlade=function(e,t){var n=this.pluginsMap_.blades.reduce(function(i,o){return i!=null?i:(0,Bge.createBladeController)(o,{document:e,params:t})},null);if(!n)throw new tg.TpError({type:"nomatchingview",context:{params:t}});return n},r.prototype.createBladeApi=function(e){var t=this;if(e instanceof Ige.InputBindingController)return new Nge.InputBindingApi(e);if(e instanceof zge.MonitorBindingController)return new Vge.MonitorBindingApi(e);if(e instanceof Uge.RackController)return new Fge.RackApi(e,this);var n=this.pluginsMap_.blades.reduce(function(i,o){return i!=null?i:o.api({controller:e,pool:t})},null);if(!n)throw tg.TpError.shouldNeverHappen();return n},r}();n_.PluginPool=Gge;Object.defineProperty(D2,"__esModule",{value:!0});D2.createDefaultPluginPool=void 0;var Yge=vy,Xge=My,qge=Py,Kge=Ly,Zge=Gy,Jge=Yy,Qge=Xy,$ge=qy,e0e=Ra,t0e=qs,r0e=Zy,n0e=Jy,i0e=Qy,o0e=$y,s0e=t_,a0e=r_,l0e=n_;function u0e(){var r=new l0e.PluginPool;return[t0e.Point2dInputPlugin,r0e.Point3dInputPlugin,n0e.Point4dInputPlugin,i0e.StringInputPlugin,e0e.NumberInputPlugin,$ge.StringColorInputPlugin,Qge.ObjectColorInputPlugin,Jge.NumberColorInputPlugin,Zge.BooleanInputPlugin,o0e.BooleanMonitorPlugin,a0e.StringMonitorPlugin,s0e.NumberMonitorPlugin,Yge.ButtonBladePlugin,Xge.FolderBladePlugin,qge.SeparatorBladePlugin,Kge.TabBladePlugin].forEach(function(e){r.register(e)}),r}D2.createDefaultPluginPool=u0e;(function(r){var e=Ve&&Ve.__createBinding||(Object.create?function(i,o,s,a){a===void 0&&(a=s),Object.defineProperty(i,a,{enumerable:!0,get:function(){return o[s]}})}:function(i,o,s,a){a===void 0&&(a=s),i[a]=o[s]}),t=Ve&&Ve.__exportStar||function(i,o){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&e(o,i,s)};Object.defineProperty(r,"__esModule",{value:!0}),r.createBladeController=void 0,t(Ga,r),t(SU,r),t(MU,r),t(ni,r),t(dy,r),t(py,r),t(fy,r),t(my,r),t(vy,r),t($l,r),t(bd,r),t(gy,r),t(Tc,r),t(Ji,r),t(yy,r),t(_y,r),t(xy,r),t(My,r),t(Rm,r),t(Ac,r),t(wd,r),t(n2,r),t(Lm,r),t(Nm,r),t(kc,r),t(Cy,r),t(Ey,r),t(Py,r),t(Ty,r),t(Ay,r),t(ky,r),t(Vm,r),t(Ly,r);var n=Oy;Object.defineProperty(r,"createBladeController",{enumerable:!0,get:function(){return n.createBladeController}}),t(Dy,r),t(Ry,r),t(kU,r),t(Js,r),t(OU,r),t(Oc,r),t(Dc,r),t(zm,r),t(DU,r),t(xd,r),t(Bm,r),t(Fm,r),t(RU,r),t(Da,r),t(IU,r),t(jn,r),t(UU,r),t(zy,r),t(wc,r),t(bc,r),t(bn,r),t(Wn,r),t(HU,r),t(Jr,r),t(eu,r),t(so,r),t(Lc,r),t(tu,r),t(Fy,r),t(jy,r),t(By,r),t(Uy,r),t(Hy,r),t(er,r),t(Ny,r),t(wy,r),t($s,r),t(Iy,r),t(Eo,r),t(Vy,r),t(YU,r),t(c2,r),t(bi,r),t(Lr,r),t(kn,r),t(XU,r),t(Rc,r),t(Po,r),t(ii,r),t(Tr,r),t(Wy,r),t(Gy,r),t(Sd,r),t(zn,r),t(ru,r),t(Bi,r),t(Yy,r),t(Xy,r),t(qy,r),t(Md,r),t(Cd,r),t(Ra,r),t(Ky,r),t(qs,r),t(Zy,r),t(Jy,r),t(Qy,r),t(Nc,r),t(zt,r),t($y,r),t(Ed,r),t(Pd,r),t(e_,r),t(t_,r),t(r_,r),t(wj,r),t(D2,r),t(n_,r)})(xU);const c0e={...wU,shadowDistance:Number},h0e={...bU,shadowDistance:new Yr(2e3),shadowResolution:new Yr(1024)};class Tf extends ly{constructor(){super(ire),F(this,"defaultShadowResolution",1024),F(this,"shadowDistanceState",new ht(void 0)),this.createEffect(()=>{const e=this.lightState.get();if(e)return rt.add(e.target),rt.attach(e),()=>{rt.remove(e.target),rt.remove(e)}},[this.lightState.get]),this.createEffect(()=>{var e,t;const n=this.lightState.get();if(!n)return;const i=Ye().userData.manager,o=i?Math.max(xU.mapRange(i.innerZ*(i.fov/75)*(1/i.zoom),500,1e3,1,1.5),1):1,s=(t=(e=this.shadowDistanceState.get())!=null?e:qT())!=null?t:2e3,a=n.shadow.camera;a.zoom=500/o/s,a.updateProjectionMatrix();const l=this.shadowBiasComputedState.get(),c=this.shadowResolutionComputedState.get();if(!l||!c)return;const d=l;return n.shadow.bias=d*o*(this.defaultShadowResolution/c)*(s/2e3),()=>{n.shadow.bias=d}},[this.lightState.get,this.shadowDistanceState.get,qT,Ye,this.shadowBiasComputedState.get,this.shadowResolutionComputedState.get]),this.createEffect(()=>{const e=this.lightState.get();if(!e)return;const t=Ye(),n=Or(()=>{const i=vr(t),o=vr(this.outerObject3d);e.position.copy(i).add(o),e.target.position.copy(i).sub(o)});return()=>{n.cancel()}},[Ye,this.lightState.get])}getWorldPosition(){return Xs(vr(this.outerObject3d))}get shadowDistance(){return this.shadowDistanceState.get()}set shadowDistance(e){this.shadowDistanceState.set(e)}}F(Tf,"componentName","directionalLight"),F(Tf,"defaults",h0e),F(Tf,"schema",c0e);const d0e=Object.freeze(Object.defineProperty({__proto__:null,default:Tf},Symbol.toStringTag,{value:"Module"})),p0e={...uy,groundColor:String},f0e={...cy,groundColor:"#ffffff",castShadow:!1};class Af extends ly{constructor(){super(Qte),this.innerY=0}get groundColor(){const e=this.lightState.get();return e?"#"+e.groundColor.getHexString():"#ffffff"}set groundColor(e){this.cancelHandle("groundColor",()=>this.lightState.get(t=>t&&(t.groundColor=new Je(e))))}get castShadow(){return!1}set castShadow(e){}}F(Af,"componentName","skyLight"),F(Af,"defaults",f0e),F(Af,"schema",p0e);const m0e=Object.freeze(Object.defineProperty({__proto__:null,default:Af},Symbol.toStringTag,{value:"Module"})),v0e={...uy,decay:Number,distance:Number},g0e={...cy,decay:1,distance:0};class Zg extends ly{constructor(){super(rre)}get decay(){const e=this.lightState.get();return e?e.decay:1}set decay(e){this.cancelHandle("decay",()=>this.lightState.get(t=>t&&(t.decay=e)))}get distance(){const e=this.lightState.get();return e?e.distance:0}set distance(e){this.cancelHandle("distance",()=>this.lightState.get(t=>t&&(t.distance=e)))}}F(Zg,"componentName","pointLight"),F(Zg,"defaults",g0e),F(Zg,"schema",v0e);const y0e={...uy,angle:Number,penumbra:Number,decay:Number,distance:Number},_0e={...cy,angle:1,penumbra:0,decay:1,distance:0};class Jg extends ly{constructor(){super(ere,Pre),this.innerY=0}get angle(){const e=this.lightState.get();return e?e.angle:1}set angle(e){this.cancelHandle("angle",()=>this.lightState.get(t=>t&&(t.angle=e)))}get penumbra(){const e=this.lightState.get();return e?e.penumbra:0}set penumbra(e){this.cancelHandle("penumbra",()=>this.lightState.get(t=>t&&(t.penumbra=e)))}get decay(){const e=this.lightState.get();return e?e.decay:1}set decay(e){this.cancelHandle("decay",()=>this.lightState.get(t=>t&&(t.decay=e)))}get distance(){const e=this.lightState.get();return e?e.distance:0}set distance(e){this.cancelHandle("distance",()=>this.lightState.get(t=>t&&(t.distance=e)))}}F(Jg,"componentName","spotLight"),F(Jg,"defaults",_0e),F(Jg,"schema",y0e);const w0e={...Cc,onKeyPress:Function,onKeyUp:Function,onKeyDown:Function},b0e={...Ec,onKeyPress:void 0,onKeyUp:void 0,onKeyDown:void 0},[x0e,S0e]=zi(),[aI,M0e]=zi(),[lI,C0e]=zi(),Zi=new Set,uI=r=>(r=r.length===1?r.toLowerCase():r,r===" "&&(r="Space"),r);xt(()=>{if(Vi()||fs()&&Ye()===qr)return;const r=Or(()=>Zi.size>0&&lI()),e=n=>{const i=uI(n.key);Zi.add(i),x0e(i)},t=n=>{const i=uI(n.key);Zi.delete(i),aI(i),!Zi.size&&lI()};return r.watch(KS(()=>{if(!Zi.size)return;const n=[...Zi];Zi.clear();for(const i of n)aI(i)})),document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{r.cancel(),document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[Vi,fs,Ye]);class kf extends Kl{constructor(){super(),F(this,"onKeyPress"),F(this,"onKeyUp"),F(this,"onKeyDown"),this.watch(C0e(()=>{if(this.onKeyPress){if(!Zi.size){this.onKeyPress("",Zi);return}for(const e of Zi)this.onKeyPress(e,Zi)}})),this.watch(M0e(e=>{var t;return(t=this.onKeyUp)==null?void 0:t.call(this,e,Zi)})),this.watch(S0e(e=>{var t;return(t=this.onKeyDown)==null?void 0:t.call(this,e,Zi)}))}}F(kf,"componentName","keyboard"),F(kf,"defaults",b0e),F(kf,"schema",w0e);const E0e=new kf;_n.delete(E0e);"getGamepads"in navigator&&Or(()=>{for(const r of navigator.getGamepads())if(r){for(let e=0;e<r.buttons.length;e++){const t=r.buttons[e],n=Math.round(t.value*100)+"%";t.pressed&&console.log(e,t.value,t.pressed,n)}for(let e=0;e<r.axes.length;e++){const t=Number(r.axes[e].toFixed(2));t!==0&&console.log(e,t)}}});const P0e=new Map,i_=(r,e)=>{for(const t of e)P0e.set(t,r);return e};i_("image",["jpg","jpeg","gif","png","svg","tiff","webp","hdr"]);i_("audio",["m4a","mp3","wav","wma","ogg","flax","flac","aac"]);i_("plainText",["ls","js","ts","jsx","tsx","py","txt","md","json","yaml","c","cpp","h","hpp","css","scss","sass","html"]);i_("model",["gltf","glb","fbx"]);i_("scene",["l3d"]);const ywe=new WeakSet,T0e={...Cc,variant:Number},A0e={...Ec,variant:1},z2=r=>{const e=document.createElement("div");return e.innerHTML=r,e.children[0]};class Wb extends Kl{constructor(){super(),F(this,"variantState",new ht(1)),this.createEffect(()=>{const e=this.variantState.get(),t=z2(`
                <img
                  src="${W8}reticle${e}.png"
                  style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); pointer-events: none; user-select: none; width: 20px;"
                ></img>
            `);return wr.appendChild(t),()=>{wr.removeChild(t)}},[this.variantState.get])}get variant(){return this.variantState.get()}set variant(e){this.variantState.set(e)}}F(Wb,"componentName","reticle"),F(Wb,"defaults",A0e),F(Wb,"schema",T0e);const Gb=(r,e)=>{const t=e.x-r.x,n=e.y-r.y;return Math.sqrt(t*t+n*n)},k0e=(r,e)=>{const t=e.x-r.x,n=e.y-r.y;return O0e(Math.atan2(n,t))},L0e=(r,e,t)=>{const n={x:0,y:0};return t=vA(t),n.x=r.x-e*Math.cos(t),n.y=r.y-e*Math.sin(t),n},vA=r=>r*(Math.PI/180),O0e=r=>r*(180/Math.PI),D0e=r=>isNaN(r.buttons)?r.pressure!==0:r.buttons!==0,FE=new Map,cI=r=>{FE.has(r)&&clearTimeout(FE.get(r)),FE.set(r,setTimeout(r,100))},$x=(r,e,t)=>{const n=e.split(/[ ,]+/g);let i;for(let o=0;o<n.length;o+=1)i=n[o],r.addEventListener?r.addEventListener(i,t,!1):r.attachEvent&&r.attachEvent(i,t)},hI=(r,e,t)=>{const n=e.split(/[ ,]+/g);let i;for(let o=0;o<n.length;o+=1)i=n[o],r.removeEventListener?r.removeEventListener(i,t):r.detachEvent&&r.detachEvent(i,t)},bj=r=>(r.preventDefault(),r.type.match(/^touch/)?r.changedTouches:r),dI=()=>{const r=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:r,y:e}},gA=(r,e)=>{e.top||e.right||e.bottom||e.left?(r.style.top=e.top,r.style.right=e.right,r.style.bottom=e.bottom,r.style.left=e.left):(r.style.left=e.x+"px",r.style.top=e.y+"px")},oL=(r,e,t)=>{const n=xj(r);for(let i in n)if(n.hasOwnProperty(i))if(typeof e=="string")n[i]=e+" "+t;else{let o="";for(let s=0,a=e.length;s<a;s+=1)o+=e[s]+" "+t+", ";n[i]=o.slice(0,-2)}return n},R0e=(r,e)=>{const t=xj(r);for(let n in t)t.hasOwnProperty(n)&&(t[n]=e);return t},xj=r=>{const e={};return e[r]="",["webkit","Moz","o"].forEach(function(t){e[t+r.charAt(0).toUpperCase()+r.slice(1)]=""}),e},UE=(r,e)=>{for(let t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r},N0e=(r,e)=>{const t={};for(let n in r)r.hasOwnProperty(n)&&e.hasOwnProperty(n)?t[n]=e[n]:r.hasOwnProperty(n)&&(t[n]=r[n]);return t},yA=(r,e)=>{if(r.length)for(let t=0,n=r.length;t<n;t+=1)e(r[t]);else e(r)},I0e=(r,e,t)=>({x:Math.min(Math.max(r.x,e.x-t),e.x+t),y:Math.min(Math.max(r.y,e.y-t),e.y+t)});var V0e="ontouchstart"in window,z0e=!!window.PointerEvent,B0e=!!window.MSPointerEvent,rg={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},rf,V0={};z0e?rf=rg.pointer:B0e?rf=rg.MSPointer:V0e?(rf=rg.touch,V0=rg.mouse):rf=rg.mouse;function nu(){}nu.prototype.on=function(r,e){var t=this,n=r.split(/[ ,]+/g),i;t._handlers_=t._handlers_||{};for(var o=0;o<n.length;o+=1)i=n[o],t._handlers_[i]=t._handlers_[i]||[],t._handlers_[i].push(e);return t};nu.prototype.off=function(r,e){var t=this;return t._handlers_=t._handlers_||{},r===void 0?t._handlers_={}:e===void 0?t._handlers_[r]=null:t._handlers_[r]&&t._handlers_[r].indexOf(e)>=0&&t._handlers_[r].splice(t._handlers_[r].indexOf(e),1),t};nu.prototype.trigger=function(r,e){var t=this,n=r.split(/[ ,]+/g),i;t._handlers_=t._handlers_||{};for(var o=0;o<n.length;o+=1)i=n[o],t._handlers_[i]&&t._handlers_[i].length&&t._handlers_[i].forEach(function(s){s.call(t,{type:i,target:t},e)})};nu.prototype.config=function(r){var e=this;e.options=e.defaults||{},r&&(e.options=N0e(e.options,r))};nu.prototype.bindEvt=function(r,e){var t=this;return t._domHandlers_=t._domHandlers_||{},t._domHandlers_[e]=function(){typeof t["on"+e]=="function"?t["on"+e].apply(t,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},$x(r,rf[e],t._domHandlers_[e]),V0[e]&&$x(r,V0[e],t._domHandlers_[e]),t};nu.prototype.unbindEvt=function(r,e){var t=this;return t._domHandlers_=t._domHandlers_||{},hI(r,rf[e],t._domHandlers_[e]),V0[e]&&hI(r,V0[e],t._domHandlers_[e]),delete t._domHandlers_[e],this};function Gn(r,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=r,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Gn.id,Gn.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Gn.prototype=new nu;Gn.constructor=Gn;Gn.id=0;Gn.prototype.buildEl=function(r){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Gn.prototype.stylize=function(){if(this.options.dataOnly)return this;var r=this.options.fadeTime+"ms",e=R0e("borderRadius","50%"),t=oL("transition","opacity",r),n={};return n.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},n.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},n.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},UE(n.el,t),this.options.shape==="circle"&&UE(n.back,e),UE(n.front,e),this.applyStyles(n),this};Gn.prototype.applyStyles=function(r){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var t in r[e])this.ui[e].style[t]=r[e][t];return this};Gn.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Gn.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Gn.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Gn.prototype.show=function(r){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),typeof r=="function"&&r.call(this)},e.options.fadeTime)),e};Gn.prototype.hide=function(r){var e=this;if(e.options.dataOnly)return e;if(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var t=e.options.mode==="dynamic"?"none":"block";e.ui.el.style.display=t,typeof r=="function"&&r.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick){const t=e.options.restJoystick,n={};n.x=t===!0||t.x!==!1?0:e.instance.frontPosition.x,n.y=t===!0||t.y!==!1?0:e.instance.frontPosition.y,e.setPosition(r,n)}return e};Gn.prototype.setPosition=function(r,e){var t=this;t.frontPosition={x:e.x,y:e.y};var n=t.options.fadeTime+"ms",i={};i.front=oL("transition",["top","left"],n);var o={front:{}};o.front={left:t.frontPosition.x+"px",top:t.frontPosition.y+"px"},t.applyStyles(i),t.applyStyles(o),t.restTimeout=setTimeout(function(){typeof r=="function"&&r.call(t),t.restCallback()},t.options.fadeTime)};Gn.prototype.restCallback=function(){var r=this,e={};e.front=oL("transition","none",""),r.applyStyles(e),r.trigger("rested",r.instance)};Gn.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Gn.prototype.computeDirection=function(r){var e=r.angle.radian,t=Math.PI/4,n=Math.PI/2,i,o,s;if(e>t&&e<t*3&&!r.lockX?i="up":e>-t&&e<=t&&!r.lockY?i="left":e>-t*3&&e<=-t&&!r.lockX?i="down":r.lockY||(i="right"),r.lockY||(e>-n&&e<n?o="left":o="right"),r.lockX||(e>0?s="up":s="down"),r.force>this.options.threshold){var a={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var c={};this.direction={x:o,y:s,angle:i},r.direction=this.direction;for(l in a)a[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return r;(!c.x||!c.y)&&this.trigger("plain",r),c.x||this.trigger("plain:"+o,r),c.y||this.trigger("plain:"+s,r),c.angle||this.trigger("dir dir:"+i,r)}else this.resetDirection();return r};function wn(r,e){var t=this;t.nipples=[],t.idles=[],t.actives=[],t.ids=[],t.pressureIntervals={},t.manager=r,t.id=wn.id,wn.id+=1,t.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},t.config(e),(t.options.mode==="static"||t.options.mode==="semi")&&(t.options.multitouch=!1),t.options.multitouch||(t.options.maxNumberOfNipples=1);const n=getComputedStyle(t.options.zone.parentElement);return n&&n.display==="flex"&&(t.parentIsFlex=!0),t.updateBox(),t.prepareNipples(),t.bindings(),t.begin(),t.nipples}wn.prototype=new nu;wn.constructor=wn;wn.id=0;wn.prototype.prepareNipples=function(){var r=this,e=r.nipples;e.on=r.on.bind(r),e.off=r.off.bind(r),e.options=r.options,e.destroy=r.destroy.bind(r),e.ids=r.ids,e.id=r.id,e.processOnMove=r.processOnMove.bind(r),e.processOnEnd=r.processOnEnd.bind(r),e.get=function(t){if(t===void 0)return e[0];for(var n=0,i=e.length;n<i;n+=1)if(e[n].identifier===t)return e[n];return!1}};wn.prototype.bindings=function(){var r=this;r.bindEvt(r.options.zone,"start"),r.options.zone.style.touchAction="none",r.options.zone.style.msTouchAction="none"};wn.prototype.begin=function(){var r=this,e=r.options;if(e.mode==="static"){var t=r.createNipple(e.position,r.manager.getIdentifier());t.add(),r.idles.push(t)}};wn.prototype.createNipple=function(r,e){var t=this,n=t.manager.scroll,i={},o=t.options,s={x:t.parentIsFlex?n.x:n.x+t.box.left,y:t.parentIsFlex?n.y:n.y+t.box.top};if(r.x&&r.y)i={x:r.x-s.x,y:r.y-s.y};else if(r.top||r.right||r.bottom||r.left){var a=document.createElement("DIV");a.style.display="hidden",a.style.top=r.top,a.style.right=r.right,a.style.bottom=r.bottom,a.style.left=r.left,a.style.position="absolute",o.zone.appendChild(a);var l=a.getBoundingClientRect();o.zone.removeChild(a),i=r,r={x:l.left+n.x,y:l.top+n.y}}var c=new Gn(t,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:e,position:r,zone:o.zone,frontPosition:{x:0,y:0},shape:o.shape});return o.dataOnly||(gA(c.ui.el,i),gA(c.ui.front,c.frontPosition)),t.nipples.push(c),t.trigger("added "+c.identifier+":added",c),t.manager.trigger("added "+c.identifier+":added",c),t.bindNipple(c),c};wn.prototype.updateBox=function(){var r=this;r.box=r.options.zone.getBoundingClientRect()};wn.prototype.bindNipple=function(r){var e=this,t,n=function(i,o){t=i.type+" "+o.id+":"+i.type,e.trigger(t,o)};r.on("destroyed",e.onDestroyed.bind(e)),r.on("shown hidden rested dir plain",n),r.on("dir:up dir:right dir:down dir:left",n),r.on("plain:up plain:right plain:down plain:left",n)};wn.prototype.pressureFn=function(r,e,t){var n=this,i=0;clearInterval(n.pressureIntervals[t]),n.pressureIntervals[t]=setInterval(function(){var o=r.force||r.pressure||r.webkitForce||0;o!==i&&(e.trigger("pressure",o),n.trigger("pressure "+e.identifier+":pressure",o),i=o)}.bind(n),100)};wn.prototype.onstart=function(r){var e=this,t=e.options,n=r;r=bj(r),e.updateBox();var i=function(o){e.actives.length<t.maxNumberOfNipples?e.processOnStart(o):n.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach(function(s){if(Object.values(n.touches).findIndex(function(l){return l.identifier===s})<0){var a=[r[0]];a.identifier=s,e.processOnEnd(a)}}),e.actives.length<t.maxNumberOfNipples&&e.processOnStart(o))};return yA(r,i),e.manager.bindDocument(),!1};wn.prototype.processOnStart=function(r){var e=this,t=e.options,n,i=e.manager.getIdentifier(r),o=r.force||r.pressure||r.webkitForce||0,s={x:r.pageX,y:r.pageY},a=e.getOrCreate(i,s);a.identifier!==i&&e.manager.removeIdentifier(a.identifier),a.identifier=i;var l=function(d){d.trigger("start",d),e.trigger("start "+d.id+":start",d),d.show(),o>0&&e.pressureFn(r,d,d.identifier),e.processOnMove(r)};if((n=e.idles.indexOf(a))>=0&&e.idles.splice(n,1),e.actives.push(a),e.ids.push(a.identifier),t.mode!=="semi")l(a);else{var c=Gb(s,a.position);if(c<=t.catchDistance)l(a);else{a.destroy(),e.processOnStart(r);return}}return a};wn.prototype.getOrCreate=function(r,e){var t=this,n=t.options,i;return/(semi|static)/.test(n.mode)?(i=t.idles[0],i?(t.idles.splice(0,1),i):n.mode==="semi"?t.createNipple(e,r):(console.warn("Coudln't find the needed nipple."),!1)):(i=t.createNipple(e,r),i)};wn.prototype.processOnMove=function(r){var e=this,t=e.options,n=e.manager.getIdentifier(r),i=e.nipples.get(n),o=e.manager.scroll;if(!D0e(r)){this.processOnEnd(r);return}if(!i){console.error("Found zombie joystick with ID "+n),e.manager.removeIdentifier(n);return}if(t.dynamicPage){var s=i.el.getBoundingClientRect();i.position={x:o.x+s.left,y:o.y+s.top}}i.identifier=n;var a=i.options.size/2,l={x:r.pageX,y:r.pageY};t.lockX&&(l.y=i.position.y),t.lockY&&(l.x=i.position.x);var c=Gb(l,i.position),d=k0e(l,i.position),f=vA(d),m=c/a,g={distance:c,position:l},b,_;if(i.options.shape==="circle"?(b=Math.min(c,a),_=L0e(i.position,b,d)):(_=I0e(l,i.position,a),b=Gb(_,i.position)),t.follow){if(c>a){let C=l.x-_.x,P=l.y-_.y;i.position.x+=C,i.position.y+=P,i.el.style.top=i.position.y-(e.box.top+o.y)+"px",i.el.style.left=i.position.x-(e.box.left+o.x)+"px",c=Gb(l,i.position)}}else l=_,c=b;var w=l.x-i.position.x,M=l.y-i.position.y;i.frontPosition={x:w,y:M},t.dataOnly||gA(i.ui.front,i.frontPosition);var S={identifier:i.identifier,position:l,force:m,pressure:r.force||r.pressure||r.webkitForce||0,distance:c,angle:{radian:f,degree:d},vector:{x:w/a,y:-M/a},raw:g,instance:i,lockX:t.lockX,lockY:t.lockY};S=i.computeDirection(S),S.angle={radian:vA(180-d),degree:180-d},i.trigger("move",S),e.trigger("move "+i.id+":move",S)};wn.prototype.processOnEnd=function(r){var e=this,t=e.options,n=e.manager.getIdentifier(r),i=e.nipples.get(n),o=e.manager.removeIdentifier(i.identifier);!i||(t.dataOnly||i.hide(function(){t.mode==="dynamic"&&(i.trigger("removed",i),e.trigger("removed "+i.id+":removed",i),e.manager.trigger("removed "+i.id+":removed",i),i.destroy())}),clearInterval(e.pressureIntervals[i.identifier]),i.resetDirection(),i.trigger("end",i),e.trigger("end "+i.id+":end",i),e.ids.indexOf(i.identifier)>=0&&e.ids.splice(e.ids.indexOf(i.identifier),1),e.actives.indexOf(i)>=0&&e.actives.splice(e.actives.indexOf(i),1),/(semi|static)/.test(t.mode)?e.idles.push(i):e.nipples.indexOf(i)>=0&&e.nipples.splice(e.nipples.indexOf(i),1),e.manager.unbindDocument(),/(semi|static)/.test(t.mode)&&(e.manager.ids[o.id]=o.identifier))};wn.prototype.onDestroyed=function(r,e){var t=this;t.nipples.indexOf(e)>=0&&t.nipples.splice(t.nipples.indexOf(e),1),t.actives.indexOf(e)>=0&&t.actives.splice(t.actives.indexOf(e),1),t.idles.indexOf(e)>=0&&t.idles.splice(t.idles.indexOf(e),1),t.ids.indexOf(e.identifier)>=0&&t.ids.splice(t.ids.indexOf(e.identifier),1),t.manager.removeIdentifier(e.identifier),t.manager.unbindDocument()};wn.prototype.destroy=function(){var r=this;r.unbindEvt(r.options.zone,"start"),r.nipples.forEach(function(t){t.destroy()});for(var e in r.pressureIntervals)r.pressureIntervals.hasOwnProperty(e)&&clearInterval(r.pressureIntervals[e]);r.trigger("destroyed",r.nipples),r.manager.unbindDocument(),r.off()};function si(r){var e=this;e.ids={},e.index=0,e.collections=[],e.scroll=dI(),e.config(r),e.prepareCollections();var t=function(){var i;e.collections.forEach(function(o){o.forEach(function(s){i=s.el.getBoundingClientRect(),s.position={x:e.scroll.x+i.left,y:e.scroll.y+i.top}})})};$x(window,"resize",function(){cI(t)});var n=function(){e.scroll=dI()};return $x(window,"scroll",function(){cI(n)}),e.collections}si.prototype=new nu;si.constructor=si;si.prototype.prepareCollections=function(){var r=this;r.collections.create=r.create.bind(r),r.collections.on=r.on.bind(r),r.collections.off=r.off.bind(r),r.collections.destroy=r.destroy.bind(r),r.collections.get=function(e){var t;return r.collections.every(function(n){return t=n.get(e),!t}),t}};si.prototype.create=function(r){return this.createCollection(r)};si.prototype.createCollection=function(r){var e=this,t=new wn(e,r);return e.bindCollection(t),e.collections.push(t),t};si.prototype.bindCollection=function(r){var e=this,t,n=function(i,o){t=i.type+" "+o.id+":"+i.type,e.trigger(t,o)};r.on("destroyed",e.onDestroyed.bind(e)),r.on("shown hidden rested dir plain",n),r.on("dir:up dir:right dir:down dir:left",n),r.on("plain:up plain:right plain:down plain:left",n)};si.prototype.bindDocument=function(){var r=this;r.binded||(r.bindEvt(document,"move").bindEvt(document,"end"),r.binded=!0)};si.prototype.unbindDocument=function(r){var e=this;(!Object.keys(e.ids).length||r===!0)&&(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)};si.prototype.getIdentifier=function(r){var e;return r?(e=r.identifier===void 0?r.pointerId:r.identifier,e===void 0&&(e=this.latest||0)):e=this.index,this.ids[e]===void 0&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]};si.prototype.removeIdentifier=function(r){var e={};for(var t in this.ids)if(this.ids[t]===r){e.id=t,e.identifier=this.ids[t],delete this.ids[t];break}return e};si.prototype.onmove=function(r){var e=this;return e.onAny("move",r),!1};si.prototype.onend=function(r){var e=this;return e.onAny("end",r),!1};si.prototype.oncancel=function(r){var e=this;return e.onAny("end",r),!1};si.prototype.onAny=function(r,e){var t=this,n,i="processOn"+r.charAt(0).toUpperCase()+r.slice(1);e=bj(e);var o=function(a,l,c){c.ids.indexOf(l)>=0&&(c[i](a),a._found_=!0)},s=function(a){n=t.getIdentifier(a),yA(t.collections,o.bind(null,a,n)),a._found_||t.removeIdentifier(n)};return yA(e,s),!1};si.prototype.destroy=function(){var r=this;r.unbindDocument(!0),r.ids={},r.index=0,r.collections.forEach(function(e){e.destroy()}),r.off()};si.prototype.onDestroyed=function(r,e){var t=this;if(t.collections.indexOf(e)<0)return!1;t.collections.splice(t.collections.indexOf(e),1)};const pI=new si,F0e={create:function(r){return pI.create(r)},factory:pI},U0e={...Cc,onMove:Function,onMoveStart:Function,onMoveEnd:Function,onPress:Function},j0e={...Ec,onMove:void 0,onMoveStart:void 0,onMoveEnd:void 0,onPress:void 0};class Yb extends Kl{constructor(){super(),F(this,"onMove"),F(this,"onMoveStart"),F(this,"onMoveEnd"),F(this,"onPressState",new ht(void 0));let e=new pg(0,0);const[t,n]=De(!1);this.createEffect(()=>{const i=this.onPressState.get();if(!i||!n())return;const o=Or(()=>{i(e)});return()=>o.cancel()},[this.onPressState.get,n]),this.createEffect(()=>{const i=z2(`
                <div style="width: 150px; height: 150px; position: absolute; bottom: 25px; left: 25px;"></div>
            `);wr.appendChild(i);const o=a=>{a.preventDefault(),a.stopPropagation()};i.onmousedown=o,i.ontouchstart=o,i.onpointerdown=o;const s=new lr;return setTimeout(()=>{const a=F0e.create({zone:i,mode:"static",position:{left:"75px",bottom:"75px"},color:"white"});s.then(()=>a.destroy()),a.on("start",()=>{var l;(l=this.onMoveStart)==null||l.call(this,new pg(0,0)),t(!0)}),a.on("move",(l,c)=>{var d;(d=this.onMove)==null||d.call(this,c.vector),e=c.vector}),a.on("end",()=>{var l;(l=this.onMoveEnd)==null||l.call(this,new pg(0,0)),e=new pg(0,0),t(!1)})}),()=>{s.cancel()}},[])}get onPress(){return this.onPressState.get()}set onPress(e){this.onPressState.set(e)}}F(Yb,"componentName","joystick"),F(Yb,"defaults",j0e),F(Yb,"schema",U0e);const B2=(r,e,t)=>{const n=r[e];return n instanceof Yr?t?n.value:void 0:t?n!=null?n:"":n},zp=(r,e)=>Number(e.toFixed(2)),Sj=["type","children","scale","rotation","velocity","target","proxy","gridHelper","gridHelperSize"],H0e=["autoMount"],_A=r=>{const e=[];for(const t of r){if(zS.has(t))continue;const{componentName:n,schema:i,defaults:o}=t.constructor,s={type:n};for(const a of Object.keys(i)){if(Sj.includes(a))continue;let l;if(a==="animations"){if(l=t.serializeAnimations,!l)continue}else if(a==="animation"){if(l=t.serializeAnimation,l===void 0)continue}else l=t[a];l===B2(o,a)||typeof l=="function"||(s[a]=typeof l=="number"?zp(a,l):l)}t.children&&(s.children=_A(t.children)),e.push(s)}return e},F2=(r=_n)=>{if(r instanceof rk)return _A([r]);const e=[];for(const i of r)!(i instanceof lc)&&e.push(i);const t=new lc(!0);Object.assign(t,zo),e.push(t);const n=_A(e);return t.dispose(),n},W0e=Zq({group:()=>new Cf,model:()=>new Oa,svgMesh:()=>new Mf,dummy:()=>new Sf,building:()=>new zb,tree:()=>new Bb,reflector:()=>new Ug,water:()=>new jg,sprite:()=>new zl,trigger:()=>new Hg,spawnPoint:()=>new Wg,audio:()=>new Gg,camera:()=>new Yg,thirdPersonCamera:()=>new Xg,firstPersonCamera:()=>new Qk,orbitCamera:()=>new gf,ambientLight:()=>new qg,areaLight:()=>new Kg,directionalLight:()=>new Tf,skyLight:()=>new Af,pointLight:()=>new Zg,spotLight:()=>new Jg,circle:()=>new Bg,cone:()=>new zk,cube:()=>new HS,cylinder:()=>new oy,octahedron:()=>new Bk,plane:()=>new bf,sphere:()=>new iy,tetrahedron:()=>new Fk,torus:()=>new Uk,skybox:()=>new wf,environment:()=>new _f,setup:()=>new lc}),Mj=r=>W0e[r](),Cj=(r,e)=>{var t;if(r.type==="animation")return;const n=Mj(r.type);return e&&n instanceof ny&&e.push(n.loaded),Object.assign(n,Ri.exports.omit(r,Sj)),(t=r.children)==null||t.map(i=>Cj(i,e)).forEach(i=>i&&n.append(i)),n},Ej=(r,e)=>r.map(t=>Cj(t,e)),Pj=(r,e)=>{const t=document.createElement("a"),n=t.href=URL.createObjectURL(e);t.download=r,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)},sL=(r,e)=>{const t=new Blob([e],{type:"text/plain"});Pj(r,t)},G0e=async()=>{const{default:r}=await yn(()=>import("./standalone.1a286bc7.03890e41.js"),[]).then(n=>n.s),{default:e}=await yn(()=>import("./parser-babel.42865bd2.5ad70992.js"),[]).then(n=>n.p),t=r.format(JSON.stringify(F2()),{parser:"json",plugins:[e]});sL("scene.json",t)},Tj=r=>{let e="";for(const t of r){const n=Ri.exports.upperFirst(t.type);let i="";for(const[o,s]of Object.entries(t))o==="children"||o==="type"||!s||(typeof s=="string"?i+=` ${o}="${s}"`:s===!0?i+=` ${o}`:typeof s=="object"?i+=` ${o}={${JSON.stringify(s)}}`:i+=` ${o}={${s}}`);e+="children"in t&&t.children?`<${n}${i}>${Tj(t.children)}</${n}>`:`<${n}${i} />`}return e},Y0e=async()=>{const r=(await yn(()=>import("./standalone.1a286bc7.03890e41.js"),[]).then(n=>n.s)).default,e=(await yn(()=>import("./parser-babel.42865bd2.5ad70992.js"),[]).then(n=>n.p)).default,t=r.format(`
        const App = () => {
            return (
                <World>
                    ${Tj(F2())}
                </World>
            )
        }
    `,{parser:"babel",plugins:[e]});sL("App.jsx",t)},Aj=r=>{let e="";for(const t of r){const n=Ri.exports.upperFirst(t.type);let i="";for(let[o,s]of Object.entries(t))o==="children"||o==="type"||!s||(o=Ri.exports.kebabCase(o),typeof s=="string"?i+=` ${o}='${s}'`:s===!0?i+=` ${o}`:typeof s=="object"?i+=` :${o}='${JSON.stringify(s)}'`:i+=` :${o}='${s}'`);e+="children"in t&&t.children?`<${n}${i}>
${Aj(t.children)}</${n}>
`:`<${n}${i} />
`}return e},X0e=async()=>{const r=(await yn(()=>import("./standalone.1a286bc7.03890e41.js"),[]).then(n=>n.s)).default,e=(await yn(()=>import("./parser-html.a5b7c334.ab2db76c.js"),[]).then(n=>n.p)).default,t=r.format(`
        <template>
            <World>
                ${Aj(F2())}
            </World>
        </template>
    `,{parser:"vue",plugins:[e]});sL("App.vue",t)},q0e=async()=>{const{fileOpen:r}=await Promise.resolve().then(()=>J_e),e=await(await r({extensions:[".json"]})).text();for(const t of _n)t.dispose();try{Ej(JSON.parse(e))}catch{}},K0e=(r,e,t=500)=>{const n=dk[0];r-=n.x,e-=n.y;const i=r/n.width*2-1,o=-(e/n.height)*2+1,s=Ye();un.set(i,o,.5),un.unproject(s);const a=vr(s);un.sub(a).normalize();const l=a.add(un.multiplyScalar(t*Wt));return Xs(l)},[_we,wwe]=De("https://unpkg.com/lingo3d-wasm@1.0.1/assets/"),kj=0,Z0e=1,J0e=2,fI=2,jE=1.25,mI=1,Xb=6*4+4+4,wA=65535,Q0e=Math.pow(2,-24);class ib{constructor(){}}function Ma(r,e,t){return t.min.x=e[r],t.min.y=e[r+1],t.min.z=e[r+2],t.max.x=e[r+3],t.max.y=e[r+4],t.max.z=e[r+5],t}function vI(r){let e=-1,t=-1/0;for(let n=0;n<3;n++){const i=r[n+3]-r[n];i>t&&(t=i,e=n)}return e}function gI(r,e){e.set(r)}function yI(r,e,t){let n,i;for(let o=0;o<3;o++){const s=o+3;n=r[o],i=e[o],t[o]=n<i?n:i,n=r[s],i=e[s],t[s]=n>i?n:i}}function ob(r,e,t){for(let n=0;n<3;n++){const i=e[r+2*n],o=e[r+2*n+1],s=i-o,a=i+o;s<t[n]&&(t[n]=s),a>t[n+3]&&(t[n+3]=a)}}function ng(r){const e=r[3]-r[0],t=r[4]-r[1],n=r[5]-r[2];return 2*(e*t+t*n+n*e)}function $0e(r,e){if(!r.index){const t=r.attributes.position.count,n=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let i;t>65535?i=new Uint32Array(new n(4*t)):i=new Uint16Array(new n(2*t)),r.setIndex(new eo(i,1));for(let o=0;o<t;o++)i[o]=o}}function eye(r){if(!r.groups||!r.groups.length)return[{offset:0,count:r.index.count/3}];const e=[],t=new Set;for(const i of r.groups)t.add(i.start),t.add(i.start+i.count);const n=Array.from(t.values()).sort((i,o)=>i-o);for(let i=0;i<n.length-1;i++){const o=n[i],s=n[i+1];e.push({offset:o/3,count:(s-o)/3})}return e}function HE(r,e,t,n,i=null){let o=1/0,s=1/0,a=1/0,l=-1/0,c=-1/0,d=-1/0,f=1/0,m=1/0,g=1/0,b=-1/0,_=-1/0,w=-1/0;const M=i!==null;for(let S=e*6,C=(e+t)*6;S<C;S+=6){const P=r[S+0],T=r[S+1],L=P-T,O=P+T;L<o&&(o=L),O>l&&(l=O),M&&P<f&&(f=P),M&&P>b&&(b=P);const k=r[S+2],N=r[S+3],V=k-N,W=k+N;V<s&&(s=V),W>c&&(c=W),M&&k<m&&(m=k),M&&k>_&&(_=k);const ee=r[S+4],se=r[S+5],q=ee-se,re=ee+se;q<a&&(a=q),re>d&&(d=re),M&&ee<g&&(g=ee),M&&ee>w&&(w=ee)}n[0]=o,n[1]=s,n[2]=a,n[3]=l,n[4]=c,n[5]=d,M&&(i[0]=f,i[1]=m,i[2]=g,i[3]=b,i[4]=_,i[5]=w)}function tye(r,e,t,n){let i=1/0,o=1/0,s=1/0,a=-1/0,l=-1/0,c=-1/0;for(let d=e*6,f=(e+t)*6;d<f;d+=6){const m=r[d+0];m<i&&(i=m),m>a&&(a=m);const g=r[d+2];g<o&&(o=g),g>l&&(l=g);const b=r[d+4];b<s&&(s=b),b>c&&(c=b)}n[0]=i,n[1]=o,n[2]=s,n[3]=a,n[4]=l,n[5]=c}function rye(r,e,t,n,i){let o=t,s=t+n-1;const a=i.pos,l=i.axis*2;for(;;){for(;o<=s&&e[o*6+l]<a;)o++;for(;o<=s&&e[s*6+l]>=a;)s--;if(o<s){for(let c=0;c<3;c++){let d=r[o*3+c];r[o*3+c]=r[s*3+c],r[s*3+c]=d;let f=e[o*6+c*2+0];e[o*6+c*2+0]=e[s*6+c*2+0],e[s*6+c*2+0]=f;let m=e[o*6+c*2+1];e[o*6+c*2+1]=e[s*6+c*2+1],e[s*6+c*2+1]=m}o++,s--}else return o}}const Ml=32,nye=(r,e)=>r.candidate-e.candidate,Iu=new Array(Ml).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),sb=new Float32Array(6);function iye(r,e,t,n,i,o){let s=-1,a=0;if(o===kj)s=vI(e),s!==-1&&(a=(e[s]+e[s+3])/2);else if(o===Z0e)s=vI(r),s!==-1&&(a=oye(t,n,i,s));else if(o===J0e){const l=ng(r);let c=jE*i;const d=n*6,f=(n+i)*6;for(let m=0;m<3;m++){const g=e[m],b=(e[m+3]-g)/Ml;if(i<Ml/4){const _=[...Iu];_.length=i;let w=0;for(let S=d;S<f;S+=6,w++){const C=_[w];C.candidate=t[S+2*m],C.count=0;const{bounds:P,leftCacheBounds:T,rightCacheBounds:L}=C;for(let O=0;O<3;O++)L[O]=1/0,L[O+3]=-1/0,T[O]=1/0,T[O+3]=-1/0,P[O]=1/0,P[O+3]=-1/0;ob(S,t,P)}_.sort(nye);let M=i;for(let S=0;S<M;S++){const C=_[S];for(;S+1<M&&_[S+1].candidate===C.candidate;)_.splice(S+1,1),M--}for(let S=d;S<f;S+=6){const C=t[S+2*m];for(let P=0;P<M;P++){const T=_[P];C>=T.candidate?ob(S,t,T.rightCacheBounds):(ob(S,t,T.leftCacheBounds),T.count++)}}for(let S=0;S<M;S++){const C=_[S],P=C.count,T=i-C.count,L=C.leftCacheBounds,O=C.rightCacheBounds;let k=0;P!==0&&(k=ng(L)/l);let N=0;T!==0&&(N=ng(O)/l);const V=mI+jE*(k*P+N*T);V<c&&(s=m,c=V,a=C.candidate)}}else{for(let M=0;M<Ml;M++){const S=Iu[M];S.count=0,S.candidate=g+b+M*b;const C=S.bounds;for(let P=0;P<3;P++)C[P]=1/0,C[P+3]=-1/0}for(let M=d;M<f;M+=6){let S=~~((t[M+2*m]-g)/b);S>=Ml&&(S=Ml-1);const C=Iu[S];C.count++,ob(M,t,C.bounds)}const _=Iu[Ml-1];gI(_.bounds,_.rightCacheBounds);for(let M=Ml-2;M>=0;M--){const S=Iu[M],C=Iu[M+1];yI(S.bounds,C.rightCacheBounds,S.rightCacheBounds)}let w=0;for(let M=0;M<Ml-1;M++){const S=Iu[M],C=S.count,P=S.bounds,T=Iu[M+1].rightCacheBounds;C!==0&&(w===0?gI(P,sb):yI(P,sb,sb)),w+=C;let L=0,O=0;w!==0&&(L=ng(sb)/l);const k=i-w;k!==0&&(O=ng(T)/l);const N=mI+jE*(L*w+O*k);N<c&&(s=m,c=N,a=S.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${o} used.`);return{axis:s,pos:a}}function oye(r,e,t,n){let i=0;for(let o=e,s=e+t;o<s;o++)i+=r[o*6+n*2];return i/t}function sye(r,e){const t=r.attributes.position,n=t.array,i=r.index.array,o=i.length/3,s=new Float32Array(o*6),a=t.offset||0;let l=3;t.isInterleavedBufferAttribute&&(l=t.data.stride);for(let c=0;c<o;c++){const d=c*3,f=c*6,m=i[d+0]*l+a,g=i[d+1]*l+a,b=i[d+2]*l+a;for(let _=0;_<3;_++){const w=n[m+_],M=n[g+_],S=n[b+_];let C=w;M<C&&(C=M),S<C&&(C=S);let P=w;M>P&&(P=M),S>P&&(P=S);const T=(P-C)/2,L=_*2;s[f+L+0]=C+T,s[f+L+1]=T+(Math.abs(C)+T)*Q0e,C<e[_]&&(e[_]=C),P>e[_+3]&&(e[_+3]=P)}}return s}function aye(r,e){function t(M){m&&m(M/g)}function n(M,S,C,P=null,T=0){if(!b&&T>=l&&(b=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(r))),C<=d||T>=l)return t(S+C),M.offset=S,M.count=C,M;const L=iye(M.boundingData,P,s,S,C,f);if(L.axis===-1)return t(S+C),M.offset=S,M.count=C,M;const O=rye(a,s,S,C,L);if(O===S||O===S+C)t(S+C),M.offset=S,M.count=C;else{M.splitAxis=L.axis;const k=new ib,N=S,V=O-S;M.left=k,k.boundingData=new Float32Array(6),HE(s,N,V,k.boundingData,o),n(k,N,V,o,T+1);const W=new ib,ee=O,se=C-V;M.right=W,W.boundingData=new Float32Array(6),HE(s,ee,se,W.boundingData,o),n(W,ee,se,o,T+1)}return M}$0e(r,e);const i=new Float32Array(6),o=new Float32Array(6),s=sye(r,i),a=r.index.array,l=e.maxDepth,c=e.verbose,d=e.maxLeafTris,f=e.strategy,m=e.onProgress,g=r.index.count/3;let b=!1;const _=[],w=eye(r);if(w.length===1){const M=w[0],S=new ib;S.boundingData=i,tye(s,M.offset,M.count,o),n(S,M.offset,M.count,o),_.push(S)}else for(let M of w){const S=new ib;S.boundingData=new Float32Array(6),HE(s,M.offset,M.count,S.boundingData,o),n(S,M.offset,M.count,o),_.push(S)}return _}function lye(r,e){const t=aye(r,e);let n,i,o;const s=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let d=0;d<t.length;d++){const f=t[d];let m=l(f);const g=new a(Xb*m);n=new Float32Array(g),i=new Uint32Array(g),o=new Uint16Array(g),c(0,f),s.push(g)}return s;function l(d){return d.count?1:1+l(d.left)+l(d.right)}function c(d,f){const m=d/4,g=d/2,b=!!f.count,_=f.boundingData;for(let w=0;w<6;w++)n[m+w]=_[w];if(b){const w=f.offset,M=f.count;return i[m+6]=w,o[g+14]=M,o[g+15]=wA,d+Xb}else{const w=f.left,M=f.right,S=f.splitAxis;let C;if(C=c(d+Xb,w),C/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[m+6]=C/4,C=c(C,M),i[m+7]=S,C}}}class Va{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,i=-1/0;for(let o=0,s=e.length;o<s;o++){const a=e[o][t];n=a<n?a:n,i=a>i?a:i}this.min=n,this.max=i}setFromPoints(e,t){let n=1/0,i=-1/0;for(let o=0,s=t.length;o<s;o++){const a=t[o],l=e.dot(a);n=l<n?l:n,i=l>i?l:i}this.min=n,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}Va.prototype.setFromBox=function(){const r=new j;return function(e,t){const n=t.min,i=t.max;let o=1/0,s=-1/0;for(let a=0;a<=1;a++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){r.x=n.x*a+i.x*(1-a),r.y=n.y*l+i.y*(1-l),r.z=n.z*c+i.z*(1-c);const d=e.dot(r);o=Math.min(d,o),s=Math.max(d,s)}this.min=o,this.max=s}}();(function(){const r=new Va;return function(e,t){const n=e.points,i=e.satAxes,o=e.satBounds,s=t.points,a=t.satAxes,l=t.satBounds;for(let c=0;c<3;c++){const d=o[c],f=i[c];if(r.setFromPoints(f,s),d.isSeparated(r))return!1}for(let c=0;c<3;c++){const d=l[c],f=a[c];if(r.setFromPoints(f,n),d.isSeparated(r))return!1}}})();const uye=function(){const r=new j,e=new j,t=new j;return function(n,i,o){const s=n.start,a=r,l=i.start,c=e;t.subVectors(s,l),r.subVectors(n.end,n.start),e.subVectors(i.end,i.start);const d=t.dot(c),f=c.dot(a),m=c.dot(c),g=t.dot(a),b=a.dot(a)*m-f*f;let _,w;b!==0?_=(d*f-g*m)/b:_=0,w=(d+_*f)/m,o.x=_,o.y=w}}(),aL=function(){const r=new be,e=new j,t=new j;return function(n,i,o,s){uye(n,i,r);let a=r.x,l=r.y;if(a>=0&&a<=1&&l>=0&&l<=1){n.at(a,o),i.at(l,s);return}else if(a>=0&&a<=1){l<0?i.at(0,s):i.at(1,s),n.closestPointToPoint(s,!0,o);return}else if(l>=0&&l<=1){a<0?n.at(0,o):n.at(1,o),i.closestPointToPoint(o,!0,s);return}else{let c;a<0?c=n.start:c=n.end;let d;l<0?d=i.start:d=i.end;const f=e,m=t;if(n.closestPointToPoint(d,!0,e),i.closestPointToPoint(c,!0,t),f.distanceToSquared(d)<=m.distanceToSquared(c)){o.copy(f),s.copy(d);return}else{o.copy(c),s.copy(m);return}}}}(),cye=function(){const r=new j,e=new j,t=new Tl,n=new Ys;return function(i,o){const{radius:s,center:a}=i,{a:l,b:c,c:d}=o;if(n.start=l,n.end=c,n.closestPointToPoint(a,!0,r).distanceTo(a)<=s||(n.start=l,n.end=d,n.closestPointToPoint(a,!0,r).distanceTo(a)<=s)||(n.start=c,n.end=d,n.closestPointToPoint(a,!0,r).distanceTo(a)<=s))return!0;const f=o.getPlane(t);if(Math.abs(f.distanceToPoint(a))<=s){const m=f.projectPoint(a,e);if(o.containsPoint(m))return!0}return!1}}(),hye=1e-15;function Np(r){return Math.abs(r)<hye}class Xl extends Fo{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new j),this.satBounds=new Array(4).fill().map(()=>new Va),this.points=[this.a,this.b,this.c],this.sphere=new fd,this.plane=new Tl,this.needsUpdate=!0}intersectsSphere(e){return cye(e,this)}update(){const e=this.a,t=this.b,n=this.c,i=this.points,o=this.satAxes,s=this.satBounds,a=o[0],l=s[0];this.getNormal(a),l.setFromPoints(a,i);const c=o[1],d=s[1];c.subVectors(e,t),d.setFromPoints(c,i);const f=o[2],m=s[2];f.subVectors(t,n),m.setFromPoints(f,i);const g=o[3],b=s[3];g.subVectors(n,e),b.setFromPoints(g,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}Xl.prototype.closestPointToSegment=function(){const r=new j,e=new j,t=new Ys;return function(n,i=null,o=null){const{start:s,end:a}=n,l=this.points;let c,d=1/0;for(let f=0;f<3;f++){const m=(f+1)%3;t.start.copy(l[f]),t.end.copy(l[m]),aL(t,n,r,e),c=r.distanceToSquared(e),c<d&&(d=c,i&&i.copy(r),o&&o.copy(e))}return this.closestPointToPoint(s,r),c=s.distanceToSquared(r),c<d&&(d=c,i&&i.copy(r),o&&o.copy(s)),this.closestPointToPoint(a,r),c=a.distanceToSquared(r),c<d&&(d=c,i&&i.copy(r),o&&o.copy(a)),Math.sqrt(d)}}();Xl.prototype.intersectsTriangle=function(){const r=new Xl,e=new Array(3),t=new Array(3),n=new Va,i=new Va,o=new j,s=new j,a=new j,l=new j,c=new Ys,d=new Ys,f=new Ys;return function(m,g=null){this.needsUpdate&&this.update(),m.isExtendedTriangle?m.needsUpdate&&m.update():(r.copy(m),r.update(),m=r);const b=this.plane,_=m.plane;if(Math.abs(b.normal.dot(_.normal))>1-1e-10){const w=this.satBounds,M=this.satAxes;t[0]=m.a,t[1]=m.b,t[2]=m.c;for(let P=0;P<4;P++){const T=w[P],L=M[P];if(n.setFromPoints(L,t),T.isSeparated(n))return!1}const S=m.satBounds,C=m.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let P=0;P<4;P++){const T=S[P],L=C[P];if(n.setFromPoints(L,e),T.isSeparated(n))return!1}for(let P=0;P<4;P++){const T=M[P];for(let L=0;L<4;L++){const O=C[L];if(o.crossVectors(T,O),n.setFromPoints(o,e),i.setFromPoints(o,t),n.isSeparated(i))return!1}}return g&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),g.start.set(0,0,0),g.end.set(0,0,0)),!0}else{const w=this.points;let M=!1,S=0;for(let ee=0;ee<3;ee++){const se=w[ee],q=w[(ee+1)%3];c.start.copy(se),c.end.copy(q),c.delta(s);const re=M?d.start:d.end,Z=Np(_.distanceToPoint(se));if(Np(_.normal.dot(s))&&Z){d.copy(c),S=2;break}if((_.intersectLine(c,re)||Z)&&!Np(re.distanceTo(q))){if(S++,M)break;M=!0}}if(S===1&&this.containsPoint(d.end))return g&&(g.start.copy(d.end),g.end.copy(d.end)),!0;if(S!==2)return!1;const C=m.points;let P=!1,T=0;for(let ee=0;ee<3;ee++){const se=C[ee],q=C[(ee+1)%3];c.start.copy(se),c.end.copy(q),c.delta(a);const re=P?f.start:f.end,Z=Np(b.distanceToPoint(se));if(Np(b.normal.dot(a))&&Z){f.copy(c),T=2;break}if((b.intersectLine(c,re)||Z)&&!Np(re.distanceTo(q))){if(T++,P)break;P=!0}}if(T===1&&this.containsPoint(f.end))return g&&(g.start.copy(f.end),g.end.copy(f.end)),!0;if(T!==2)return!1;if(d.delta(s),f.delta(a),s.dot(a)<0){let ee=f.start;f.start=f.end,f.end=ee}const L=d.start.dot(s),O=d.end.dot(s),k=f.start.dot(s),N=f.end.dot(s),V=O<k,W=L<N;return L!==N&&k!==O&&V===W?!1:(g&&(l.subVectors(d.start,f.start),l.dot(s)>0?g.start.copy(d.start):g.start.copy(f.start),l.subVectors(d.end,f.end),l.dot(s)<0?g.end.copy(d.end):g.end.copy(f.end)),!0)}}}();Xl.prototype.distanceToPoint=function(){const r=new j;return function(e){return this.closestPointToPoint(e,r),e.distanceTo(r)}}();Xl.prototype.distanceToTriangle=function(){const r=new j,e=new j,t=["a","b","c"],n=new Ys,i=new Ys;return function(o,s=null,a=null){const l=s||a?n:null;if(this.intersectsTriangle(o,l))return(s||a)&&(s&&l.getCenter(s),a&&l.getCenter(a)),0;let c=1/0;for(let d=0;d<3;d++){let f;const m=t[d],g=o[m];this.closestPointToPoint(g,r),f=g.distanceToSquared(r),f<c&&(c=f,s&&s.copy(r),a&&a.copy(g));const b=this[m];o.closestPointToPoint(b,r),f=b.distanceToSquared(r),f<c&&(c=f,s&&s.copy(b),a&&a.copy(r))}for(let d=0;d<3;d++){const f=t[d],m=t[(d+1)%3];n.set(this[f],this[m]);for(let g=0;g<3;g++){const b=t[g],_=t[(g+1)%3];i.set(o[b],o[_]),aL(n,i,r,e);const w=r.distanceToSquared(e);w<c&&(c=w,s&&s.copy(r),a&&a.copy(e))}}return Math.sqrt(c)}}();class za extends wi{constructor(...e){super(...e),this.isOrientedBox=!0,this.matrix=new Ct,this.invMatrix=new Ct,this.points=new Array(8).fill().map(()=>new j),this.satAxes=new Array(3).fill().map(()=>new j),this.satBounds=new Array(3).fill().map(()=>new Va),this.alignedSatBounds=new Array(3).fill().map(()=>new Va),this.needsUpdate=!1}set(e,t,n){super.set(e,t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}}za.prototype.update=function(){return function(){const r=this.matrix,e=this.min,t=this.max,n=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let d=0;d<=1;d++){const f=1*l|2*c|4*d,m=n[f];m.x=l?t.x:e.x,m.y=c?t.y:e.y,m.z=d?t.z:e.z,m.applyMatrix4(r)}const i=this.satBounds,o=this.satAxes,s=n[0];for(let l=0;l<3;l++){const c=o[l],d=i[l],f=1<<l,m=n[f];c.subVectors(s,m),d.setFromPoints(c,n)}const a=this.alignedSatBounds;a[0].setFromPointsField(n,"x"),a[1].setFromPointsField(n,"y"),a[2].setFromPointsField(n,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();za.prototype.intersectsBox=function(){const r=new Va;return function(e){this.needsUpdate&&this.update();const t=e.min,n=e.max,i=this.satBounds,o=this.satAxes,s=this.alignedSatBounds;if(r.min=t.x,r.max=n.x,s[0].isSeparated(r)||(r.min=t.y,r.max=n.y,s[1].isSeparated(r))||(r.min=t.z,r.max=n.z,s[2].isSeparated(r)))return!1;for(let a=0;a<3;a++){const l=o[a],c=i[a];if(r.setFromBox(l,e),c.isSeparated(r))return!1}return!0}}();za.prototype.intersectsTriangle=function(){const r=new Xl,e=new Array(3),t=new Va,n=new Va,i=new j;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(r.copy(o),r.update(),o=r);const s=this.satBounds,a=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let f=0;f<3;f++){const m=s[f],g=a[f];if(t.setFromPoints(g,e),m.isSeparated(t))return!1}const l=o.satBounds,c=o.satAxes,d=this.points;for(let f=0;f<3;f++){const m=l[f],g=c[f];if(t.setFromPoints(g,d),m.isSeparated(t))return!1}for(let f=0;f<3;f++){const m=a[f];for(let g=0;g<4;g++){const b=c[g];if(i.crossVectors(m,b),t.setFromPoints(i,e),n.setFromPoints(i,d),t.isSeparated(n))return!1}}return!0}}();za.prototype.closestPointToPoint=function(){return function(r,e){return this.needsUpdate&&this.update(),e.copy(r).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e}}();za.prototype.distanceToPoint=function(){const r=new j;return function(e){return this.closestPointToPoint(e,r),e.distanceTo(r)}}();za.prototype.distanceToBox=function(){const r=["x","y","z"],e=new Array(12).fill().map(()=>new Ys),t=new Array(12).fill().map(()=>new Ys),n=new j,i=new j;return function(o,s=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(a||l)&&(o.getCenter(i),this.closestPointToPoint(i,n),o.closestPointToPoint(n,i),a&&a.copy(n),l&&l.copy(i)),0;const c=s*s,d=o.min,f=o.max,m=this.points;let g=1/0;for(let _=0;_<8;_++){const w=m[_];i.copy(w).clamp(d,f);const M=w.distanceToSquared(i);if(M<g&&(g=M,a&&a.copy(w),l&&l.copy(i),M<c))return Math.sqrt(M)}let b=0;for(let _=0;_<3;_++)for(let w=0;w<=1;w++)for(let M=0;M<=1;M++){const S=(_+1)%3,C=(_+2)%3,P=w<<S|M<<C,T=1<<_|w<<S|M<<C,L=m[P],O=m[T];e[b].set(L,O);const k=r[_],N=r[S],V=r[C],W=t[b],ee=W.start,se=W.end;ee[k]=d[k],ee[N]=w?d[N]:f[N],ee[V]=M?d[V]:f[N],se[k]=f[k],se[N]=w?d[N]:f[N],se[V]=M?d[V]:f[N],b++}for(let _=0;_<=1;_++)for(let w=0;w<=1;w++)for(let M=0;M<=1;M++){i.x=_?f.x:d.x,i.y=w?f.y:d.y,i.z=M?f.z:d.z,this.closestPointToPoint(i,n);const S=i.distanceToSquared(n);if(S<g&&(g=S,a&&a.copy(n),l&&l.copy(i),S<c))return Math.sqrt(S)}for(let _=0;_<12;_++){const w=e[_];for(let M=0;M<12;M++){const S=t[M];aL(w,S,n,i);const C=n.distanceToSquared(i);if(C<g&&(g=C,a&&a.copy(n),l&&l.copy(i),C<c))return Math.sqrt(C)}}return Math.sqrt(g)}}();const ab=new j,lb=new j,ub=new j,_I=new be,wI=new be,bI=new be,xI=new j;function dye(r,e,t,n,i,o){let s;return o===Mo?s=r.intersectTriangle(n,t,e,!0,i):s=r.intersectTriangle(e,t,n,o!==Gl,i),s===null?null:{distance:r.origin.distanceTo(i),point:i.clone()}}function pye(r,e,t,n,i,o,s){ab.fromBufferAttribute(e,n),lb.fromBufferAttribute(e,i),ub.fromBufferAttribute(e,o);const a=dye(r,ab,lb,ub,xI,s);if(a){t&&(_I.fromBufferAttribute(t,n),wI.fromBufferAttribute(t,i),bI.fromBufferAttribute(t,o),a.uv=Fo.getUV(xI,ab,lb,ub,_I,wI,bI,new be));const l={a:n,b:i,c:o,normal:new j,materialIndex:0};Fo.getNormal(ab,lb,ub,l.normal),a.face=l,a.faceIndex=n}return a}function Lj(r,e,t,n,i){const o=n*3,s=r.index.getX(o),a=r.index.getX(o+1),l=r.index.getX(o+2),c=pye(t,r.attributes.position,r.attributes.uv,s,a,l,e);return c?(c.faceIndex=n,i&&i.push(c),c):null}function fye(r,e,t,n,i,o){for(let s=n,a=n+i;s<a;s++)Lj(r,e,t,s,o)}function mye(r,e,t,n,i){let o=1/0,s=null;for(let a=n,l=n+i;a<l;a++){const c=Lj(r,e,t,a);c&&c.distance<o&&(s=c,o=c.distance)}return s}function Oj(r,e,t){return r===null||(r.point.applyMatrix4(e.matrixWorld),r.distance=r.point.distanceTo(t.ray.origin),r.object=e,r.distance<t.near||r.distance>t.far)?null:r}function xa(r,e,t,n){const i=r.a,o=r.b,s=r.c;let a=e,l=e+1,c=e+2;t&&(a=t.getX(e),l=t.getX(e+1),c=t.getX(e+2)),i.x=n.getX(a),i.y=n.getY(a),i.z=n.getZ(a),o.x=n.getX(l),o.y=n.getY(l),o.z=n.getZ(l),s.x=n.getX(c),s.y=n.getY(c),s.z=n.getZ(c)}function SI(r,e,t,n,i,o,s){const a=t.index,l=t.attributes.position;for(let c=r,d=e+r;c<d;c++)if(xa(s,c*3,a,l),s.needsUpdate=!0,n(s,c,i,o))return!0;return!1}class Dj{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function Ku(r,e){return e[r+15]===65535}function Lf(r,e){return e[r+6]}function z0(r,e){return e[r+14]}function B0(r){return r+8}function F0(r,e){return e[r+6]}function vye(r,e){return e[r+7]}const nf=new wi,eS=new j,gye=["x","y","z"];function bA(r,e,t,n,i){let o=r*2,s=Um,a=cc,l=hc;if(Ku(o,a)){const c=Lf(r,l),d=z0(o,a);fye(e,t,n,c,d,i)}else{const c=B0(r);tS(c,s,n,eS)&&bA(c,e,t,n,i);const d=F0(r,l);tS(d,s,n,eS)&&bA(d,e,t,n,i)}}function xA(r,e,t,n){let i=r*2,o=Um,s=cc,a=hc;if(Ku(i,s)){const l=Lf(r,a),c=z0(i,s);return mye(e,t,n,l,c)}else{const l=vye(r,a),c=gye[l],d=n.direction[c]>=0;let f,m;d?(f=B0(r),m=F0(r,a)):(f=F0(r,a),m=B0(r));const g=tS(f,o,n,eS)?xA(f,e,t,n):null;if(g){const _=g.point[c];if(d?_<=o[m+l]:_>=o[m+l+3])return g}const b=tS(m,o,n,eS)?xA(m,e,t,n):null;return g&&b?g.distance<=b.distance?g:b:g||b||null}}const yye=function(){let r,e;const t=[],n=new Dj(()=>new wi);return function(...o){r=n.getPrimitive(),e=n.getPrimitive(),t.push(r,e);const s=i(...o);n.releasePrimitive(r),n.releasePrimitive(e),t.pop(),t.pop();const a=t.length;return a>0&&(e=t[a-1],r=t[a-2]),s};function i(o,s,a,l,c=null,d=0,f=0){function m(S){let C=S*2,P=cc,T=hc;for(;!Ku(C,P);)S=B0(S),C=S*2;return Lf(S,T)}function g(S){let C=S*2,P=cc,T=hc;for(;!Ku(C,P);)S=F0(S,T),C=S*2;return Lf(S,T)+z0(C,P)}let b=o*2,_=Um,w=cc,M=hc;if(Ku(b,w)){const S=Lf(o,M),C=z0(b,w);return Ma(o,_,r),l(S,C,!1,f,d+o,r)}else{const S=B0(o),C=F0(o,M);let P=S,T=C,L,O,k,N;if(c&&(k=r,N=e,Ma(P,_,k),Ma(T,_,N),L=c(k),O=c(N),O<L)){P=C,T=S;const Z=L;L=O,O=Z,k=N}k||(k=r,Ma(P,_,k));const V=Ku(P*2,w),W=a(k,V,L,f+1,d+P);let ee;if(W===fI){const Z=m(P),me=g(P)-Z;ee=l(Z,me,!0,f+1,d+P,k)}else ee=W&&i(P,s,a,l,c,d,f+1);if(ee)return!0;N=e,Ma(T,_,N);const se=Ku(T*2,w),q=a(N,se,O,f+1,d+T);let re;if(q===fI){const Z=m(T),me=g(T)-Z;re=l(Z,me,!0,f+1,d+T,N)}else re=q&&i(T,s,a,l,c,d,f+1);return!!re}}}(),_ye=function(){const r=new Xl,e=new Xl,t=new Ct,n=new za,i=new za;return function o(s,a,l,c,d=null){let f=s*2,m=Um,g=cc,b=hc;if(d===null&&(l.boundingBox||l.computeBoundingBox(),n.set(l.boundingBox.min,l.boundingBox.max,c),d=n),Ku(f,g)){const _=a,w=_.index,M=_.attributes.position,S=l.index,C=l.attributes.position,P=Lf(s,b),T=z0(f,g);if(t.copy(c).invert(),l.boundsTree)return Ma(s,m,i),i.matrix.copy(t),i.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:L=>i.intersectsBox(L),intersectsTriangle:L=>{L.a.applyMatrix4(c),L.b.applyMatrix4(c),L.c.applyMatrix4(c),L.needsUpdate=!0;for(let O=P*3,k=(T+P)*3;O<k;O+=3)if(xa(e,O,w,M),e.needsUpdate=!0,L.intersectsTriangle(e))return!0;return!1}});for(let L=P*3,O=T+P*3;L<O;L+=3){xa(r,L,w,M),r.a.applyMatrix4(t),r.b.applyMatrix4(t),r.c.applyMatrix4(t),r.needsUpdate=!0;for(let k=0,N=S.count;k<N;k+=3)if(xa(e,k,S,C),e.needsUpdate=!0,r.intersectsTriangle(e))return!0}}else{const _=s+8,w=b[s+6];return Ma(_,m,nf),!!(d.intersectsBox(nf)&&o(_,a,l,c,d)||(Ma(w,m,nf),d.intersectsBox(nf)&&o(w,a,l,c,d)))}}}();function tS(r,e,t,n){return Ma(r,e,nf),t.intersectBox(nf,n)}const SA=[];let qb,Um,cc,hc;function xg(r){qb&&SA.push(qb),qb=r,Um=new Float32Array(r),cc=new Uint16Array(r),hc=new Uint32Array(r)}function cb(){qb=null,Um=null,cc=null,hc=null,SA.length&&xg(SA.pop())}const WE=Symbol("skip tree generation"),GE=new wi,YE=new wi,Ip=new Ct,kh=new za,ig=new za,og=new j,hb=new j,wye=new j,bye=new j,xye=new j,MI=new wi,ma=new Dj(()=>new Xl);class yi{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),yi.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};const n=e.geometry,i=e._roots,o=n.getIndex();let s;return t.cloneBuffers?s={roots:i.map(a=>a.slice()),index:o.array.slice()}:s={roots:i,index:o.array},s}static deserialize(e,t,n={}){if(typeof n=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),yi.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});n={setIndex:!0,...n};const{index:i,roots:o}=e,s=new yi(t,{...n,[WE]:!0});if(s._roots=o,n.setIndex){const a=t.getIndex();if(a===null){const l=new eo(e.index,1,!1);t.setIndex(l)}else a.array!==i&&(a.array.set(i),a.needsUpdate=!0)}return s}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:kj,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[WE]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[WE]||(this._roots=lye(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new wi))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=this.geometry,n=t.index.array,i=t.attributes.position,o=i.array,s=i.offset||0;let a=3;i.isInterleavedBufferAttribute&&(a=i.data.stride);let l,c,d,f,m=0;const g=this._roots;for(let _=0,w=g.length;_<w;_++)l=g[_],c=new Uint32Array(l),d=new Uint16Array(l),f=new Float32Array(l),b(0,m),m+=l.byteLength;function b(_,w,M=!1){const S=_*2;if(d[S+15]===wA){const C=c[_+6],P=d[S+14];let T=1/0,L=1/0,O=1/0,k=-1/0,N=-1/0,V=-1/0;for(let W=3*C,ee=3*(C+P);W<ee;W++){const se=n[W]*a+s,q=o[se+0],re=o[se+1],Z=o[se+2];q<T&&(T=q),q>k&&(k=q),re<L&&(L=re),re>N&&(N=re),Z<O&&(O=Z),Z>V&&(V=Z)}return f[_+0]!==T||f[_+1]!==L||f[_+2]!==O||f[_+3]!==k||f[_+4]!==N||f[_+5]!==V?(f[_+0]=T,f[_+1]=L,f[_+2]=O,f[_+3]=k,f[_+4]=N,f[_+5]=V,!0):!1}else{const C=_+8,P=c[_+6],T=C+w,L=P+w;let O=M,k=!1,N=!1;e?O||(k=e.has(T),N=e.has(L),O=!k&&!N):(k=!0,N=!0);const V=O||k,W=O||N;let ee=!1;V&&(ee=b(C,w,O));let se=!1;W&&(se=b(P,w,O));const q=ee||se;if(q)for(let re=0;re<3;re++){const Z=C+re,me=P+re,J=f[Z],Q=f[Z+3],$=f[me],fe=f[me+3];f[_+re]=J<$?J:$,f[_+re+3]=Q>fe?Q:fe}return q}}}traverse(e,t=0){const n=this._roots[t],i=new Uint32Array(n),o=new Uint16Array(n);s(0);function s(a,l=0){const c=a*2,d=o[c+15]===wA;if(d){const f=i[a+6],m=o[c+14];e(l,d,new Float32Array(n,a*4,6),f,m)}else{const f=a+Xb/4,m=i[a+6],g=i[a+7];e(l,d,new Float32Array(n,a*4,6),g)||(s(f,l+1),s(m,l+1))}}}raycast(e,t=td){const n=this._roots,i=this.geometry,o=[],s=t.isMaterial,a=Array.isArray(t),l=i.groups,c=s?t.side:t;for(let d=0,f=n.length;d<f;d++){const m=a?t[l[d].materialIndex].side:c,g=o.length;if(xg(n[d]),bA(0,i,m,e,o),cb(),a){const b=l[d].materialIndex;for(let _=g,w=o.length;_<w;_++)o[_].face.materialIndex=b}}return o}raycastFirst(e,t=td){const n=this._roots,i=this.geometry,o=t.isMaterial,s=Array.isArray(t);let a=null;const l=i.groups,c=o?t.side:t;for(let d=0,f=n.length;d<f;d++){const m=s?t[l[d].materialIndex].side:c;xg(n[d]);const g=xA(0,i,m,e);cb(),g!=null&&(a==null||g.distance<a.distance)&&(a=g,s&&(g.face.materialIndex=l[d].materialIndex))}return a}intersectsGeometry(e,t){const n=this.geometry;let i=!1;for(const o of this._roots)if(xg(o),i=_ye(0,n,e,t),cb(),i)break;return i}shapecast(e,t,n){const i=this.geometry;if(e instanceof Function){if(t){const m=t;t=(g,b,_,w)=>{const M=b*3;return m(g,M,M+1,M+2,_,w)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const o=ma.getPrimitive();let{boundsTraverseOrder:s,intersectsBounds:a,intersectsRange:l,intersectsTriangle:c}=e;if(l&&c){const m=l;l=(g,b,_,w,M)=>m(g,b,_,w,M)?!0:SI(g,b,i,c,_,w,o)}else l||(c?l=(m,g,b,_)=>SI(m,g,i,c,b,_,o):l=(m,g,b)=>b);let d=!1,f=0;for(const m of this._roots){if(xg(m),d=yye(0,i,a,l,s,f),cb(),d)break;f+=m.byteLength}return ma.releasePrimitive(o),d}bvhcast(e,t,n){let{intersectsRanges:i,intersectsTriangles:o}=n;const s=this.geometry.index,a=this.geometry.attributes.position,l=e.geometry.index,c=e.geometry.attributes.position;Ip.copy(t).invert();const d=ma.getPrimitive(),f=ma.getPrimitive();if(o){let g=function(b,_,w,M,S,C,P,T){for(let L=w,O=w+M;L<O;L++){xa(f,L*3,l,c),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let k=b,N=b+_;k<N;k++)if(xa(d,k*3,s,a),d.needsUpdate=!0,o(d,f,k,L,S,C,P,T))return!0}return!1};if(i){const b=i;i=function(_,w,M,S,C,P,T,L){return b(_,w,M,S,C,P,T,L)?!0:g(_,w,M,S,C,P,T,L)}}else i=g}e.getBoundingBox(YE),YE.applyMatrix4(t);const m=this.shapecast({intersectsBounds:g=>YE.intersectsBox(g),intersectsRange:(g,b,_,w,M,S)=>(GE.copy(S),GE.applyMatrix4(Ip),e.shapecast({intersectsBounds:C=>GE.intersectsBox(C),intersectsRange:(C,P,T,L,O)=>i(g,b,C,P,w,M,L,O)}))});return ma.releasePrimitive(d),ma.releasePrimitive(f),m}intersectsBox(e,t){return kh.set(e.min,e.max,t),kh.needsUpdate=!0,this.shapecast({intersectsBounds:n=>kh.intersectsBox(n),intersectsTriangle:n=>kh.intersectsTriangle(n)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},i={},o=0,s=1/0){e.boundingBox||e.computeBoundingBox(),kh.set(e.boundingBox.min,e.boundingBox.max,t),kh.needsUpdate=!0;const a=this.geometry,l=a.attributes.position,c=a.index,d=e.attributes.position,f=e.index,m=ma.getPrimitive(),g=ma.getPrimitive();let b=hb,_=wye,w=null,M=null;i&&(w=bye,M=xye);let S=1/0,C=null,P=null;return Ip.copy(t).invert(),ig.matrix.copy(Ip),this.shapecast({boundsTraverseOrder:T=>kh.distanceToBox(T),intersectsBounds:(T,L,O)=>O<S&&O<s?(L&&(ig.min.copy(T.min),ig.max.copy(T.max),ig.needsUpdate=!0),!0):!1,intersectsRange:(T,L)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:O=>ig.distanceToBox(O),intersectsBounds:(O,k,N)=>N<S&&N<s,intersectsRange:(O,k)=>{for(let N=O*3,V=(O+k)*3;N<V;N+=3){xa(g,N,f,d),g.a.applyMatrix4(t),g.b.applyMatrix4(t),g.c.applyMatrix4(t),g.needsUpdate=!0;for(let W=T*3,ee=(T+L)*3;W<ee;W+=3){xa(m,W,c,l),m.needsUpdate=!0;const se=m.distanceToTriangle(g,b,w);if(se<S&&(_.copy(b),M&&M.copy(w),S=se,C=W/3,P=N/3),se<o)return!0}}}});{const O=f?f.count:d.count;for(let k=0,N=O;k<N;k+=3){xa(g,k,f,d),g.a.applyMatrix4(t),g.b.applyMatrix4(t),g.c.applyMatrix4(t),g.needsUpdate=!0;for(let V=T*3,W=(T+L)*3;V<W;V+=3){xa(m,V,c,l),m.needsUpdate=!0;const ee=m.distanceToTriangle(g,b,w);if(ee<S&&(_.copy(b),M&&M.copy(w),S=ee,C=V/3,P=k/3),ee<o)return!0}}}}}),ma.releasePrimitive(m),ma.releasePrimitive(g),S===1/0?null:(n.point?n.point.copy(_):n.point=_.clone(),n.distance=S,n.faceIndex=C,i&&(i.point?i.point.copy(M):i.point=M.clone(),i.point.applyMatrix4(Ip),_.applyMatrix4(Ip),i.distance=_.sub(i.point).length(),i.faceIndex=P),n)}closestPointToPoint(e,t={},n=0,i=1/0){const o=n*n,s=i*i;let a=1/0,l=null;if(this.shapecast({boundsTraverseOrder:d=>(og.copy(e).clamp(d.min,d.max),og.distanceToSquared(e)),intersectsBounds:(d,f,m)=>m<a&&m<s,intersectsTriangle:(d,f)=>{d.closestPointToPoint(e,og);const m=e.distanceToSquared(og);return m<a&&(hb.copy(og),a=m,l=f),m<o}}),a===1/0)return null;const c=Math.sqrt(a);return t.point?t.point.copy(hb):t.point=hb.clone(),t.distance=c,t.faceIndex=l,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{Ma(0,new Float32Array(t),MI),e.union(MI)}),e}}const CI=yi.prototype.raycast;yi.prototype.raycast=function(...r){if(r[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');const[e,t,n,i]=r;return CI.call(this,n,e.material).forEach(o=>{o=Oj(o,e,t),o&&i.push(o)}),i}else return CI.apply(this,r)};const EI=yi.prototype.raycastFirst;yi.prototype.raycastFirst=function(...r){if(r[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');const[e,t,n]=r;return Oj(EI.call(this,n,e.material),e,t)}else return EI.apply(this,r)};const PI=yi.prototype.closestPointToPoint;yi.prototype.closestPointToPoint=function(...r){if(r[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),r.unshift();const e=r[1],t={};return r[1]=t,PI.apply(this,r),e&&e.copy(t.point),t.distance}else return PI.apply(this,r)};const TI=yi.prototype.closestPointToGeometry;yi.prototype.closestPointToGeometry=function(...r){const e=r[2],t=r[3];if(e&&e.isVector3||t&&t.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');const n={},i={},o=r[1];return r[2]=n,r[3]=i,TI.apply(this,r),e&&e.copy(n.point),t&&t.copy(i.point).applyMatrix4(o),n.distance}else return TI.apply(this,r)};const AI=yi.prototype.refit;yi.prototype.refit=function(...r){const e=r[0],t=r[1];if(t&&(t instanceof Set||Array.isArray(t))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');const n=new Set;t.forEach(i=>n.add(i)),e&&e.forEach(i=>n.add(i)),AI.call(this,n)}else AI.apply(this,r)};["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach(r=>{const e=yi.prototype[r];yi.prototype[r]=function(...t){return(t[0]===null||t[0].isMesh)&&(t.shift(),console.warn(`MeshBVH: The function signature for "${r}" has changed and no longer takes Mesh. See docs for new signature.`)),e.apply(this,t)}});const Sye=new WeakMap;let Mye={generate:async r=>new yi(r)};const Cye=async r=>{const e=[];for(const t of r)e.push(await Mye.generate(t));return e},bwe=async r=>{r.outerObject3d.updateMatrixWorld(!0);const e=[];r.outerObject3d.traverse(n=>{if(!n.geometry||n===r.nativeObject3d&&!(r instanceof Yo))return;const i=n.geometry.clone();i.applyMatrix4(n.matrixWorld),e.push(i),i.dispose()});const t=await Cye(e);for(const n of t)Sye.set(n,r);return[t,e]},Rj=document.createElement("div");Object.assign(Rj.style,{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",pointerEvents:"none",userSelect:"none"});const lL=(r,e)=>{const t=dr.exports.useRef({}),n=[],i=[];if(e)return[n,i];const o=t.current;for(const[s,a]of Object.entries(r)){if(s==="children")continue;const l=o[s];l!==a&&(a&&typeof a=="object"?JSON.stringify(a)!==JSON.stringify(l)&&n.push([s,a]):n.push([s,a]))}for(const s of Object.keys(o))!(s in r)&&i.push(s);return t.current=r,[n,i]},Nj=r=>{const e=dr.exports.useRef(r);return e.current=r,e},Eye=console.log;let MA=[];const Pye=()=>MA=[],Tye=parseFloat(At.version)>17,XE=new WeakSet;let kI=!1;const Aye=(r,e,t)=>{if(Tye){const i=dr.exports.useMemo(r,[]),[o]=dr.exports.useState(()=>{const s={};return queueMicrotask(()=>{XE.has(s)||(kI=!0,e==null||e(i))}),s});return dr.exports.useLayoutEffect(()=>XE.has(o)?()=>{e==null||e(i),t==null||t(i)}:(XE.add(o),()=>{queueMicrotask(()=>{kI||(e==null||e(i),t==null||t(i))})}),[]),i}const[n]=dr.exports.useState(()=>{if(Eye===console.log){queueMicrotask(Pye);const i=r();return MA.push(i),i}return MA.shift()});return dr.exports.useLayoutEffect(()=>()=>{e==null||e(n),t==null||t(n)},[]),n};var Ij=function(){if(typeof Map<"u")return Map;function r(e,t){var n=-1;return e.some(function(i,o){return i[0]===t?(n=o,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=r(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(t,n){var i=r(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,i=r(n,t);~i&&n.splice(i,1)},e.prototype.has=function(t){return!!~r(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var i=0,o=this.__entries__;i<o.length;i++){var s=o[i];t.call(n,s[1],s[0])}},e}()}(),CA=typeof window<"u"&&typeof document<"u"&&window.document===document,rS=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),kye=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(rS):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),Lye=2;function Oye(r,e){var t=!1,n=!1,i=0;function o(){t&&(t=!1,r()),n&&a()}function s(){kye(o)}function a(){var l=Date.now();if(t){if(l-i<Lye)return;n=!0}else t=!0,n=!1,setTimeout(s,e);i=l}return a}var Dye=20,Rye=["top","right","bottom","left","width","height","size","weight"],Nye=typeof MutationObserver<"u",Iye=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Oye(this.refresh.bind(this),Dye)}return r.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},r.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},r.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},r.prototype.connect_=function(){!CA||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Nye?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!CA||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,i=Rye.some(function(o){return!!~n.indexOf(o)});i&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),Vj=function(r,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];Object.defineProperty(r,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return r},um=function(r){var e=r&&r.ownerDocument&&r.ownerDocument.defaultView;return e||rS},zj=U2(0,0,0,0);function nS(r){return parseFloat(r)||0}function LI(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,i){var o=r["border-"+i+"-width"];return n+nS(o)},0)}function Vye(r){for(var e=["top","right","bottom","left"],t={},n=0,i=e;n<i.length;n++){var o=i[n],s=r["padding-"+o];t[o]=nS(s)}return t}function zye(r){var e=r.getBBox();return U2(0,0,e.width,e.height)}function Bye(r){var e=r.clientWidth,t=r.clientHeight;if(!e&&!t)return zj;var n=um(r).getComputedStyle(r),i=Vye(n),o=i.left+i.right,s=i.top+i.bottom,a=nS(n.width),l=nS(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+o)!==e&&(a-=LI(n,"left","right")+o),Math.round(l+s)!==t&&(l-=LI(n,"top","bottom")+s)),!Uye(r)){var c=Math.round(a+o)-e,d=Math.round(l+s)-t;Math.abs(c)!==1&&(a-=c),Math.abs(d)!==1&&(l-=d)}return U2(i.left,i.top,a,l)}var Fye=function(){return typeof SVGGraphicsElement<"u"?function(r){return r instanceof um(r).SVGGraphicsElement}:function(r){return r instanceof um(r).SVGElement&&typeof r.getBBox=="function"}}();function Uye(r){return r===um(r).document.documentElement}function jye(r){return CA?Fye(r)?zye(r):Bye(r):zj}function Hye(r){var e=r.x,t=r.y,n=r.width,i=r.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(o.prototype);return Vj(s,{x:e,y:t,width:n,height:i,top:t,right:e+n,bottom:i+t,left:e}),s}function U2(r,e,t,n){return{x:r,y:e,width:t,height:n}}var Wye=function(){function r(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=U2(0,0,0,0),this.target=e}return r.prototype.isActive=function(){var e=jye(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},r}(),Gye=function(){function r(e,t){var n=Hye(t);Vj(this,{target:e,contentRect:n})}return r}(),Yye=function(){function r(e,t,n){if(this.activeObservations_=[],this.observations_=new Ij,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return r.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof um(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Wye(e)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof um(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;!t.has(e)||(t.delete(e),t.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},r.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new Gye(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),Bj=typeof WeakMap<"u"?new WeakMap:new Ij,Fj=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Iye.getInstance(),n=new Yye(e,t,this);Bj.set(this,n)}return r}();["observe","unobserve","disconnect"].forEach(function(r){Fj.prototype[r]=function(){var e;return(e=Bj.get(this))[r].apply(e,arguments)}});(function(){return typeof rS.ResizeObserver<"u"?rS.ResizeObserver:Fj})();(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function r(C){try{return C.defaultView&&C.defaultView.frameElement||null}catch{return null}}var e=function(C){for(var P=C,T=r(P);T;)P=T.ownerDocument,T=r(P);return P}(window.document),t=[],n=null,i=null;function o(C){this.time=C.time,this.target=C.target,this.rootBounds=b(C.rootBounds),this.boundingClientRect=b(C.boundingClientRect),this.intersectionRect=b(C.intersectionRect||g()),this.isIntersecting=!!C.intersectionRect;var P=this.boundingClientRect,T=P.width*P.height,L=this.intersectionRect,O=L.width*L.height;T?this.intersectionRatio=Number((O/T).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function s(C,P){var T=P||{};if(typeof C!="function")throw new Error("callback must be a function");if(T.root&&T.root.nodeType!=1&&T.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=l(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=C,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(T.rootMargin),this.thresholds=this._initThresholds(T.threshold),this.root=T.root||null,this.rootMargin=this._rootMarginValues.map(function(L){return L.value+L.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}s.prototype.THROTTLE_TIMEOUT=100,s.prototype.POLL_INTERVAL=null,s.prototype.USE_MUTATION_OBSERVER=!0,s._setupCrossOriginUpdater=function(){return n||(n=function(C,P){!C||!P?i=g():i=_(C,P),t.forEach(function(T){T._checkForIntersections()})}),n},s._resetCrossOriginUpdater=function(){n=null,i=null},s.prototype.observe=function(C){var P=this._observationTargets.some(function(T){return T.element==C});if(!P){if(!(C&&C.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:C,entry:null}),this._monitorIntersections(C.ownerDocument),this._checkForIntersections()}},s.prototype.unobserve=function(C){this._observationTargets=this._observationTargets.filter(function(P){return P.element!=C}),this._unmonitorIntersections(C.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},s.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},s.prototype.takeRecords=function(){var C=this._queuedEntries.slice();return this._queuedEntries=[],C},s.prototype._initThresholds=function(C){var P=C||[0];return Array.isArray(P)||(P=[P]),P.sort().filter(function(T,L,O){if(typeof T!="number"||isNaN(T)||T<0||T>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return T!==O[L-1]})},s.prototype._parseRootMargin=function(C){var P=C||"0px",T=P.split(/\s+/).map(function(L){var O=/^(-?\d*\.?\d+)(px|%)$/.exec(L);if(!O)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(O[1]),unit:O[2]}});return T[1]=T[1]||T[0],T[2]=T[2]||T[0],T[3]=T[3]||T[1],T},s.prototype._monitorIntersections=function(C){var P=C.defaultView;if(!!P&&this._monitoringDocuments.indexOf(C)==-1){var T=this._checkForIntersections,L=null,O=null;this.POLL_INTERVAL?L=P.setInterval(T,this.POLL_INTERVAL):(c(P,"resize",T,!0),c(C,"scroll",T,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in P&&(O=new P.MutationObserver(T),O.observe(C,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(C),this._monitoringUnsubscribes.push(function(){var V=C.defaultView;V&&(L&&V.clearInterval(L),d(V,"resize",T,!0)),d(C,"scroll",T,!0),O&&O.disconnect()});var k=this.root&&(this.root.ownerDocument||this.root)||e;if(C!=k){var N=r(C);N&&this._monitorIntersections(N.ownerDocument)}}},s.prototype._unmonitorIntersections=function(C){var P=this._monitoringDocuments.indexOf(C);if(P!=-1){var T=this.root&&(this.root.ownerDocument||this.root)||e,L=this._observationTargets.some(function(N){var V=N.element.ownerDocument;if(V==C)return!0;for(;V&&V!=T;){var W=r(V);if(V=W&&W.ownerDocument,V==C)return!0}return!1});if(!L){var O=this._monitoringUnsubscribes[P];if(this._monitoringDocuments.splice(P,1),this._monitoringUnsubscribes.splice(P,1),O(),C!=T){var k=r(C);k&&this._unmonitorIntersections(k.ownerDocument)}}}},s.prototype._unmonitorAllIntersections=function(){var C=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var P=0;P<C.length;P++)C[P]()},s.prototype._checkForIntersections=function(){if(!(!this.root&&n&&!i)){var C=this._rootIsInDom(),P=C?this._getRootRect():g();this._observationTargets.forEach(function(T){var L=T.element,O=m(L),k=this._rootContainsTarget(L),N=T.entry,V=C&&k&&this._computeTargetAndRootIntersection(L,O,P),W=null;this._rootContainsTarget(L)?(!n||this.root)&&(W=P):W=g();var ee=T.entry=new o({time:a(),target:L,boundingClientRect:O,rootBounds:W,intersectionRect:V});N?C&&k?this._hasCrossedThreshold(N,ee)&&this._queuedEntries.push(ee):N&&N.isIntersecting&&this._queuedEntries.push(ee):this._queuedEntries.push(ee)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},s.prototype._computeTargetAndRootIntersection=function(C,P,T){if(window.getComputedStyle(C).display!="none"){for(var L=P,O=M(C),k=!1;!k&&O;){var N=null,V=O.nodeType==1?window.getComputedStyle(O):{};if(V.display=="none")return null;if(O==this.root||O.nodeType==9)if(k=!0,O==this.root||O==e)n&&!this.root?!i||i.width==0&&i.height==0?(O=null,N=null,L=null):N=i:N=T;else{var W=M(O),ee=W&&m(W),se=W&&this._computeTargetAndRootIntersection(W,ee,T);ee&&se?(O=W,N=_(ee,se)):(O=null,L=null)}else{var q=O.ownerDocument;O!=q.body&&O!=q.documentElement&&V.overflow!="visible"&&(N=m(O))}if(N&&(L=f(N,L)),!L)break;O=O&&M(O)}return L}},s.prototype._getRootRect=function(){var C;if(this.root&&!S(this.root))C=m(this.root);else{var P=S(this.root)?this.root:e,T=P.documentElement,L=P.body;C={top:0,left:0,right:T.clientWidth||L.clientWidth,width:T.clientWidth||L.clientWidth,bottom:T.clientHeight||L.clientHeight,height:T.clientHeight||L.clientHeight}}return this._expandRectByRootMargin(C)},s.prototype._expandRectByRootMargin=function(C){var P=this._rootMarginValues.map(function(L,O){return L.unit=="px"?L.value:L.value*(O%2?C.width:C.height)/100}),T={top:C.top-P[0],right:C.right+P[1],bottom:C.bottom+P[2],left:C.left-P[3]};return T.width=T.right-T.left,T.height=T.bottom-T.top,T},s.prototype._hasCrossedThreshold=function(C,P){var T=C&&C.isIntersecting?C.intersectionRatio||0:-1,L=P.isIntersecting?P.intersectionRatio||0:-1;if(T!==L)for(var O=0;O<this.thresholds.length;O++){var k=this.thresholds[O];if(k==T||k==L||k<T!=k<L)return!0}},s.prototype._rootIsInDom=function(){return!this.root||w(e,this.root)},s.prototype._rootContainsTarget=function(C){var P=this.root&&(this.root.ownerDocument||this.root)||e;return w(P,C)&&(!this.root||P==C.ownerDocument)},s.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},s.prototype._unregisterInstance=function(){var C=t.indexOf(this);C!=-1&&t.splice(C,1)};function a(){return window.performance&&performance.now&&performance.now()}function l(C,P){var T=null;return function(){T||(T=setTimeout(function(){C(),T=null},P))}}function c(C,P,T,L){typeof C.addEventListener=="function"?C.addEventListener(P,T,L||!1):typeof C.attachEvent=="function"&&C.attachEvent("on"+P,T)}function d(C,P,T,L){typeof C.removeEventListener=="function"?C.removeEventListener(P,T,L||!1):typeof C.detachEvent=="function"&&C.detachEvent("on"+P,T)}function f(C,P){var T=Math.max(C.top,P.top),L=Math.min(C.bottom,P.bottom),O=Math.max(C.left,P.left),k=Math.min(C.right,P.right),N=k-O,V=L-T;return N>=0&&V>=0&&{top:T,bottom:L,left:O,right:k,width:N,height:V}||null}function m(C){var P;try{P=C.getBoundingClientRect()}catch{}return P?(P.width&&P.height||(P={top:P.top,right:P.right,bottom:P.bottom,left:P.left,width:P.right-P.left,height:P.bottom-P.top}),P):g()}function g(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function b(C){return!C||"x"in C?C:{top:C.top,y:C.top,bottom:C.bottom,left:C.left,x:C.left,right:C.right,width:C.width,height:C.height}}function _(C,P){var T=P.top-C.top,L=P.left-C.left;return{top:T,left:L,height:P.height,width:P.width,bottom:T+P.height,right:L+P.width}}function w(C,P){for(var T=P;T;){if(T==C)return!0;T=M(T)}return!1}function M(C){var P=C.parentNode;return C.nodeType==9&&C!=e?r(C):(P&&P.assignedSlot&&(P=P.assignedSlot.parentNode),P&&P.nodeType==11&&P.host?P.host:P)}function S(C){return C&&C.nodeType===9}window.IntersectionObserver=s,window.IntersectionObserverEntry=o})();const Xye=new WeakMap,OI=new WeakSet,qye=r=>OI.has(r)?r:Fa(Xye,r,()=>{const e=Object.fromEntries(Object.keys(r).map(t=>[t,B2(r,t)]));return OI.add(e),e}),Rt=At.createContext(void 0),Uj=new WeakMap,Kye=()=>new Map,uL=(r,e,t)=>{var n,i;const o=Fa(Uj,r,Kye),s=qye(r.constructor.defaults);for(const[a,l]of e){if((n=o.get(a))==null||n.cancel(),l instanceof ht){o.set(a,l.get(c=>r[a]=c));continue}if(s[a]===Al){if(!l)continue;Array.isArray(l)?r[a](...l):r[a]();continue}r[a]=l}for(const a of t)(i=o.get(a))==null||i.cancel(),r[a]=s[a]},qE=new WeakSet,Xt=(r,e,t)=>{const{children:n,...i}=r,o=dr.exports.useContext(Rt),s=Aye(()=>{const c=new t;return o&&(o.append(c),qE.add(c)),c},c=>{const d=Uj.get(c);if(d)for(const f of d.values())f.cancel();c.dispose()});dr.exports.useLayoutEffect(()=>{!o||qE.has(s)||(o.append(s),qE.add(s))},[o]);const[a,l]=lL(i);return uL(s,a,l),dr.exports.useLayoutEffect(()=>{!e||(typeof e=="function"?e(s):e.current=s)},[e]),s};var j2={exports:{}},sg={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DI;function Zye(){if(DI)return sg;DI=1;var r=At,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,l,c){var d,f={},m=null,g=null;c!==void 0&&(m=""+c),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(g=l.ref);for(d in l)n.call(l,d)&&!o.hasOwnProperty(d)&&(f[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:e,type:a,key:m,ref:g,props:f,_owner:i.current}}return sg.Fragment=t,sg.jsx=s,sg.jsxs=s,sg}(function(r){r.exports=Zye()})(j2);const Jye=j2.exports.Fragment,Dt=j2.exports.jsx,RI=j2.exports.jsxs,Qye=At.forwardRef((r,e)=>{const t=Xt(r,e,lc);return Dt(Rt.Provider,{value:t})}),$ye=({style:r,className:e,position:t,children:n,...i})=>{const o=dr.exports.useRef(null);return dr.exports.useLayoutEffect(()=>{const s=o.current;if(s)return s.appendChild(Rj),zo.autoMount=s,()=>{zo.autoMount=!1}},[]),RI(Jye,{children:[RI("div",{style:{width:"100%",height:"100%",position:t!=null?t:"absolute",top:0,left:0,display:"flex",...r},children:[Dt("div",{style:{height:"100%"},children:n}),Dt("div",{ref:o,style:{height:"100%",flexGrow:1,position:"relative",overflow:"hidden"}})]}),Dt(Qye,{...i})]})};var o_,ct,jj,Qg,NI,iS={},Hj=[],e_e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Nl(r,e){for(var t in e)r[t]=e[t];return r}function Wj(r){var e=r.parentNode;e&&e.removeChild(r)}function Pa(r,e,t){var n,i,o,s={};for(o in e)o=="key"?n=e[o]:o=="ref"?i=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?o_.call(arguments,2):t),typeof r=="function"&&r.defaultProps!=null)for(o in r.defaultProps)s[o]===void 0&&(s[o]=r.defaultProps[o]);return $g(r,s,n,i,null)}function $g(r,e,t,n,i){var o={type:r,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++jj:i};return i==null&&ct.vnode!=null&&ct.vnode(o),o}function Ba(r){return r.children}function Fl(r,e){this.props=r,this.context=e}function cm(r,e){if(e==null)return r.__?cm(r.__,r.__.__k.indexOf(r)+1):null;for(var t;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null)return t.__e;return typeof r.type=="function"?cm(r):null}function Gj(r){var e,t;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null){r.__e=r.__c.base=t.__e;break}return Gj(r)}}function II(r){(!r.__d&&(r.__d=!0)&&Qg.push(r)&&!oS.__r++||NI!==ct.debounceRendering)&&((NI=ct.debounceRendering)||setTimeout)(oS)}function oS(){for(var r;oS.__r=Qg.length;)r=Qg.sort(function(e,t){return e.__v.__b-t.__v.__b}),Qg=[],r.some(function(e){var t,n,i,o,s,a;e.__d&&(s=(o=(t=e).__v).__e,(a=t.__P)&&(n=[],(i=Nl({},o)).__v=o.__v+1,cL(a,o,i,t.__n,a.ownerSVGElement!==void 0,o.__h!=null?[s]:null,n,s==null?cm(o):s,o.__h),Kj(n,o),o.__e!=s&&Gj(o)))})}function Yj(r,e,t,n,i,o,s,a,l,c){var d,f,m,g,b,_,w,M=n&&n.__k||Hj,S=M.length;for(t.__k=[],d=0;d<e.length;d++)if((g=t.__k[d]=(g=e[d])==null||typeof g=="boolean"?null:typeof g=="string"||typeof g=="number"||typeof g=="bigint"?$g(null,g,null,null,g):Array.isArray(g)?$g(Ba,{children:g},null,null,null):g.__b>0?$g(g.type,g.props,g.key,null,g.__v):g)!=null){if(g.__=t,g.__b=t.__b+1,(m=M[d])===null||m&&g.key==m.key&&g.type===m.type)M[d]=void 0;else for(f=0;f<S;f++){if((m=M[f])&&g.key==m.key&&g.type===m.type){M[f]=void 0;break}m=null}cL(r,g,m=m||iS,i,o,s,a,l,c),b=g.__e,(f=g.ref)&&m.ref!=f&&(w||(w=[]),m.ref&&w.push(m.ref,null,g),w.push(f,g.__c||b,g)),b!=null?(_==null&&(_=b),typeof g.type=="function"&&g.__k===m.__k?g.__d=l=Xj(g,l,r):l=qj(r,g,m,M,b,l),typeof t.type=="function"&&(t.__d=l)):l&&m.__e==l&&l.parentNode!=r&&(l=cm(m))}for(t.__e=_,d=S;d--;)M[d]!=null&&(typeof t.type=="function"&&M[d].__e!=null&&M[d].__e==t.__d&&(t.__d=cm(n,d+1)),Jj(M[d],M[d]));if(w)for(d=0;d<w.length;d++)Zj(w[d],w[++d],w[++d])}function Xj(r,e,t){for(var n,i=r.__k,o=0;i&&o<i.length;o++)(n=i[o])&&(n.__=r,e=typeof n.type=="function"?Xj(n,e,t):qj(t,n,n,i,n.__e,e));return e}function sS(r,e){return e=e||[],r==null||typeof r=="boolean"||(Array.isArray(r)?r.some(function(t){sS(t,e)}):e.push(r)),e}function qj(r,e,t,n,i,o){var s,a,l;if(e.__d!==void 0)s=e.__d,e.__d=void 0;else if(t==null||i!=o||i.parentNode==null)e:if(o==null||o.parentNode!==r)r.appendChild(i),s=null;else{for(a=o,l=0;(a=a.nextSibling)&&l<n.length;l+=2)if(a==i)break e;r.insertBefore(i,o),s=o}return s!==void 0?s:i.nextSibling}function t_e(r,e,t,n,i){var o;for(o in t)o==="children"||o==="key"||o in e||aS(r,o,null,t[o],n);for(o in e)i&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||t[o]===e[o]||aS(r,o,e[o],t[o],n)}function VI(r,e,t){e[0]==="-"?r.setProperty(e,t):r[e]=t==null?"":typeof t!="number"||e_e.test(e)?t:t+"px"}function aS(r,e,t,n,i){var o;e:if(e==="style")if(typeof t=="string")r.style.cssText=t;else{if(typeof n=="string"&&(r.style.cssText=n=""),n)for(e in n)t&&e in t||VI(r.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||VI(r.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in r?e.toLowerCase().slice(2):e.slice(2),r.l||(r.l={}),r.l[e+o]=t,t?n||r.addEventListener(e,o?BI:zI,o):r.removeEventListener(e,o?BI:zI,o);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in r)try{r[e]=t==null?"":t;break e}catch{}typeof t=="function"||(t!=null&&(t!==!1||e[0]==="a"&&e[1]==="r")?r.setAttribute(e,t):r.removeAttribute(e))}}function zI(r){this.l[r.type+!1](ct.event?ct.event(r):r)}function BI(r){this.l[r.type+!0](ct.event?ct.event(r):r)}function cL(r,e,t,n,i,o,s,a,l){var c,d,f,m,g,b,_,w,M,S,C,P,T,L=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=e.__e=t.__e,e.__h=null,o=[a]),(c=ct.__b)&&c(e);try{e:if(typeof L=="function"){if(w=e.props,M=(c=L.contextType)&&n[c.__c],S=c?M?M.props.value:c.__:n,t.__c?_=(d=e.__c=t.__c).__=d.__E:("prototype"in L&&L.prototype.render?e.__c=d=new L(w,S):(e.__c=d=new Fl(w,S),d.constructor=L,d.render=n_e),M&&M.sub(d),d.props=w,d.state||(d.state={}),d.context=S,d.__n=n,f=d.__d=!0,d.__h=[]),d.__s==null&&(d.__s=d.state),L.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Nl({},d.__s)),Nl(d.__s,L.getDerivedStateFromProps(w,d.__s))),m=d.props,g=d.state,f)L.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(L.getDerivedStateFromProps==null&&w!==m&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(w,S),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(w,d.__s,S)===!1||e.__v===t.__v){d.props=w,d.state=d.__s,e.__v!==t.__v&&(d.__d=!1),d.__v=e,e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(O){O&&(O.__=e)}),d.__h.length&&s.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(w,d.__s,S),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(m,g,b)})}if(d.context=S,d.props=w,d.__v=e,d.__P=r,C=ct.__r,P=0,"prototype"in L&&L.prototype.render)d.state=d.__s,d.__d=!1,C&&C(e),c=d.render(d.props,d.state,d.context);else do d.__d=!1,C&&C(e),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++P<25);d.state=d.__s,d.getChildContext!=null&&(n=Nl(Nl({},n),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(b=d.getSnapshotBeforeUpdate(m,g)),T=c!=null&&c.type===Ba&&c.key==null?c.props.children:c,Yj(r,Array.isArray(T)?T:[T],e,t,n,i,o,s,a,l),d.base=e.__e,e.__h=null,d.__h.length&&s.push(d),_&&(d.__E=d.__=null),d.__e=!1}else o==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=r_e(t.__e,e,t,n,i,o,s,l);(c=ct.diffed)&&c(e)}catch(O){e.__v=null,(l||o!=null)&&(e.__e=a,e.__h=!!l,o[o.indexOf(a)]=null),ct.__e(O,e,t)}}function Kj(r,e){ct.__c&&ct.__c(e,r),r.some(function(t){try{r=t.__h,t.__h=[],r.some(function(n){n.call(t)})}catch(n){ct.__e(n,t.__v)}})}function r_e(r,e,t,n,i,o,s,a){var l,c,d,f=t.props,m=e.props,g=e.type,b=0;if(g==="svg"&&(i=!0),o!=null){for(;b<o.length;b++)if((l=o[b])&&"setAttribute"in l==!!g&&(g?l.localName===g:l.nodeType===3)){r=l,o[b]=null;break}}if(r==null){if(g===null)return document.createTextNode(m);r=i?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,m.is&&m),o=null,a=!1}if(g===null)f===m||a&&r.data===m||(r.data=m);else{if(o=o&&o_.call(r.childNodes),c=(f=t.props||iS).dangerouslySetInnerHTML,d=m.dangerouslySetInnerHTML,!a){if(o!=null)for(f={},b=0;b<r.attributes.length;b++)f[r.attributes[b].name]=r.attributes[b].value;(d||c)&&(d&&(c&&d.__html==c.__html||d.__html===r.innerHTML)||(r.innerHTML=d&&d.__html||""))}if(t_e(r,m,f,i,a),d)e.__k=[];else if(b=e.props.children,Yj(r,Array.isArray(b)?b:[b],e,t,n,i&&g!=="foreignObject",o,s,o?o[0]:t.__k&&cm(t,0),a),o!=null)for(b=o.length;b--;)o[b]!=null&&Wj(o[b]);a||("value"in m&&(b=m.value)!==void 0&&(b!==r.value||g==="progress"&&!b||g==="option"&&b!==f.value)&&aS(r,"value",b,f.value,!1),"checked"in m&&(b=m.checked)!==void 0&&b!==r.checked&&aS(r,"checked",b,f.checked,!1))}return r}function Zj(r,e,t){try{typeof r=="function"?r(e):r.current=e}catch(n){ct.__e(n,t)}}function Jj(r,e,t){var n,i;if(ct.unmount&&ct.unmount(r),(n=r.ref)&&(n.current&&n.current!==r.__e||Zj(n,null,e)),(n=r.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){ct.__e(o,e)}n.base=n.__P=null}if(n=r.__k)for(i=0;i<n.length;i++)n[i]&&Jj(n[i],e,typeof r.type!="function");t||r.__e==null||Wj(r.__e),r.__e=r.__d=void 0}function n_e(r,e,t){return this.constructor(r,t)}function hm(r,e,t){var n,i,o;ct.__&&ct.__(r,e),i=(n=typeof t=="function")?null:t&&t.__k||e.__k,o=[],cL(e,r=(!n&&t||e).__k=Pa(Ba,null,[r]),i||iS,iS,e.ownerSVGElement!==void 0,!n&&t?[t]:i?null:e.firstChild?o_.call(e.childNodes):null,o,!n&&t?t:i?i.__e:e.firstChild,n),Kj(o,r)}function Qj(r,e){hm(r,e,Qj)}function $j(r,e,t){var n,i,o,s=Nl({},r.props);for(o in e)o=="key"?n=e[o]:o=="ref"?i=e[o]:s[o]=e[o];return arguments.length>2&&(s.children=arguments.length>3?o_.call(arguments,2):t),$g(r.type,s,n||r.key,i||r.ref,null)}o_=Hj.slice,ct={__e:function(r,e,t,n){for(var i,o,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(r)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(r,n||{}),s=i.__d),s)return i.__E=i}catch(a){r=a}throw r}},jj=0,Fl.prototype.setState=function(r,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Nl({},this.state),typeof r=="function"&&(r=r(Nl({},t),this.props)),r&&Nl(t,r),r!=null&&this.__v&&(e&&this.__h.push(e),II(this))},Fl.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),II(this))},Fl.prototype.render=Ba,Qg=[],oS.__r=0;var i_e=0;function ae(r,e,t,n,i){var o,s,a={};for(s in e)s=="ref"?o=e[s]:a[s]=e[s];var l={type:r,props:a,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--i_e,__source:i,__self:n};if(typeof r=="function"&&(o=r.defaultProps))for(s in o)a[s]===void 0&&(a[s]=o[s]);return ct.vnode&&ct.vnode(l),l}function hL(){return(hL=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}function o_e(r){this.getChildContext=function(){return r.context};var e=r.children,t=function(n,i){if(n==null)return{};var o,s,a={},l=Object.keys(n);for(s=0;s<l.length;s++)i.indexOf(o=l[s])>=0||(a[o]=n[o]);return a}(r,["context","children"]);return $j(e,t)}function s_e(){var r=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(r),this._vdom=Pa(o_e,hL({},this._props,{context:r.detail.context}),function e(t,n){if(t.nodeType===3)return t.data;if(t.nodeType!==1)return null;var i=[],o={},s=0,a=t.attributes,l=t.childNodes;for(s=a.length;s--;)a[s].name!=="slot"&&(o[a[s].name]=a[s].value,o[e9(a[s].name)]=a[s].value);for(s=l.length;s--;){var c=e(l[s],null),d=l[s].slot;d?o[d]=Pa(FI,{name:d},c):i[s]=c}var f=n?Pa(FI,null,i):i;return Pa(n||t.nodeName.toLowerCase(),o,f)}(this,this._vdomComponent)),(this.hasAttribute("hydrate")?Qj:hm)(this._vdom,this._root)}function e9(r){return r.replace(/-(\w)/g,function(e,t){return t?t.toUpperCase():""})}function a_e(r,e,t){if(this._vdom){var n={};n[r]=t=t==null?void 0:t,n[e9(r)]=t,this._vdom=$j(this._vdom,n),hm(this._vdom,this._root)}}function l_e(){hm(this._vdom=null,this._root)}function FI(r,e){var t=this;return Pa("slot",hL({},r,{ref:function(n){n?(t.ref=n,t._listener||(t._listener=function(i){i.stopPropagation(),i.detail.context=e},n.addEventListener("_preact",t._listener))):t.ref.removeEventListener("_preact",t._listener)}}))}function Td(r,e,t,n){function i(){var o=Reflect.construct(HTMLElement,[],i);return o._vdomComponent=r,o._root=n&&n.shadow?o.attachShadow({mode:"open"}):o,o}return(i.prototype=Object.create(HTMLElement.prototype)).constructor=i,i.prototype.connectedCallback=s_e,i.prototype.attributeChangedCallback=a_e,i.prototype.disconnectedCallback=l_e,t=t||r.observedAttributes||Object.keys(r.propTypes||{}),i.observedAttributes=t,t.forEach(function(o){Object.defineProperty(i.prototype,o,{get:function(){return this._vdom.props[o]},set:function(s){this._vdom?this.attributeChangedCallback(o,null,s):(this._props||(this._props={}),this._props[o]=s,this.connectedCallback());var a=typeof s;s!=null&&a!=="string"&&a!=="boolean"&&a!=="number"||this.setAttribute(o,s)}})}),customElements.define(e||r.tagName||r.displayName||r.name,i)}const u_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:ae("path",{fill:"#fff",d:"M960 480L768 320v128H512V192h128L480 0 320 192h128v256H192V320L0 480l192 160V512h256v256H320l160 192 160-192H512V512h256v128l192-160z"})}),c_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:ae("path",{fill:"#fff",d:"M929 849a30 30 0 01-30-30v-83.137a447.514 447.514 0 01-70.921 92.209C722.935 933.225 578.442 975.008 442 953.482a444.917 444.917 0 01-241.139-120.591 30 30 0 1137.258-47.01l.231-.231A385.175 385.175 0 00442 892.625v-.006c120.855 22.123 250.206-13.519 343.656-106.975a386.646 386.646 0 0070.6-96.653h-87.247a30 30 0 010-60H929a30 30 0 0130 30V819a30 30 0 01-30 30zM512 392a120 120 0 11-120 120 120 120 0 01120-120zm293.005-147.025a29.87 29.87 0 01-19.117-6.882l-.232.231A386.5 386.5 0 00689.478 168h-.011c-145.646-75.182-329.021-51.747-451.117 70.35a386.615 386.615 0 00-70.6 96.65H255a30 30 0 010 60H95a30 30 0 01-30-30V205a30 30 0 0160 0v83.129a447.534 447.534 0 0170.923-92.206C317.981 73.866 493.048 37.2 647 85.836v-.045a444.883 444.883 0 01176.143 105.291 30 30 0 01-18.138 53.893z"})}),h_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:ae("path",{fill:"#fff",d:"M609.52 584.92a35.309 35.309 0 0124.98-10.36c9.37 0 18.36 3.73 24.98 10.36l189.29 189.22-.07-114.3.57-6.35c3.25-17.98 19.7-30.5 37.9-28.85 18.2 1.65 32.12 16.92 32.09 35.2v200.23c-.05 1.49-.19 2.97-.42 4.45l-.21 1.13c-.22 1.44-.55 2.85-.99 4.24l-.57 1.62-.56 1.41a34.163 34.163 0 01-7.62 11.36l2.12-2.4-.14.14-.92 1.06-1.06 1.2-.57.57-.56.57a36.378 36.378 0 01-16.23 8.39l-3.53.5-4.02.35h-199.6l-6.35-.63c-16.73-3.06-28.9-17.63-28.93-34.64l.56-6.35c3.07-16.76 17.67-28.93 34.71-28.92l114.29-.14-189.07-189.1-4.09-4.94c-9.71-14.01-8.01-32.95 4.02-45.02zm-162.06 0c12.06 12.05 13.78 30.99 4.09 45.01l-4.09 4.94-189.15 189.08 114.3.14c17.04-.01 31.65 12.17 34.71 28.92l.57 6.35c-.03 17.01-12.19 31.58-28.92 34.64l-6.35.63H173.09l-4.23-.42-3.39-.49a36.38 36.38 0 01-17.36-9.52l-1.06-1.13-.98-1.13.98 1.06-1.97-2.26.85 1.06-.42-.56a35.137 35.137 0 01-3.74-5.64l-1.13-2.68a34.71 34.71 0 01-2.11-7.33l-.28-1.13c-.21-1.47-.33-2.96-.36-4.45V659.78c-.03-18.28 13.89-33.55 32.09-35.2 18.2-1.65 34.65 10.87 37.9 28.85l.57 6.35-.07 114.36 189.29-189.22c13.77-13.77 36.11-13.77 49.88 0h-.09zm-74.71-471.71l6.35.57c16.76 3.06 28.93 17.67 28.92 34.71l-.63 6.35c-3.07 16.76-17.67 28.93-34.71 28.92l-114.3.14 189.15 189.08 4.09 4.94c10.26 15.02 7.42 35.37-6.55 47.01-13.98 11.63-34.51 10.74-47.42-2.07L208.29 233.71l.07 114.3-.57 6.35c-3.25 17.98-19.7 30.5-37.9 28.85-18.2-1.65-32.12-16.92-32.09-35.2V147.78c0-1.55.14-3.03.35-4.51l.21-1.13c.24-1.44.59-2.85 1.06-4.23a34.97 34.97 0 018.68-14.39l-2.12 2.4-.42.57 1.55-1.84-.99 1.06.92-.98 2.26-2.33c3.04-2.73 6.52-4.92 10.3-6.49l2.82-1.06c3.45-1.07 7.04-1.62 10.65-1.62l-3.6.14h.49l1.48-.14h201.31zm512.91 0l1.41.14h.42c2.43.29 4.84.79 7.19 1.48l2.82 1.06 2.61 1.2 3.04 1.76c2.09 1.33 4.03 2.89 5.78 4.66l1.13 1.2.78.98.21.14.49.64 2.33 3.17c2.35 3.83 3.98 8.07 4.8 12.49l.21 1.13c.21 1.48.35 2.96.35 4.44v200.37c-.16 18.13-14.03 33.19-32.08 34.83-18.06 1.64-34.42-10.67-37.83-28.48l-.57-6.35V233.65L659.54 422.87c-12.9 12.95-33.56 13.91-47.59 2.2-14.04-11.71-16.81-32.2-6.38-47.22l4.02-4.86 189.22-189.08-114.29-.14c-17.06.04-31.71-12.14-34.78-28.92l-.63-6.35c-.01-17.04 12.16-31.65 28.93-34.71l6.35-.57h201.27zm0 0"})}),d_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:[ae("path",{fill:"#fff",d:"M96 892.8V121.6c0-16 12.8-28.8 28.8-28.8h774.4c16 0 28.8 12.8 28.8 28.8v771.2c0 16-12.8 28.8-28.8 28.8H124.8c-16 3.2-28.8-9.6-28.8-28.8zm64-736v704h704v-704H160z"}),ae("path",{fill:"#fff",d:"M352 656V358.4c0-6.4 6.4-12.8 9.6-12.8h297.6c6.4 0 9.6 6.4 9.6 12.8V656c0 6.4-6.4 12.8-9.6 12.8H361.6c-3.2 0-9.6-6.4-9.6-12.8zm80-227.2v160h160v-160H432zm240 108.8v-48h192v48H672zm121.6-48H736v48h57.6v-48zm-633.6 48v-48h192v48H160zm124.8-48H224v48h57.6v-48z"}),ae("path",{fill:"#fff",d:"M489.6 156.8h48v192h-48v-192zm48 121.6v-57.6h-48v57.6h48zm-48 387.2h48v195.2h-48V665.6zm48 124.8v-57.6h-48v57.6h48z"})]}),p_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:ae("path",{fill:"#fff",d:"M185.6 489.6h-48c-3.2 0-9.6 3.2-9.6 9.6v384c0 3.2 3.2 9.6 9.6 9.6h48c3.2 0 9.6-3.2 9.6-9.6v-384c-3.2-6.4-6.4-9.6-9.6-9.6zm217.6 236.8c6.4 0 12.8-3.2 12.8-9.6v-48c0-3.2-6.4-9.6-12.8-9.6H140.8c-6.4 0-12.8 3.2-12.8 9.6v48c0 3.2 6.4 9.6 12.8 9.6h262.4zm512-547.2v-48c0-3.2-3.2-9.6-9.6-9.6h-384c-3.2 0-9.6 3.2-9.6 9.6v48c0 3.2 3.2 9.6 9.6 9.6h384c6.4 0 9.6-6.4 9.6-9.6zM678.4 377.6c0 6.4 3.2 9.6 9.6 9.6h48c3.2 0 9.6-3.2 9.6-9.6V134.4c0-6.4-3.2-9.6-9.6-9.6h-48c-3.2 0-9.6 3.2-9.6 9.6v243.2zm-195.2 89.6v416c0 9.6 6.4 16 16 16h400c9.6 0 16-6.4 16-16v-416c0-9.6-6.4-16-16-16h-400c-9.6 0-16 9.6-16 16zm361.6 57.6v304h-288v-304h288z"})}),is=({children:r,onClick:e,active:t,disabled:n})=>ae("div",{style:{width:30,height:30,display:"flex",alignItems:"center",justifyContent:"center",margin:6,borderRadius:4,background:t?"rgba(255, 255, 255, 0.1)":void 0,opacity:n?.25:t?1:.75,cursor:"pointer"},onClick:n||t?void 0:e,children:r});var s_,Tn,KE,UI,lS=0,t9=[],Kb=[],jI=ct.__b,HI=ct.__r,WI=ct.diffed,GI=ct.__c,YI=ct.unmount;function H2(r,e){ct.__h&&ct.__h(Tn,r,lS||e),lS=0;var t=Tn.__H||(Tn.__H={__:[],__h:[]});return r>=t.__.length&&t.__.push({__V:Kb}),t.__[r]}function Xo(r){return lS=1,f_e(n9,r)}function f_e(r,e,t){var n=H2(s_++,2);if(n.t=r,!n.__c&&(n.__=[t?t(e):n9(void 0,e),function(o){var s=n.__N?n.__N[0]:n.__[0],a=n.t(s,o);s!==a&&(n.__N=[a,n.__[1]],n.__c.setState({}))}],n.__c=Tn,!Tn.u)){Tn.u=!0;var i=Tn.shouldComponentUpdate;Tn.shouldComponentUpdate=function(o,s,a){if(!n.__c.__H)return!0;var l=n.__c.__H.__.filter(function(d){return d.__c});if(l.every(function(d){return!d.__N}))return!i||i.call(this,o,s,a);var c=!1;return l.forEach(function(d){if(d.__N){var f=d.__[0];d.__=d.__N,d.__N=void 0,f!==d.__[0]&&(c=!0)}}),!!c&&(!i||i.call(this,o,s,a))}}return n.__N||n.__}function qo(r,e){var t=H2(s_++,3);!ct.__s&&dL(t.__H,e)&&(t.__=r,t.i=e,Tn.__H.__h.push(t))}function r9(r,e){var t=H2(s_++,4);!ct.__s&&dL(t.__H,e)&&(t.__=r,t.i=e,Tn.__h.push(t))}function dm(r){return lS=5,U0(function(){return{current:r}},[])}function U0(r,e){var t=H2(s_++,7);return dL(t.__H,e)?(t.__V=r(),t.i=e,t.__h=r,t.__V):t.__}function m_e(){for(var r;r=t9.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(Zb),r.__H.__h.forEach(EA),r.__H.__h=[]}catch(e){r.__H.__h=[],ct.__e(e,r.__v)}}ct.__b=function(r){Tn=null,jI&&jI(r)},ct.__r=function(r){HI&&HI(r),s_=0;var e=(Tn=r.__c).__H;e&&(KE===Tn?(e.__h=[],Tn.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=Kb,t.__N=t.i=void 0})):(e.__h.forEach(Zb),e.__h.forEach(EA),e.__h=[])),KE=Tn},ct.diffed=function(r){WI&&WI(r);var e=r.__c;e&&e.__H&&(e.__H.__h.length&&(t9.push(e)!==1&&UI===ct.requestAnimationFrame||((UI=ct.requestAnimationFrame)||function(t){var n,i=function(){clearTimeout(o),XI&&cancelAnimationFrame(n),setTimeout(t)},o=setTimeout(i,100);XI&&(n=requestAnimationFrame(i))})(m_e)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==Kb&&(t.__=t.__V),t.i=void 0,t.__V=Kb})),KE=Tn=null},ct.__c=function(r,e){e.some(function(t){try{t.__h.forEach(Zb),t.__h=t.__h.filter(function(n){return!n.__||EA(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],ct.__e(n,t.__v)}}),GI&&GI(r,e)},ct.unmount=function(r){YI&&YI(r);var e,t=r.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{Zb(n)}catch(i){e=i}}),e&&ct.__e(e,t.__v))};var XI=typeof requestAnimationFrame=="function";function Zb(r){var e=Tn,t=r.__c;typeof t=="function"&&(r.__c=void 0,t()),Tn=e}function EA(r){var e=Tn;r.__c=r.__(),Tn=e}function dL(r,e){return!r||r.length!==e.length||e.some(function(t,n){return t!==r[n]})}function n9(r,e){return typeof e=="function"?e(r):e}const To=(r,e)=>()=>{const[t,n]=Xo(()=>e());return qo(()=>{const i=e(n);return()=>{i.cancel()}},[]),[t,r]},[W2,v_e]=De(void 0);hn(()=>W2(void 0));const[i9,g_e]=De(void 0),[pL,y_e]=De(!1),[__e,w_e]=De(!1);De(void 0);const a_=To(Yf,hn),fL=To(RS,Zs),b_e=To(gk,jS),x_e=To(Mk,Ck),S_e=To(pk,od),M_e=To(Lb,Ye),C_e=To(vg,ad),E_e=To(VT,zT),o9=To(W2,v_e),s9=To(i9,g_e),P_e=To(pL,y_e),mL=To(__e,w_e),T_e=To(UF,uoe),A_e=To(hk,fs),k_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",style:{left:-2},children:ae("path",{fill:"#fff",d:"M279.552 198.879a22.26 22.26 0 0135.217-20.347L933.265 628.47a22.26 22.26 0 01-11.799 40.248l-324.43 19.456a22.26 22.26 0 00-17.23 9.972l-179.11 271.227a22.26 22.26 0 01-40.738-9.929L279.597 198.88z"})}),L_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:[ae("path",{fill:"#fff",d:"M808.192 246.528a320.16 320.16 0 00-592.352 0A238.592 238.592 0 0032 479.936c0 132.352 107.648 240 240 240h91.488a32 32 0 100-64H272a176.192 176.192 0 01-176-176 175.04 175.04 0 01148.48-173.888l19.04-2.976 6.24-18.24C305.248 181.408 402.592 111.936 512 111.936a256 256 0 01242.208 172.896l6.272 18.24 19.04 2.976A175.04 175.04 0 01928 479.936c0 97.024-78.976 176-176 176h-97.28a32 32 0 100 64H752c132.352 0 240-107.648 240-240a238.592 238.592 0 00-183.808-233.408z"}),ae("path",{fill:"#fff",d:"M649.792 789.888L544 876.48V447.936a32 32 0 00-64 0V876.48l-106.752-87.424a31.968 31.968 0 10-40.544 49.504l159.04 130.24a32 32 0 0040.576 0l158.048-129.44a32 32 0 10-40.576-49.472z"})]}),O_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:[ae("path",{fill:"#fff",d:"M870.4 342.4c-12.8 0-24-11.2-24-24V153.6c0-12.8 11.2-24 24-24s24 11.2 24 24v164.8c0 12.8-11.2 24-24 24z"}),ae("path",{fill:"#fff",d:"M870.4 177.6H705.6c-12.8 0-24-11.2-24-24s11.2-24 24-24h164.8c12.8 0 24 11.2 24 24s-11.2 24-24 24zm-96 716.8H249.6c-65.6 0-120-54.4-120-120V249.6c0-65.6 54.4-120 120-120H512c12.8 0 24 11.2 24 24s-11.2 24-24 24H249.6c-40 0-72 32-72 72v524.8c0 40 32 72 72 72h524.8c40 0 72-32 72-72V512c0-12.8 11.2-24 24-24s24 11.2 24 24v262.4c0 65.6-54.4 120-120 120z"}),ae("path",{fill:"#fff",d:"M526.4 521.6c-6.4 0-12.8-1.6-17.6-6.4-9.6-9.6-9.6-24 0-33.6l344-344c9.6-9.6 24-9.6 33.6 0 9.6 9.6 9.6 24 0 33.6l-344 344c-4.8 4.8-11.2 6.4-16 6.4z"})]}),D_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:ae("path",{fill:"#fff",d:"M836.8 353.6c-11.2-3.2-20.8-6.4-32-9.6 1.6-8 3.2-14.4 4.8-22.4 24-118.4 8-214.4-46.4-246.4C710.4 44.8 624 76.8 537.6 152c-8 8-17.6 14.4-25.6 22.4-4.8-4.8-11.2-9.6-16-16-91.2-81.6-182.4-115.2-236.8-83.2-52.8 30.4-68.8 120-46.4 233.6 1.6 11.2 4.8 22.4 8 33.6-12.8 3.2-25.6 8-36.8 11.2C76.8 392 0 451.2 0 510.4c0 62.4 81.6 124.8 192 163.2 9.6 3.2 17.6 6.4 27.2 8-3.2 12.8-6.4 24-8 36.8-20.8 110.4-4.8 198.4 48 228.8 54.4 32 145.6 0 233.6-78.4 6.4-6.4 14.4-12.8 20.8-19.2 8 8 17.6 16 27.2 24 84.8 73.6 169.6 104 222.4 73.6 54.4-32 72-126.4 48-241.6-1.6-8-3.2-17.6-6.4-27.2 6.4-1.6 12.8-3.2 19.2-6.4 116.8-35.2 200-97.6 200-161.6 0-59.2-78.4-118.4-187.2-156.8zM566.4 184c75.2-65.6 144-89.6 176-72 33.6 19.2 46.4 97.6 25.6 201.6-1.6 6.4-3.2 12.8-4.8 20.8-44.8-9.6-89.6-17.6-134.4-20.8C603.2 276.8 574.4 240 544 208c6.4-9.6 14.4-16 22.4-24zm-232 430.4c9.6 17.6 20.8 35.2 32 51.2-32-3.2-62.4-8-92.8-14.4 8-28.8 19.2-59.2 32-89.6 9.6 19.2 19.2 36.8 28.8 52.8zm-60.8-240c28.8-6.4 59.2-11.2 91.2-16-11.2 16-20.8 33.6-30.4 51.2-9.6 17.6-19.2 33.6-28.8 52.8-12.8-30.4-22.4-59.2-32-88zM328 512c12.8-27.2 27.2-54.4 43.2-81.6s32-52.8 48-78.4c30.4-1.6 60.8-3.2 91.2-3.2s62.4 1.6 91.2 3.2c17.6 25.6 33.6 51.2 48 76.8s30.4 52.8 43.2 81.6c-12.8 27.2-27.2 54.4-43.2 81.6-16 27.2-32 52.8-48 78.4-30.4 1.6-60.8 3.2-92.8 3.2s-62.4-1.6-91.2-3.2C400 644.8 384 619.2 368 592s-25.6-52.8-40-80zm361.6 102.4l28.8-52.8c12.8 28.8 24 59.2 33.6 88-30.4 6.4-62.4 12.8-94.4 16 11.2-16 22.4-33.6 32-51.2zm28.8-153.6L689.6 408c-9.6-17.6-20.8-33.6-30.4-49.6 32 4.8 62.4 9.6 91.2 16-8 30.4-19.2 59.2-32 86.4zM512 236.8c20.8 22.4 40 46.4 59.2 72-40-1.6-80-1.6-118.4 0 19.2-27.2 40-51.2 59.2-72zM280 113.6c33.6-19.2 108.8 8 187.2 78.4 4.8 4.8 9.6 9.6 16 14.4C452.8 240 424 275.2 396.8 312c-44.8 4.8-89.6 11.2-134.4 20.8-3.2-9.6-4.8-20.8-6.4-30.4-19.2-97.6-6.4-169.6 24-188.8zm-48 528c-8-3.2-16-4.8-25.6-8-43.2-12.8-91.2-35.2-126.4-62.4C59.2 556.8 46.4 536 41.6 512c0-36.8 64-83.2 155.2-115.2 11.2-4.8 22.4-8 35.2-11.2 14.4 43.2 30.4 86.4 49.6 128-19.2 40-36.8 83.2-49.6 128zm232 195.2c-33.6 30.4-72 54.4-113.6 70.4-22.4 11.2-48 11.2-70.4 3.2-32-19.2-44.8-89.6-27.2-184 1.6-11.2 4.8-22.4 8-33.6 44.8 9.6 89.6 16 136 19.2 25.6 36.8 56 73.6 86.4 107.2-6.4 6.4-12.8 12.8-19.2 17.6zm49.6-48c-20.8-22.4-40-46.4-60.8-72 19.2 0 38.4 1.6 59.2 1.6 20.8 0 41.6 0 60.8-1.6-19.2 24-38.4 48-59.2 72zM774.4 848c-1.6 24-14.4 48-33.6 62.4-32 19.2-99.2-4.8-172.8-68.8-8-8-16-14.4-25.6-22.4 30.4-33.6 59.2-68.8 84.8-107.2 46.4-3.2 91.2-11.2 136-20.8l4.8 24c11.2 43.2 12.8 89.6 6.4 132.8zm36.8-214.4c-4.8 1.6-11.2 3.2-17.6 4.8-14.4-43.2-32-86.4-51.2-128 19.2-40 35.2-83.2 49.6-126.4 11.2 3.2 20.8 6.4 30.4 9.6 92.8 32 158.4 80 158.4 116.8 0 40-68.8 89.6-169.6 123.2zM512 603.2c51.2 0 91.2-41.6 91.2-91.2s-41.6-91.2-91.2-91.2-91.2 41.6-91.2 91.2 40 91.2 91.2 91.2z"})}),R_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:ae("path",{fill:"#fff",d:"M777.8 128.6H624L512 305.8l-96-177.2H64L512 896l448-767.4H777.8zm-602.4 64H283L512 589l228.8-396.4h107.6L512 769 175.4 192.6z"})}),N_e=()=>ae("div",{style:{width:"60%",height:2,background:"rgba(255, 255, 255, 0.1)",margin:12}}),db=({children:r})=>!Array.isArray(r)||!r.length?null:ae(Ba,{children:[r,ae(N_e,{})]}),l_=()=>{const r=dm(null);return qo(()=>{const e=r.current;if(!e)return;const t=n=>n.stopPropagation();return e.addEventListener("mousedown",t),e.addEventListener("pointerdown",t),e.addEventListener("touchstart",t),e.addEventListener("keydown",t),()=>{e.removeEventListener("mousedown",t),e.removeEventListener("pointerdown",t),e.removeEventListener("touchstart",t),e.removeEventListener("keydown",t)}},[]),r},I_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:[ae("path",{fill:"#fff",d:"M856.2 47.8H167.8c-66.2 0-120 53.8-120 120v688.6c0 66.2 53.8 120 120 120h688.6c66.2 0 120-53.8 120-120V167.8c-.2-66.2-54-120-120.2-120zm60 808.4c0 33-27 60-60 60H167.8c-33 0-60-27-60-60V167.8c0-33 27-60 60-60h688.6c33 0 60 27 60 60v688.4z"}),ae("path",{fill:"#fff",d:"M646.6 466.2l-163.4-94.4c-16.8-9.8-37-9.8-54 0-16.8 9.8-27 27.2-27 46.8v188.8c0 19.6 10 37 27 46.8 8.4 4.8 17.8 7.4 27 7.4s18.6-2.4 27-7.4l163.4-94.4c16.8-9.8 27-27.2 27-46.8-.2-19.6-10.2-37-27-46.8z"})]}),V_e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:[ae("path",{fill:"#fff",d:"M195.1 334.6c-72.2 0-131-58.7-131-131s58.7-131.1 131-131.1c35 0 67.9 13.6 92.6 38.3 24.8 24.7 38.4 57.6 38.4 92.7 0 35-13.6 67.9-38.3 92.7-24.7 24.8-57.6 38.4-92.7 38.4.1 0 .1 0 0 0zm0-215.8c-46.8 0-84.8 38.1-84.8 84.8 0 46.7 38.1 84.8 84.8 84.8 22.7 0 43.9-8.8 60-24.9 16-16 24.8-37.3 24.8-60 0-22.6-8.8-43.9-24.9-59.9-15.9-16-37.2-24.8-59.9-24.8zm632.4 832.3c-35 0-67.9-13.6-92.6-38.3-24.8-24.7-38.4-57.7-38.4-92.7s13.6-67.9 38.3-92.7c24.7-24.8 57.7-38.4 92.7-38.4h.1c72.2 0 131 58.7 131.1 131-.1 72.2-58.9 131-131.2 131.1.1 0 0 0 0 0zm0-215.9c-22.7 0-44 8.8-60 24.9-16 16-24.8 37.3-24.8 60 0 22.7 8.8 43.9 24.9 60 16 16 37.3 24.8 59.9 24.8 46.7 0 84.8-38.1 84.8-84.8 0-46.9-38-84.9-84.8-84.9z"}),ae("path",{fill:"#fff",d:"M241.6 843.4c-47.2 0-91.6-18.5-125.2-52-33.6-33.6-52.1-78-52.1-125.2s18.5-91.7 52-125.3c33.6-33.6 78-52.1 125.2-52.1l539.6-.2c34.8 0 67.7-13.7 92.5-38.6 24.8-24.9 38.5-57.7 38.5-92.6 0-72.2-58.8-131-131.1-131h-.1l-474.1.2v-46.3l474.1-.2h.1c47.2 0 91.6 18.5 125.2 52 33.6 33.6 52.1 78 52.1 125.2s-18.5 91.7-52 125.3c-33.6 33.6-78 52.1-125.2 52.1l-539.6.3c-72.3 0-131 58.8-131 131.1 0 72.2 58.8 131 131.1 131h.1l481.8-.2v46.3l-481.9.2z"})]}),G2=(()=>{if(typeof self>"u")return!1;if(!("top"in self&&self!==top)){if("showOpenFilePicker"in self)return"showOpenFilePicker"}return!1})(),z_e=G2?Promise.resolve().then(function(){return G_e}):Promise.resolve().then(function(){return q_e});async function B_e(...r){return(await z_e).default(...r)}const F_e=G2?Promise.resolve().then(function(){return Y_e}):Promise.resolve().then(function(){return K_e});async function U_e(...r){return(await F_e).default(...r)}const j_e=G2?Promise.resolve().then(function(){return X_e}):Promise.resolve().then(function(){return Z_e});async function H_e(...r){return(await j_e).default(...r)}const W_e=async r=>{const e=await r.getFile();return e.handle=r,e};var a9=async(r=[{}])=>{Array.isArray(r)||(r=[r]);const e=[];r.forEach((i,o)=>{e[o]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(s=>{e[o].accept[s]=i.extensions||[]}):e[o].accept["*/*"]=i.extensions||[]});const t=await window.showOpenFilePicker({id:r[0].id,startIn:r[0].startIn,types:e,multiple:r[0].multiple||!1,excludeAcceptAllOption:r[0].excludeAcceptAllOption||!1}),n=await Promise.all(t.map(W_e));return r[0].multiple?n:n[0]},G_e={__proto__:null,default:a9};function Jb(r){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var n=t.done;return Promise.resolve(t.value).then(function(i){return{value:i,done:n}})}return Jb=function(t){this.s=t,this.n=t.next},Jb.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return n===void 0?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return n===void 0?Promise.reject(t):e(n.apply(this.s,arguments))}},new Jb(r)}const l9=async(r,e,t=r.name,n)=>{const i=[],o=[];var s,a=!1,l=!1;try{for(var c,d=function(f){var m,g,b,_=2;for(typeof Symbol<"u"&&(g=Symbol.asyncIterator,b=Symbol.iterator);_--;){if(g&&(m=f[g])!=null)return m.call(f);if(b&&(m=f[b])!=null)return new Jb(m.call(f));g="@@asyncIterator",b="@@iterator"}throw new TypeError("Object is not async iterable")}(r.values());a=!(c=await d.next()).done;a=!1){const f=c.value,m=`${t}/${f.name}`;f.kind==="file"?o.push(f.getFile().then(g=>(g.directoryHandle=r,g.handle=f,Object.defineProperty(g,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>m})))):f.kind!=="directory"||!e||n&&n(f)||i.push(l9(f,e,m,n))}}catch(f){l=!0,s=f}finally{try{a&&d.return!=null&&await d.return()}finally{if(l)throw s}}return[...(await Promise.all(i)).flat(),...await Promise.all(o)]};var u9=async(r={})=>{r.recursive=r.recursive||!1,r.mode=r.mode||"read";const e=await window.showDirectoryPicker({id:r.id,startIn:r.startIn,mode:r.mode});return l9(e,r.recursive,void 0,r.skipDirectory)},Y_e={__proto__:null,default:u9},c9=async(r,e=[{}],t=null,n=!1,i=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const o=[];let s=null;if(r instanceof Blob&&r.type?s=r.type:r.headers&&r.headers.get("content-type")&&(s=r.headers.get("content-type")),e.forEach((c,d)=>{o[d]={description:c.description||"Files",accept:{}},c.mimeTypes?(d===0&&s&&c.mimeTypes.push(s),c.mimeTypes.map(f=>{o[d].accept[f]=c.extensions||[]})):s?o[d].accept[s]=c.extensions||[]:o[d].accept["*/*"]=c.extensions||[]}),t)try{await t.getFile()}catch(c){if(t=null,n)throw c}const a=t||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:o,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!t&&i&&i(a);const l=await a.createWritable();return"stream"in r?(await r.stream().pipeTo(l),a):"body"in r?(await r.body.pipeTo(l),a):(await l.write(await r),await l.close(),a)},X_e={__proto__:null,default:c9},h9=async(r=[{}])=>(Array.isArray(r)||(r=[r]),new Promise((e,t)=>{const n=document.createElement("input");n.type="file";const i=[...r.map(l=>l.mimeTypes||[]),...r.map(l=>l.extensions||[])].join();n.multiple=r[0].multiple||!1,n.accept=i||"",n.style.display="none",document.body.append(n);const o=l=>{typeof s=="function"&&s(),e(l)},s=r[0].legacySetup&&r[0].legacySetup(o,()=>s(t),n),a=()=>{window.removeEventListener("focus",a),n.remove()};n.addEventListener("click",()=>{window.addEventListener("focus",a)}),n.addEventListener("change",()=>{window.removeEventListener("focus",a),n.remove(),o(n.multiple?Array.from(n.files):n.files[0])}),n.click()})),q_e={__proto__:null,default:h9},d9=async(r=[{}])=>(Array.isArray(r)||(r=[r]),r[0].recursive=r[0].recursive||!1,new Promise((e,t)=>{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0;const i=s=>{typeof o=="function"&&o(),e(s)},o=r[0].legacySetup&&r[0].legacySetup(i,()=>o(t),n);n.addEventListener("change",()=>{let s=Array.from(n.files);r[0].recursive?r[0].recursive&&r[0].skipDirectory&&(s=s.filter(a=>a.webkitRelativePath.split("/").every(l=>!r[0].skipDirectory({name:l,kind:"directory"})))):s=s.filter(a=>a.webkitRelativePath.split("/").length===2),i(s)}),n.click()})),K_e={__proto__:null,default:d9},p9=async(r,e={})=>{Array.isArray(e)&&(e=e[0]);const t=document.createElement("a");let n=r;"body"in r&&(n=await async function(s,a){const l=s.getReader(),c=new ReadableStream({start:m=>async function g(){return l.read().then(({done:b,value:_})=>{if(!b)return m.enqueue(_),g();m.close()})}()}),d=new Response(c),f=await d.blob();return l.releaseLock(),new Blob([f],{type:a})}(r.body,r.headers.get("content-type"))),t.download=e.fileName||"Untitled",t.href=URL.createObjectURL(await n);const i=()=>{typeof o=="function"&&o()},o=e.legacySetup&&e.legacySetup(i,()=>o(),t);return t.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(t.href),3e4),i()}),t.click(),null},Z_e={__proto__:null,default:p9};const J_e=Object.freeze(Object.defineProperty({__proto__:null,directoryOpen:U_e,directoryOpenLegacy:d9,directoryOpenModern:u9,fileOpen:B_e,fileOpenLegacy:h9,fileOpenModern:a9,fileSave:H_e,fileSaveLegacy:p9,fileSaveModern:c9,supported:G2},Symbol.toStringTag,{value:"Module"})),f9=({buttons:r})=>{var e,t,n,i,o,s,a,l,c,d,f,m;const g=l_(),[b]=C_e(),[_]=E_e(),[w]=a_(),M=w&&nd(w)&&!(w instanceof _d);return qo(()=>(FS(),()=>{US()}),[]),ae("div",{ref:g,className:"lingo3d-ui lingo3d-bg",style:{width:50,height:"100%",borderRight:"1px solid rgba(255, 255, 255, 0.05)",overflow:"hidden"},children:ae("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",opacity:.75,paddingTop:12},children:[ae(db,{children:[ae(is,{active:b==="select",onClick:()=>Uu("select"),children:ae(k_e,{})}),ae(is,{active:b==="translate",onClick:()=>Uu("translate"),children:ae(u_e,{})}),ae(is,{active:b==="rotate",disabled:M,onClick:()=>Uu("rotate"),children:ae(c_e,{})}),ae(is,{active:b==="scale",disabled:M,onClick:()=>Uu("scale"),children:ae(h_e,{})}),ae(is,{active:b==="path",onClick:()=>Uu("path"),children:ae(V_e,{})}),ae(is,{active:b==="play",onClick:()=>Uu("play"),children:ae(I_e,{})})]}),ae(db,{children:[ae(is,{active:_==="world",onClick:()=>NT("world"),disabled:b!=="translate"&&b!=="rotate",children:ae(d_e,{})}),ae(is,{active:_==="local",onClick:()=>NT("local"),disabled:b!=="translate"&&b!=="rotate"&&b!=="scale",children:ae(p_e,{})})]}),ae(db,{children:[!((e=r==null?void 0:r.openJSON)!=null&&e.hidden)&&ae(is,{onClick:(n=(t=r==null?void 0:r.openJSON)==null?void 0:t.onClick)!=null?n:q0e,children:ae(O_e,{})}),!((i=r==null?void 0:r.exportJSON)!=null&&i.hidden)&&ae(is,{onClick:(s=(o=r==null?void 0:r.exportJSON)==null?void 0:o.onClick)!=null?s:G0e,children:ae(L_e,{})})]}),ae(db,{children:[!((a=r==null?void 0:r.exportReact)!=null&&a.hidden)&&ae(is,{onClick:(c=(l=r==null?void 0:r.exportReact)==null?void 0:l.onClick)!=null?c:Y0e,children:ae(D_e,{})}),!((d=r==null?void 0:r.exportVue)!=null&&d.hidden)&&ae(is,{onClick:(m=(f=r==null?void 0:r.exportVue)==null?void 0:f.onClick)!=null?m:X0e,children:ae(R_e,{})})]})]})})};Td(f9,"lingo3d-toolbar",["buttons"]);var PA={exports:{}};/*! Tweakpane 3.1.0 (c) 2016 cocopon, licensed under the MIT license. */(function(r,e){(function(t,n){n(e)})(Ve,function(t){class n{constructor(h){const[v,E]=h.split("-"),R=v.split(".");this.major=parseInt(R[0],10),this.minor=parseInt(R[1],10),this.patch=parseInt(R[2],10),this.prerelease=E!=null?E:null}toString(){const h=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[h,this.prerelease].join("-"):h}}class i{constructor(h){this.controller_=h}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(h){this.controller_.viewProps.set("disabled",h)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(h){this.controller_.viewProps.set("hidden",h)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class o{constructor(h){this.target=h}}class s extends o{constructor(h,v,E,R){super(h),this.value=v,this.presetKey=E,this.last=R!=null?R:!0}}class a extends o{constructor(h,v,E){super(h),this.value=v,this.presetKey=E}}class l extends o{constructor(h,v){super(h),this.expanded=v}}class c extends o{constructor(h,v){super(h),this.index=v}}function d(y){return y==null}function f(y,h){if(y.length!==h.length)return!1;for(let v=0;v<y.length;v++)if(y[v]!==h[v])return!1;return!0}const m={alreadydisposed:()=>"View has been already disposed",invalidparams:y=>`Invalid parameters for '${y.name}'`,nomatchingcontroller:y=>`No matching controller for '${y.key}'`,nomatchingview:y=>`No matching view for '${JSON.stringify(y.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:y=>`Property '${y.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class g{constructor(h){var v;this.message=(v=m[h.type](h.context))!==null&&v!==void 0?v:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=h.type}static alreadyDisposed(){return new g({type:"alreadydisposed"})}static notBindable(){return new g({type:"notbindable"})}static propertyNotFound(h){return new g({type:"propertynotfound",context:{name:h}})}static shouldNeverHappen(){return new g({type:"shouldneverhappen"})}}class b{constructor(h,v,E){this.obj_=h,this.key_=v,this.presetKey_=E!=null?E:v}static isBindable(h){return!(h===null||typeof h!="object")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(h){this.obj_[this.key_]=h}writeProperty(h,v){const E=this.read();if(!b.isBindable(E))throw g.notBindable();if(!(h in E))throw g.propertyNotFound(h);E[h]=v}}class _ extends i{get label(){return this.controller_.props.get("label")}set label(h){this.controller_.props.set("label",h)}get title(){var h;return(h=this.controller_.valueController.props.get("title"))!==null&&h!==void 0?h:""}set title(h){this.controller_.valueController.props.set("title",h)}on(h,v){const E=v.bind(this);return this.controller_.valueController.emitter.on(h,()=>{E(new o(this))}),this}}class w{constructor(){this.observers_={}}on(h,v){let E=this.observers_[h];return E||(E=this.observers_[h]=[]),E.push({handler:v}),this}off(h,v){const E=this.observers_[h];return E&&(this.observers_[h]=E.filter(R=>R.handler!==v)),this}emit(h,v){const E=this.observers_[h];!E||E.forEach(R=>{R.handler(v)})}}const M="tp";function S(y){return(h,v)=>[M,"-",y,"v",h?`_${h}`:"",v?`-${v}`:""].join("")}function C(y,h){return v=>h(y(v))}function P(y){return y.rawValue}function T(y,h){y.emitter.on("change",C(P,h)),h(y.rawValue)}function L(y,h,v){T(y.value(h),v)}function O(y,h,v){v?y.classList.add(h):y.classList.remove(h)}function k(y,h){return v=>{O(y,h,v)}}function N(y,h){T(y,v=>{h.textContent=v!=null?v:""})}const V=S("btn");class W{constructor(h,v){this.element=h.createElement("div"),this.element.classList.add(V()),v.viewProps.bindClassModifiers(this.element);const E=h.createElement("button");E.classList.add(V("b")),v.viewProps.bindDisabled(E),this.element.appendChild(E),this.buttonElement=E;const R=h.createElement("div");R.classList.add(V("t")),N(v.props.value("title"),R),this.buttonElement.appendChild(R)}}class ee{constructor(h,v){this.emitter=new w,this.onClick_=this.onClick_.bind(this),this.props=v.props,this.viewProps=v.viewProps,this.view=new W(h,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class se{constructor(h,v){var E;this.constraint_=v==null?void 0:v.constraint,this.equals_=(E=v==null?void 0:v.equals)!==null&&E!==void 0?E:(R,Y)=>R===Y,this.emitter=new w,this.rawValue_=h}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(h){this.setRawValue(h,{forceEmit:!1,last:!0})}setRawValue(h,v){const E=v!=null?v:{forceEmit:!1,last:!0},R=this.constraint_?this.constraint_.constrain(h):h;!!this.equals_(this.rawValue_,R)&&!E.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=R,this.emitter.emit("change",{options:E,rawValue:R,sender:this}))}}class q{constructor(h){this.emitter=new w,this.value_=h}get rawValue(){return this.value_}set rawValue(h){this.setRawValue(h,{forceEmit:!1,last:!0})}setRawValue(h,v){const E=v!=null?v:{forceEmit:!1,last:!0};this.value_===h&&!E.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=h,this.emitter.emit("change",{options:E,rawValue:this.value_,sender:this}))}}function re(y,h){const v=h==null?void 0:h.constraint,E=h==null?void 0:h.equals;return!v&&!E?new q(y):new se(y,h)}class Z{constructor(h){this.emitter=new w,this.valMap_=h;for(const v in this.valMap_)this.valMap_[v].emitter.on("change",()=>{this.emitter.emit("change",{key:v,sender:this})})}static createCore(h){return Object.keys(h).reduce((v,E)=>Object.assign(v,{[E]:re(h[E])}),{})}static fromObject(h){const v=this.createCore(h);return new Z(v)}get(h){return this.valMap_[h].rawValue}set(h,v){this.valMap_[h].rawValue=v}value(h){return this.valMap_[h]}}function me(y,h){return Object.keys(h).reduce((E,R)=>{if(E===void 0)return;const Y=h[R],oe=Y(y[R]);return oe.succeeded?Object.assign(Object.assign({},E),{[R]:oe.value}):void 0},{})}function J(y,h){return y.reduce((v,E)=>{if(v===void 0)return;const R=h(E);if(!(!R.succeeded||R.value===void 0))return[...v,R.value]},[])}function Q(y){return y===null?!1:typeof y=="object"}function $(y){return h=>v=>{if(!h&&v===void 0)return{succeeded:!1,value:void 0};if(h&&v===void 0)return{succeeded:!0,value:void 0};const E=y(v);return E!==void 0?{succeeded:!0,value:E}:{succeeded:!1,value:void 0}}}function fe(y){return{custom:h=>$(h)(y),boolean:$(h=>typeof h=="boolean"?h:void 0)(y),number:$(h=>typeof h=="number"?h:void 0)(y),string:$(h=>typeof h=="string"?h:void 0)(y),function:$(h=>typeof h=="function"?h:void 0)(y),constant:h=>$(v=>v===h?h:void 0)(y),raw:$(h=>h)(y),object:h=>$(v=>{if(Q(v))return me(v,h)})(y),array:h=>$(v=>{if(Array.isArray(v))return J(v,h)})(y)}}const he={optional:fe(!0),required:fe(!1)};function Se(y,h){const v=he.required.object(h)(y);return v.succeeded?v.value:void 0}function Re(y){return y&&y.parentElement&&y.parentElement.removeChild(y),null}function st(){return["veryfirst","first","last","verylast"]}const ve=S(""),St={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class tt{constructor(h){this.parent_=null,this.blade=h.blade,this.view=h.view,this.viewProps=h.viewProps;const v=this.view.element;this.blade.value("positions").emitter.on("change",()=>{st().forEach(E=>{v.classList.remove(ve(void 0,St[E]))}),this.blade.get("positions").forEach(E=>{v.classList.add(ve(void 0,St[E]))})}),this.viewProps.handleDispose(()=>{Re(v)})}get parent(){return this.parent_}}const Ge="http://www.w3.org/2000/svg";function ze(y){y.offsetHeight}function Ae(y,h){const v=y.style.transition;y.style.transition="none",h(),y.style.transition=v}function Ce(y){return y.ontouchstart!==void 0}function xe(){return new Function("return this")()}function Ue(){return xe().document}function Fe(y){const h=y.ownerDocument.defaultView;return h&&"document"in h?y.getContext("2d"):null}const dt={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function lt(y,h){const v=y.createElementNS(Ge,"svg");return v.innerHTML=dt[h],v}function _t(y,h,v){y.insertBefore(h,y.children[v])}function vt(y){y.parentElement&&y.parentElement.removeChild(y)}function ce(y){for(;y.children.length>0;)y.removeChild(y.children[0])}function te(y){for(;y.childNodes.length>0;)y.removeChild(y.childNodes[0])}function I(y){return y.relatedTarget?y.relatedTarget:"explicitOriginalTarget"in y?y.explicitOriginalTarget:null}const B=S("lbl");function le(y,h){const v=y.createDocumentFragment();return h.split(`
`).map(E=>y.createTextNode(E)).forEach((E,R)=>{R>0&&v.appendChild(y.createElement("br")),v.appendChild(E)}),v}class Te{constructor(h,v){this.element=h.createElement("div"),this.element.classList.add(B()),v.viewProps.bindClassModifiers(this.element);const E=h.createElement("div");E.classList.add(B("l")),L(v.props,"label",Y=>{d(Y)?this.element.classList.add(B(void 0,"nol")):(this.element.classList.remove(B(void 0,"nol")),te(E),E.appendChild(le(h,Y)))}),this.element.appendChild(E),this.labelElement=E;const R=h.createElement("div");R.classList.add(B("v")),this.element.appendChild(R),this.valueElement=R}}class Ne extends tt{constructor(h,v){const E=v.valueController.viewProps;super(Object.assign(Object.assign({},v),{view:new Te(h,{props:v.props,viewProps:E}),viewProps:E})),this.props=v.props,this.valueController=v.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const Be={id:"button",type:"blade",accept(y){const h=he,v=Se(y,{title:h.required.string,view:h.required.constant("button"),label:h.optional.string});return v?{params:v}:null},controller(y){return new Ne(y.document,{blade:y.blade,props:Z.fromObject({label:y.params.label}),valueController:new ee(y.document,{props:Z.fromObject({title:y.params.title}),viewProps:y.viewProps})})},api(y){return!(y.controller instanceof Ne)||!(y.controller.valueController instanceof ee)?null:new _(y.controller)}};class nt extends tt{constructor(h){super(h),this.value=h.value}}function ge(){return new Z({positions:re([],{equals:f})})}class et extends Z{constructor(h){super(h)}static create(h){const v={completed:!0,expanded:h,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},E=Z.createCore(v);return new et(E)}get styleExpanded(){var h;return(h=this.get("temporaryExpanded"))!==null&&h!==void 0?h:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const h=this.get("expandedHeight");return this.get("shouldFixHeight")&&!d(h)?`${h}px`:"auto"}bindExpandedClass(h,v){const E=()=>{this.styleExpanded?h.classList.add(v):h.classList.remove(v)};L(this,"expanded",E),L(this,"temporaryExpanded",E)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Qe(y,h){let v=0;return Ae(h,()=>{y.set("expandedHeight",null),y.set("temporaryExpanded",!0),ze(h),v=h.clientHeight,y.set("temporaryExpanded",null),ze(h)}),v}function it(y,h){h.style.height=y.styleHeight}function qe(y,h){y.value("expanded").emitter.on("beforechange",()=>{y.set("completed",!1),d(y.get("expandedHeight"))&&y.set("expandedHeight",Qe(y,h)),y.set("shouldFixHeight",!0),ze(h)}),y.emitter.on("change",()=>{it(y,h)}),it(y,h),h.addEventListener("transitionend",v=>{v.propertyName==="height"&&y.cleanUpTransition()})}class bt extends i{constructor(h,v){super(h),this.rackApi_=v}}function Gt(y,h){return y.addBlade(Object.assign(Object.assign({},h),{view:"button"}))}function xr(y,h){return y.addBlade(Object.assign(Object.assign({},h),{view:"folder"}))}function ne(y,h){const v=h!=null?h:{};return y.addBlade(Object.assign(Object.assign({},v),{view:"separator"}))}function Xe(y,h){return y.addBlade(Object.assign(Object.assign({},h),{view:"tab"}))}class we{constructor(h){this.emitter=new w,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=h}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(h){for(const v of this.allItems())if(h(v))return v;return null}includes(h){return this.cache_.has(h)}add(h,v){if(this.includes(h))throw g.shouldNeverHappen();const E=v!==void 0?v:this.items_.length;this.items_.splice(E,0,h),this.cache_.add(h);const R=this.extract_(h);R&&(R.emitter.on("add",this.onSubListAdd_),R.emitter.on("remove",this.onSubListRemove_),R.allItems().forEach(Y=>{this.cache_.add(Y)})),this.emitter.emit("add",{index:E,item:h,root:this,target:this})}remove(h){const v=this.items_.indexOf(h);if(v<0)return;this.items_.splice(v,1),this.cache_.delete(h);const E=this.extract_(h);E&&(E.emitter.off("add",this.onSubListAdd_),E.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:v,item:h,root:this,target:this})}onSubListAdd_(h){this.cache_.add(h.item),this.emitter.emit("add",{index:h.index,item:h.item,root:this,target:h.target})}onSubListRemove_(h){this.cache_.delete(h.item),this.emitter.emit("remove",{index:h.index,item:h.item,root:this,target:h.target})}}class Ke extends i{constructor(h){super(h),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new w,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(h){this.controller_.props.set("label",h)}on(h,v){const E=v.bind(this);return this.emitter_.on(h,R=>{E(R.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(h){const v=h.sender.target.read();this.emitter_.emit("change",{event:new s(this,v,this.controller_.binding.target.presetKey,h.options.last)})}}class Ie extends Ne{constructor(h,v){super(h,v),this.binding=v.binding}}class rr extends i{constructor(h){super(h),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new w,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(h){this.controller_.props.set("label",h)}on(h,v){const E=v.bind(this);return this.emitter_.on(h,R=>{E(R.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(h){const v=h.sender.target.read();this.emitter_.emit("update",{event:new a(this,v,this.controller_.binding.target.presetKey)})}}class fr extends Ne{constructor(h,v){super(h,v),this.binding=v.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function Dr(y){return y instanceof ai?y.apiSet_:y instanceof bt?y.rackApi_.apiSet_:null}function xi(y,h){const v=y.find(E=>E.controller_===h);if(!v)throw g.shouldNeverHappen();return v}function Sr(y,h,v){if(!b.isBindable(y))throw g.notBindable();return new b(y,h,v)}class ai extends i{constructor(h,v){super(h),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new w,this.apiSet_=new we(Dr),this.pool_=v;const E=this.controller_.rack;E.emitter.on("add",this.onRackAdd_),E.emitter.on("remove",this.onRackRemove_),E.emitter.on("inputchange",this.onRackInputChange_),E.emitter.on("monitorupdate",this.onRackMonitorUpdate_),E.children.forEach(R=>{this.setUpApi_(R)})}get children(){return this.controller_.rack.children.map(h=>xi(this.apiSet_,h))}addInput(h,v,E){const R=E!=null?E:{},Y=this.controller_.view.element.ownerDocument,oe=this.pool_.createInput(Y,Sr(h,v,R.presetKey),R),Oe=new Ke(oe);return this.add(Oe,R.index)}addMonitor(h,v,E){const R=E!=null?E:{},Y=this.controller_.view.element.ownerDocument,oe=this.pool_.createMonitor(Y,Sr(h,v),R),Oe=new rr(oe);return this.add(Oe,R.index)}addFolder(h){return xr(this,h)}addButton(h){return Gt(this,h)}addSeparator(h){return ne(this,h)}addTab(h){return Xe(this,h)}add(h,v){this.controller_.rack.add(h.controller_,v);const E=this.apiSet_.find(R=>R.controller_===h.controller_);return E&&this.apiSet_.remove(E),this.apiSet_.add(h),h}remove(h){this.controller_.rack.remove(h.controller_)}addBlade(h){const v=this.controller_.view.element.ownerDocument,E=this.pool_.createBlade(v,h),R=this.pool_.createBladeApi(E);return this.add(R,h.index)}on(h,v){const E=v.bind(this);return this.emitter_.on(h,R=>{E(R.event)}),this}setUpApi_(h){this.apiSet_.find(v=>v.controller_===h)||this.apiSet_.add(this.pool_.createBladeApi(h))}onRackAdd_(h){this.setUpApi_(h.bladeController)}onRackRemove_(h){if(h.isRoot){const v=xi(this.apiSet_,h.bladeController);this.apiSet_.remove(v)}}onRackInputChange_(h){const v=h.bladeController;if(v instanceof Ie){const E=xi(this.apiSet_,v),R=v.binding;this.emitter_.emit("change",{event:new s(E,R.target.read(),R.target.presetKey,h.options.last)})}else if(v instanceof nt){const E=xi(this.apiSet_,v);this.emitter_.emit("change",{event:new s(E,v.value.rawValue,void 0,h.options.last)})}}onRackMonitorUpdate_(h){if(!(h.bladeController instanceof fr))throw g.shouldNeverHappen();const v=xi(this.apiSet_,h.bladeController),E=h.bladeController.binding;this.emitter_.emit("update",{event:new a(v,E.target.read(),E.target.presetKey)})}}class Yn extends bt{constructor(h,v){super(h,new ai(h.rackController,v)),this.emitter_=new w,this.controller_.foldable.value("expanded").emitter.on("change",E=>{this.emitter_.emit("fold",{event:new l(this,E.sender.rawValue)})}),this.rackApi_.on("change",E=>{this.emitter_.emit("change",{event:E})}),this.rackApi_.on("update",E=>{this.emitter_.emit("update",{event:E})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(h){this.controller_.foldable.set("expanded",h)}get title(){return this.controller_.props.get("title")}set title(h){this.controller_.props.set("title",h)}get children(){return this.rackApi_.children}addInput(h,v,E){return this.rackApi_.addInput(h,v,E)}addMonitor(h,v,E){return this.rackApi_.addMonitor(h,v,E)}addFolder(h){return this.rackApi_.addFolder(h)}addButton(h){return this.rackApi_.addButton(h)}addSeparator(h){return this.rackApi_.addSeparator(h)}addTab(h){return this.rackApi_.addTab(h)}add(h,v){return this.rackApi_.add(h,v)}remove(h){this.rackApi_.remove(h)}addBlade(h){return this.rackApi_.addBlade(h)}on(h,v){const E=v.bind(this);return this.emitter_.on(h,R=>{E(R.event)}),this}}class Ic extends tt{constructor(h){super({blade:h.blade,view:h.view,viewProps:h.rackController.viewProps}),this.rackController=h.rackController}}class Vc{constructor(h,v){const E=S(v.viewName);this.element=h.createElement("div"),this.element.classList.add(E()),v.viewProps.bindClassModifiers(this.element)}}function iu(y,h){for(let v=0;v<y.length;v++){const E=y[v];if(E instanceof Ie&&E.binding===h)return E}return null}function jm(y,h){for(let v=0;v<y.length;v++){const E=y[v];if(E instanceof fr&&E.binding===h)return E}return null}function zc(y,h){for(let v=0;v<y.length;v++){const E=y[v];if(E instanceof nt&&E.value===h)return E}return null}function Bc(y){return y instanceof ye?y.rack:y instanceof Ic?y.rackController.rack:null}function H(y){const h=Bc(y);return h?h.bcSet_:null}class ue{constructor(h){var v;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new w,this.blade_=h!=null?h:null,(v=this.blade_)===null||v===void 0||v.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new we(H),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(h,v){h.parent&&h.parent.remove(h),h.parent_=this,this.bcSet_.add(h,v)}remove(h){h.parent_=null,this.bcSet_.remove(h)}find(h){return this.bcSet_.allItems().filter(v=>v instanceof h)}onSetAdd_(h){this.updatePositions_();const v=h.target===h.root;if(this.emitter.emit("add",{bladeController:h.item,index:h.index,isRoot:v,sender:this}),!v)return;const E=h.item;if(E.viewProps.emitter.on("change",this.onChildViewPropsChange_),E.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),E.viewProps.handleDispose(this.onChildDispose_),E instanceof Ie)E.binding.emitter.on("change",this.onChildInputChange_);else if(E instanceof fr)E.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(E instanceof nt)E.value.emitter.on("change",this.onChildValueChange_);else{const R=Bc(E);if(R){const Y=R.emitter;Y.on("layout",this.onDescendantLayout_),Y.on("inputchange",this.onDescendantInputChange_),Y.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(h){this.updatePositions_();const v=h.target===h.root;if(this.emitter.emit("remove",{bladeController:h.item,isRoot:v,sender:this}),!v)return;const E=h.item;if(E instanceof Ie)E.binding.emitter.off("change",this.onChildInputChange_);else if(E instanceof fr)E.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(E instanceof nt)E.value.emitter.off("change",this.onChildValueChange_);else{const R=Bc(E);if(R){const Y=R.emitter;Y.off("layout",this.onDescendantLayout_),Y.off("inputchange",this.onDescendantInputChange_),Y.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const h=this.bcSet_.items.filter(R=>!R.viewProps.get("hidden")),v=h[0],E=h[h.length-1];this.bcSet_.items.forEach(R=>{const Y=[];R===v&&(Y.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&Y.push("veryfirst")),R===E&&(Y.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&Y.push("verylast")),R.blade.set("positions",Y)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(h){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(h=>h.viewProps.get("disposed")).forEach(h=>{this.bcSet_.remove(h)})}onChildInputChange_(h){const v=iu(this.find(Ie),h.sender);if(!v)throw g.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:v,options:h.options,sender:this})}onChildMonitorUpdate_(h){const v=jm(this.find(fr),h.sender);if(!v)throw g.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:v,sender:this})}onChildValueChange_(h){const v=zc(this.find(nt),h.sender);if(!v)throw g.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:v,options:h.options,sender:this})}onDescendantLayout_(h){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(h){this.emitter.emit("inputchange",{bladeController:h.bladeController,options:h.options,sender:this})}onDescendantMonitorUpdate_(h){this.emitter.emit("monitorupdate",{bladeController:h.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class ye extends tt{constructor(h,v){super(Object.assign(Object.assign({},v),{view:new Vc(h,{viewName:"brk",viewProps:v.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const E=new ue(v.root?void 0:v.blade);E.emitter.on("add",this.onRackAdd_),E.emitter.on("remove",this.onRackRemove_),this.rack=E,this.viewProps.handleDispose(()=>{for(let R=this.rack.children.length-1;R>=0;R--)this.rack.children[R].viewProps.set("disposed",!0)})}onRackAdd_(h){!h.isRoot||_t(this.view.element,h.bladeController.view.element,h.index)}onRackRemove_(h){!h.isRoot||vt(h.bladeController.view.element)}}const de=S("cnt");class Ee{constructor(h,v){var E;this.className_=S((E=v.viewName)!==null&&E!==void 0?E:"fld"),this.element=h.createElement("div"),this.element.classList.add(this.className_(),de()),v.viewProps.bindClassModifiers(this.element),this.foldable_=v.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),L(this.foldable_,"completed",k(this.element,this.className_(void 0,"cpl")));const R=h.createElement("button");R.classList.add(this.className_("b")),L(v.props,"title",ut=>{d(ut)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),v.viewProps.bindDisabled(R),this.element.appendChild(R),this.buttonElement=R;const Y=h.createElement("div");Y.classList.add(this.className_("t")),N(v.props.value("title"),Y),this.buttonElement.appendChild(Y),this.titleElement=Y;const oe=h.createElement("div");oe.classList.add(this.className_("m")),this.buttonElement.appendChild(oe);const Oe=v.containerElement;Oe.classList.add(this.className_("c")),this.element.appendChild(Oe),this.containerElement=Oe}}class at extends Ic{constructor(h,v){var E;const R=et.create((E=v.expanded)!==null&&E!==void 0?E:!0),Y=new ye(h,{blade:v.blade,root:v.root,viewProps:v.viewProps});super(Object.assign(Object.assign({},v),{rackController:Y,view:new Ee(h,{containerElement:Y.view.element,foldable:R,props:v.props,viewName:v.root?"rot":void 0,viewProps:v.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=v.props,this.foldable=R,qe(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Mt={id:"folder",type:"blade",accept(y){const h=he,v=Se(y,{title:h.required.string,view:h.required.constant("folder"),expanded:h.optional.boolean});return v?{params:v}:null},controller(y){return new at(y.document,{blade:y.blade,expanded:y.params.expanded,props:Z.fromObject({title:y.params.title}),viewProps:y.viewProps})},api(y){return y.controller instanceof at?new Yn(y.controller,y.pool):null}};class pt extends nt{constructor(h,v){const E=v.valueController.viewProps;super(Object.assign(Object.assign({},v),{value:v.valueController.value,view:new Te(h,{props:v.props,viewProps:E}),viewProps:E})),this.props=v.props,this.valueController=v.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Nt extends i{}const Mr=S("spr");class Bt{constructor(h,v){this.element=h.createElement("div"),this.element.classList.add(Mr()),v.viewProps.bindClassModifiers(this.element);const E=h.createElement("hr");E.classList.add(Mr("r")),this.element.appendChild(E)}}class Ft extends tt{constructor(h,v){super(Object.assign(Object.assign({},v),{view:new Bt(h,{viewProps:v.viewProps})}))}}const Qr={id:"separator",type:"blade",accept(y){const h=Se(y,{view:he.required.constant("separator")});return h?{params:h}:null},controller(y){return new Ft(y.document,{blade:y.blade,viewProps:y.viewProps})},api(y){return y.controller instanceof Ft?new Nt(y.controller):null}},gs=S("");function ao(y,h){return k(y,gs(void 0,h))}class li extends Z{constructor(h){super(h)}static create(h){var v,E;const R=h!=null?h:{},Y={disabled:(v=R.disabled)!==null&&v!==void 0?v:!1,disposed:!1,hidden:(E=R.hidden)!==null&&E!==void 0?E:!1},oe=Z.createCore(Y);return new li(oe)}bindClassModifiers(h){L(this,"disabled",ao(h,"disabled")),L(this,"hidden",ao(h,"hidden"))}bindDisabled(h){L(this,"disabled",v=>{h.disabled=v})}bindTabIndex(h){L(this,"disabled",v=>{h.tabIndex=v?-1:0})}handleDispose(h){this.value("disposed").emitter.on("change",v=>{v&&h()})}}const dn=S("tbi");class Qt{constructor(h,v){this.element=h.createElement("div"),this.element.classList.add(dn()),v.viewProps.bindClassModifiers(this.element),L(v.props,"selected",Y=>{Y?this.element.classList.add(dn(void 0,"sel")):this.element.classList.remove(dn(void 0,"sel"))});const E=h.createElement("button");E.classList.add(dn("b")),v.viewProps.bindDisabled(E),this.element.appendChild(E),this.buttonElement=E;const R=h.createElement("div");R.classList.add(dn("t")),N(v.props.value("title"),R),this.buttonElement.appendChild(R),this.titleElement=R}}class ea{constructor(h,v){this.emitter=new w,this.onClick_=this.onClick_.bind(this),this.props=v.props,this.viewProps=v.viewProps,this.view=new Qt(h,{props:v.props,viewProps:v.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class ta{constructor(h,v){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new ea(h,{props:v.itemProps,viewProps:li.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new ye(h,{blade:ge(),viewProps:li.create()}),this.props=v.props,L(this.props,"selected",E=>{this.itemController.props.set("selected",E),this.contentController.viewProps.set("hidden",!E)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class Xn{constructor(h,v){this.controller_=h,this.rackApi_=v}get title(){var h;return(h=this.controller_.itemController.props.get("title"))!==null&&h!==void 0?h:""}set title(h){this.controller_.itemController.props.set("title",h)}get selected(){return this.controller_.props.get("selected")}set selected(h){this.controller_.props.set("selected",h)}get children(){return this.rackApi_.children}addButton(h){return this.rackApi_.addButton(h)}addFolder(h){return this.rackApi_.addFolder(h)}addSeparator(h){return this.rackApi_.addSeparator(h)}addTab(h){return this.rackApi_.addTab(h)}add(h,v){this.rackApi_.add(h,v)}remove(h){this.rackApi_.remove(h)}addInput(h,v,E){return this.rackApi_.addInput(h,v,E)}addMonitor(h,v,E){return this.rackApi_.addMonitor(h,v,E)}addBlade(h){return this.rackApi_.addBlade(h)}}class lo extends bt{constructor(h,v){super(h,new ai(h.rackController,v)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new w,this.pageApiMap_=new Map,this.rackApi_.on("change",E=>{this.emitter_.emit("change",{event:E})}),this.rackApi_.on("update",E=>{this.emitter_.emit("update",{event:E})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(E=>{this.setUpPageApi_(E)})}get pages(){return this.controller_.pageSet.items.map(h=>{const v=this.pageApiMap_.get(h);if(!v)throw g.shouldNeverHappen();return v})}addPage(h){const v=this.controller_.view.element.ownerDocument,E=new ta(v,{itemProps:Z.fromObject({selected:!1,title:h.title}),props:Z.fromObject({selected:!1})});this.controller_.add(E,h.index);const R=this.pageApiMap_.get(E);if(!R)throw g.shouldNeverHappen();return R}removePage(h){this.controller_.remove(h)}on(h,v){const E=v.bind(this);return this.emitter_.on(h,R=>{E(R.event)}),this}setUpPageApi_(h){const v=this.rackApi_.apiSet_.find(R=>R.controller_===h.contentController);if(!v)throw g.shouldNeverHappen();const E=new Xn(h,v);this.pageApiMap_.set(h,E)}onPageAdd_(h){this.setUpPageApi_(h.item)}onPageRemove_(h){if(!this.pageApiMap_.get(h.item))throw g.shouldNeverHappen();this.pageApiMap_.delete(h.item)}onSelect_(h){this.emitter_.emit("select",{event:new c(this,h.rawValue)})}}const ys=-1;class Fc{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=re(!0),this.selectedIndex=re(ys),this.items_=[]}add(h,v){const E=v!=null?v:this.items_.length;this.items_.splice(E,0,h),h.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(h){const v=this.items_.indexOf(h);v<0||(this.items_.splice(v,1),h.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=ys,this.empty.rawValue=!0;return}const h=this.items_.findIndex(v=>v.rawValue);h<0?(this.items_.forEach((v,E)=>{v.rawValue=E===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((v,E)=>{v.rawValue=E===h}),this.selectedIndex.rawValue=h),this.empty.rawValue=!1}onItemSelectedChange_(h){if(h.rawValue){const v=this.items_.findIndex(E=>E===h.sender);this.items_.forEach((E,R)=>{E.rawValue=R===v}),this.selectedIndex.rawValue=v}else this.keepSelection_()}}const $r=S("tab");class Ya{constructor(h,v){this.element=h.createElement("div"),this.element.classList.add($r(),de()),v.viewProps.bindClassModifiers(this.element),T(v.empty,k(this.element,$r(void 0,"nop")));const E=h.createElement("div");E.classList.add($r("i")),this.element.appendChild(E),this.itemsElement=E;const R=v.contentsElement;R.classList.add($r("c")),this.element.appendChild(R),this.contentsElement=R}}class ou extends Ic{constructor(h,v){const E=new ye(h,{blade:v.blade,viewProps:v.viewProps}),R=new Fc;super({blade:v.blade,rackController:E,view:new Ya(h,{contentsElement:E.view.element,empty:R.empty,viewProps:v.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new we(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=R}get pageSet(){return this.pageSet_}add(h,v){this.pageSet_.add(h,v)}remove(h){this.pageSet_.remove(this.pageSet_.items[h])}onPageAdd_(h){const v=h.item;_t(this.view.itemsElement,v.itemController.view.element,h.index),this.rackController.rack.add(v.contentController,h.index),this.tab.add(v.props.value("selected"))}onPageRemove_(h){const v=h.item;vt(v.itemController.view.element),this.rackController.rack.remove(v.contentController),this.tab.remove(v.props.value("selected"))}}const Ln={id:"tab",type:"blade",accept(y){const h=he,v=Se(y,{pages:h.required.array(h.required.object({title:h.required.string})),view:h.required.constant("tab")});return!v||v.pages.length===0?null:{params:v}},controller(y){const h=new ou(y.document,{blade:y.blade,viewProps:y.viewProps});return y.params.pages.forEach(v=>{const E=new ta(y.document,{itemProps:Z.fromObject({selected:!1,title:v.title}),props:Z.fromObject({selected:!1})});h.add(E)}),h},api(y){return y.controller instanceof ou?new lo(y.controller,y.pool):null}};function su(y,h){const v=y.accept(h.params);if(!v)return null;const E=he.optional.boolean(h.params.disabled).value,R=he.optional.boolean(h.params.hidden).value;return y.controller({blade:ge(),document:h.document,params:Object.assign(Object.assign({},v.params),{disabled:E,hidden:R}),viewProps:li.create({disabled:E,hidden:R})})}class Ad{constructor(){this.disabled=!1,this.emitter=new w}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class au{constructor(h,v){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=h,this.emitter=new w,this.interval_=v,this.setTimer_()}get disabled(){return this.disabled_}set disabled(h){this.disabled_=h,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const h=this.doc_.defaultView;h&&h.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const h=this.doc_.defaultView;h&&(this.timerId_=h.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Uc{constructor(h){this.constraints=h}constrain(h){return this.constraints.reduce((v,E)=>E.constrain(v),h)}}function Ao(y,h){if(y instanceof h)return y;if(y instanceof Uc){const v=y.constraints.reduce((E,R)=>E||(R instanceof h?R:null),null);if(v)return v}return null}class ra{constructor(h){this.options=h}constrain(h){const v=this.options;return v.length===0||v.filter(E=>E.value===h).length>0?h:v[0].value}}class Xa{constructor(h){this.maxValue=h.max,this.minValue=h.min}constrain(h){let v=h;return d(this.minValue)||(v=Math.max(v,this.minValue)),d(this.maxValue)||(v=Math.min(v,this.maxValue)),v}}class kd{constructor(h,v=0){this.step=h,this.origin=v}constrain(h){const v=this.origin%this.step,E=Math.round((h-v)/this.step);return v+E*this.step}}const Ld=S("lst");class c_{constructor(h,v){this.onValueChange_=this.onValueChange_.bind(this),this.props_=v.props,this.element=h.createElement("div"),this.element.classList.add(Ld()),v.viewProps.bindClassModifiers(this.element);const E=h.createElement("select");E.classList.add(Ld("s")),L(this.props_,"options",Y=>{ce(E),Y.forEach((oe,Oe)=>{const ut=h.createElement("option");ut.dataset.index=String(Oe),ut.textContent=oe.text,ut.value=String(oe.value),E.appendChild(ut)})}),v.viewProps.bindDisabled(E),this.element.appendChild(E),this.selectElement=E;const R=h.createElement("div");R.classList.add(Ld("m")),R.appendChild(lt(h,"dropdown")),this.element.appendChild(R),v.value.emitter.on("change",this.onValueChange_),this.value_=v.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class qa{constructor(h,v){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=v.props,this.value=v.value,this.viewProps=v.viewProps,this.view=new c_(h,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(h){const v=h.currentTarget.selectedOptions.item(0);if(!v)return;const E=Number(v.dataset.index);this.value.rawValue=this.props.get("options")[E].value}}const h_=S("pop");class d_{constructor(h,v){this.element=h.createElement("div"),this.element.classList.add(h_()),v.viewProps.bindClassModifiers(this.element),T(v.shows,k(this.element,h_(void 0,"v")))}}class Od{constructor(h,v){this.shows=re(!1),this.viewProps=v.viewProps,this.view=new d_(h,{shows:this.shows,viewProps:this.viewProps})}}const Dd=S("txt");class lu{constructor(h,v){this.onChange_=this.onChange_.bind(this),this.element=h.createElement("div"),this.element.classList.add(Dd()),v.viewProps.bindClassModifiers(this.element),this.props_=v.props,this.props_.emitter.on("change",this.onChange_);const E=h.createElement("input");E.classList.add(Dd("i")),E.type="text",v.viewProps.bindDisabled(E),this.element.appendChild(E),this.inputElement=E,v.value.emitter.on("change",this.onChange_),this.value_=v.value,this.refresh()}refresh(){const h=this.props_.get("formatter");this.inputElement.value=h(this.value_.rawValue)}onChange_(){this.refresh()}}class jc{constructor(h,v){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=v.parser,this.props=v.props,this.value=v.value,this.viewProps=v.viewProps,this.view=new lu(h,{props:v.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(h){const v=h.currentTarget.value,E=this.parser_(v);d(E)||(this.value.rawValue=E),this.view.refresh()}}function p_(y){return String(y)}function f_(y){return y==="false"?!1:!!y}function Hm(y){return p_(y)}class m_{constructor(h){this.text=h}evaluate(){return Number(this.text)}toString(){return this.text}}const v_={"**":(y,h)=>Math.pow(y,h),"*":(y,h)=>y*h,"/":(y,h)=>y/h,"%":(y,h)=>y%h,"+":(y,h)=>y+h,"-":(y,h)=>y-h,"<<":(y,h)=>y<<h,">>":(y,h)=>y>>h,">>>":(y,h)=>y>>>h,"&":(y,h)=>y&h,"^":(y,h)=>y^h,"|":(y,h)=>y|h};class g_{constructor(h,v,E){this.left=v,this.operator=h,this.right=E}evaluate(){const h=v_[this.operator];if(!h)throw new Error(`unexpected binary operator: '${this.operator}`);return h(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const q2={"+":y=>y,"-":y=>-y,"~":y=>~y};class K2{constructor(h,v){this.operator=h,this.expression=v}evaluate(){const h=q2[this.operator];if(!h)throw new Error(`unexpected unary operator: '${this.operator}`);return h(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Wm(y){return(h,v)=>{for(let E=0;E<y.length;E++){const R=y[E](h,v);if(R!=="")return R}return""}}function uu(y,h){var v;const E=y.substr(h).match(/^\s+/);return(v=E&&E[0])!==null&&v!==void 0?v:""}function Z2(y,h){const v=y.substr(h,1);return v.match(/^[1-9]$/)?v:""}function Hc(y,h){var v;const E=y.substr(h).match(/^[0-9]+/);return(v=E&&E[0])!==null&&v!==void 0?v:""}function J2(y,h){const v=Hc(y,h);if(v!=="")return v;const E=y.substr(h,1);if(h+=1,E!=="-"&&E!=="+")return"";const R=Hc(y,h);return R===""?"":E+R}function Gm(y,h){const v=y.substr(h,1);if(h+=1,v.toLowerCase()!=="e")return"";const E=J2(y,h);return E===""?"":v+E}function Rd(y,h){const v=y.substr(h,1);if(v==="0")return v;const E=Z2(y,h);return h+=E.length,E===""?"":E+Hc(y,h)}function Q2(y,h){const v=Rd(y,h);if(h+=v.length,v==="")return"";const E=y.substr(h,1);if(h+=E.length,E!==".")return"";const R=Hc(y,h);return h+=R.length,v+E+R+Gm(y,h)}function $2(y,h){const v=y.substr(h,1);if(h+=v.length,v!==".")return"";const E=Hc(y,h);return h+=E.length,E===""?"":v+E+Gm(y,h)}function eM(y,h){const v=Rd(y,h);return h+=v.length,v===""?"":v+Gm(y,h)}const tM=Wm([Q2,$2,eM]);function rM(y,h){var v;const E=y.substr(h).match(/^[01]+/);return(v=E&&E[0])!==null&&v!==void 0?v:""}function Cr(y,h){const v=y.substr(h,2);if(h+=v.length,v.toLowerCase()!=="0b")return"";const E=rM(y,h);return E===""?"":v+E}function yr(y,h){var v;const E=y.substr(h).match(/^[0-7]+/);return(v=E&&E[0])!==null&&v!==void 0?v:""}function nM(y,h){const v=y.substr(h,2);if(h+=v.length,v.toLowerCase()!=="0o")return"";const E=yr(y,h);return E===""?"":v+E}function iM(y,h){var v;const E=y.substr(h).match(/^[0-9a-f]+/i);return(v=E&&E[0])!==null&&v!==void 0?v:""}function oM(y,h){const v=y.substr(h,2);if(h+=v.length,v.toLowerCase()!=="0x")return"";const E=iM(y,h);return E===""?"":v+E}const sM=Wm([Cr,nM,oM]),aM=Wm([sM,tM]);function lM(y,h){const v=aM(y,h);return h+=v.length,v===""?null:{evaluable:new m_(v),cursor:h}}function y_(y,h){const v=y.substr(h,1);if(h+=v.length,v!=="(")return null;const E=Nd(y,h);if(!E)return null;h=E.cursor,h+=uu(y,h).length;const R=y.substr(h,1);return h+=R.length,R!==")"?null:{evaluable:E.evaluable,cursor:h}}function uM(y,h){var v;return(v=lM(y,h))!==null&&v!==void 0?v:y_(y,h)}function xn(y,h){const v=uM(y,h);if(v)return v;const E=y.substr(h,1);if(h+=E.length,E!=="+"&&E!=="-"&&E!=="~")return null;const R=xn(y,h);return R?(h=R.cursor,{cursor:h,evaluable:new K2(E,R.evaluable)}):null}function Ym(y,h,v){v+=uu(h,v).length;const E=y.filter(R=>h.startsWith(R,v))[0];return E?(v+=E.length,v+=uu(h,v).length,{cursor:v,operator:E}):null}function Ka(y,h){return(v,E)=>{const R=y(v,E);if(!R)return null;E=R.cursor;let Y=R.evaluable;for(;;){const oe=Ym(h,v,E);if(!oe)break;E=oe.cursor;const Oe=y(v,E);if(!Oe)return null;E=Oe.cursor,Y=new g_(oe.operator,Y,Oe.evaluable)}return Y?{cursor:E,evaluable:Y}:null}}const __=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((y,h)=>Ka(y,h),xn);function Nd(y,h){return h+=uu(y,h).length,__(y,h)}function uo(y){const h=Nd(y,0);return!h||h.cursor+uu(y,h.cursor).length!==y.length?null:h.evaluable}function Jo(y){var h;const v=uo(y);return(h=v==null?void 0:v.evaluate())!==null&&h!==void 0?h:null}function Xm(y){if(typeof y=="number")return y;if(typeof y=="string"){const h=Jo(y);if(!d(h))return h}return 0}function w_(y){return String(y)}function Sn(y){return h=>h.toFixed(Math.max(Math.min(y,20),0))}const b_=Sn(0);function Wc(y){return b_(y)+"%"}function Si(y){return String(y)}function qm(y){return y}function Fi(y,h){for(;y.length<h;)y.push(void 0)}function cM(y){const h=[];return Fi(h,y),re(h)}function x_(y){const h=y.indexOf(void 0);return h<0?y:y.slice(0,h)}function na(y,h){const v=[...x_(y),h];return v.length>y.length?v.splice(0,v.length-y.length):Fi(v,y.length),v}function ia({primary:y,secondary:h,forward:v,backward:E}){let R=!1;function Y(oe){R||(R=!0,oe(),R=!1)}y.emitter.on("change",oe=>{Y(()=>{h.setRawValue(v(y,h),oe.options)})}),h.emitter.on("change",oe=>{Y(()=>{y.setRawValue(E(y,h),oe.options)}),Y(()=>{h.setRawValue(v(y,h),oe.options)})}),Y(()=>{h.setRawValue(v(y,h),{forceEmit:!1,last:!0})})}function qn(y,h){const v=y*(h.altKey?.1:1)*(h.shiftKey?10:1);return h.upKey?+v:h.downKey?-v:0}function ur(y){return{altKey:y.altKey,downKey:y.key==="ArrowDown",shiftKey:y.shiftKey,upKey:y.key==="ArrowUp"}}function Kn(y){return{altKey:y.altKey,downKey:y.key==="ArrowLeft",shiftKey:y.shiftKey,upKey:y.key==="ArrowRight"}}function Km(y){return y==="ArrowUp"||y==="ArrowDown"}function S_(y){return Km(y)||y==="ArrowLeft"||y==="ArrowRight"}function Gc(y,h){var v,E;const R=h.ownerDocument.defaultView,Y=h.getBoundingClientRect();return{x:y.pageX-(((v=R&&R.scrollX)!==null&&v!==void 0?v:0)+Y.left),y:y.pageY-(((E=R&&R.scrollY)!==null&&E!==void 0?E:0)+Y.top)}}class Za{constructor(h){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=h,this.emitter=new w,h.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),h.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),h.addEventListener("touchend",this.onTouchEnd_),h.addEventListener("mousedown",this.onMouseDown_)}computePosition_(h){const v=this.elem_.getBoundingClientRect();return{bounds:{width:v.width,height:v.height},point:h?{x:h.x,y:h.y}:null}}onMouseDown_(h){var v;h.preventDefault(),(v=h.currentTarget)===null||v===void 0||v.focus();const E=this.elem_.ownerDocument;E.addEventListener("mousemove",this.onDocumentMouseMove_),E.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:h.altKey,data:this.computePosition_(Gc(h,this.elem_)),sender:this,shiftKey:h.shiftKey})}onDocumentMouseMove_(h){this.emitter.emit("move",{altKey:h.altKey,data:this.computePosition_(Gc(h,this.elem_)),sender:this,shiftKey:h.shiftKey})}onDocumentMouseUp_(h){const v=this.elem_.ownerDocument;v.removeEventListener("mousemove",this.onDocumentMouseMove_),v.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:h.altKey,data:this.computePosition_(Gc(h,this.elem_)),sender:this,shiftKey:h.shiftKey})}onTouchStart_(h){h.preventDefault();const v=h.targetTouches.item(0),E=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:h.altKey,data:this.computePosition_(v?{x:v.clientX-E.left,y:v.clientY-E.top}:void 0),sender:this,shiftKey:h.shiftKey}),this.lastTouch_=v}onTouchMove_(h){const v=h.targetTouches.item(0),E=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:h.altKey,data:this.computePosition_(v?{x:v.clientX-E.left,y:v.clientY-E.top}:void 0),sender:this,shiftKey:h.shiftKey}),this.lastTouch_=v}onTouchEnd_(h){var v;const E=(v=h.targetTouches.item(0))!==null&&v!==void 0?v:this.lastTouch_,R=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:h.altKey,data:this.computePosition_(E?{x:E.clientX-R.left,y:E.clientY-R.top}:void 0),sender:this,shiftKey:h.shiftKey})}}function Ar(y,h,v,E,R){const Y=(y-h)/(v-h);return E+Y*(R-E)}function M_(y){return String(y.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function en(y,h,v){return Math.min(Math.max(y,h),v)}function Yc(y,h){return(y%h+h)%h}const On=S("txt");class hM{constructor(h,v){this.onChange_=this.onChange_.bind(this),this.props_=v.props,this.props_.emitter.on("change",this.onChange_),this.element=h.createElement("div"),this.element.classList.add(On(),On(void 0,"num")),v.arrayPosition&&this.element.classList.add(On(void 0,v.arrayPosition)),v.viewProps.bindClassModifiers(this.element);const E=h.createElement("input");E.classList.add(On("i")),E.type="text",v.viewProps.bindDisabled(E),this.element.appendChild(E),this.inputElement=E,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=v.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(On()),this.inputElement.classList.add(On("i"));const R=h.createElement("div");R.classList.add(On("k")),this.element.appendChild(R),this.knobElement=R;const Y=h.createElementNS(Ge,"svg");Y.classList.add(On("g")),this.knobElement.appendChild(Y);const oe=h.createElementNS(Ge,"path");oe.classList.add(On("gb")),Y.appendChild(oe),this.guideBodyElem_=oe;const Oe=h.createElementNS(Ge,"path");Oe.classList.add(On("gh")),Y.appendChild(Oe),this.guideHeadElem_=Oe;const ut=h.createElement("div");ut.classList.add(S("tt")()),this.knobElement.appendChild(ut),this.tooltipElem_=ut,v.value.emitter.on("change",this.onChange_),this.value=v.value,this.refresh()}onDraggingChange_(h){if(h.rawValue===null){this.element.classList.remove(On(void 0,"drg"));return}this.element.classList.add(On(void 0,"drg"));const v=h.rawValue/this.props_.get("draggingScale"),E=v+(v>0?-1:v<0?1:0),R=en(-E,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${E+R},0 L${E},4 L${E+R},8`,`M ${v},-1 L${v},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${v},4`);const Y=this.props_.get("formatter");this.tooltipElem_.textContent=Y(this.value.rawValue),this.tooltipElem_.style.left=`${v}px`}refresh(){const h=this.props_.get("formatter");this.inputElement.value=h(this.value.rawValue)}onChange_(){this.refresh()}}class cu{constructor(h,v){var E;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=v.baseStep,this.parser_=v.parser,this.props=v.props,this.sliderProps_=(E=v.sliderProps)!==null&&E!==void 0?E:null,this.value=v.value,this.viewProps=v.viewProps,this.dragging_=re(null),this.view=new hM(h,{arrayPosition:v.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const R=new Za(this.view.knobElement);R.emitter.on("down",this.onPointerDown_),R.emitter.on("move",this.onPointerMove_),R.emitter.on("up",this.onPointerUp_)}constrainValue_(h){var v,E;const R=(v=this.sliderProps_)===null||v===void 0?void 0:v.get("minValue"),Y=(E=this.sliderProps_)===null||E===void 0?void 0:E.get("maxValue");let oe=h;return R!==void 0&&(oe=Math.max(oe,R)),Y!==void 0&&(oe=Math.min(oe,Y)),oe}onInputChange_(h){const v=h.currentTarget.value,E=this.parser_(v);d(E)||(this.value.rawValue=this.constrainValue_(E)),this.view.refresh()}onInputKeyDown_(h){const v=qn(this.baseStep_,ur(h));v!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+v),{forceEmit:!1,last:!1})}onInputKeyUp_(h){qn(this.baseStep_,ur(h))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(h){if(!h.point)return null;const v=h.point.x-h.bounds.width/2;return this.constrainValue_(this.originRawValue_+v*this.props.get("draggingScale"))}onPointerMove_(h){const v=this.computeDraggingValue_(h.data);v!==null&&(this.value.setRawValue(v,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(h){const v=this.computeDraggingValue_(h.data);v!==null&&(this.value.setRawValue(v,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Id=S("sld");class Zm{constructor(h,v){this.onChange_=this.onChange_.bind(this),this.props_=v.props,this.props_.emitter.on("change",this.onChange_),this.element=h.createElement("div"),this.element.classList.add(Id()),v.viewProps.bindClassModifiers(this.element);const E=h.createElement("div");E.classList.add(Id("t")),v.viewProps.bindTabIndex(E),this.element.appendChild(E),this.trackElement=E;const R=h.createElement("div");R.classList.add(Id("k")),this.trackElement.appendChild(R),this.knobElement=R,v.value.emitter.on("change",this.onChange_),this.value=v.value,this.update_()}update_(){const h=en(Ar(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${h}%`}onChange_(){this.update_()}}class Jm{constructor(h,v){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=v.baseStep,this.value=v.value,this.viewProps=v.viewProps,this.props=v.props,this.view=new Zm(h,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Za(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(h,v){!h.point||this.value.setRawValue(Ar(en(h.point.x,0,h.bounds.width),0,h.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),v)}onPointerDownOrMove_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerUp_(h){this.handlePointerEvent_(h.data,{forceEmit:!0,last:!0})}onKeyDown_(h){const v=qn(this.baseStep_,Kn(h));v!==0&&this.value.setRawValue(this.value.rawValue+v,{forceEmit:!1,last:!1})}onKeyUp_(h){qn(this.baseStep_,Kn(h))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Vd=S("sldtxt");class dM{constructor(h,v){this.element=h.createElement("div"),this.element.classList.add(Vd());const E=h.createElement("div");E.classList.add(Vd("s")),this.sliderView_=v.sliderView,E.appendChild(this.sliderView_.element),this.element.appendChild(E);const R=h.createElement("div");R.classList.add(Vd("t")),this.textView_=v.textView,R.appendChild(this.textView_.element),this.element.appendChild(R)}}class Xc{constructor(h,v){this.value=v.value,this.viewProps=v.viewProps,this.sliderC_=new Jm(h,{baseStep:v.baseStep,props:v.sliderProps,value:v.value,viewProps:this.viewProps}),this.textC_=new cu(h,{baseStep:v.baseStep,parser:v.parser,props:v.textProps,sliderProps:v.sliderProps,value:v.value,viewProps:v.viewProps}),this.view=new dM(h,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Ja(y,h){y.write(h)}function zd(y){const h=he;if(Array.isArray(y))return h.required.array(h.required.object({text:h.required.string,value:h.required.raw}))(y).value;if(typeof y=="object")return h.required.raw(y).value}function Qm(y){if(y==="inline"||y==="popup")return y}function tn(y){const h=he;return h.required.object({max:h.optional.number,min:h.optional.number,step:h.optional.number})(y).value}function Bd(y){if(Array.isArray(y))return y;const h=[];return Object.keys(y).forEach(v=>{h.push({text:v,value:y[v]})}),h}function Qa(y){return d(y)?null:new ra(Bd(y))}function Fd(y){const h=y?Ao(y,ra):null;return h?h.options:null}function C_(y){const h=y?Ao(y,kd):null;return h?h.step:null}function Ud(y,h){const v=y&&Ao(y,kd);return v?M_(v.step):Math.max(M_(h),2)}function hu(y){const h=C_(y);return h!=null?h:1}function du(y,h){var v;const E=y&&Ao(y,kd),R=Math.abs((v=E==null?void 0:E.step)!==null&&v!==void 0?v:h);return R===0?.1:Math.pow(10,Math.floor(Math.log10(R))-1)}const jd=S("ckb");class pM{constructor(h,v){this.onValueChange_=this.onValueChange_.bind(this),this.element=h.createElement("div"),this.element.classList.add(jd()),v.viewProps.bindClassModifiers(this.element);const E=h.createElement("label");E.classList.add(jd("l")),this.element.appendChild(E);const R=h.createElement("input");R.classList.add(jd("i")),R.type="checkbox",E.appendChild(R),this.inputElement=R,v.viewProps.bindDisabled(this.inputElement);const Y=h.createElement("div");Y.classList.add(jd("w")),E.appendChild(Y);const oe=lt(h,"check");Y.appendChild(oe),v.value.emitter.on("change",this.onValueChange_),this.value=v.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class pu{constructor(h,v){this.onInputChange_=this.onInputChange_.bind(this),this.value=v.value,this.viewProps=v.viewProps,this.view=new pM(h,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(h){const v=h.currentTarget;this.value.rawValue=v.checked}}function fM(y){const h=[],v=Qa(y.options);return v&&h.push(v),new Uc(h)}const mM={id:"input-bool",type:"input",accept:(y,h)=>{if(typeof y!="boolean")return null;const v=Se(h,{options:he.optional.custom(zd)});return v?{initialValue:y,params:v}:null},binding:{reader:y=>f_,constraint:y=>fM(y.params),writer:y=>Ja},controller:y=>{var h;const v=y.document,E=y.value,R=y.constraint;return R&&Ao(R,ra)?new qa(v,{props:Z.fromObject({options:(h=Fd(R))!==null&&h!==void 0?h:[]}),value:E,viewProps:y.viewProps}):new pu(v,{value:E,viewProps:y.viewProps})}},_s=S("col");class E_{constructor(h,v){this.element=h.createElement("div"),this.element.classList.add(_s()),v.foldable.bindExpandedClass(this.element,_s(void 0,"expanded")),L(v.foldable,"completed",k(this.element,_s(void 0,"cpl")));const E=h.createElement("div");E.classList.add(_s("h")),this.element.appendChild(E);const R=h.createElement("div");R.classList.add(_s("s")),E.appendChild(R),this.swatchElement=R;const Y=h.createElement("div");if(Y.classList.add(_s("t")),E.appendChild(Y),this.textElement=Y,v.pickerLayout==="inline"){const oe=h.createElement("div");oe.classList.add(_s("p")),this.element.appendChild(oe),this.pickerElement=oe}else this.pickerElement=null}}function oa(y,h,v){const E=en(y/255,0,1),R=en(h/255,0,1),Y=en(v/255,0,1),oe=Math.max(E,R,Y),Oe=Math.min(E,R,Y),ut=oe-Oe;let ft=0,qt=0;const Tt=(Oe+oe)/2;return ut!==0&&(qt=ut/(1-Math.abs(oe+Oe-1)),E===oe?ft=(R-Y)/ut:R===oe?ft=2+(Y-E)/ut:ft=4+(E-R)/ut,ft=ft/6+(ft<0?1:0)),[ft*360,qt*100,Tt*100]}function Hd(y,h,v){const E=(y%360+360)%360,R=en(h/100,0,1),Y=en(v/100,0,1),oe=(1-Math.abs(2*Y-1))*R,Oe=oe*(1-Math.abs(E/60%2-1)),ut=Y-oe/2;let ft,qt,Tt;return E>=0&&E<60?[ft,qt,Tt]=[oe,Oe,0]:E>=60&&E<120?[ft,qt,Tt]=[Oe,oe,0]:E>=120&&E<180?[ft,qt,Tt]=[0,oe,Oe]:E>=180&&E<240?[ft,qt,Tt]=[0,Oe,oe]:E>=240&&E<300?[ft,qt,Tt]=[Oe,0,oe]:[ft,qt,Tt]=[oe,0,Oe],[(ft+ut)*255,(qt+ut)*255,(Tt+ut)*255]}function vM(y,h,v){const E=en(y/255,0,1),R=en(h/255,0,1),Y=en(v/255,0,1),oe=Math.max(E,R,Y),Oe=Math.min(E,R,Y),ut=oe-Oe;let ft;ut===0?ft=0:oe===E?ft=60*(((R-Y)/ut%6+6)%6):oe===R?ft=60*((Y-E)/ut+2):ft=60*((E-R)/ut+4);const qt=oe===0?0:ut/oe,Tt=oe;return[ft,qt*100,Tt*100]}function P_(y,h,v){const E=Yc(y,360),R=en(h/100,0,1),Y=en(v/100,0,1),oe=Y*R,Oe=oe*(1-Math.abs(E/60%2-1)),ut=Y-oe;let ft,qt,Tt;return E>=0&&E<60?[ft,qt,Tt]=[oe,Oe,0]:E>=60&&E<120?[ft,qt,Tt]=[Oe,oe,0]:E>=120&&E<180?[ft,qt,Tt]=[0,oe,Oe]:E>=180&&E<240?[ft,qt,Tt]=[0,Oe,oe]:E>=240&&E<300?[ft,qt,Tt]=[Oe,0,oe]:[ft,qt,Tt]=[oe,0,Oe],[(ft+ut)*255,(qt+ut)*255,(Tt+ut)*255]}function gM(y,h,v){const E=v+h*(100-Math.abs(2*v-100))/200;return[y,E!==0?h*(100-Math.abs(2*v-100))/E:0,v+h*(100-Math.abs(2*v-100))/(2*100)]}function fu(y,h,v){const E=100-Math.abs(v*(200-h)/100-100);return[y,E!==0?h*v/E:0,v*(200-h)/(2*100)]}function Dn(y){return[y[0],y[1],y[2]]}function $m(y,h){return[y[0],y[1],y[2],h]}const yM={hsl:{hsl:(y,h,v)=>[y,h,v],hsv:gM,rgb:Hd},hsv:{hsl:fu,hsv:(y,h,v)=>[y,h,v],rgb:P_},rgb:{hsl:oa,hsv:vM,rgb:(y,h,v)=>[y,h,v]}};function Wd(y,h){return[h==="float"?1:y==="rgb"?255:360,h==="float"?1:y==="rgb"?255:100,h==="float"?1:y==="rgb"?255:100]}function _M(y,h,v){var E;const R=Wd(h,v);return[h==="rgb"?en(y[0],0,R[0]):Yc(y[0],R[0]),en(y[1],0,R[1]),en(y[2],0,R[2]),en((E=y[3])!==null&&E!==void 0?E:1,0,1)]}function T_(y,h,v,E){const R=Wd(h,v),Y=Wd(h,E);return y.map((oe,Oe)=>oe/R[Oe]*Y[Oe])}function wM(y,h,v){const E=T_(y,h.mode,h.type,"int"),R=yM[h.mode][v.mode](...E);return T_(R,v.mode,"int",v.type)}function ws(y,h){return typeof y!="object"||d(y)?!1:h in y&&typeof y[h]=="number"}class X{constructor(h,v,E="int"){this.mode=v,this.type=E,this.comps_=_M(h,v,E)}static black(h="int"){return new X([0,0,0],"rgb",h)}static fromObject(h,v="int"){const E="a"in h?[h.r,h.g,h.b,h.a]:[h.r,h.g,h.b];return new X(E,"rgb",v)}static toRgbaObject(h,v="int"){return h.toRgbaObject(v)}static isRgbColorObject(h){return ws(h,"r")&&ws(h,"g")&&ws(h,"b")}static isRgbaColorObject(h){return this.isRgbColorObject(h)&&ws(h,"a")}static isColorObject(h){return this.isRgbColorObject(h)}static equals(h,v){if(h.mode!==v.mode)return!1;const E=h.comps_,R=v.comps_;for(let Y=0;Y<E.length;Y++)if(E[Y]!==R[Y])return!1;return!0}getComponents(h,v="int"){return $m(wM(Dn(this.comps_),{mode:this.mode,type:this.type},{mode:h!=null?h:this.mode,type:v}),this.comps_[3])}toRgbaObject(h="int"){const v=this.getComponents("rgb",h);return{r:v[0],g:v[1],b:v[2],a:v[3]}}}const _e=S("colp");class pe{constructor(h,v){this.alphaViews_=null,this.element=h.createElement("div"),this.element.classList.add(_e());const E=h.createElement("div");E.classList.add(_e("hsv"));const R=h.createElement("div");R.classList.add(_e("sv")),this.svPaletteView_=v.svPaletteView,R.appendChild(this.svPaletteView_.element),E.appendChild(R);const Y=h.createElement("div");Y.classList.add(_e("h")),this.hPaletteView_=v.hPaletteView,Y.appendChild(this.hPaletteView_.element),E.appendChild(Y),this.element.appendChild(E);const oe=h.createElement("div");if(oe.classList.add(_e("rgb")),this.textView_=v.textView,oe.appendChild(this.textView_.element),this.element.appendChild(oe),v.alphaViews){this.alphaViews_={palette:v.alphaViews.palette,text:v.alphaViews.text};const Oe=h.createElement("div");Oe.classList.add(_e("a"));const ut=h.createElement("div");ut.classList.add(_e("ap")),ut.appendChild(this.alphaViews_.palette.element),Oe.appendChild(ut);const ft=h.createElement("div");ft.classList.add(_e("at")),ft.appendChild(this.alphaViews_.text.element),Oe.appendChild(ft),this.element.appendChild(Oe)}}get allFocusableElements(){const h=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(v=>v.inputElement)];return this.alphaViews_&&h.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),h}}function Ze(y){return y==="int"?"int":y==="float"?"float":void 0}function wt(y){const h=he;return Se(y,{alpha:h.optional.boolean,color:h.optional.object({alpha:h.optional.boolean,type:h.optional.custom(Ze)}),expanded:h.optional.boolean,picker:h.optional.custom(Qm)})}function It(y){return y?.1:1}function Er(y){var h;return(h=y.color)===null||h===void 0?void 0:h.type}function mr(y,h){return y.alpha===h.alpha&&y.mode===h.mode&&y.notation===h.notation&&y.type===h.type}function Mi(y,h){const v=y.match(/^(.+)%$/);return Math.min(v?parseFloat(v[1])*.01*h:parseFloat(y),h)}const bM={deg:y=>y,grad:y=>y*360/400,rad:y=>y*360/(2*Math.PI),turn:y=>y*360};function Ui(y){const h=y.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!h)return parseFloat(y);const v=parseFloat(h[1]),E=h[2];return bM[E](v)}function qc(y){const h=y.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!h)return null;const v=[Mi(h[1],255),Mi(h[2],255),Mi(h[3],255)];return isNaN(v[0])||isNaN(v[1])||isNaN(v[2])?null:v}function A_(y){return h=>{const v=qc(h);return v?new X(v,"rgb",y):null}}function $a(y){const h=y.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!h)return null;const v=[Mi(h[1],255),Mi(h[2],255),Mi(h[3],255),Mi(h[4],1)];return isNaN(v[0])||isNaN(v[1])||isNaN(v[2])||isNaN(v[3])?null:v}function Kc(y){return h=>{const v=$a(h);return v?new X(v,"rgb",y):null}}function Zc(y){const h=y.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!h)return null;const v=[Ui(h[1]),Mi(h[2],100),Mi(h[3],100)];return isNaN(v[0])||isNaN(v[1])||isNaN(v[2])?null:v}function nr(y){return h=>{const v=Zc(h);return v?new X(v,"hsl",y):null}}function k_(y){const h=y.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!h)return null;const v=[Ui(h[1]),Mi(h[2],100),Mi(h[3],100),Mi(h[4],1)];return isNaN(v[0])||isNaN(v[1])||isNaN(v[2])||isNaN(v[3])?null:v}function ev(y){return h=>{const v=k_(h);return v?new X(v,"hsl",y):null}}function Jc(y){const h=y.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(h)return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)];const v=y.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return v?[parseInt(v[1],16),parseInt(v[2],16),parseInt(v[3],16)]:null}function xM(y){const h=Jc(y);return h?new X(h,"rgb","int"):null}function L_(y){const h=y.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(h)return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16),Ar(parseInt(h[4]+h[4],16),0,255,0,1)];const v=y.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return v?[parseInt(v[1],16),parseInt(v[2],16),parseInt(v[3],16),Ar(parseInt(v[4],16),0,255,0,1)]:null}function SM(y){const h=L_(y);return h?new X(h,"rgb","int"):null}function Qc(y){const h=y.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!h)return null;const v=[parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])];return isNaN(v[0])||isNaN(v[1])||isNaN(v[2])?null:v}function bs(y){return h=>{const v=Qc(h);return v?new X(v,"rgb",y):null}}function $c(y){const h=y.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!h)return null;const v=[parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]),parseFloat(h[4])];return isNaN(v[0])||isNaN(v[1])||isNaN(v[2])||isNaN(v[3])?null:v}function tv(y){return h=>{const v=$c(h);return v?new X(v,"rgb",y):null}}const Gd=[{parser:Jc,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:L_,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:qc,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:$a,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Zc,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:k_,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Qc,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:$c,result:{alpha:!0,mode:"rgb",notation:"object"}}];function O_(y){return Gd.reduce((h,{parser:v,result:E})=>h||(v(y)?E:null),null)}function Yd(y,h="int"){const v=O_(y);return v?v.notation==="hex"&&h!=="float"?Object.assign(Object.assign({},v),{type:"int"}):v.notation==="func"?Object.assign(Object.assign({},v),{type:h}):null:null}const eh={int:[xM,SM,A_("int"),Kc("int"),nr("int"),ev("int"),bs("int"),tv("int")],float:[A_("float"),Kc("float"),nr("float"),ev("float"),bs("float"),tv("float")]};function D_(y){const h=eh[y];return v=>{if(typeof v!="string")return X.black(y);const E=h.reduce((R,Y)=>R||Y(v),null);return E!=null?E:X.black(y)}}function el(y){const h=eh[y];return v=>h.reduce((E,R)=>E||R(v),null)}function sa(y){const h=en(Math.floor(y),0,255).toString(16);return h.length===1?`0${h}`:h}function th(y,h="#"){const v=Dn(y.getComponents("rgb")).map(sa).join("");return`${h}${v}`}function rv(y,h="#"){const v=y.getComponents("rgb"),E=[v[0],v[1],v[2],v[3]*255].map(sa).join("");return`${h}${E}`}function R_(y,h){const v=Sn(h==="float"?2:0);return`rgb(${Dn(y.getComponents("rgb",h)).map(E=>v(E)).join(", ")})`}function MM(y){return h=>R_(h,y)}function tl(y,h){const v=Sn(2),E=Sn(h==="float"?2:0);return`rgba(${y.getComponents("rgb",h).map((R,Y)=>(Y===3?v:E)(R)).join(", ")})`}function Xd(y){return h=>tl(h,y)}function nv(y){const h=[Sn(0),Wc,Wc];return`hsl(${Dn(y.getComponents("hsl")).map((v,E)=>h[E](v)).join(", ")})`}function CM(y){const h=[Sn(0),Wc,Wc,Sn(2)];return`hsla(${y.getComponents("hsl").map((v,E)=>h[E](v)).join(", ")})`}function iv(y,h){const v=Sn(h==="float"?2:0),E=["r","g","b"];return`{${Dn(y.getComponents("rgb",h)).map((R,Y)=>`${E[Y]}: ${v(R)}`).join(", ")}}`}function EM(y){return h=>iv(h,y)}function N_(y,h){const v=Sn(2),E=Sn(h==="float"?2:0),R=["r","g","b","a"];return`{${y.getComponents("rgb",h).map((Y,oe)=>{const Oe=oe===3?v:E;return`${R[oe]}: ${Oe(Y)}`}).join(", ")}}`}function pn(y){return h=>N_(h,y)}const Zn=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:th},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:rv},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:nv},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:CM},...["int","float"].reduce((y,h)=>[...y,{format:{alpha:!1,mode:"rgb",notation:"func",type:h},stringifier:MM(h)},{format:{alpha:!0,mode:"rgb",notation:"func",type:h},stringifier:Xd(h)},{format:{alpha:!1,mode:"rgb",notation:"object",type:h},stringifier:EM(h)},{format:{alpha:!0,mode:"rgb",notation:"object",type:h},stringifier:pn(h)}],[])];function ov(y){return Zn.reduce((h,v)=>h||(mr(v.format,y)?v.stringifier:null),null)}const rh=S("apl");class I_{constructor(h,v){this.onValueChange_=this.onValueChange_.bind(this),this.value=v.value,this.value.emitter.on("change",this.onValueChange_),this.element=h.createElement("div"),this.element.classList.add(rh()),v.viewProps.bindTabIndex(this.element);const E=h.createElement("div");E.classList.add(rh("b")),this.element.appendChild(E);const R=h.createElement("div");R.classList.add(rh("c")),E.appendChild(R),this.colorElem_=R;const Y=h.createElement("div");Y.classList.add(rh("m")),this.element.appendChild(Y),this.markerElem_=Y;const oe=h.createElement("div");oe.classList.add(rh("p")),this.markerElem_.appendChild(oe),this.previewElem_=oe,this.update_()}update_(){const h=this.value.rawValue,v=h.getComponents("rgb"),E=new X([v[0],v[1],v[2],0],"rgb"),R=new X([v[0],v[1],v[2],255],"rgb"),Y=["to right",tl(E),tl(R)];this.colorElem_.style.background=`linear-gradient(${Y.join(",")})`,this.previewElem_.style.backgroundColor=tl(h);const oe=Ar(v[3],0,1,0,100);this.markerElem_.style.left=`${oe}%`}onValueChange_(){this.update_()}}class PM{constructor(h,v){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=v.value,this.viewProps=v.viewProps,this.view=new I_(h,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Za(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(h,v){if(!h.point)return;const E=h.point.x/h.bounds.width,R=this.value.rawValue,[Y,oe,Oe]=R.getComponents("hsv");this.value.setRawValue(new X([Y,oe,Oe,E],"hsv"),v)}onPointerDown_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerMove_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerUp_(h){this.handlePointerEvent_(h.data,{forceEmit:!0,last:!0})}onKeyDown_(h){const v=qn(It(!0),Kn(h));if(v===0)return;const E=this.value.rawValue,[R,Y,oe,Oe]=E.getComponents("hsv");this.value.setRawValue(new X([R,Y,oe,Oe+v],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(h){qn(It(!0),Kn(h))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const aa=S("coltxt");function nh(y){const h=y.createElement("select"),v=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return h.appendChild(v.reduce((E,R)=>{const Y=y.createElement("option");return Y.textContent=R.text,Y.value=R.value,E.appendChild(Y),E},y.createDocumentFragment())),h}class sv{constructor(h,v){this.element=h.createElement("div"),this.element.classList.add(aa());const E=h.createElement("div");E.classList.add(aa("m")),this.modeElem_=nh(h),this.modeElem_.classList.add(aa("ms")),E.appendChild(this.modeSelectElement);const R=h.createElement("div");R.classList.add(aa("mm")),R.appendChild(lt(h,"dropdown")),E.appendChild(R),this.element.appendChild(E);const Y=h.createElement("div");Y.classList.add(aa("w")),this.element.appendChild(Y),this.textsElem_=Y,this.textViews_=v.textViews,this.applyTextViews_(),T(v.colorMode,oe=>{this.modeElem_.value=oe})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(h){this.textViews_=h,this.applyTextViews_()}applyTextViews_(){ce(this.textsElem_);const h=this.element.ownerDocument;this.textViews_.forEach(v=>{const E=h.createElement("div");E.classList.add(aa("c")),E.appendChild(v.element),this.textsElem_.appendChild(E)})}}function mu(y){return Sn(y==="float"?2:0)}function ih(y,h,v){const E=Wd(y,h)[v];return new Xa({min:0,max:E})}function rl(y,h,v){return new cu(y,{arrayPosition:v===0?"fst":v===3-1?"lst":"mid",baseStep:It(!1),parser:h.parser,props:Z.fromObject({draggingScale:h.colorType==="float"?.01:1,formatter:mu(h.colorType)}),value:re(0,{constraint:ih(h.colorMode,h.colorType,v)}),viewProps:h.viewProps})}class qd{constructor(h,v){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=v.colorType,this.parser_=v.parser,this.value=v.value,this.viewProps=v.viewProps,this.colorMode=re(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(h),this.view=new sv(h,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(h){const v={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},E=[rl(h,v,0),rl(h,v,1),rl(h,v,2)];return E.forEach((R,Y)=>{ia({primary:this.value,secondary:R.value,forward:oe=>oe.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[Y],backward:(oe,Oe)=>{const ut=this.colorMode.rawValue,ft=oe.rawValue.getComponents(ut,this.colorType_);return ft[Y]=Oe.rawValue,new X($m(Dn(ft),ft[3]),ut,this.colorType_)}})}),E}onModeSelectChange_(h){const v=h.currentTarget;this.colorMode.rawValue=v.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const la=S("hpl");class TM{constructor(h,v){this.onValueChange_=this.onValueChange_.bind(this),this.value=v.value,this.value.emitter.on("change",this.onValueChange_),this.element=h.createElement("div"),this.element.classList.add(la()),v.viewProps.bindTabIndex(this.element);const E=h.createElement("div");E.classList.add(la("c")),this.element.appendChild(E);const R=h.createElement("div");R.classList.add(la("m")),this.element.appendChild(R),this.markerElem_=R,this.update_()}update_(){const h=this.value.rawValue,[v]=h.getComponents("hsv");this.markerElem_.style.backgroundColor=R_(new X([v,100,100],"hsv"));const E=Ar(v,0,360,0,100);this.markerElem_.style.left=`${E}%`}onValueChange_(){this.update_()}}class AM{constructor(h,v){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=v.value,this.viewProps=v.viewProps,this.view=new TM(h,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Za(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(h,v){if(!h.point)return;const E=Ar(en(h.point.x,0,h.bounds.width),0,h.bounds.width,0,359),R=this.value.rawValue,[,Y,oe,Oe]=R.getComponents("hsv");this.value.setRawValue(new X([E,Y,oe,Oe],"hsv"),v)}onPointerDown_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerMove_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerUp_(h){this.handlePointerEvent_(h.data,{forceEmit:!0,last:!0})}onKeyDown_(h){const v=qn(It(!1),Kn(h));if(v===0)return;const E=this.value.rawValue,[R,Y,oe,Oe]=E.getComponents("hsv");this.value.setRawValue(new X([R+v,Y,oe,Oe],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(h){qn(It(!1),Kn(h))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const av=S("svp"),V_=64;class kM{constructor(h,v){this.onValueChange_=this.onValueChange_.bind(this),this.value=v.value,this.value.emitter.on("change",this.onValueChange_),this.element=h.createElement("div"),this.element.classList.add(av()),v.viewProps.bindTabIndex(this.element);const E=h.createElement("canvas");E.height=V_,E.width=V_,E.classList.add(av("c")),this.element.appendChild(E),this.canvasElement=E;const R=h.createElement("div");R.classList.add(av("m")),this.element.appendChild(R),this.markerElem_=R,this.update_()}update_(){const h=Fe(this.canvasElement);if(!h)return;const v=this.value.rawValue.getComponents("hsv"),E=this.canvasElement.width,R=this.canvasElement.height,Y=h.getImageData(0,0,E,R),oe=Y.data;for(let ft=0;ft<R;ft++)for(let qt=0;qt<E;qt++){const Tt=Ar(qt,0,E,0,100),ci=Ar(ft,0,R,100,0),Es=P_(v[0],Tt,ci),al=(ft*E+qt)*4;oe[al]=Es[0],oe[al+1]=Es[1],oe[al+2]=Es[2],oe[al+3]=255}h.putImageData(Y,0,0);const Oe=Ar(v[1],0,100,0,100);this.markerElem_.style.left=`${Oe}%`;const ut=Ar(v[2],0,100,100,0);this.markerElem_.style.top=`${ut}%`}onValueChange_(){this.update_()}}class Kd{constructor(h,v){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=v.value,this.viewProps=v.viewProps,this.view=new kM(h,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Za(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(h,v){if(!h.point)return;const E=Ar(h.point.x,0,h.bounds.width,0,100),R=Ar(h.point.y,0,h.bounds.height,100,0),[Y,,,oe]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new X([Y,E,R,oe],"hsv"),v)}onPointerDown_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerMove_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerUp_(h){this.handlePointerEvent_(h.data,{forceEmit:!0,last:!0})}onKeyDown_(h){S_(h.key)&&h.preventDefault();const[v,E,R,Y]=this.value.rawValue.getComponents("hsv"),oe=It(!1),Oe=qn(oe,Kn(h)),ut=qn(oe,ur(h));Oe===0&&ut===0||this.value.setRawValue(new X([v,E+Oe,R+ut,Y],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(h){const v=It(!1),E=qn(v,Kn(h)),R=qn(v,ur(h));E===0&&R===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class oh{constructor(h,v){this.value=v.value,this.viewProps=v.viewProps,this.hPaletteC_=new AM(h,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Kd(h,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=v.supportsAlpha?{palette:new PM(h,{value:this.value,viewProps:this.viewProps}),text:new cu(h,{parser:Jo,baseStep:.1,props:Z.fromObject({draggingScale:.01,formatter:Sn(2)}),value:re(0,{constraint:new Xa({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ia({primary:this.value,secondary:this.alphaIcs_.text.value,forward:E=>E.rawValue.getComponents()[3],backward:(E,R)=>{const Y=E.rawValue.getComponents();return Y[3]=R.rawValue,new X(Y,E.rawValue.mode)}}),this.textC_=new qd(h,{colorType:v.colorType,parser:Jo,value:this.value,viewProps:this.viewProps}),this.view=new pe(h,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:v.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const Zd=S("colsw");class z{constructor(h,v){this.onValueChange_=this.onValueChange_.bind(this),v.value.emitter.on("change",this.onValueChange_),this.value=v.value,this.element=h.createElement("div"),this.element.classList.add(Zd()),v.viewProps.bindClassModifiers(this.element);const E=h.createElement("div");E.classList.add(Zd("sw")),this.element.appendChild(E),this.swatchElem_=E;const R=h.createElement("button");R.classList.add(Zd("b")),v.viewProps.bindDisabled(R),this.element.appendChild(R),this.buttonElement=R,this.update_()}update_(){const h=this.value.rawValue;this.swatchElem_.style.backgroundColor=rv(h)}onValueChange_(){this.update_()}}class vu{constructor(h,v){this.value=v.value,this.viewProps=v.viewProps,this.view=new z(h,{value:this.value,viewProps:this.viewProps})}}class gu{constructor(h,v){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=v.value,this.viewProps=v.viewProps,this.foldable_=et.create(v.expanded),this.swatchC_=new vu(h,{value:this.value,viewProps:this.viewProps});const E=this.swatchC_.view.buttonElement;E.addEventListener("blur",this.onButtonBlur_),E.addEventListener("click",this.onButtonClick_),this.textC_=new jc(h,{parser:v.parser,props:Z.fromObject({formatter:v.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new E_(h,{foldable:this.foldable_,pickerLayout:v.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=v.pickerLayout==="popup"?new Od(h,{viewProps:this.viewProps}):null;const R=new oh(h,{colorType:v.colorType,supportsAlpha:v.supportsAlpha,value:this.value,viewProps:this.viewProps});R.view.allFocusableElements.forEach(Y=>{Y.addEventListener("blur",this.onPopupChildBlur_),Y.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=R,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(R.view.element),ia({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:Y=>Y.rawValue,backward:(Y,oe)=>oe.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),qe(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(h){if(!this.popC_)return;const v=this.view.element,E=h.relatedTarget;(!E||!v.contains(E))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(h){if(!this.popC_)return;const v=this.popC_.view.element,E=I(h);E&&v.contains(E)||E&&E===this.swatchC_.view.buttonElement&&!Ce(v.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(h){this.popC_?h.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&h.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function co(y,h){return X.isColorObject(y)?X.fromObject(y,h):X.black(h)}function Ut(y){return Dn(y.getComponents("rgb")).reduce((h,v)=>h<<8|Math.floor(v)&255,0)}function LM(y){return y.getComponents("rgb").reduce((h,v,E)=>{const R=Math.floor(E===3?v*255:v)&255;return h<<8|R},0)>>>0}function OM(y){return new X([y>>16&255,y>>8&255,y&255],"rgb")}function DM(y){return new X([y>>24&255,y>>16&255,y>>8&255,Ar(y&255,0,255,0,1)],"rgb")}function nl(y){return typeof y!="number"?X.black():OM(y)}function RM(y){return typeof y!="number"?X.black():DM(y)}function NM(y){const h=ov(y);return h?(v,E)=>{Ja(v,h(E))}:null}function IM(y){const h=y?LM:Ut;return(v,E)=>{Ja(v,h(E))}}function VM(y,h,v){const E=h.toRgbaObject(v);y.writeProperty("r",E.r),y.writeProperty("g",E.g),y.writeProperty("b",E.b),y.writeProperty("a",E.a)}function zM(y,h,v){const E=h.toRgbaObject(v);y.writeProperty("r",E.r),y.writeProperty("g",E.g),y.writeProperty("b",E.b)}function xs(y,h){return(v,E)=>{y?VM(v,E,h):zM(v,E,h)}}function lv(y){var h;return!!((y==null?void 0:y.alpha)||((h=y==null?void 0:y.color)===null||h===void 0?void 0:h.alpha))}function BM(y){return y?h=>rv(h,"0x"):h=>th(h,"0x")}function FM(y){return"color"in y||"view"in y&&y.view==="color"}const UM={id:"input-color-number",type:"input",accept:(y,h)=>{if(typeof y!="number"||!FM(h))return null;const v=wt(h);return v?{initialValue:y,params:v}:null},binding:{reader:y=>lv(y.params)?RM:nl,equals:X.equals,writer:y=>IM(lv(y.params))},controller:y=>{const h=lv(y.params),v="expanded"in y.params?y.params.expanded:void 0,E="picker"in y.params?y.params.picker:void 0;return new gu(y.document,{colorType:"int",expanded:v!=null?v:!1,formatter:BM(h),parser:el("int"),pickerLayout:E!=null?E:"popup",supportsAlpha:h,value:y.value,viewProps:y.viewProps})}};function jM(y){return X.isRgbaColorObject(y)}function Ss(y){return h=>co(h,y)}function HM(y,h){return v=>y?N_(v,h):iv(v,h)}const WM={id:"input-color-object",type:"input",accept:(y,h)=>{if(!X.isColorObject(y))return null;const v=wt(h);return v?{initialValue:y,params:v}:null},binding:{reader:y=>Ss(Er(y.params)),equals:X.equals,writer:y=>xs(jM(y.initialValue),Er(y.params))},controller:y=>{var h;const v=X.isRgbaColorObject(y.initialValue),E="expanded"in y.params?y.params.expanded:void 0,R="picker"in y.params?y.params.picker:void 0,Y=(h=Er(y.params))!==null&&h!==void 0?h:"int";return new gu(y.document,{colorType:Y,expanded:E!=null?E:!1,formatter:HM(v,Y),parser:el(Y),pickerLayout:R!=null?R:"popup",supportsAlpha:v,value:y.value,viewProps:y.viewProps})}},GM={id:"input-color-string",type:"input",accept:(y,h)=>{if(typeof y!="string"||"view"in h&&h.view==="text")return null;const v=Yd(y,Er(h));if(!v||!ov(v))return null;const E=wt(h);return E?{initialValue:y,params:E}:null},binding:{reader:y=>{var h;return D_((h=Er(y.params))!==null&&h!==void 0?h:"int")},equals:X.equals,writer:y=>{const h=Yd(y.initialValue,Er(y.params));if(!h)throw g.shouldNeverHappen();const v=NM(h);if(!v)throw g.notBindable();return v}},controller:y=>{const h=Yd(y.initialValue,Er(y.params));if(!h)throw g.shouldNeverHappen();const v=ov(h);if(!v)throw g.shouldNeverHappen();const E="expanded"in y.params?y.params.expanded:void 0,R="picker"in y.params?y.params.picker:void 0;return new gu(y.document,{colorType:h.type,expanded:E!=null?E:!1,formatter:v,parser:el(h.type),pickerLayout:R!=null?R:"popup",supportsAlpha:h.alpha,value:y.value,viewProps:y.viewProps})}};class ua{constructor(h){this.components=h.components,this.asm_=h.assembly}constrain(h){const v=this.asm_.toComponents(h).map((E,R)=>{var Y,oe;return(oe=(Y=this.components[R])===null||Y===void 0?void 0:Y.constrain(E))!==null&&oe!==void 0?oe:E});return this.asm_.fromComponents(v)}}const z_=S("pndtxt");class il{constructor(h,v){this.textViews=v.textViews,this.element=h.createElement("div"),this.element.classList.add(z_()),this.textViews.forEach(E=>{const R=h.createElement("div");R.classList.add(z_("a")),R.appendChild(E.element),this.element.appendChild(R)})}}function YM(y,h,v){return new cu(y,{arrayPosition:v===0?"fst":v===h.axes.length-1?"lst":"mid",baseStep:h.axes[v].baseStep,parser:h.parser,props:h.axes[v].textProps,value:re(0,{constraint:h.axes[v].constraint}),viewProps:h.viewProps})}class uv{constructor(h,v){this.value=v.value,this.viewProps=v.viewProps,this.acs_=v.axes.map((E,R)=>YM(h,v,R)),this.acs_.forEach((E,R)=>{ia({primary:this.value,secondary:E.value,forward:Y=>v.assembly.toComponents(Y.rawValue)[R],backward:(Y,oe)=>{const Oe=v.assembly.toComponents(Y.rawValue);return Oe[R]=oe.rawValue,v.assembly.fromComponents(Oe)}})}),this.view=new il(h,{textViews:this.acs_.map(E=>E.view)})}}function ho(y,h){return"step"in y&&!d(y.step)?new kd(y.step,h):null}function B_(y){return"max"in y&&!d(y.max)||"min"in y&&!d(y.min)?new Xa({max:y.max,min:y.min}):null}function XM(y,h){const v=[],E=ho(y,h);E&&v.push(E);const R=B_(y);R&&v.push(R);const Y=Qa(y.options);return Y&&v.push(Y),new Uc(v)}function qM(y){const h=y?Ao(y,Xa):null;return h?[h.minValue,h.maxValue]:[void 0,void 0]}function KM(y){const[h,v]=qM(y);return[h!=null?h:0,v!=null?v:100]}const ZM={id:"input-number",type:"input",accept:(y,h)=>{if(typeof y!="number")return null;const v=he,E=Se(h,{format:v.optional.function,max:v.optional.number,min:v.optional.number,options:v.optional.custom(zd),step:v.optional.number});return E?{initialValue:y,params:E}:null},binding:{reader:y=>Xm,constraint:y=>XM(y.params,y.initialValue),writer:y=>Ja},controller:y=>{var h,v;const E=y.value,R=y.constraint;if(R&&Ao(R,ra))return new qa(y.document,{props:Z.fromObject({options:(h=Fd(R))!==null&&h!==void 0?h:[]}),value:E,viewProps:y.viewProps});const Y=(v="format"in y.params?y.params.format:void 0)!==null&&v!==void 0?v:Sn(Ud(R,E.rawValue));if(R&&Ao(R,Xa)){const[oe,Oe]=KM(R);return new Xc(y.document,{baseStep:hu(R),parser:Jo,sliderProps:Z.fromObject({maxValue:Oe,minValue:oe}),textProps:Z.fromObject({draggingScale:du(R,E.rawValue),formatter:Y}),value:E,viewProps:y.viewProps})}return new cu(y.document,{baseStep:hu(R),parser:Jo,props:Z.fromObject({draggingScale:du(R,E.rawValue),formatter:Y}),value:E,viewProps:y.viewProps})}};class Ms{constructor(h=0,v=0){this.x=h,this.y=v}getComponents(){return[this.x,this.y]}static isObject(h){if(d(h))return!1;const v=h.x,E=h.y;return!(typeof v!="number"||typeof E!="number")}static equals(h,v){return h.x===v.x&&h.y===v.y}toObject(){return{x:this.x,y:this.y}}}const cv={toComponents:y=>y.getComponents(),fromComponents:y=>new Ms(...y)},yu=S("p2d");class JM{constructor(h,v){this.element=h.createElement("div"),this.element.classList.add(yu()),v.viewProps.bindClassModifiers(this.element),T(v.expanded,k(this.element,yu(void 0,"expanded")));const E=h.createElement("div");E.classList.add(yu("h")),this.element.appendChild(E);const R=h.createElement("button");R.classList.add(yu("b")),R.appendChild(lt(h,"p2dpad")),v.viewProps.bindDisabled(R),E.appendChild(R),this.buttonElement=R;const Y=h.createElement("div");if(Y.classList.add(yu("t")),E.appendChild(Y),this.textElement=Y,v.pickerLayout==="inline"){const oe=h.createElement("div");oe.classList.add(yu("p")),this.element.appendChild(oe),this.pickerElement=oe}else this.pickerElement=null}}const Qo=S("p2dp");class sh{constructor(h,v){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=v.invertsY,this.maxValue_=v.maxValue,this.element=h.createElement("div"),this.element.classList.add(Qo()),v.layout==="popup"&&this.element.classList.add(Qo(void 0,"p"));const E=h.createElement("div");E.classList.add(Qo("p")),v.viewProps.bindTabIndex(E),this.element.appendChild(E),this.padElement=E;const R=h.createElementNS(Ge,"svg");R.classList.add(Qo("g")),this.padElement.appendChild(R),this.svgElem_=R;const Y=h.createElementNS(Ge,"line");Y.classList.add(Qo("ax")),Y.setAttributeNS(null,"x1","0"),Y.setAttributeNS(null,"y1","50%"),Y.setAttributeNS(null,"x2","100%"),Y.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(Y);const oe=h.createElementNS(Ge,"line");oe.classList.add(Qo("ax")),oe.setAttributeNS(null,"x1","50%"),oe.setAttributeNS(null,"y1","0"),oe.setAttributeNS(null,"x2","50%"),oe.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(oe);const Oe=h.createElementNS(Ge,"line");Oe.classList.add(Qo("l")),Oe.setAttributeNS(null,"x1","50%"),Oe.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(Oe),this.lineElem_=Oe;const ut=h.createElement("div");ut.classList.add(Qo("m")),this.padElement.appendChild(ut),this.markerElem_=ut,v.value.emitter.on("change",this.onValueChange_),this.value=v.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[h,v]=this.value.rawValue.getComponents(),E=this.maxValue_,R=Ar(h,-E,+E,0,100),Y=Ar(v,-E,+E,0,100),oe=this.invertsY_?100-Y:Y;this.lineElem_.setAttributeNS(null,"x2",`${R}%`),this.lineElem_.setAttributeNS(null,"y2",`${oe}%`),this.markerElem_.style.left=`${R}%`,this.markerElem_.style.top=`${oe}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function ah(y,h,v){return[qn(h[0],Kn(y)),qn(h[1],ur(y))*(v?1:-1)]}class QM{constructor(h,v){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=v.value,this.viewProps=v.viewProps,this.baseSteps_=v.baseSteps,this.maxValue_=v.maxValue,this.invertsY_=v.invertsY,this.view=new sh(h,{invertsY:this.invertsY_,layout:v.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Za(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(h,v){if(!h.point)return;const E=this.maxValue_,R=Ar(h.point.x,0,h.bounds.width,-E,+E),Y=Ar(this.invertsY_?h.bounds.height-h.point.y:h.point.y,0,h.bounds.height,-E,+E);this.value.setRawValue(new Ms(R,Y),v)}onPointerDown_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerMove_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerUp_(h){this.handlePointerEvent_(h.data,{forceEmit:!0,last:!0})}onPadKeyDown_(h){S_(h.key)&&h.preventDefault();const[v,E]=ah(h,this.baseSteps_,this.invertsY_);v===0&&E===0||this.value.setRawValue(new Ms(this.value.rawValue.x+v,this.value.rawValue.y+E),{forceEmit:!1,last:!1})}onPadKeyUp_(h){const[v,E]=ah(h,this.baseSteps_,this.invertsY_);v===0&&E===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class F_{constructor(h,v){var E,R;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=v.value,this.viewProps=v.viewProps,this.foldable_=et.create(v.expanded),this.popC_=v.pickerLayout==="popup"?new Od(h,{viewProps:this.viewProps}):null;const Y=new QM(h,{baseSteps:[v.axes[0].baseStep,v.axes[1].baseStep],invertsY:v.invertsY,layout:v.pickerLayout,maxValue:v.maxValue,value:this.value,viewProps:this.viewProps});Y.view.allFocusableElements.forEach(oe=>{oe.addEventListener("blur",this.onPopupChildBlur_),oe.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=Y,this.textC_=new uv(h,{assembly:cv,axes:v.axes,parser:v.parser,value:this.value,viewProps:this.viewProps}),this.view=new JM(h,{expanded:this.foldable_.value("expanded"),pickerLayout:v.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(E=this.view.buttonElement)===null||E===void 0||E.addEventListener("blur",this.onPadButtonBlur_),(R=this.view.buttonElement)===null||R===void 0||R.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ia({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:oe=>oe.rawValue,backward:(oe,Oe)=>Oe.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),qe(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(h){if(!this.popC_)return;const v=this.view.element,E=h.relatedTarget;(!E||!v.contains(E))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(h){if(!this.popC_)return;const v=this.popC_.view.element,E=I(h);E&&v.contains(E)||E&&E===this.view.buttonElement&&!Ce(v.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(h){this.popC_?h.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&h.key==="Escape"&&this.view.buttonElement.focus()}}function $M(y){return Ms.isObject(y)?new Ms(y.x,y.y):new Ms}function Cs(y,h){y.writeProperty("x",h.x),y.writeProperty("y",h.y)}function ko(y,h){if(!y)return;const v=[],E=ho(y,h);E&&v.push(E);const R=B_(y);return R&&v.push(R),new Uc(v)}function ol(y,h){return new ua({assembly:cv,components:[ko("x"in y?y.x:void 0,h.x),ko("y"in y?y.y:void 0,h.y)]})}function ji(y,h){var v,E;const R=y&&Ao(y,Xa);if(R)return Math.max(Math.abs((v=R.minValue)!==null&&v!==void 0?v:0),Math.abs((E=R.maxValue)!==null&&E!==void 0?E:0));const Y=hu(y);return Math.max(Math.abs(Y)*10,Math.abs(h)*10)}function eC(y,h){const v=h instanceof ua?h.components[0]:void 0,E=h instanceof ua?h.components[1]:void 0,R=ji(v,y.x),Y=ji(E,y.y);return Math.max(R,Y)}function hv(y,h){return{baseStep:hu(h),constraint:h,textProps:Z.fromObject({draggingScale:du(h,y),formatter:Sn(Ud(h,y))})}}function U_(y){if(!("y"in y))return!1;const h=y.y;return h&&"inverted"in h?!!h.inverted:!1}const lh={id:"input-point2d",type:"input",accept:(y,h)=>{if(!Ms.isObject(y))return null;const v=he,E=Se(h,{expanded:v.optional.boolean,picker:v.optional.custom(Qm),x:v.optional.custom(tn),y:v.optional.object({inverted:v.optional.boolean,max:v.optional.number,min:v.optional.number,step:v.optional.number})});return E?{initialValue:y,params:E}:null},binding:{reader:y=>$M,constraint:y=>ol(y.params,y.initialValue),equals:Ms.equals,writer:y=>Cs},controller:y=>{const h=y.document,v=y.value,E=y.constraint;if(!(E instanceof ua))throw g.shouldNeverHappen();const R="expanded"in y.params?y.params.expanded:void 0,Y="picker"in y.params?y.params.picker:void 0;return new F_(h,{axes:[hv(v.rawValue.x,E.components[0]),hv(v.rawValue.y,E.components[1])],expanded:R!=null?R:!1,invertsY:U_(y.params),maxValue:eC(v.rawValue,E),parser:Jo,pickerLayout:Y!=null?Y:"popup",value:v,viewProps:y.viewProps})}};class Hi{constructor(h=0,v=0,E=0){this.x=h,this.y=v,this.z=E}getComponents(){return[this.x,this.y,this.z]}static isObject(h){if(d(h))return!1;const v=h.x,E=h.y,R=h.z;return!(typeof v!="number"||typeof E!="number"||typeof R!="number")}static equals(h,v){return h.x===v.x&&h.y===v.y&&h.z===v.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const dv={toComponents:y=>y.getComponents(),fromComponents:y=>new Hi(...y)};function tC(y){return Hi.isObject(y)?new Hi(y.x,y.y,y.z):new Hi}function Jd(y,h){y.writeProperty("x",h.x),y.writeProperty("y",h.y),y.writeProperty("z",h.z)}function rC(y,h){return new ua({assembly:dv,components:[ko("x"in y?y.x:void 0,h.x),ko("y"in y?y.y:void 0,h.y),ko("z"in y?y.z:void 0,h.z)]})}function Qd(y,h){return{baseStep:hu(h),constraint:h,textProps:Z.fromObject({draggingScale:du(h,y),formatter:Sn(Ud(h,y))})}}const Rn={id:"input-point3d",type:"input",accept:(y,h)=>{if(!Hi.isObject(y))return null;const v=he,E=Se(h,{x:v.optional.custom(tn),y:v.optional.custom(tn),z:v.optional.custom(tn)});return E?{initialValue:y,params:E}:null},binding:{reader:y=>tC,constraint:y=>rC(y.params,y.initialValue),equals:Hi.equals,writer:y=>Jd},controller:y=>{const h=y.value,v=y.constraint;if(!(v instanceof ua))throw g.shouldNeverHappen();return new uv(y.document,{assembly:dv,axes:[Qd(h.rawValue.x,v.components[0]),Qd(h.rawValue.y,v.components[1]),Qd(h.rawValue.z,v.components[2])],parser:Jo,value:h,viewProps:y.viewProps})}};class ca{constructor(h=0,v=0,E=0,R=0){this.x=h,this.y=v,this.z=E,this.w=R}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(h){if(d(h))return!1;const v=h.x,E=h.y,R=h.z,Y=h.w;return!(typeof v!="number"||typeof E!="number"||typeof R!="number"||typeof Y!="number")}static equals(h,v){return h.x===v.x&&h.y===v.y&&h.z===v.z&&h.w===v.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const pv={toComponents:y=>y.getComponents(),fromComponents:y=>new ca(...y)};function $o(y){return ca.isObject(y)?new ca(y.x,y.y,y.z,y.w):new ca}function fv(y,h){y.writeProperty("x",h.x),y.writeProperty("y",h.y),y.writeProperty("z",h.z),y.writeProperty("w",h.w)}function $d(y,h){return new ua({assembly:pv,components:[ko("x"in y?y.x:void 0,h.x),ko("y"in y?y.y:void 0,h.y),ko("z"in y?y.z:void 0,h.z),ko("w"in y?y.w:void 0,h.w)]})}function sl(y,h){return{baseStep:hu(h),constraint:h,textProps:Z.fromObject({draggingScale:du(h,y),formatter:Sn(Ud(h,y))})}}const j_={id:"input-point4d",type:"input",accept:(y,h)=>{if(!ca.isObject(y))return null;const v=he,E=Se(h,{x:v.optional.custom(tn),y:v.optional.custom(tn),z:v.optional.custom(tn),w:v.optional.custom(tn)});return E?{initialValue:y,params:E}:null},binding:{reader:y=>$o,constraint:y=>$d(y.params,y.initialValue),equals:ca.equals,writer:y=>fv},controller:y=>{const h=y.value,v=y.constraint;if(!(v instanceof ua))throw g.shouldNeverHappen();return new uv(y.document,{assembly:pv,axes:h.rawValue.getComponents().map((E,R)=>sl(E,v.components[R])),parser:Jo,value:h,viewProps:y.viewProps})}};function ui(y){const h=[],v=Qa(y.options);return v&&h.push(v),new Uc(h)}const mv={id:"input-string",type:"input",accept:(y,h)=>{if(typeof y!="string")return null;const v=Se(h,{options:he.optional.custom(zd)});return v?{initialValue:y,params:v}:null},binding:{reader:y=>Si,constraint:y=>ui(y.params),writer:y=>Ja},controller:y=>{var h;const v=y.document,E=y.value,R=y.constraint;return R&&Ao(R,ra)?new qa(v,{props:Z.fromObject({options:(h=Fd(R))!==null&&h!==void 0?h:[]}),value:E,viewProps:y.viewProps}):new jc(v,{parser:Y=>Y,props:Z.fromObject({formatter:qm}),value:E,viewProps:y.viewProps})}},uh={monitor:{defaultInterval:200,defaultLineCount:3}},H_=S("mll");class nC{constructor(h,v){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=v.formatter,this.element=h.createElement("div"),this.element.classList.add(H_()),v.viewProps.bindClassModifiers(this.element);const E=h.createElement("textarea");E.classList.add(H_("i")),E.style.height=`calc(var(--bld-us) * ${v.lineCount})`,E.readOnly=!0,v.viewProps.bindDisabled(E),this.element.appendChild(E),this.textareaElem_=E,v.value.emitter.on("change",this.onValueUpdate_),this.value=v.value,this.update_()}update_(){const h=this.textareaElem_,v=h.scrollTop===h.scrollHeight-h.clientHeight,E=[];this.value.rawValue.forEach(R=>{R!==void 0&&E.push(this.formatter_(R))}),h.textContent=E.join(`
`),v&&(h.scrollTop=h.scrollHeight)}onValueUpdate_(){this.update_()}}class ch{constructor(h,v){this.value=v.value,this.viewProps=v.viewProps,this.view=new nC(h,{formatter:v.formatter,lineCount:v.lineCount,value:this.value,viewProps:this.viewProps})}}const W_=S("sgl");class hh{constructor(h,v){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=v.formatter,this.element=h.createElement("div"),this.element.classList.add(W_()),v.viewProps.bindClassModifiers(this.element);const E=h.createElement("input");E.classList.add(W_("i")),E.readOnly=!0,E.type="text",v.viewProps.bindDisabled(E),this.element.appendChild(E),this.inputElement=E,v.value.emitter.on("change",this.onValueUpdate_),this.value=v.value,this.update_()}update_(){const h=this.value.rawValue,v=h[h.length-1];this.inputElement.value=v!==void 0?this.formatter_(v):""}onValueUpdate_(){this.update_()}}class ep{constructor(h,v){this.value=v.value,this.viewProps=v.viewProps,this.view=new hh(h,{formatter:v.formatter,value:this.value,viewProps:this.viewProps})}}const iC={id:"monitor-bool",type:"monitor",accept:(y,h)=>{if(typeof y!="boolean")return null;const v=Se(h,{lineCount:he.optional.number});return v?{initialValue:y,params:v}:null},binding:{reader:y=>f_},controller:y=>{var h;return y.value.rawValue.length===1?new ep(y.document,{formatter:Hm,value:y.value,viewProps:y.viewProps}):new ch(y.document,{formatter:Hm,lineCount:(h=y.params.lineCount)!==null&&h!==void 0?h:uh.monitor.defaultLineCount,value:y.value,viewProps:y.viewProps})}},ha=S("grl");class dh{constructor(h,v){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=h.createElement("div"),this.element.classList.add(ha()),v.viewProps.bindClassModifiers(this.element),this.formatter_=v.formatter,this.props_=v.props,this.cursor_=v.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const E=h.createElementNS(Ge,"svg");E.classList.add(ha("g")),E.style.height=`calc(var(--bld-us) * ${v.lineCount})`,this.element.appendChild(E),this.svgElem_=E;const R=h.createElementNS(Ge,"polyline");this.svgElem_.appendChild(R),this.lineElem_=R;const Y=h.createElement("div");Y.classList.add(ha("t"),S("tt")()),this.element.appendChild(Y),this.tooltipElem_=Y,v.value.emitter.on("change",this.onValueUpdate_),this.value=v.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const h=this.svgElem_.getBoundingClientRect(),v=this.value.rawValue.length-1,E=this.props_.get("minValue"),R=this.props_.get("maxValue"),Y=[];this.value.rawValue.forEach((qt,Tt)=>{if(qt===void 0)return;const ci=Ar(Tt,0,v,0,h.width),Es=Ar(qt,E,R,h.height,0);Y.push([ci,Es].join(","))}),this.lineElem_.setAttributeNS(null,"points",Y.join(" "));const oe=this.tooltipElem_,Oe=this.value.rawValue[this.cursor_.rawValue];if(Oe===void 0){oe.classList.remove(ha("t","a"));return}const ut=Ar(this.cursor_.rawValue,0,v,0,h.width),ft=Ar(Oe,E,R,h.height,0);oe.style.left=`${ut}px`,oe.style.top=`${ft}px`,oe.textContent=`${this.formatter_(Oe)}`,oe.classList.contains(ha("t","a"))||(oe.classList.add(ha("t","a"),ha("t","in")),ze(oe),oe.classList.remove(ha("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class oC{constructor(h,v){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=v.props,this.value=v.value,this.viewProps=v.viewProps,this.cursor_=re(-1),this.view=new dh(h,{cursor:this.cursor_,formatter:v.formatter,lineCount:v.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!Ce(h))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const E=new Za(this.view.element);E.emitter.on("down",this.onGraphPointerDown_),E.emitter.on("move",this.onGraphPointerMove_),E.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(h){const v=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Ar(h.offsetX,0,v.width,0,this.value.rawValue.length))}onGraphPointerDown_(h){this.onGraphPointerMove_(h)}onGraphPointerMove_(h){if(!h.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Ar(h.data.point.x,0,h.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function vv(y){return"format"in y&&!d(y.format)?y.format:Sn(2)}function gv(y){var h;return y.value.rawValue.length===1?new ep(y.document,{formatter:vv(y.params),value:y.value,viewProps:y.viewProps}):new ch(y.document,{formatter:vv(y.params),lineCount:(h=y.params.lineCount)!==null&&h!==void 0?h:uh.monitor.defaultLineCount,value:y.value,viewProps:y.viewProps})}function G_(y){var h,v,E;return new oC(y.document,{formatter:vv(y.params),lineCount:(h=y.params.lineCount)!==null&&h!==void 0?h:uh.monitor.defaultLineCount,props:Z.fromObject({maxValue:(v="max"in y.params?y.params.max:null)!==null&&v!==void 0?v:100,minValue:(E="min"in y.params?y.params.min:null)!==null&&E!==void 0?E:0}),value:y.value,viewProps:y.viewProps})}function Y_(y){return"view"in y&&y.view==="graph"}const sC={id:"monitor-number",type:"monitor",accept:(y,h)=>{if(typeof y!="number")return null;const v=he,E=Se(h,{format:v.optional.function,lineCount:v.optional.number,max:v.optional.number,min:v.optional.number,view:v.optional.string});return E?{initialValue:y,params:E}:null},binding:{defaultBufferSize:y=>Y_(y)?64:1,reader:y=>Xm},controller:y=>Y_(y.params)?G_(y):gv(y)},aC={id:"monitor-string",type:"monitor",accept:(y,h)=>{if(typeof y!="string")return null;const v=he,E=Se(h,{lineCount:v.optional.number,multiline:v.optional.boolean});return E?{initialValue:y,params:E}:null},binding:{reader:y=>Si},controller:y=>{var h;const v=y.value;return v.rawValue.length>1||"multiline"in y.params&&y.params.multiline?new ch(y.document,{formatter:qm,lineCount:(h=y.params.lineCount)!==null&&h!==void 0?h:uh.monitor.defaultLineCount,value:v,viewProps:y.viewProps}):new ep(y.document,{formatter:qm,value:v,viewProps:y.viewProps})}};class X_{constructor(h){this.onValueChange_=this.onValueChange_.bind(this),this.reader=h.reader,this.writer=h.writer,this.emitter=new w,this.value=h.value,this.value.emitter.on("change",this.onValueChange_),this.target=h.target,this.read()}read(){const h=this.target.read();h!==void 0&&(this.value.rawValue=this.reader(h))}write_(h){this.writer(this.target,h)}onValueChange_(h){this.write_(h.rawValue),this.emitter.emit("change",{options:h.options,rawValue:h.rawValue,sender:this})}}function yv(y,h){const v=y.accept(h.target.read(),h.params);if(d(v))return null;const E=he,R={target:h.target,initialValue:v.initialValue,params:v.params},Y=y.binding.reader(R),oe=y.binding.constraint?y.binding.constraint(R):void 0,Oe=re(Y(v.initialValue),{constraint:oe,equals:y.binding.equals}),ut=new X_({reader:Y,target:h.target,value:Oe,writer:y.binding.writer(R)}),ft=E.optional.boolean(h.params.disabled).value,qt=E.optional.boolean(h.params.hidden).value,Tt=y.controller({constraint:oe,document:h.document,initialValue:v.initialValue,params:v.params,value:ut.value,viewProps:li.create({disabled:ft,hidden:qt})}),ci=E.optional.string(h.params.label).value;return new Ie(h.document,{binding:ut,blade:ge(),props:Z.fromObject({label:ci!=null?ci:h.target.key}),valueController:Tt})}class lC{constructor(h){this.onTick_=this.onTick_.bind(this),this.reader_=h.reader,this.target=h.target,this.emitter=new w,this.value=h.value,this.ticker=h.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const h=this.target.read();if(h===void 0)return;const v=this.value.rawValue,E=this.reader_(h);this.value.rawValue=na(v,E),this.emitter.emit("update",{rawValue:E,sender:this})}onTick_(h){this.read()}}function _v(y,h){return h===0?new Ad:new au(y,h!=null?h:uh.monitor.defaultInterval)}function q_(y,h){var v,E,R;const Y=he,oe=y.accept(h.target.read(),h.params);if(d(oe))return null;const Oe={target:h.target,initialValue:oe.initialValue,params:oe.params},ut=y.binding.reader(Oe),ft=(E=(v=Y.optional.number(h.params.bufferSize).value)!==null&&v!==void 0?v:y.binding.defaultBufferSize&&y.binding.defaultBufferSize(oe.params))!==null&&E!==void 0?E:1,qt=Y.optional.number(h.params.interval).value,Tt=new lC({reader:ut,target:h.target,ticker:_v(h.document,qt),value:cM(ft)}),ci=Y.optional.boolean(h.params.disabled).value,Es=Y.optional.boolean(h.params.hidden).value,al=y.controller({document:h.document,params:oe.params,value:Tt.value,viewProps:li.create({disabled:ci,hidden:Es})}),rp=(R=Y.optional.string(h.params.label).value)!==null&&R!==void 0?R:h.target.key;return new fr(h.document,{binding:Tt,blade:ge(),props:Z.fromObject({label:rp}),valueController:al})}class K_{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(h){h.type==="blade"?this.pluginsMap_.blades.unshift(h):h.type==="input"?this.pluginsMap_.inputs.unshift(h):h.type==="monitor"&&this.pluginsMap_.monitors.unshift(h)}createInput(h,v,E){const R=v.read();if(d(R))throw new g({context:{key:v.key},type:"nomatchingcontroller"});const Y=this.pluginsMap_.inputs.reduce((oe,Oe)=>oe!=null?oe:yv(Oe,{document:h,target:v,params:E}),null);if(Y)return Y;throw new g({context:{key:v.key},type:"nomatchingcontroller"})}createMonitor(h,v,E){const R=this.pluginsMap_.monitors.reduce((Y,oe)=>Y!=null?Y:q_(oe,{document:h,params:E,target:v}),null);if(R)return R;throw new g({context:{key:v.key},type:"nomatchingcontroller"})}createBlade(h,v){const E=this.pluginsMap_.blades.reduce((R,Y)=>R!=null?R:su(Y,{document:h,params:v}),null);if(!E)throw new g({type:"nomatchingview",context:{params:v}});return E}createBladeApi(h){if(h instanceof Ie)return new Ke(h);if(h instanceof fr)return new rr(h);if(h instanceof ye)return new ai(h,this);const v=this.pluginsMap_.blades.reduce((E,R)=>E!=null?E:R.api({controller:h,pool:this}),null);if(!v)throw g.shouldNeverHappen();return v}}function Z_(){const y=new K_;return[lh,Rn,j_,mv,ZM,GM,WM,UM,mM,iC,aC,sC,Be,Mt,Qr,Ln].forEach(h=>{y.register(h)}),y}class ph extends i{constructor(h){super(h),this.emitter_=new w,this.controller_.valueController.value.emitter.on("change",v=>{this.emitter_.emit("change",{event:new s(this,v.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(h){this.controller_.props.set("label",h)}get options(){return this.controller_.valueController.props.get("options")}set options(h){this.controller_.valueController.props.set("options",h)}get value(){return this.controller_.valueController.value.rawValue}set value(h){this.controller_.valueController.value.rawValue=h}on(h,v){const E=v.bind(this);return this.emitter_.on(h,R=>{E(R.event)}),this}}class J_ extends i{constructor(h){super(h),this.emitter_=new w,this.controller_.valueController.value.emitter.on("change",v=>{this.emitter_.emit("change",{event:new s(this,v.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(h){this.controller_.props.set("label",h)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(h){this.controller_.valueController.sliderController.props.set("maxValue",h)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(h){this.controller_.valueController.sliderController.props.set("minValue",h)}get value(){return this.controller_.valueController.value.rawValue}set value(h){this.controller_.valueController.value.rawValue=h}on(h,v){const E=v.bind(this);return this.emitter_.on(h,R=>{E(R.event)}),this}}class wv extends i{constructor(h){super(h),this.emitter_=new w,this.controller_.valueController.value.emitter.on("change",v=>{this.emitter_.emit("change",{event:new s(this,v.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(h){this.controller_.props.set("label",h)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(h){this.controller_.valueController.props.set("formatter",h)}get value(){return this.controller_.valueController.value.rawValue}set value(h){this.controller_.valueController.value.rawValue=h}on(h,v){const E=v.bind(this);return this.emitter_.on(h,R=>{E(R.event)}),this}}const Q_=function(){return{id:"list",type:"blade",accept(y){const h=he,v=Se(y,{options:h.required.custom(zd),value:h.required.raw,view:h.required.constant("list"),label:h.optional.string});return v?{params:v}:null},controller(y){const h=new qa(y.document,{props:Z.fromObject({options:Bd(y.params.options)}),value:re(y.params.value),viewProps:y.viewProps});return new pt(y.document,{blade:y.blade,props:Z.fromObject({label:y.params.label}),valueController:h})},api(y){return!(y.controller instanceof pt)||!(y.controller.valueController instanceof qa)?null:new ph(y.controller)}}}();function uC(y){return y.reduce((h,v)=>Object.assign(h,{[v.presetKey]:v.read()}),{})}function $_(y,h){y.forEach(v=>{const E=h[v.presetKey];E!==void 0&&v.write(E)})}class cC extends Yn{constructor(h,v){super(h,v)}get element(){return this.controller_.view.element}importPreset(h){const v=this.controller_.rackController.rack.find(Ie).map(E=>E.binding.target);$_(v,h),this.refresh()}exportPreset(){const h=this.controller_.rackController.rack.find(Ie).map(v=>v.binding.target);return uC(h)}refresh(){this.controller_.rackController.rack.find(Ie).forEach(h=>{h.binding.read()}),this.controller_.rackController.rack.find(fr).forEach(h=>{h.binding.read()})}}class bv extends at{constructor(h,v){super(h,{expanded:v.expanded,blade:v.blade,props:v.props,root:!0,viewProps:v.viewProps})}}const e1={id:"slider",type:"blade",accept(y){const h=he,v=Se(y,{max:h.required.number,min:h.required.number,view:h.required.constant("slider"),format:h.optional.function,label:h.optional.string,value:h.optional.number});return v?{params:v}:null},controller(y){var h,v;const E=(h=y.params.value)!==null&&h!==void 0?h:0,R=new Xc(y.document,{baseStep:1,parser:Jo,sliderProps:Z.fromObject({maxValue:y.params.max,minValue:y.params.min}),textProps:Z.fromObject({draggingScale:du(void 0,E),formatter:(v=y.params.format)!==null&&v!==void 0?v:w_}),value:re(E),viewProps:y.viewProps});return new pt(y.document,{blade:y.blade,props:Z.fromObject({label:y.params.label}),valueController:R})},api(y){return!(y.controller instanceof pt)||!(y.controller.valueController instanceof Xc)?null:new J_(y.controller)}},xv=function(){return{id:"text",type:"blade",accept(y){const h=he,v=Se(y,{parse:h.required.function,value:h.required.raw,view:h.required.constant("text"),format:h.optional.function,label:h.optional.string});return v?{params:v}:null},controller(y){var h;const v=new jc(y.document,{parser:y.params.parse,props:Z.fromObject({formatter:(h=y.params.format)!==null&&h!==void 0?h:E=>String(E)}),value:re(y.params.value),viewProps:y.viewProps});return new pt(y.document,{blade:y.blade,props:Z.fromObject({label:y.params.label}),valueController:v})},api(y){return!(y.controller instanceof pt)||!(y.controller.valueController instanceof jc)?null:new wv(y.controller)}}}();function hC(y){const h=y.createElement("div");return h.classList.add(S("dfw")()),y.body&&y.body.appendChild(h),h}function tp(y,h,v){if(y.querySelector(`style[data-tp-style=${h}]`))return;const E=y.createElement("style");E.dataset.tpStyle=h,E.textContent=v,y.head.appendChild(E)}class kt extends cC{constructor(h){var v,E;const R=h!=null?h:{},Y=(v=R.document)!==null&&v!==void 0?v:Ue(),oe=Z_(),Oe=new bv(Y,{expanded:R.expanded,blade:ge(),props:Z.fromObject({title:R.title}),viewProps:li.create()});super(Oe,oe),this.pool_=oe,this.containerElem_=(E=R.container)!==null&&E!==void 0?E:hC(Y),this.containerElem_.appendChild(this.element),this.doc_=Y,this.usesDefaultWrapper_=!R.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw g.alreadyDisposed();return this.doc_}dispose(){const h=this.containerElem_;if(!h)throw g.alreadyDisposed();if(this.usesDefaultWrapper_){const v=h.parentElement;v&&v.removeChild(h)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(h){("plugin"in h?[h.plugin]:"plugins"in h?h.plugins:[]).forEach(v=>{this.pool_.register(v),this.embedPluginStyle_(v)})}embedPluginStyle_(h){h.css&&tp(this.document,`plugin-${h.id}`,h.css)}setUpDefaultPlugins_(){tp(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(h=>{this.embedPluginStyle_(h)}),this.registerPlugin({plugins:[e1,Q_,Ln,xv]})}}const dC=new n("3.1.0");t.BladeApi=i,t.ButtonApi=_,t.FolderApi=Yn,t.InputBindingApi=Ke,t.ListApi=ph,t.MonitorBindingApi=rr,t.Pane=kt,t.SeparatorApi=Nt,t.SliderApi=J_,t.TabApi=lo,t.TabPageApi=Xn,t.TextApi=wv,t.TpChangeEvent=s,t.VERSION=dC,Object.defineProperty(t,"__esModule",{value:!0})})})(PA,PA.exports);const m9=()=>{if(ms())return;const r=hn(),e=Zs();r==null||r.dispose();for(const t of e)t.dispose()},v9=r=>r.name||Ri.exports.upperFirst(r.constructor.componentName),Q_e=z2(`
    <div>
        <svg t="1656447640895" class="icon" viewBox="0 0 1084 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1297" width="10" height="10"><path d="M788.804292 977.500541a503.543363 503.543363 0 0 0 162.507176-119.862595 509.687074 509.687074 0 0 0 103.780528-174.312738 515.047762 515.047762 0 0 0 28.550186-194.068985 514.385205 514.385205 0 0 0-45.53574-190.816432 508.663122 508.663122 0 0 0-118.657945-164.193685A501.676156 501.676156 0 0 0 554.921651 0.530046 503.904757 503.904757 0 0 0 203.585714 166.530704a509.807538 509.807538 0 0 0-94.564962 150.159522L0 290.187944l45.174345 154.014399 45.234577 154.0144 109.382147-116.610042L309.173215 365.056891l-103.057738-24.936238a411.387699 411.387699 0 0 1 69.990118-106.611453 405.846313 405.846313 0 0 1 576.906499-25.960191c166.181356 153.592772 177.625524 415.001647 25.659027 582.869512a406.087243 406.087243 0 0 1-577.026963 25.899958l-66.315938 73.302904a502.097784 502.097784 0 0 0 364.707543 133.836525 499.387323 499.387323 0 0 0 188.768529-45.957367z" p-id="1298" fill="#ffffff"></path></svg>
    </div>
`);let g9=!1,ZE=!0;const $_e=Qs(()=>{g9=ZE,ZE=!ZE},100,"both"),qI=r=>r&&typeof r=="object"&&"x"in r&&"y"in r,KI=r=>r===!0||r==="true",ZI=r=>r===!1||r==="false",e1e=(r,e)=>qI(r)&&qI(e)?r.x===e.x&&r.y===e.y&&r.z===e.z:KI(r)&&KI(e)||ZI(r)&&ZI(e)?!0:r===e,$n=(r,e,t,n,i={...t})=>{const o=r.addFolder({title:e});for(const[s,a]of Object.entries(i))switch(typeof a){case"undefined":i[s]="";break;case"number":i[s]=zp(s,a);break;case"object":if(Array.isArray(a)){i[s]=JSON.stringify(a);break}typeof(a==null?void 0:a.x)=="number"&&(a.x=zp("x",a.x)),typeof(a==null?void 0:a.y)=="number"&&(a.y=zp("y",a.y)),typeof(a==null?void 0:a.z)=="number"&&(a.z=zp("z",a.z));break}return Object.fromEntries(Object.keys(i).map(s=>{const a=o.addInput(i,s),l=Q_e.cloneNode(!0);a.element.prepend(l),l.style.opacity="0.1";const c=B2(n,s,!0),d=Qs(()=>{const f=e1e(i[s],c);l.style.opacity=f?"0.1":"0.5",l.style.cursor=f?"auto":"pointer"},100,"trailing");return d(),l.onclick=()=>{i[s]=JSON.parse(JSON.stringify(c)),a.refresh()},a.on("change",({value:f})=>{if(d(),!g9){if(typeof f=="string"){if(f==="true"||f==="false"){t[s]=f==="true";return}const m=parseFloat(f);if(!Number.isNaN(m)){t[s]=m;return}}t[s]=typeof f=="number"?zp(s,f):f}}),[s,a]}))},JI=(r,e,t)=>{const n={};for(const[i,o]of Object.entries(r)){if(L8.has(i))continue;let s=t[i];o===Function||typeof s=="function"||(o===Object||typeof s=="object"&&!Array.isArray(s))&&(!s||typeof s.x!="number"||typeof s.y!="number")||(s!=null||(s=B2(e,i,!0)),s===1/0?s=999999999:s===-1/0?s=-999999999:Array.isArray(s)&&(s=JSON.stringify(s)),n[i]=s)}return n},Xi=(r,e)=>{let t;for(const o of e)o in r&&((t!=null?t:t={})[o]=r[o]);const n=new Set(e),i={};for(const[o,s]of Object.entries(r))!n.has(o)&&(i[o]=s);return[t,i]},t1e=(r,e,t)=>{for(const n of t)n in r&&(r[n]=e[n])},[r1e,n1e]=zi();Object.assign(mU,{stride:{x:0,y:0}});const i1e=()=>{const r=l_(),[e]=S_e(),t=Bf(e);qo(()=>{wo.activate(),q5(!0),BT(!0);const d=g=>{(g.key==="Shift"||g.key==="Meta"||g.key==="Control")&&nE(!0)},f=g=>{(g.key==="Shift"||g.key==="Meta"||g.key==="Control")&&nE(!1)};document.addEventListener("keydown",d),document.addEventListener("keyup",f);const m=KS(()=>nE(!1));return FS(),()=>{q5(!1),BT(!1),document.removeEventListener("keydown",d),document.removeEventListener("keyup",f),m.cancel(),US()}},[]);const[n]=a_(),[i]=fL(),[o]=x_e(),[s,a]=Xo(),[l,c]=Xo();return r9(()=>{var d;if(!s||!l)return;const f="editor camera",m=o.reduce((w,M,S)=>(w[S===0?f:v9(M.userData.manager)]=S,w),{}),g=s.addInput({camera:o.indexOf(t)},"camera",{options:m});l.add(g),g.on("change",({value:w})=>{o[w].userData.manager.activate()});const b={none:0,...Ri.exports.omit(m,f)},_=s.addInput({"secondary camera":o.indexOf((d=Lx())!=null?d:qr)},"secondary camera",{options:b});return l.add(_),_.on("change",({value:w})=>bne(w===0?void 0:o[w])),()=>{g.dispose(),_.dispose()}},[s,l,o,t]),qo(()=>{const d=r.current;if(!d)return;const f=new PA.exports.Pane({container:d});if(a(f),c(f.addFolder({title:"camera"})),!n){const[_,w]=Xi(Ri.exports.omit(JI(JS,ya,zo),H0e),["gridHelper","gridHelperSize"]);$n(f,"editor",zo,ya,_);const[M,S]=Xi(w,["antiAlias","pixelRatio","fps","logarithmicDepth","pbr"]);$n(f,"renderer",zo,ya,M);const[C,P]=Xi(S,["exposure","defaultLight","shadowDistance","shadowResolution","shadowBias","skybox","texture","color"]);$n(f,"lighting & environment",zo,ya,C);const[T,L]=Xi(P,["ambientOcclusion","bloom","bloomStrength","bloomRadius","bloomThreshold","bokeh","bokehAperture","bokehFocus","bokehMaxBlur","lensDistortion","lensIor","lensBand","motionBlur","motionBlurStrength"]);$n(f,"effects",zo,ya,T);const[O,k]=Xi(L,["outlineColor","outlineHiddenColor","outlinePattern","outlinePulse","outlineStrength","outlineThickness"]);$n(f,"outline effect",zo,ya,O);const[N,V]=Xi(k,["gravity","repulsion","centripetal"]);return $n(f,"physics",zo,ya,N),Object.keys(V).length&&$n(f,"settings",zo,ya,V),()=>{f.dispose()}}const m=_=>{if(_.key==="Backspace"||_.key==="Delete"){_.preventDefault(),!yk()&&m9();return}const w=hn();if(w)if(_.metaKey||_.ctrlKey)if(_.key.toLocaleLowerCase()==="c"){if(!Zs().length){const[M]=Ej(F2(w));w.parent&&M&&(w.parent.attach(M),cn(M))}}else _.key==="ArrowUp"&&gc()&&(yU(w),NT("local"));else _.key.toLowerCase()==="c"&&nd(w)&&xie(w)};document.addEventListener("keydown",m);const g=n,b=new lr;if(!i.length){const{schema:_,defaults:w,componentName:M}=g.constructor,[S,C]=Xi(Ri.exports.omit(JI(_,w,g),["rotation","innerRotation","frustumCulled","minAzimuthAngle","maxAzimuthAngle"]),["name","id","physics","gravity"]);if(S){const{name:J}=$n(f,"general",g,w,S);J==null||J.on("change",()=>r1e())}const[P,T]=Xi(C,["x","y","z","rotationX","rotationY","rotationZ","scale","scaleX","scaleY","scaleZ","innerX","innerY","innerZ","innerRotationX","innerRotationY","innerRotationZ","width","height","depth"]);if(P){const[J,Q]=Xi(P,["innerX","innerY","innerZ","innerRotationX","innerRotationY","innerRotationZ","width","height","depth"]);$n(f,"transform",g,w,Q),J&&$n(f,"inner transform",g,w,J),b.watch(AF(()=>{$_e(),t1e(Q,g,["x","y","z","rotationX","rotationY","rotationZ","scaleX","scaleY","scaleZ"]),f.refresh()}))}const[L,O]=Xi(T,["visible","innerVisible"]);L&&$n(f,"display",g,w,L);const[k,N]=Xi(O,["bloom","outline"]);k&&$n(f,"effects",g,w,k);const[V,W]=Xi(N,["animation","animationPaused","animationRepeat"]);V&&$n(f,"animation",g,w,V);const[ee,se]=Xi(W,["metalnessFactor","roughnessFactor","opacityFactor","adjustColor","toon"]);ee&&$n(f,"adjust material",g,w,ee);const[q,re]=Xi(se,["fog","opacity","color","texture","textureRepeat","textureFlipY","videoTexture","wireframe"]);q&&$n(f,"material",g,w,q);const[Z,me]=Xi(re,["metalnessMap","metalness","roughnessMap","roughness","normalMap","normalScale","normalMapType","bumpMap","bumpScale","displacementMap","displacementScale","displacementBias","aoMap","aoMapIntensity","lightMap","lightMapIntensity","emissiveMap","emissiveIntensity","emissiveColor","envMap","alphaMap"]);if(Z&&$n(f,"pbr material",g,w,Z),M==="dummy"){me.stride={x:g.strideRight,y:-g.strideForward};const{stride:J}=$n(f,M,g,w,me);J.on("change",({value:Q})=>{Object.assign(me,{strideForward:-Q.y,strideRight:Q.x}),f.refresh()})}else Object.keys(me).length&&$n(f,M,g,w,me)}return()=>{b.cancel(),f.dispose(),document.removeEventListener("keydown",m)}},[n,i]),ae("div",{ref:r,className:"lingo3d-ui lingo3d-bg",style:{width:300,height:"100%"}})},y9=()=>{const[r]=mL();return r?null:ae(i1e,{})};Td(y9,"lingo3d-editor");const o1e=()=>ae("div",{className:"lingo3d-ui",style:{overflow:"hidden",width:500,height:"100%",background:"rgb(40, 41, 46)"},children:"hello world"}),_9=()=>{const[r]=mL();return r?ae(o1e,{}):null};Td(_9,"lingo3d-node-editor");const s1e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 1024 1024",style:{margin:2,opacity:.25,flexShrink:0},children:ae("path",{fill:"#fff",d:"M838.4 325.12L554.24 479.36C528 493.44 512 521.6 512 552.96V851.2c0 32 31.36 53.12 57.6 38.4l284.16-154.24c25.6-14.08 42.24-42.24 42.24-73.6v-297.6c0-32.64-31.36-53.12-57.6-39.04zm-432.64 153.6L121.6 325.12c-26.24-14.08-57.6 6.4-57.6 38.4v299.52c0 31.36 16 59.52 42.24 73.6l284.16 153.6c26.24 14.08 57.6-7.04 57.6-39.04V552.32c0-31.36-16-59.52-42.24-73.6zm406.4-223.36c13.44-7.04 19.84-19.2 18.56-30.72 1.28-12.16-5.12-23.68-18.56-30.72L522.88 42.88c-12.8-7.04-28.16-10.24-43.52-10.24-15.36 0-30.72 3.2-43.52 10.24l-289.28 150.4c-13.44 7.04-19.2 19.2-18.56 30.72-.64 12.16 5.12 24.32 18.56 31.36l289.28 150.4C448.64 412.8 464 416 479.36 416c15.36 0 30.72-3.2 43.52-10.24l289.28-150.4z"})}),w9=({style:r,onClick:e})=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 1024 1024",style:{margin:2,flexShrink:0,...r},onMouseDown:t=>t.stopPropagation(),onClick:t=>(t.stopPropagation(),e==null?void 0:e()),children:ae("path",{fill:"#fff",d:"M928.1 928.2H98v-830h830.1v830zm-104.8-415c0-24.6-19.9-44.5-44.5-44.5H556.5V246.4c0-24.6-19.9-44.5-44.5-44.5s-44.5 19.9-44.5 44.5v222.3H245.2c-24.6 0-44.5 19.9-44.5 44.5s19.9 44.5 44.5 44.5h222.3V780c0 24.6 19.9 44.5 44.5 44.5s44.5-19.9 44.5-44.5V557.7h222.3c24.6 0 44.5-20 44.5-44.5z"})}),b9=({style:r,onClick:e})=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 1024 1024",style:{margin:2,flexShrink:0,...r},onMouseDown:t=>t.stopPropagation(),onClick:t=>(t.stopPropagation(),e==null?void 0:e()),children:ae("path",{fill:"#fff",d:"M752 240H144c-17.7 0-32 14.3-32 32v608c0 17.7 14.3 32 32 32h608c17.7 0 32-14.3 32-32V272c0-17.7-14.3-32-32-32zM596 606c0 4.4-3.6 8-8 8H308c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h280c4.4 0 8 3.6 8 8v48zm284-494H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h576v576c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32z"})}),x9=()=>ae("path",{fill:"#fff",d:"M914.5 653.5c-5.5 0-11 1.1-16 3.3l-.2.1h-.2L510.2 822.2 122.2 657h-.2l-.2-.1c-5-2.1-10.3-3.3-16-3.3-23.1 0-41.8 19.3-41.8 43.1 0 18 10.7 33.3 25.8 39.8l403.9 172.1.4.1c10.2 4.4 21.8 4.4 32 0l.2-.1c.1 0 .1-.1.2-.1l403.9-172.1c15.1-6.5 25.8-21.8 25.8-39.8.1-23.8-18.6-43.1-41.7-43.1zm0-186.5c-7.9-.2-16 3.2-16 3.2L510.2 635.6 121.8 470.2s-10.3-3.2-16-3.2C82.7 467 64 486.2 64 510c0 17.9 10.7 33.3 25.8 39.7l403.9 172c.1 0 .1.1.2.1l.1.1c5 2.1 10.3 3.3 16 3.3 5.7 0 11.1-1.2 16-3.3l.2-.1c.1 0 .1 0 .2-.1l403.9-172c15.1-6.4 25.8-21.8 25.9-39.7.1-23.8-18.6-43-41.7-43zM89.8 363.2l403.9 172.1c.1 0 .1 0 .2.1l.1.1c5 2.1 10.3 3.2 16 3.2 5.5 0 10.9-1.1 16-3.2l.2-.1.2-.1 403.9-172c15.1-6.5 25.8-21.8 25.9-39.7 0-18-10.7-33.3-25.8-39.8L526.5 111.6c-.1 0-.1 0-.2-.1l-.2-.1c-10.2-4.4-21.8-4.4-32 0l-.1.1L89.8 283.7C74.7 290.1 64 305.5 64 323.5c0 17.9 10.7 33.2 25.8 39.7z"}),a1e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 1024 1024",style:{margin:2,opacity:.25,flexShrink:0},children:ae(x9,{})});document.addEventListener("mouseup",()=>pL(!1));const S9=({appendable:r,object3d:e,level:t})=>{const n={opacity:e.children.length?.5:.05,cursor:"pointer"},[i,o]=Xo(!1),[s]=o9(),{setClickEl:a,handleClick:l}=C9(e,r),[c,d]=s9();qo(()=>{!c||c.has(e)&&o(!0)},[c]);const f=dm(null),m=dm(null),g=s===e,b=U0(()=>{if(!g||!f.current||!m.current)return;const M=f.current.getBoundingClientRect();return m.current.getBoundingClientRect().right-M.left+4},[g,i]),_=()=>{o(!1),d(void 0)},w=()=>o(!0);return ae("div",{ref:a,onClick:l,onDblClick:M=>{M.stopPropagation(),i?_():w()},onMouseDown:()=>pL(!0),style:{color:"rgba(255, 255, 255, 0.75)",marginLeft:8,borderLeft:"1px solid rgba(255, 255, 255, 0.05)"},children:[ae("div",{ref:f,style:{display:"flex",alignItems:"center",border:g?"1px solid rgba(255, 255, 255, 0.5)":void 0,width:b,minWidth:"100%",cursor:"default"},children:[i?ae(b9,{style:n,onClick:_}):ae(w9,{style:n,onClick:w}),ae(a1e,{}),ae("div",{ref:m,children:e.name})]}),i&&e.children.map(M=>ae(S9,{object3d:M,appendable:r,level:t+1},M.uuid))]})},M9=({appendable:r,level:e})=>{const[t,n]=Xo(),{loaded:i}=r;return qo(()=>{n(void 0);const o=i.then(()=>{n(r.loadedGroup.children[0])});return()=>{o.cancel()}},[i]),ae(vL,{appendable:r,level:e,children:t&&ae(S9,{appendable:r,level:e+1,object3d:t})})},l1e=r=>{const[e,t]=Xo(null);return qo(()=>{if(!e)return;let n=0,i=0,o=0;const s=l=>{n=Date.now(),i=l.clientX,o=l.clientY},a=l=>{const c=Date.now(),d=c-n,f=Math.abs(l.clientX-i),m=Math.abs(l.clientY-o);n=c,i=l.clientX,o=l.clientY,d<300&&f<5&&m<5&&r(l)};return e.addEventListener("mousedown",s),e.addEventListener("mouseup",a),()=>{e.removeEventListener("mousedown",s),e.removeEventListener("mouseup",a)}},[e]),t},C9=(r,e)=>({setClickEl:l1e(t=>{t.stopPropagation(),!Vi()&&Uu("translate"),nd(e)&&hn()!==e&&cn(e),r instanceof pr?queueMicrotask(()=>W2(r)):cn(r)}),handleClick:t=>t.stopPropagation()}),qi=[void 0],vL=({appendable:r,level:e,children:t})=>{var n;const i=v9(r),o=U0(()=>r.children?[...r.children].filter(k=>!zS.has(k)):void 0,[(n=r.children)==null?void 0:n.size]),s={opacity:(o==null?void 0:o.length)||t?.5:.05,cursor:"pointer"},[a,l]=Xo(!1),[c,d]=Xo(!1),[f]=a_(),[m]=fL(),g=f===r||m.includes(r),{setClickEl:b,handleClick:_}=C9(r),[w,M]=s9();qo(()=>{!w||w.has(r.outerObject3d)&&d(!0)},[w]);const S=dm(null),C=dm(null),P=U0(()=>{if(!g||!S.current||!C.current)return;const k=S.current.getBoundingClientRect();return C.current.getBoundingClientRect().right-k.left+4},[g,c]),[T]=P_e(),L=()=>{d(!1),M(void 0)},O=()=>d(!0);return ae("div",{ref:b,onClick:_,onDblClick:k=>{k.stopPropagation(),c?L():O()},draggable:!T,onDragStart:k=>(k.stopPropagation(),qi[0]=r),onDragEnd:k=>(k.stopPropagation(),qi[0]=void 0),onDragOver:k=>{k.stopPropagation(),k.preventDefault(),!(!qi[0]||qi[0]===r)&&l(!0)},onDragEnter:k=>{k.stopPropagation(),k.preventDefault(),!(!qi[0]||qi[0]===r)&&l(!0)},onDragLeave:k=>{k.stopPropagation(),!(!qi[0]||qi[0]===r)&&l(!1)},onDrop:k=>{k.stopPropagation(),!(!qi[0]||qi[0]===r)&&(l(!1),r.attach(qi[0]))},style:{color:"rgba(255, 255, 255, 0.75)",marginLeft:8,borderLeft:"1px solid rgba(255, 255, 255, 0.05)",background:a?"rgba(255, 255, 255, 0.5)":"none"},children:[ae("div",{ref:S,style:{display:"flex",alignItems:"center",backgroundColor:g?"rgba(255, 255, 255, 0.1)":void 0,width:P,minWidth:"100%",cursor:"default"},children:[c?ae(b9,{style:s,onClick:L}):ae(w9,{style:s,onClick:O}),ae(s1e,{}),ae("div",{ref:C,children:i})]}),c&&(o==null?void 0:o.map(k=>k instanceof Oa?ae(M9,{appendable:k,level:e+1},k.uuid):ae(vL,{appendable:k,level:e+1},k.uuid))),c&&t]})},u1e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 1024 1024",children:ae("path",{fill:"#fff",d:"M640 384h224a32 32 0 0132 32v384h-96v96H416a32 32 0 01-32-32V640H160a32 32 0 01-32-32V224h96v-96h384a32 32 0 0132 32v224zm0 32v192a32 32 0 01-32 32H416v224h352v-96h96V416H640zM96 96h96v96H96V96zm736 0h96v96h-96V96zM96 832h96v96H96v-96zm736 0h96v96h-96v-96z"})}),c1e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 1024 1024",children:ae("path",{fill:"#fff",d:"M630.09 151.91V62.16H361.84v89.74H93.6v134.62h89.41v673.11h625.93v-673.1h89.42V151.91H630.09zM361.84 869.89h-89.43V286.53h89.43v583.36zm178.84 0h-89.43V286.53h89.43v583.36zm178.84 0h-89.43V286.53h89.43v583.36z"})}),JE=({children:r,onClick:e,active:t})=>ae("div",{onClick:t?e:void 0,style:{width:24,height:24,display:"flex",justifyContent:"center",alignItems:"center",marginRight:2,opacity:t?1:.1,cursor:t?"pointer":"default"},children:r}),h1e=()=>{const[r,e]=Xo(!1);return ae("div",{onDragOver:t=>{t.stopPropagation(),t.preventDefault(),qi[0]&&e(!0)},onDragEnter:t=>{t.stopPropagation(),t.preventDefault(),qi[0]&&e(!0)},onDragLeave:t=>{t.stopPropagation(),qi[0]&&e(!1)},onDrop:t=>{var n,i;t.stopPropagation(),e(!1);const o=qi[0];!o||(kb(),_n.add(o),rt.attach(o.outerObject3d),(i=(n=o.parent)==null?void 0:n.children)==null||i.delete(o),o.parent=void 0)},style:{background:r?"rgba(255, 255, 255, 0.5)":"none",width:"100%",height:18}})},d1e=()=>ae("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 1024 1024",children:ae(x9,{})});function p1e(r,e){for(var t in e)r[t]=e[t];return r}function QI(r,e){for(var t in r)if(t!=="__source"&&!(t in e))return!0;for(var n in e)if(n!=="__source"&&r[n]!==e[n])return!0;return!1}function $I(r){this.props=r}($I.prototype=new Fl).isPureReactComponent=!0,$I.prototype.shouldComponentUpdate=function(r,e){return QI(this.props,r)||QI(this.state,e)};var eV=ct.__b;ct.__b=function(r){r.type&&r.type.__f&&r.ref&&(r.props.ref=r.ref,r.ref=null),eV&&eV(r)};var f1e=ct.__e;ct.__e=function(r,e,t,n){if(r.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(r,e)}f1e(r,e,t,n)};var tV=ct.unmount;function QE(){this.__u=0,this.t=null,this.__b=null}function E9(r){var e=r.__.__c;return e&&e.__a&&e.__a(r)}function pb(){this.u=null,this.o=null}ct.unmount=function(r){var e=r.__c;e&&e.__R&&e.__R(),e&&r.__h===!0&&(r.type=null),tV&&tV(r)},(QE.prototype=new Fl).__c=function(r,e){var t=e.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var i=E9(n.__v),o=!1,s=function(){o||(o=!0,t.__R=null,i?i(a):a())};t.__R=s;var a=function(){if(!--n.__u){if(n.state.__a){var c=n.state.__a;n.__v.__k[0]=function f(m,g,b){return m&&(m.__v=null,m.__k=m.__k&&m.__k.map(function(_){return f(_,g,b)}),m.__c&&m.__c.__P===g&&(m.__e&&b.insertBefore(m.__e,m.__d),m.__c.__e=!0,m.__c.__P=b)),m}(c,c.__c.__P,c.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.t.pop();)d.forceUpdate()}},l=e.__h===!0;n.__u++||l||n.setState({__a:n.__b=n.__v.__k[0]}),r.then(s,s)},QE.prototype.componentWillUnmount=function(){this.t=[]},QE.prototype.render=function(r,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=function o(s,a,l){return s&&(s.__c&&s.__c.__H&&(s.__c.__H.__.forEach(function(c){typeof c.__c=="function"&&c.__c()}),s.__c.__H=null),(s=p1e({},s)).__c!=null&&(s.__c.__P===l&&(s.__c.__P=a),s.__c=null),s.__k=s.__k&&s.__k.map(function(c){return o(c,a,l)})),s}(this.__b,t,n.__O=n.__P)}this.__b=null}var i=e.__a&&Pa(Ba,null,r.fallback);return i&&(i.__h=null),[Pa(Ba,null,e.__a?null:r.children),i]};var rV=function(r,e,t){if(++t[1]===t[0]&&r.o.delete(e),r.props.revealOrder&&(r.props.revealOrder[0]!=="t"||!r.o.size))for(t=r.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;r.u=t=t[2]}};function m1e(r){return this.getChildContext=function(){return r.context},r.children}function v1e(r){var e=this,t=r.i;e.componentWillUnmount=function(){hm(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),r.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(n){this.childNodes.push(n),e.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),e.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),e.i.removeChild(n)}}),hm(Pa(m1e,{context:e.context},r.__v),e.l)):e.l&&e.componentWillUnmount()}function P9(r,e){var t=Pa(v1e,{__v:r,i:e});return t.containerInfo=e,t}(pb.prototype=new Fl).__a=function(r){var e=this,t=E9(e.__v),n=e.o.get(r);return n[0]++,function(i){var o=function(){e.props.revealOrder?(n.push(i),rV(e,r,n)):i()};t?t(o):o()}},pb.prototype.render=function(r){this.u=null,this.o=new Map;var e=sS(r.children);r.revealOrder&&r.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return r.children},pb.prototype.componentDidUpdate=pb.prototype.componentDidMount=function(){var r=this;this.o.forEach(function(e,t){rV(r,t,e)})};var g1e=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,y1e=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,_1e=typeof document<"u",w1e=function(r){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(r)};Fl.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(r){Object.defineProperty(Fl.prototype,r,{configurable:!0,get:function(){return this["UNSAFE_"+r]},set:function(e){Object.defineProperty(this,r,{configurable:!0,writable:!0,value:e})}})});var nV=ct.event;function b1e(){}function x1e(){return this.cancelBubble}function S1e(){return this.defaultPrevented}ct.event=function(r){return nV&&(r=nV(r)),r.persist=b1e,r.isPropagationStopped=x1e,r.isDefaultPrevented=S1e,r.nativeEvent=r};var iV={configurable:!0,get:function(){return this.class}},oV=ct.vnode;ct.vnode=function(r){var e=r.type,t=r.props,n=t;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var o in n={},t){var s=t[o];_1e&&o==="children"&&e==="noscript"||o==="value"&&"defaultValue"in t&&s==null||(o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&s===!0?s="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+e)&&!w1e(t.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():i&&y1e.test(o)?o=o.replace(/[A-Z0-9]/g,"-$&").toLowerCase():s===null&&(s=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),n[o]&&(o="oninputCapture")),n[o]=s)}e=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=sS(t.children).forEach(function(a){a.props.selected=n.value.indexOf(a.props.value)!=-1})),e=="select"&&n.defaultValue!=null&&(n.value=sS(t.children).forEach(function(a){a.props.selected=n.multiple?n.defaultValue.indexOf(a.props.value)!=-1:n.defaultValue==a.props.value})),r.props=n,t.class!=t.className&&(iV.enumerable="className"in t,t.className!=null&&(n.class=t.className),Object.defineProperty(n,"className",iV))}r.$$typeof=g1e,oV&&oV(r)};var sV=ct.__r;ct.__r=function(r){sV&&sV(r),r.__c};const M1e=({data:r,setData:e,children:t})=>{const n=l_();return r?P9(ae("div",{ref:n,className:"lingo3d-ui",style:{zIndex:2,position:"absolute",left:0,top:0,width:"100%",height:"100%",overflow:"hidden"},children:[ae("div",{onMouseDown:()=>e(void 0),style:{position:"absolute",left:0,top:0,width:"100%",height:"100%"}}),ae("div",{className:"lingo3d-bg",style:{position:"absolute",left:r.x,top:r.y,padding:6},children:t})]}),document.body):null},fb=({disabled:r,onClick:e,setData:t,children:n})=>{const[i,o]=Xo(!1);return ae("div",{style:{padding:6,whiteSpace:"nowrap",background:!r&&i?"rgba(255, 255, 255, 0.1)":void 0,opacity:r?.5:1},onClick:r?void 0:()=>{t==null||t(void 0),e==null||e()},onMouseEnter:r?void 0:()=>o(!0),onMouseLeave:r?void 0:()=>o(!1),children:n})},T9=(r,e)=>{var t,n,i;e.add(r);const o=(i=(n=(t=r.userData.manager)==null?void 0:t.parent)==null?void 0:n.outerObject3d)!=null?i:r.parent;o&&T9(o,e)},C1e=(r,e)=>{const t=r.toLowerCase();let n;if(e instanceof ny?e.loadedGroup.traverse(o=>{n||o.name.toLowerCase().includes(t)&&(n=o)}):e.outerObject3d.traverse(o=>{n||o.name.toLowerCase().includes(t)&&(n=o)}),!n)return;const i=new Set;T9(n,i),i9(i),W2(n)},E1e=()=>{const[r,e]=Xo(void 0),[t,n]=Xo(!1),[i]=a_(),[[o]]=b_e();return qo(()=>{let[s,a]=[0,0];const l=d=>[s,a]=[d.clientX,d.clientY];document.addEventListener("mousemove",l);const c=Pc(({target:d,rightClick:f})=>{f&&e({x:s,y:a,target:d})});return()=>{c.cancel(),document.removeEventListener("mousemove",l)}},[]),qo(()=>{!r&&n(!1)},[r]),r?ae(M1e,{data:r,setData:e,children:t?ae("input",{ref:s=>s==null?void 0:s.focus(),style:{all:"unset",padding:6},onKeyDown:s=>{s.stopPropagation(),!(s.key!=="Enter"&&s.key!=="Escape")&&(s.key==="Enter"&&i&&C1e(s.target.value,i),e(void 0))}}):ae(Ba,{children:[r.target&&ae(Ba,{children:[ae(fb,{setData:void 0,onClick:()=>n(!0),children:"Search children"}),ae(fb,{setData:e,onClick:()=>PF(i)&&Yne(i),children:"Freeze selection"}),i instanceof Sf&&Ih.has(i)&&ae(fb,{setData:e,onClick:async()=>{const s=Ih.get(i)==="dummy"?tf:ck+"readyplayerme/reference.fbx",a=await fetch(s);Pj("model.fbx",await a.blob())},children:"Download for Mixamo"})]}),ae(fb,{setData:e,disabled:!o.size,onClick:()=>Xne(),children:"Unfreeze all"})]})}):null},[xwe,aV]=De(void 0);xt(()=>{const r=aV();if(!r)return;const e=new lr;return e.watch(r.loaded.then(t=>{t.getObjectByProperty("type","Bone").traverse(n=>n.name="mixamorig"+n.name)})),()=>{e.cancel()}},[aV]);const A9=()=>{const[r,e]=Xo({}),t=l_();r9(()=>{const l=()=>e({}),c=Cm(l),d=n1e(l);return FS(),()=>{c.cancel(),d.cancel(),US()}},[]);const n=U0(()=>[..._n].filter(l=>!P8.has(l)&&!zS.has(l)),[r]),[i]=fL(),[o]=a_(),[s]=o9(),a=()=>{(s==null?void 0:s.name)&&o instanceof vs&&setTimeout(()=>cn(o.find(s.name)))};return ae("div",{ref:t,className:"lingo3d-ui lingo3d-bg",onClick:()=>cn(),style:{width:200,height:"100%",padding:4,paddingTop:0,display:"flex",flexDirection:"column",overflow:"hidden"},children:[ae("div",{style:{height:24,borderBottom:"1px solid rgb(255,255,255,0.1)",opacity:.5,display:"flex",alignItems:"center",paddingLeft:12},children:[ae("div",{children:"scenegraph"}),ae("div",{style:{flexGrow:1}}),ae(JE,{active:!!s,onClick:a,children:ae(d1e,{})}),ae(JE,{active:!!i.length,onClick:oae,children:ae(u1e,{})}),ae(JE,{active:!!o,onClick:m9,children:ae(c1e,{})})]}),ae("div",{style:{overflow:"scroll"},className:"lingo3d-ui",children:[n.map(l=>l instanceof Oa?ae(M9,{appendable:l,level:0},l.uuid):ae(vL,{appendable:l,level:0},l.uuid)),ae(h1e,{})]}),ae(E1e,{})]})};Td(A9,"lingo3d-scenegraph");let uS;wr.addEventListener("dragover",r=>r.preventDefault());wr.addEventListener("dragenter",r=>r.preventDefault());document.addEventListener("drop",r=>r.preventDefault());wr.addEventListener("drop",r=>{if(!uS)return;const e=Mj(uS);e.outerObject3d.position.copy(nk(K0e(r.clientX,r.clientY))),cn(e)});const lV=({name:r,iconName:e=r})=>ae("div",{onDragStart:()=>uS=r,onDragEnd:()=>uS=void 0,style:{width:"50%",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:20,paddingBottom:20},children:[ae("img",{style:{width:50,height:50},src:`https://unpkg.com/lingo3d-editor@1.0.2/assets/${e}.png`}),ae("div",{style:{marginTop:6,opacity:.75,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:Ri.exports.upperFirst(r)})]}),uV=r=>typeof r=="string"?r.endsWith("Camera")?"camera":r.endsWith("Light")?"light":r:Object.values(r)[0],cV=r=>typeof r=="string"?r:Object.keys(r)[0],P1e=({names:r})=>{const e=[];let t=[],n=0;for(const i of r)n===0&&e.push(t=[]),t.push(i),++n===2&&(n=0);return ae(Ba,{children:e.map(([i,o],s)=>ae("div",{style:{display:"flex"},children:[ae(lV,{name:cV(i),iconName:uV(i)}),o&&ae(lV,{name:cV(o),iconName:uV(o)})]},s))})},k9=()=>{const r=l_(),[e]=mL(),[t]=T_e();return qo(()=>(FS(),()=>{US()}),[]),e?null:ae("div",{ref:r,className:"lingo3d-ui lingo3d-bg",style:{width:200,height:"100%",padding:10},children:ae(P1e,{names:["model","dummy",...t?[{building:"cube"},{tree:"cylinder"}]:[],"svgMesh",{sprite:"plane"},"trigger",{spawnPoint:"circle"},"audio","reflector",{water:"reflector"},"cube","sphere","cone","cylinder","octahedron","tetrahedron","torus","plane","circle","areaLight","ambientLight","skyLight","directionalLight","pointLight","spotLight",{environment:"light"},"camera","thirdPersonCamera","firstPersonCamera","orbitCamera"]})})};Td(k9,"lingo3d-library");const Vu=({hotkey:r,hotkeyFunction:e})=>ae("div",{style:{display:"flex",alignItems:"center",marginTop:4,whiteSpace:"nowrap"},children:[ae("div",{style:{border:"1px solid white",borderRadius:"4px",padding:"2px 4px 2px 4px"},children:ae("div",{style:{minWidth:10,display:"flex",justifyContent:"center",alignItems:"center"},children:r})}),ae("div",{style:{padding:"0 1px 0 1px"},children:"\xA0-\xA0"}),ae("div",{style:{padding:"2px 0px 2px 0px"},children:e})]}),L9=()=>{const[r]=A_e(),[e]=M_e();return P9(ae("div",{className:"lingo3d-ui",style:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",padding:10},children:!!r&&e===qr&&ae("div",{style:{opacity:.5},children:[ae(Vu,{hotkey:"W",hotkeyFunction:"move forward"}),ae(Vu,{hotkey:"S",hotkeyFunction:"move backwards"}),ae(Vu,{hotkey:"A",hotkeyFunction:"move left"}),ae(Vu,{hotkey:"D",hotkeyFunction:"move right"}),ae(Vu,{hotkey:"\u2191",hotkeyFunction:"move up"}),ae(Vu,{hotkey:"\u2193",hotkeyFunction:"move down"}),ae(Vu,{hotkey:"C",hotkeyFunction:"center selected"}),ae(Vu,{hotkey:"SHIFT",hotkeyFunction:"Accelerate"})]})}),wr)};Td(L9,"lingo3d-hud");const T1e=()=>{const r=dm(null);return qo(()=>{const e=r.current;!e||(zo.autoMount=e)},[]),ae("div",{className:"lingo3d-ui",style:{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"flex"},children:[ae(f9,{}),ae("div",{children:ae("div",{style:{height:"100%"},children:[ae(A9,{}),ae(y9,{}),ae(_9,{}),ae(k9,{})]})}),ae(L9,{}),ae("div",{ref:r,style:{height:"100%",flexGrow:1,position:"relative"}})]})};Td(T1e,"lingo3d-lingoeditor");const A1e=z2(`
    <style>
        .lingo3d-ui * {
            user-select: none;
            -webkit-user-select: none;
            position: relative;
            box-sizing: border-box;
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !important;
        }
        .lingo3d-ui {
            position: relative;
            box-sizing: border-box;
            overflow-x: hidden;
            overflow-y: scroll;
            float: left;
            color: white;
            font-size: 11px;
            max-height: 100%;
        }
        .lingo3d-ui::-webkit-scrollbar {
            display: none;
        }
        .lingo3d-bg {
            background: rgb(40, 41, 46);
        }
        .tp-lblv_l {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .tp-rotv {
            box-shadow: none !important;
            background-color: transparent !important;
        }
        .tp-brkv {
            border-left: none !important;
        }
    </style>
`);document.head.appendChild(A1e);Qs(()=>{},100,"both");var O9={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(Ve,function(){var t=function(){function n(g){return s.appendChild(g.dom),g}function i(g){for(var b=0;b<s.children.length;b++)s.children[b].style.display=b===g?"block":"none";o=g}var o=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",function(g){g.preventDefault(),i(++o%s.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,d=n(new t.Panel("FPS","#0ff","#002")),f=n(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var m=n(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:s,addPanel:n,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){c++;var g=(performance||Date).now();if(f.update(g-a,200),g>l+1e3&&(d.update(1e3*c/(g-l),100),l=g,c=0,m)){var b=performance.memory;m.update(b.usedJSHeapSize/1048576,b.jsHeapSizeLimit/1048576)}return g},update:function(){a=this.end()},domElement:s,setMode:i}};return t.Panel=function(n,i,o){var s=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),d=80*c,f=48*c,m=3*c,g=2*c,b=3*c,_=15*c,w=74*c,M=30*c,S=document.createElement("canvas");S.width=d,S.height=f,S.style.cssText="width:80px;height:48px";var C=S.getContext("2d");return C.font="bold "+9*c+"px Helvetica,Arial,sans-serif",C.textBaseline="top",C.fillStyle=o,C.fillRect(0,0,d,f),C.fillStyle=i,C.fillText(n,m,g),C.fillRect(b,_,w,M),C.fillStyle=o,C.globalAlpha=.9,C.fillRect(b,_,w,M),{dom:S,update:function(P,T){s=Math.min(s,P),a=Math.max(a,P),C.fillStyle=o,C.globalAlpha=1,C.fillRect(0,0,d,_),C.fillStyle=i,C.fillText(l(P)+" "+n+" ("+l(s)+"-"+l(a)+")",m,g),C.drawImage(S,b+c,_,w-c,M,b,_,w-c,M),C.fillRect(b+w-c,_,c,M),C.fillStyle=o,C.globalAlpha=.9,C.fillRect(b+w-c,_,c,l((1-P/T)*M))}}},t})})(O9);O9.exports;At.forwardRef((r,e)=>{const t=Xt(r,e,kf);return Dt(Rt.Provider,{value:t})});At.forwardRef((r,e)=>{const t=Xt(r,e,Ig);return Dt(Rt.Provider,{value:t})});At.forwardRef((r,e)=>{const t=Xt(r,e,Cf);return Dt(Rt.Provider,{value:t,children:r.children})});const hV=At.forwardRef((r,e)=>{const t=Xt(r,e,Oa);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Sf);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Mf);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Ug);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,jg);return Dt(Rt.Provider,{value:t,children:r.children})});const k1e=At.forwardRef((r,e)=>{const t=Xt(r,e,wf);return Dt(Rt.Provider,{value:t})});At.forwardRef((r,e)=>{const t=Xt(r,e,_f);return Dt(Rt.Provider,{value:t})});At.forwardRef((r,e)=>{const t=Xt(r,e,zl);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Hg);return Dt(Rt.Provider,{value:t})});At.forwardRef((r,e)=>{const t=Xt(r,e,Wg);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Gg);return Dt(Rt.Provider,{value:t})});At.forwardRef((r,e)=>{const t=Xt(r,e,Yg);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,gf);return Dt(Rt.Provider,{value:t,children:r.children})});const L1e=At.forwardRef((r,e)=>{const t=Xt(r,e,Xg);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Qk);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,qg);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Kg);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Tf);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Zg);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Af);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Jg);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Bg);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,zk);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,HS);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,oy);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Bk);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,bf);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,iy);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Fk);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Uk);return Dt(Rt.Provider,{value:t,children:r.children})});At.forwardRef((r,e)=>{const t=Xt(r,e,Yb);return Dt(Rt.Provider,{value:t})});At.forwardRef((r,e)=>{const t=Xt(r,e,Wb);return Dt(Rt.Provider,{value:t})});At.forwardRef(({name:r,onLoad:e,...t},n)=>{const i=dr.exports.useContext(Rt),[o,s]=dr.exports.useState();dr.exports.useLayoutEffect(()=>{if(!(!i||!r)){if("loaded"in i){const c=i.loaded.then(()=>{s(i.find(r))});return()=>{c.cancel()}}s(i.find(r))}},[i,r]);const[a,l]=lL(t,!o);return o&&uL(o,a,l),dr.exports.useLayoutEffect(()=>{!n||!o||(typeof n=="function"?n(o):n.current=o)},[n,o]),dr.exports.useLayoutEffect(()=>{o&&(e==null||e(o))},[o]),Dt(Rt.Provider,{value:o,children:t.children})});At.forwardRef(({name:r,onLoad:e,...t},n)=>{const i=dr.exports.useContext(Rt),[o,s]=dr.exports.useState();dr.exports.useLayoutEffect(()=>{if(!(!i||!r)){if("loaded"in i){const c=i.loaded.then(()=>{s(i.findAll(r))});return()=>{c.cancel()}}s(i.findAll(r))}},[i]);const[a,l]=lL(t,!o);if(o)for(const c of o)uL(c,a,l);return dr.exports.useLayoutEffect(()=>{!n||!o||(typeof n=="function"?n(o):n.current=o)},[n,o]),dr.exports.useLayoutEffect(()=>{o&&(e==null||e(o))},[o]),null});const D9=(r,e)=>t=>Math.max(Math.min(t,e),r);function O1e(r){return typeof r=="string"}const gL={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r};Object.assign(Object.assign({},gL),{transform:D9(0,1)});Object.assign(Object.assign({},gL),{default:1});const D1e=r=>({test:e=>O1e(e)&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),$E=D1e("%");Object.assign(Object.assign({},$E),{parse:r=>$E.parse(r)/100,transform:r=>$E.transform(r*100)});const R1e=D9(0,255);Object.assign(Object.assign({},gL),{transform:r=>Math.round(R1e(r))});const R9=1/60*1e3,N1e=typeof performance<"u"?()=>performance.now():()=>Date.now(),N9=typeof window<"u"?r=>window.requestAnimationFrame(r):r=>setTimeout(()=>r(N1e()),R9);function I1e(r){let e=[],t=[],n=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(l,c=!1,d=!1)=>{const f=d&&i,m=f?e:t;return c&&s.add(l),m.indexOf(l)===-1&&(m.push(l),f&&i&&(n=e.length)),l},cancel:l=>{const c=t.indexOf(l);c!==-1&&t.splice(c,1),s.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[e,t]=[t,e],t.length=0,n=e.length,n)for(let c=0;c<n;c++){const d=e[c];d(l),s.has(d)&&(a.schedule(d),r())}i=!1,o&&(o=!1,a.process(l))}};return a}const V1e=40;let TA=!0,j0=!1,AA=!1;const e0={delta:0,timestamp:0},u_=["read","update","preRender","render","postRender"],Y2=u_.reduce((r,e)=>(r[e]=I1e(()=>j0=!0),r),{});u_.reduce((r,e)=>{const t=Y2[e];return r[e]=(n,i=!1,o=!1)=>(j0||B1e(),t.schedule(n,i,o)),r},{});u_.reduce((r,e)=>(r[e]=Y2[e].cancel,r),{});u_.reduce((r,e)=>(r[e]=()=>Y2[e].process(e0),r),{});const z1e=r=>Y2[r].process(e0),I9=r=>{j0=!1,e0.delta=TA?R9:Math.max(Math.min(r-e0.timestamp,V1e),1),e0.timestamp=r,AA=!0,u_.forEach(z1e),AA=!1,j0&&(TA=!1,N9(I9))},B1e=()=>{j0=!0,TA=!0,AA||N9(I9)},eP=(r,e=!0)=>{const t=Nj(r);dr.exports.useLayoutEffect(()=>{if(!e)return;const n=mg(()=>t.current());return()=>{n.cancel()}},[e])},F1e=r=>{const[e,t]=dr.exports.useState(""),n=Nj(r);return dr.exports.useLayoutEffect(()=>{const i=new kf;let o="";return i.onKeyDown=s=>{o!==s&&(o=s,t([...Zi].join(" ")))},i.onKeyUp=()=>{o="",t([...Zi].join(" "))},i.onKeyPress=s=>{var a;return(a=n.current)==null?void 0:a.call(n,s)},()=>{i.dispose()}},[]),e};var yL={exports:{}},X2={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1e=dr.exports,j1e=Symbol.for("react.element"),H1e=Symbol.for("react.fragment"),W1e=Object.prototype.hasOwnProperty,G1e=U1e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y1e={key:!0,ref:!0,__self:!0,__source:!0};function V9(r,e,t){var n,i={},o=null,s=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)W1e.call(e,n)&&!Y1e.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:j1e,type:r,key:o,ref:s,props:i,_owner:G1e.current}}X2.Fragment=H1e;X2.jsx=V9;X2.jsxs=V9;(function(r){r.exports=X2})(yL);const of=yL.exports.jsx,X1e=yL.exports.jsxs;function q1e(){const r=F1e();console.log(r);const e=dr.exports.createRef();let t="idle";return r==="w"&&(t="walking"),r==="s"&&(t="walkingBackwards"),r==="w e"&&(t="running"),eP(()=>{e.current.moveForward(-4)},r==="w"),eP(()=>{e.current.moveForward(1.8)},r==="s"),eP(()=>{e.current.moveForward(-10)},r==="w e"),X1e($ye,{children:[of(L1e,{active:!0,mouseControl:!0,children:of(hV,{ref:e,src:"idle.fbx",physics:"character",animations:{idle:"idle.fbx",walking:"walking.fbx",walkingBackwards:"walkingBackwards.fbx",running:"running.fbx"},animation:t,scale:1})}),of(hV,{src:"scene.glb",scale:40,physics:"map"}),of(k1e,{texture:"skybox.jpeg"})]})}tP.createRoot(document.getElementById("root")).render(of(At.StrictMode,{children:of(q1e,{})}));export{wi as $,xt as A,G5 as B,eo as C,zne as D,bwe as E,Kl as F,rne as G,Jre as H,wr as I,ate as J,ri as K,B8 as L,D4 as M,De as N,cwe as O,Ere as P,un as Q,vd as R,ga as S,Ma as T,$i as U,Zl as V,$re as W,vm as X,gm as Y,nk as Z,Ct as _,Tm as a,$P as a$,kS as a0,md as a1,Vt as a2,B4 as a3,F4 as a4,j4 as a5,J0 as a6,Gl as a7,_m as a8,hwe as a9,ja as aA,Q0 as aB,Fn as aC,rre as aD,ere as aE,ire as aF,Mm as aG,wwe as aH,fc as aI,twe as aJ,be as aK,Z0 as aL,nwe as aM,ete as aN,En as aO,K0 as aP,ite as aQ,Ua as aR,$0 as aS,$1e as aT,ewe as aU,Mx as aV,J1e as aW,ln as aX,qD as aY,EK as aZ,KD as a_,gd as aa,rwe as ab,b8 as ac,Jte as ad,jf as ae,Bo as af,Ii as ag,v8 as ah,Je as ai,_0 as aj,s8 as ak,sr as al,Q1e as am,l8 as an,ore as ao,YB as ap,mi as aq,ir as ar,cT as as,Ax as at,b3 as au,ey as av,C0 as aw,$4 as ax,Xf as ay,ek as az,sie as b,Sx as b0,td as b1,Px as b2,Z1e as b3,fd as b4,DS as b5,ff as b6,iwe as b7,Ab as b8,aT as b9,K1e as bA,Ve as bB,owe as ba,k4 as bb,Tl as bc,Ir as bd,r8 as be,Gh as bf,E4 as bg,rd as bh,on as bi,ar as bj,M8 as bk,Cn as bl,$ee as bm,WK as bn,pd as bo,fi as bp,je as bq,gwe as br,M6 as bs,rF as bt,a8 as bu,Hs as bv,js as bw,zB as bx,mw as by,Rl as bz,vi as c,ls as d,Xs as e,bB as f,wm as g,gc as h,dF as i,vr as j,zr as k,mf as l,pr as m,awe as n,Sye as o,lwe as p,Fa as q,poe as r,rt as s,vs as t,Vi as u,MB as v,Or as w,ywe as x,j as y,Ye as z};
